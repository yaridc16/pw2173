if (self.CavalryLogger) { CavalryLogger.start_js(["iFPqk"]); }

__d('BandicootSession',[],(function a(b,c,d,e,f,g){'use strict';var h={ACTIVE:'ACTIVE',INACTIVE:'INACTIVE',CLOSED:'CLOSED'},i=10*60*1000,j=14*24*60*60*1000;function k(p){return Date.now()-p.lastUpdated}function l(p){return !!(typeof p==='object'&&p&&p.lastUpdated&&p.status)}function m(p){if(p.status===h.CLOSED){return false}else if(p.status===h.INACTIVE&&k(p)>i)return false;return true}function n(p){return p.status===h.ACTIVE&&k(p)>i}function o(p){return k(p)>j}f.exports={Status:h,isValidSession:l,isTrackedSession:m,isOrphanSession:o,isCrashedSession:n}}),null);
__d('Bandicoot',['BandicootSession','invariant'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=5*1000,k=j*2,l='Bandicoot:',m=h.Status,n=h.isValidSession,o=h.isTrackedSession,p=h.isCrashedSession,q=h.isOrphanSession;function r(){try{var u=window.localStorage;if(u){var v='__test'+Date.now();u.setItem(v,'');u.removeItem(v)}return u}catch(w){return null}}var s=r();function t(u){'use strict';this.$Bandicoot5=l+u;this.$Bandicoot4={};this.$Bandicoot1=this.$Bandicoot7.bind(this);this.sessionID=null;this.sessionStartTime=null;this.storage=s}t.prototype.getCrashTimeData=function(){'use strict';var u=window.performance&&window.performance.memory||{},v=this.sessionStartTime;return {duration:v?Date.now()-v:0,tabs:Object.keys(this.$Bandicoot8()).length,jsHeapSizeLimit:u.jsHeapSizeLimit,totalJSHeapSize:u.totalJSHeapSize,usedJSHeapSize:u.usedJSHeapSize,elementsInDOM:document.getElementsByTagName('*').length,uri:window.location.href}};t.prototype.getLogTimeData=function(){'use strict';return {userAgent:window.navigator.userAgent}};t.prototype.logCrash=function(u,v,w){'use strict';var x=Object.assign({sessionID:u},v,w)};t.prototype.logBrowserUnsupported=function(){'use strict'};t.prototype.logTrackingError=function(){'use strict'};t.prototype.startSession=function(){'use strict';if(!this.storage){this.logBrowserUnsupported();return}if(this.$Bandicoot2)return;if(!this.sessionID)this.sessionID=Math.random().toString(36).slice(2,9);if(!this.sessionStartTime)this.sessionStartTime=Date.now();this.$Bandicoot2=setInterval(function(){this.$Bandicoot9()}.bind(this),j);this.$Bandicoot9();if(document.addEventListener)document.addEventListener('visibilitychange',this.$Bandicoot1);this.$Bandicoot10()};t.prototype.endSession=function(){'use strict';if(!this.storage)return;if(!this.$Bandicoot2)return;clearInterval(this.$Bandicoot2);this.$Bandicoot2=null;if(!this.$Bandicoot3)this.$Bandicoot11({status:m.CLOSED});this.sessionID=null;this.sessionStartTime=null;if(document.removeEventListener)document.removeEventListener('visibilitychange',this.$Bandicoot1);};t.prototype.logKnownCrashes=function(){'use strict';if(!this.storage)return;if(!this.$Bandicoot2){var u=this.$Bandicoot8();u=this.$Bandicoot12(u,function(v,w){if(p(v)){this.logCrash(w,v,this.getLogTimeData());return null}else return v;}.bind(this));this.$Bandicoot13(u)}};t.prototype.$Bandicoot14=function(){'use strict';var u=this.sessionID;u||i(0);return u};t.prototype.$Bandicoot9=function(){'use strict';var u=this.$Bandicoot8();this.$Bandicoot15(u);u=this.$Bandicoot16(u);this.$Bandicoot13(u)};t.prototype.$Bandicoot15=function(u){'use strict';var v=this.$Bandicoot14(),w=u[v]?u[v]:{};u[v]=babelHelpers['extends']({},w,this.getCrashTimeData(),{lastUpdated:Date.now(),status:this.$Bandicoot17()})};t.prototype.$Bandicoot12=function(u,v){'use strict';var w={};Object.keys(u).forEach(function(x){var y=u[x];if(n(y)&&o(y)&&!q(y)){var z=v(y,x);if(z)w[x]=z;}});return w};t.prototype.$Bandicoot16=function(u){'use strict';return this.$Bandicoot12(u,function(v,w){if(p(v)){var x=v.loggerReportTime||0;if(Date.now()-x>k){v.loggerReportTime=Date.now();v.loggerReportSession=this.$Bandicoot14()}else if(v.loggerReportSession==this.$Bandicoot14()){this.logCrash(w,v,this.getLogTimeData());this.$Bandicoot4[w]=true;return null}}return v}.bind(this))};t.prototype.$Bandicoot8=function(u){'use strict';u=u||this.$Bandicoot5;var v=this.storage.getItem(u)||'{}';try{v=JSON.parse(v)}catch(w){v={};this.storage.removeItem(u)}return v};t.prototype.$Bandicoot11=function(u){'use strict';u.lastUpdated=Date.now();var v=this.$Bandicoot8(),w=this.sessionID;if(w&&v[w]){Object.assign(v[w],u);this.$Bandicoot13(v)}};t.prototype.$Bandicoot13=function(u){'use strict';var v=JSON.stringify(u);try{this.storage.setItem(this.$Bandicoot5,v)}catch(y){var w=this.$Bandicoot6,x=Date.now();if(!w||x>w+j){this.logTrackingError();this.$Bandicoot6=x}try{this.storage.removeItem(this.$Bandicoot5)}catch(z){this.$Bandicoot3=true;this.endSession()}}};t.prototype.$Bandicoot10=function(){'use strict';for(var u=0;u<this.storage.length;++u){var v=this.storage.key(u);if(v.indexOf(l)===0&&v!==this.$Bandicoot5){var w=this.$Bandicoot8(v),x=Object.keys(w).every(function(y){var z=w[y];return !n(z)||q(z)});if(x)this.storage.removeItem(v);}}};t.prototype.$Bandicoot7=function(){'use strict';this.$Bandicoot11({status:this.$Bandicoot17()})};t.prototype.$Bandicoot17=function(){'use strict';return document.hidden?m.INACTIVE:m.ACTIVE};f.exports=t}),null);
__d('BlobFactory',['emptyFunction'],(function a(b,c,d,e,f,g,h){var i=void 0,j=void 0;function k(){try{new b.Blob();j=true}catch(m){j=false}}var l=b.BlobBuilder||b.WebKitBlobBuilder||b.MozBlobBuilder||b.MSBlobBuilder;if(b.Blob){i={getBlob:function m(n,o){n=n||[];o=o||{};if(j===undefined)k();if(j){return new b.Blob(n,o)}else{var p=new l();for(var q=0;q<n.length;q++)p.append(n[q]);return p.getBlob(o.type)}},isSupported:h.thatReturnsTrue}}else i={getBlob:function m(){},isSupported:h.thatReturnsFalse};f.exports=i}),null);
__d('WebWorker',['BanzaiLogger','BlobFactory','EventListener','SubscriptionsHandler','URI','WebWorkerConfig','XHRRequest','areSameOrigin','destroyOnUnload','emptyFunction','filterObject','getCrossOriginTransport','invariant','memoize','performanceNow'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){var w=b.URL||b.webkitURL;function x(ea){'use strict';this.$WebWorker1=false;this.$WebWorker2=null;this.$WebWorker3=ea;this.__worker=null;this.$WebWorker4=q;this.$WebWorker5=q;this.$WebWorker6=[];this.$WebWorker7=false;this.$WebWorker8=new k();p(function(){if(!this.$WebWorker7)this.terminate();}.bind(this));this.$WebWorker9('constructed')}x.prototype.setMessageHandler=function(ea){'use strict';this.$WebWorker4=ea||q;return this};x.prototype.setErrorHandler=function(ea){'use strict';this.$WebWorker5=ea||q;return this};x.prototype.postMessage=function(ea,fa){'use strict';!this.isCurrentState('constructed')||t(0);!this.isCurrentState('terminated')||t(0);if(this.isCurrentState('preparing')){this.$WebWorker6.push(this.postMessage.bind(this,ea,fa));return this}var ga={type:'message',message:ea};if(fa){this.getInterfaceableWorker().postMessage(ga,fa)}else this.getInterfaceableWorker().postMessage(ga);return this};x.prototype.terminate=function(){'use strict';if(this.isCurrentState('executing'))this.__worker.terminate();if(!this.isCurrentState('terminated')){this.$WebWorker9('terminated');this.__worker=null;this.$WebWorker10();this.$WebWorker6=[]}return this};x.prototype.execute=function(){'use strict';!this.isCurrentState('terminated')||t(0);if(['preparing','executing'].some(this.isCurrentState,this))return this;this.$WebWorker9('preparing');x.prepareResource(this.$WebWorker3,this.$WebWorker11.bind(this));return this};x.prototype.setAllowCrossPageTransition=function(ea){'use strict';this.$WebWorker7=ea;return this};x.prototype.isCurrentState=function(ea){'use strict';x.states.includes(ea)||t(0);return ea===this.$WebWorker2};x.prototype.$WebWorker11=function(){'use strict';!this.isCurrentState('executing')||t(0);if(this.isCurrentState('terminated'))return;this.$WebWorker3.sameOriginURL||this.$WebWorker3.source||t(0);if(this.$WebWorker3.sameOriginURL){this.__worker=this.constructWorker(this.$WebWorker3.sameOriginURL)}else{this.__worker=this.constructWorker(x.evalWorkerURL);this.getInterfaceableWorker().postMessage(this.$WebWorker3.source)}this.$WebWorker12('ping',Date.now());if(this.$WebWorker3.dynamicModules)try{this.$WebWorker12('defineModules',this.$WebWorker3.dynamicModules)}catch(ea){this.terminate();this.$WebWorker13('define_error',{message:ea.message});throw ea}this.$WebWorker14();this.$WebWorker9('executing');this.$WebWorker6.forEach(function(ea){return ea()});this.$WebWorker6=null};x.prototype.$WebWorker10=function(){'use strict';this.$WebWorker8.release()};x.prototype.$WebWorker12=function(ea){for(var fa=arguments.length,ga=Array(fa>1?fa-1:0),ha=1;ha<fa;ha++)ga[ha-1]=arguments[ha];'use strict';this.getInterfaceableWorker().postMessage({type:ea,args:ga})};x.prototype.$WebWorker13=function(event,ea){'use strict';x.$WebWorker13(event,this.$WebWorker3.name,babelHelpers['extends']({},ea,{cross_page_transition:!!this.$WebWorker7,state:this.$WebWorker2}))};x.$WebWorker15=function(){'use strict';return Object.keys(r({object_url:x.$WebWorker16(),eval_url:ca(),data_url:x.$WebWorker17(),worker:x.isSupported(),transferables:x.areTransferablesSupported()},function(ea){return !!ea}))};x.prototype.$WebWorker14=function(){'use strict';this.$WebWorker8.addSubscriptions(j.listen(this.getInterfaceableWorker(),'message',this.$WebWorker18.bind(this)),j.listen(this.getInterfaceableWorker(),'error',this.$WebWorker19.bind(this)))};x.prototype.$WebWorker19=function(ea){'use strict';var fa=this.$WebWorker5(ea);if(!fa&&!ea.defaultPrevented)this.$WebWorker13('exception',{message:ea.message});};x.prototype.$WebWorker18=function(event){'use strict';var ea=event.data;switch(ea.type){case 'message':this.$WebWorker4(ea.message);break;case 'pong':this.$WebWorker1=true;this.$WebWorker13('executed',{dt:Math.floor(ea.args[1]-ea.args[0]),bytes:this.$WebWorker3.source?this.$WebWorker3.source.length:-1});break;case 'terminate':this.terminate();break;case 'haste-error':this.terminate();this.$WebWorker13('haste_error',{message:ea.message});break;case 'console':var fa=ea.args.shift();['log','error','info','debug','warn'].includes(fa)||t(0);b.console[fa].apply(b.console,ea.args);break;}};x.prototype.$WebWorker9=function(ea){'use strict';x.states.includes(ea)||t(0);this.$WebWorker13('transition',{next_state:ea});this.$WebWorker2=ea};x.prepareResource=function(ea,fa){'use strict';fa=fa||q;ea.sameOriginURL||ea.url||ea.source||t(0);!!x.isSupported()||t(0);if(ea.sameOriginURL){fa()}else if(ea.url&&o(new l(ea.url),new l(b.location.href))){ea.sameOriginURL=ea.url;fa()}else if(ea.source){if(x.$WebWorker20())ea.sameOriginURL=x.$WebWorker21(ea.source);fa()}else if(!ea.loading){var ga=v();ea.loading=[fa];x.$WebWorker22(ea.url,function(ha){if(ha){ea.source=ha;if(x.$WebWorker20())ea.sameOriginURL=x.$WebWorker21(ha);}x.$WebWorker13('prepared',ea.name,{dt:Math.floor(v()-ga),bytes:ha.length});ea.loading.forEach(function(ia){return ia()});ea.loading=false})}else ea.loading.push(fa);return ea};x.releaseResource=function(ea){'use strict';if(ea.sameOriginURL.indexOf('blob:')===0){if(w.revokeObjectURL)w.revokeObjectURL(ea.sameOriginURL);ea.sameOriginURL=null}return ea};x.isSupported=function(){'use strict';return ba&&(x.$WebWorker20()||ca())};x.areTransferablesSupported=function(){'use strict';return x.isSupported()&&da()};x.$WebWorker22=function(ea,fa){'use strict';new n(ea).setTransportBuilder(s).setMethod('GET').setResponseHandler(function(ga){fa(ga)}).setErrorHandler(fa.bind(null,null)).send()};x.$WebWorker21=function(ea){'use strict';x.$WebWorker20()||t(0);if(x.$WebWorker16()){var fa=i.getBlob([ea],{type:'application/javascript'});return w.createObjectURL(fa)}if(x.$WebWorker17())return 'data:application/javascript,'+encodeURIComponent(ea);};x.$WebWorker16=function(){'use strict';return i.isSupported()&&z()};x.$WebWorker17=function(){'use strict';return aa()};x.$WebWorker20=function(){'use strict';return x.$WebWorker16()||x.$WebWorker17()};x.$WebWorker13=function(event,ea,fa){'use strict';if(!m.logging.enabled)return;h.log(m.logging.config,babelHelpers['extends']({},fa,{features_array:x.$WebWorker15(),event:event,resource:ea}))};x.prototype.constructWorker=function(ea){'use strict';return y(ea)};x.prototype.getInterfaceableWorker=function(){'use strict';return this.__worker};function y(ea){return new b.Worker(ea)}var z=u(function(){var ea,fa;if(!w||!w.createObjectURL)return false;try{ea=w.createObjectURL(i.getBlob([''],{type:'application/javascript'}));var ga=y(ea);ga.terminate();fa=true}catch(ha){fa=false}finally{if(w.revokeObjectURL)w.revokeObjectURL(ea);}return fa}),aa=u(function(){var ea;try{var fa=y('data:application/javascript,');fa.terminate();ea=true}catch(ga){ea=false}return ea}),ba=!!b.Worker,ca=u(function(){var ea;try{var fa=y(x.evalWorkerURL);fa.terminate();ea=true}catch(ga){ea=false}return ea}),da=u(function(){var ea;try{var fa=y(x.evalWorkerURL),ga=new ArrayBuffer(0);fa.postMessage({buffer:ga},[ga]);fa.terminate();ea=true}catch(ha){ea=false}return ea});x.states=['constructed','preparing','executing','terminated'];x.evalWorkerURL=m.evalWorkerURL;f.exports=x}),null);
__d('FileHasher',['WebWorker','fileSliceName','emptyFunction','FileHashWorkerResource'],(function a(b,c,d,e,f,g,h,i,j){k.isSupported=function(){'use strict';return h.isSupported()};function k(){'use strict';var l=c('FileHashWorkerResource');h.prepareResource(l);this.$FileHasher1=new h(l).setMessageHandler(function(m){this.$FileHasher2(m)}.bind(this)).execute()}k.prototype.hash=function(l,m){'use strict';this.$FileHasher2=m;this.$FileHasher1.postMessage({file:l,fileSliceName:i});return this};k.prototype.destroy=function(){'use strict';this.$FileHasher2=j;this.$FileHasher1.terminate()};f.exports=k}),null);
__d('ErrorDialog',['Dialog','emptyFunction'],(function a(b,c,d,e,f,g,h,i){var j={showAsyncError:function k(l){try{return j.show(l.getErrorSummary(),l.getErrorDescription())}catch(m){alert(l)}},show:function k(l,m,n,o){return new h().setTitle(l).setBody(m).setButtons([h.OK]).setStackable(true).setModal(true).setHandler(n||i).setButtonsMessage(o||'').show()}};f.exports=j}),null);
__d('PhotoEditorSaveStates',['requireWeak','Map'],(function a(b,c,d,e,f,g,h,i){var j;h('PhotoEditorGraphic',function(n){j=n.Sticker});var k=new i(),l=new i(),m={setState:function n(o,p){k.set(o,p)},getState:function n(o){return k.get(o)},setLoggingData:function n(o,p){l.set(o,p)},getLoggingData:function n(o){return l.get(o)},getTotalNumOfStickersOnPhoto:function n(o){if(k.get(o))return k.get(o).graphics.filter(function(p){return j&&p.type===j}).length;return 0}};f.exports=m}),null);
__d('ReactComposerPhotoActionType',['keyMirrorRecursive'],(function a(b,c,d,e,f,g,h){f.exports=h({PHOTO_RECOGNITION_STARTED:null,PHOTO_RECOGNITION_FINISHED:null,PHOTO_RECOGNITION_ALL_FINISHED:null,PHOTO_ADD_FACEBOX:null,PHOTO_TAG_FACEBOX:null,PHOTO_TAG_XY:null,PHOTO_TAG_XY_PRODUCT:null,PHOTO_UNTAG_FACEBOX:null,PHOTO_REMOVE:null,PHOTO_UNTAG_SUBJECT_FROM_ALL_PHOTOS:null,PHOTO_EDIT_STARTED:null,PHOTO_EDIT_FINISHED:null,PHOTO_SET_BEING_TAGGED:null,PHOTO_LOADING_EDIT_FINISHED:null,PHOTO_UNTAG_ALL:null,PHOTO_SPHERICAL_UPDATING:null,PHOTO_UPDATE_ALL_PHOTO_TAGS:null},'ReactComposerPhotoActionType')}),null);
__d('ReactComposerPhotoStore',['immutable','ReactComposerMediaUploadActionType','ReactComposerPhotoActionType','ReactComposerStoreBase'],(function a(b,c,d,e,f,g,h,i,j,k){var l,m,n=h.Record({cubestripURI:null,faceboxes:h.Map(),height:null,id:null,imageSrc:null,isLoadingPhotoEdit:false,isRecognizingFaceboxes:false,thumbSrc:null,uploadID:null,width:null,xyTags:h.Map()}),o=h.Record({id:null,photoID:null,x:null,y:null,top:null,left:null,width:null,height:null,croppedURI:null,taggedSubjectID:null,taggedValue:null,isMagicTag:false,recognizedSubjectID:null}),p=h.Record({from_facebox:false,name:null,photoID:null,source:null,subject:null,x:null,y:null,is_product_tag:false});l=babelHelpers.inherits(q,k);m=l&&l.prototype;function q(){'use strict';var r;m.constructor.call(this,function(){return {photos:h.Map(),photoBeingTagged:null,isSphericalPhotoUpdating:false}},function(s){switch(s.type){case i.PHOTO_UPLOAD_DONE:r&&r.$ReactComposerPhotoStore1(s);break;case i.PHOTO_UPLOAD_EXTRA_DONE:r&&r.$ReactComposerPhotoStore2(s);break;case i.PHOTO_ADD_UPLOAD:r&&r.$ReactComposerPhotoStore3(s);break;case j.PHOTO_RECOGNITION_STARTED:r&&r.$ReactComposerPhotoStore4(s);break;case j.PHOTO_RECOGNITION_FINISHED:r&&r.$ReactComposerPhotoStore5(s);break;case j.PHOTO_RECOGNITION_ALL_FINISHED:r&&r.$ReactComposerPhotoStore6(s);break;case j.PHOTO_ADD_FACEBOX:r&&r.$ReactComposerPhotoStore7(s);break;case j.PHOTO_TAG_XY_PRODUCT:r&&r.$ReactComposerPhotoStore8(s);break;case j.PHOTO_TAG_XY:r&&r.$ReactComposerPhotoStore9(s);break;case j.PHOTO_TAG_FACEBOX:r&&r.$ReactComposerPhotoStore10(s);break;case j.PHOTO_UNTAG_FACEBOX:r&&r.$ReactComposerPhotoStore11(s);break;case j.PHOTO_REMOVE:r&&r.$ReactComposerPhotoStore12(s);break;case j.PHOTO_UNTAG_SUBJECT_FROM_ALL_PHOTOS:r&&r.$ReactComposerPhotoStore13(s);break;case j.PHOTO_SET_BEING_TAGGED:r&&r.$ReactComposerPhotoStore14(s);break;case i.PREFILL_MEDIAS:r&&r.$ReactComposerPhotoStore15(s);break;case j.PHOTO_EDIT_STARTED:r&&r.$ReactComposerPhotoStore16(s);break;case j.PHOTO_LOADING_EDIT_FINISHED:r&&r.$ReactComposerPhotoStore17(s);break;case j.PHOTO_UNTAG_ALL:r&&r.$ReactComposerPhotoStore18(s);break;case j.PHOTO_SPHERICAL_UPDATING:r&&r.$ReactComposerPhotoStore19(s);break;case j.PHOTO_UPDATE_ALL_PHOTO_TAGS:r&&r.$ReactComposerPhotoStore20(s);break;default:}});r=this}q.prototype.getPhotos=function(r){'use strict';return this.getComposerData(r).photos};q.prototype.isLimitExceeded=function(r,s){'use strict';return this.getPhotos(r).size>s};q.prototype.getPhoto=function(r,s){'use strict';return this.getComposerData(r).photos.get(s)};q.prototype.isRecognizing=function(r){'use strict';return this.getComposerData(r).photos.some(function(s){return s.isRecognizingFaceboxes})};q.prototype.getIsSubjectTagged=function(r,s){'use strict';var t=this.getComposerData(r).photos;return t.some(function(u){return this.getIsSubjectTaggedInPhoto(r,u.id,s)}.bind(this))};q.prototype.getIsSubjectTaggedInPhoto=function(r,s,t){'use strict';var u=this.getPhoto(r,s),v=u.faceboxes.some(function(x){return x.taggedSubjectID===t}),w=u.xyTags.some(function(x){return x.subject===t});return v||w};q.prototype.hasTagsInPhoto=function(r,s){'use strict';var t=this.getPhoto(r,s);if(!t)return false;var u=t.faceboxes.some(function(w){return w.taggedSubjectID!==null}),v=t.xyTags.size>0;return u||v};q.prototype.getAllTaggedFaceboxes=function(r){'use strict';var s=this.getPhotos(r),t=[];s.forEach(function(u){t=t.concat(u.faceboxes.toArray())});return t.filter(function(u){return !!u.get('taggedSubjectID')})};q.prototype.getTaggedFaceboxes=function(r,s){'use strict';var t=this.getPhoto(r,s);return !t?null:t.faceboxes.filter(function(u){return !!u.get('taggedSubjectID')}).map(function(u){return u.toObject()}).toArray()};q.prototype.getFaceboxes=function(r,s){'use strict';var t=this.getPhoto(r,s);return !t?null:t.faceboxes.map(function(u){return u.toObject()}).toArray()};q.prototype.getXYTags=function(r,s){'use strict';var t=this.getPhoto(r,s);return !t?null:t.xyTags.map(function(u){return u.toObject()}).toArray()};q.prototype.getAllXYTags=function(r){'use strict';var s=this.getPhotos(r),t=[];s.forEach(function(u){t=t.concat(u.xyTags.toArray())});return t};q.prototype.getPhotoBeingTagged=function(r){'use strict';return this.getComposerData(r).photoBeingTagged};q.prototype.isSphericalPhotoUpdating=function(r){'use strict';return this.getComposerData(r).isSphericalPhotoUpdating};q.prototype.$ReactComposerPhotoStore1=function(r){'use strict';var s=this.validateAction(r,['composerID','uploadID','photoID','thumbSrc','cubestripURI','imageSrc','width','height']),t=s[0],u=s[1],v=s[2],w=s[3],x=s[4],y=s[5],z=s[6],aa=s[7];this.$ReactComposerPhotoStore21(t,v,new n({id:v,uploadID:u,thumbSrc:w,cubestripURI:x,imageSrc:y,width:z,height:aa}));this.emitChange(t)};q.prototype.$ReactComposerPhotoStore2=function(r){'use strict';this.$ReactComposerPhotoStore1(r)};q.prototype.$ReactComposerPhotoStore4=function(r){'use strict';var s=this.validateAction(r,['composerID','photoID']),t=s[0],u=s[1],v=this.getComposerData(t);v.photos=v.photos.update(u,function(w){return w.set('isRecognizingFaceboxes',true)});this.emitChange(t)};q.prototype.$ReactComposerPhotoStore5=function(r){'use strict';var s=this.validateAction(r,['composerID','photoID']),t=s[0],u=s[1],v=this.getComposerData(t);v.photos=v.photos.update(u,function(w){return w&&w.set('isRecognizingFaceboxes',false)});this.emitChange(t)};q.prototype.$ReactComposerPhotoStore6=function(r){'use strict';var s=this.validateAction(r,['composerID','photos']),t=s[0],u=s[1],v=this.getComposerData(t);v.photos=v.photos.map(function(w){return u.indexOf(w.id)!==-1?w.set('isRecognizingFaceboxes',false):w});this.emitChange(t)};q.prototype.$ReactComposerPhotoStore7=function(r){'use strict';var s=this.validateAction(r,['composerID','photoID','facebox']),t=s[0],u=s[1],v=s[2],w=this.getComposerData(t),x=v.bestRecognition,y=null,z=null;if(x){y=x.subjectID;z=x.value}w.photos=w.photos.update(u,function(aa){return aa&&aa.update('faceboxes',function(ba){return ba.set(v.id,new o({id:v.id,photoID:u,x:v.x,y:v.y,top:v.top,left:v.left,width:v.width,height:v.height,croppedURI:v.croppedURI,taggedSubjectID:y,taggedValue:z,isMagicTag:!!y,recognizedSubjectID:y}))})});this.emitChange(t)};q.prototype.$ReactComposerPhotoStore9=function(r){'use strict';var s=this.validateAction(r,['composerID','value','photoID','source','subject','x','y']),t=s[0],u=s[1],v=s[2],w=s[3],x=s[4],y=s[5],z=s[6],aa=this.getComposerData(t);aa.photos=aa.photos.update(v,function(ba){return ba.update('xyTags',function(ca){return ca.set(x,new p({name:u,photoID:v,source:w,subject:x,x:y,y:z}))})});this.emitChange(t)};q.prototype.$ReactComposerPhotoStore8=function(r){'use strict';var s=this.validateAction(r,['composerID','value','photoID','source','subject','x','y']),t=s[0],u=s[1],v=s[2],w=s[3],x=s[4],y=s[5],z=s[6],aa=this.getComposerData(t);aa.photos=aa.photos.update(v,function(ba){return ba.update('xyTags',function(ca){return ca.set(x,new p({name:u,photoID:v,source:w,subject:x,x:y,y:z,is_product_tag:true}))})});this.emitChange(t)};q.prototype.$ReactComposerPhotoStore10=function(r){'use strict';var s=this.validateAction(r,['composerID','photoID','faceboxID','subjectID','value']),t=s[0],u=s[1],v=s[2],w=s[3],x=s[4],y=this.getComposerData(t);y.photos=y.photos.update(u,function(z){return z.update('faceboxes',function(aa){return aa.update(v,function(ba){return ba.withMutations(function(ca){return ca.set('taggedSubjectID',w).set('taggedValue',x).set('isMagicTag',false)})})})});this.emitChange(t)};q.prototype.$ReactComposerPhotoStore18=function(r){'use strict';var s=this.validateAction(r,['composerID','photoID']),t=s[0],u=s[1],v=this.getComposerData(t);v.photos=v.photos.update(u,function(w){w=w.set('xyTags',h.Map());return w});this.emitChange(t)};q.prototype.$ReactComposerPhotoStore11=function(r){'use strict';var s=this.validateAction(r,['composerID','photoID','faceboxID']),t=s[0],u=s[1],v=s[2],w=this.getComposerData(t);w.photos=w.photos.update(u,function(x){return x.update('faceboxes',function(y){return y.update(v,function(z){return z.withMutations(function(aa){return aa.remove('taggedSubjectID').remove('taggedValue').set('isMagicTag',false)})})})});this.emitChange(t)};q.prototype.$ReactComposerPhotoStore12=function(r){'use strict';var s=this.validateAction(r,['composerID','photoID']),t=s[0],u=s[1],v=this.getComposerData(t);v.photos=v.photos['delete'](u)};q.prototype.$ReactComposerPhotoStore13=function(r){'use strict';var s=this.validateAction(r,['composerID','subjectID']),t=s[0],u=s[1],v=this.getComposerData(t);v.photos=v.photos.map(function(w){return w.withMutations(function(x){return x.update('faceboxes',function(y){return y.map(function(z){if(z.taggedSubjectID!==u)return z;return z.withMutations(function(aa){return aa.remove('taggedSubjectID').remove('taggedValue').set('isMagicTag',false)})})}).update('xyTags',function(y){return y.filterNot(function(z){return z.subject===u})})})});this.emitChange(t)};q.prototype.$ReactComposerPhotoStore14=function(r){'use strict';var s=this.validateAction(r,['composerID','photoID']),t=s[0],u=s[1],v=this.getComposerData(t);v.photoBeingTagged=u;this.emitChange(t)};q.prototype.$ReactComposerPhotoStore15=function(r){'use strict';var s=this.validateAction(r,['composerID','medias']),t=s[0],u=s[1];u.forEach(function(v){this.$ReactComposerPhotoStore21(t,v.photoID,new n({id:v.photoID,uploadID:v.uploadID,thumbSrc:v.thumbSrc,imageSrc:v.imageSrc,width:v.width,height:v.height,cubestripURI:v.cubestripURI}))}.bind(this));this.emitChange(t)};q.prototype.$ReactComposerPhotoStore16=function(r){'use strict';var s=this.validateAction(r,['composerID','photoID']),t=s[0],u=s[1],v=this.getComposerData(t);v.photos=v.photos.update(u,function(w){return w.set('isLoadingPhotoEdit',true)});this.emitChange(t)};q.prototype.$ReactComposerPhotoStore17=function(r){'use strict';var s=this.validateAction(r,['composerID','photoID']),t=s[0],u=s[1],v=this.getComposerData(t);v.photos=v.photos.update(u,function(w){return w.set('isLoadingPhotoEdit',false)});this.emitChange(t)};q.prototype.$ReactComposerPhotoStore3=function(r){'use strict';var s=this.validateAction(r,['composerID','photo']),t=s[0],u=s[1];this.$ReactComposerPhotoStore21(t,u.id,u);this.emitChange(t)};q.prototype.$ReactComposerPhotoStore19=function(r){'use strict';var s=this.validateAction(r,['composerID','isSphericalPhotoUpdating']),t=s[0],u=s[1],v=this.getComposerData(t);v.isSphericalPhotoUpdating=u;this.emitChange(t)};q.prototype.$ReactComposerPhotoStore20=function(r){'use strict';var s=this.validateAction(r,['composerID','photoID','faceboxes','xyTags']),t=s[0],u=s[1],v=s[2],w=s[3],x=this.getComposerData(t),y={};v.forEach(function(aa){y[aa.id]=new o(aa)});var z={};w.forEach(function(aa){z[aa.subject]=new p(aa)});x.photos=x.photos.update(u,function(aa){return aa&&aa.set('faceboxes',h.Map(y)).set('xyTags',h.Map(z))});this.emitChange(t)};q.prototype.$ReactComposerPhotoStore21=function(r,s,t){'use strict';var u=this.getComposerData(r);u.photos=u.photos.set(s,t)};f.exports=new q()}),null);
__d('ReactComposerPhotoActions',['ReactComposerDispatcher','ReactComposerPhotoActionType','ReactComposerPhotoStore'],(function a(b,c,d,e,f,g,h,i){c('ReactComposerPhotoStore');var j={startRecognizing:function k(l,m){h.dispatch({composerID:l,photoID:m,type:i.PHOTO_RECOGNITION_STARTED})},finishRecognizingPhoto:function k(l,m){h.dispatch({composerID:l,type:i.PHOTO_RECOGNITION_FINISHED,photoID:m})},finishRecognizing:function k(l,m,n){h.dispatch({composerID:l,type:i.PHOTO_RECOGNITION_ALL_FINISHED,photos:m,facerecWaterfallEvent:n})},addFacebox:function k(l,m,n){h.dispatch({composerID:l,type:i.PHOTO_ADD_FACEBOX,photoID:m,facebox:n})},tagXY:function k(l,m,n,o,p,q,r){h.dispatch({composerID:l,type:i.PHOTO_TAG_XY,value:n,photoID:m,source:o,subject:p,x:q,y:r})},tagXYProduct:function k(l,m,n,o,p,q,r){h.dispatch({composerID:l,type:i.PHOTO_TAG_XY_PRODUCT,value:n,photoID:m,source:o,subject:p,x:q,y:r})},tagFacebox:function k(l,m,n,o,p){h.dispatch({composerID:l,type:i.PHOTO_TAG_FACEBOX,photoID:m,faceboxID:n,subjectID:o,value:p})},untagFacebox:function k(l,m,n,o){h.dispatch({composerID:l,type:i.PHOTO_UNTAG_FACEBOX,photoID:m,faceboxID:n,subjectID:o})},removePhoto:function k(l,m,n){h.dispatch({composerID:l,type:i.PHOTO_REMOVE,photoID:m,uploadID:n})},untagSubjectFromAllPhotos:function k(l,m){h.dispatch({composerID:l,type:i.PHOTO_UNTAG_SUBJECT_FROM_ALL_PHOTOS,subjectID:m})},untagAllForPhoto:function k(l,m){h.dispatch({composerID:l,type:i.PHOTO_UNTAG_ALL,photoID:m})},startPhotoEdit:function k(l,m){h.dispatch({composerID:l,photoID:m,type:i.PHOTO_EDIT_STARTED})},finishPhotoEdit:function k(l){h.dispatch({composerID:l,type:i.PHOTO_EDIT_FINISHED})},setPhotoBeingTagged:function k(l,m){h.dispatch({composerID:l,photoID:m,type:i.PHOTO_SET_BEING_TAGGED})},finishLoadingPhotoEdit:function k(l,m){h.dispatch({composerID:l,type:i.PHOTO_LOADING_EDIT_FINISHED,photoID:m})},changeSphericalPhotoUpdateStatus:function k(l,m){h.dispatch({composerID:l,type:i.PHOTO_SPHERICAL_UPDATING,isSphericalPhotoUpdating:m})},updateAllPhotoTags:function k(l,m,n,o){h.dispatch({composerID:l,type:i.PHOTO_UPDATE_ALL_PHOTO_TAGS,photoID:m,faceboxes:n,xyTags:o})}};f.exports=j}),null);
__d('ReactComposerPhotoUploadState',[],(function a(b,c,d,e,f,g){f.exports={PHOTO_UPLOAD_ENQUEUED:'PHOTO_UPLOAD_ENQUEUED',PHOTO_UPLOAD_RESIZE_STARTED:'PHOTO_UPLOAD_RESIZE_STARTED',PHOTO_UPLOAD_RESIZE_DONE:'PHOTO_UPLOAD_RESIZE_DONE',PHOTO_UPLOAD_RESIZE_FAILED:'PHOTO_UPLOAD_RESIZE_FAILED',PHOTO_UPLOAD_UPLOADING:'PHOTO_UPLOAD_UPLOADING',PHOTO_UPLOAD_DONE:'PHOTO_UPLOAD_DONE',PHOTO_UPLOAD_FAILED:'PHOTO_UPLOAD_FAILED'}}),null);
__d('ReactComposerMediaUploadActions',['ReactComposerDispatcher','ReactComposerMediaUploadActionType','ReactComposerPhotoActions','ReactComposerPhotoUploadState','ReactComposerMediaUploadStore','ReactComposerPhotoStore'],(function a(b,c,d,e,f,g,h,i,j,k){c('ReactComposerMediaUploadStore');c('ReactComposerPhotoStore');var l={enqueue:function m(n,o,p,q,r,s,t){var u=arguments.length<=7||arguments[7]===undefined?[]:arguments[7],v=arguments.length<=8||arguments[8]===undefined?false:arguments[8];h.dispatch({composerID:n,mediaType:s,uploadID:o,type:r,filename:p,fileURL:t?t:'',index:q,xyTags:u,isSpherical:v})},startResizing:function m(n,o,p){h.dispatch({composerID:n,loggingData:p,uploadID:o,type:i.PHOTO_UPLOAD_RESIZE_STARTED})},progressResizing:function m(n,o,p){h.dispatch({composerID:n,uploadID:o,type:i.PHOTO_UPLOAD_RESIZE_PROGRESS,progress:p})},doneResizing:function m(n,o,p){h.dispatch({composerID:n,loggingData:p,uploadID:o,type:i.PHOTO_UPLOAD_RESIZE_DONE})},failResizing:function m(n,o,p){h.dispatch({composerID:n,loggingData:p,uploadID:o,type:i.PHOTO_UPLOAD_RESIZE_FAILED})},doneSphericalCheck:function m(n,o,p,q,r){h.dispatch({composerID:n,loggingData:p,uploadID:o,type:i.SPHERICAL_PHOTO_CHECK_DONE,sphericalImage:q,useLocalSphericalImage:r})},failSphericalCheck:function m(n,o,p){h.dispatch({composerID:n,loggingData:p,uploadID:o,type:i.SPHERICAL_PHOTO_CHECK_FAILED})},startUploading:function m(n,o,p,q){h.dispatch({composerID:n,uploadID:o,type:q,fileUpload:p})},progressUploading:function m(n,o,p,q){h.dispatch({composerID:n,uploadID:o,type:i.MEDIA_UPLOAD_PROGRESS,progress:p,use_real_progress_percentage:q})},isSpherical:function m(n,o,p,q){h.dispatch({composerID:n,uploadID:o,type:i.PHOTO_UPLOAD_IS_SPHERICAL,isSpherical:p,projectionType:q})},doneUploading:function m(n){h.dispatch(n)},doneUploadingExtra:function m(n,o,p,q,r,s,t,u){h.dispatch({type:i.PHOTO_UPLOAD_EXTRA_DONE,composerID:n,uploadID:o,photoID:p,thumbSrc:q,cubestripURI:r,imageSrc:s,width:t,height:u})},failUploading:function m(n,o,p,q,r,s){h.dispatch({composerID:n,uploadID:o,type:s,error:r,fileUpload:p,timeToUpload:q})},removeAllPhotoUploads:function m(n,o){o.forEach(function(p){return this.removePhotoAndPhotoUpload(n,p)}.bind(this))},removePhotoAndPhotoUpload:function m(n,o){if(o.state===k.PHOTO_UPLOAD_DONE){j.removePhoto(n,o.photoID,o.id)}else this.removeMediaUpload(n,o.id);},removeMediaUpload:function m(n,o){h.dispatch({composerID:n,type:i.MEDIA_UPLOAD_REMOVE,uploadID:o})},mediaMoved:function m(n,o,p){h.dispatch({composerID:n,type:i.MEDIA_UPLOAD_MOVED,from:o,to:p})},resizerUnavailable:function m(n){h.dispatch({composerID:n,type:i.PHOTO_UPLOAD_RESIZER_UNAVAILABLE})},photosSelect:function m(n,o,p){h.dispatch({composerID:n,method:p,numPhotos:o,type:i.PHOTOS_SELECT})},retryMediaUpload:function m(n,o){h.dispatch({composerID:n,type:o})},reorderMedias:function m(n,o){h.dispatch({composerID:n,mediaIDs:o,type:i.REORDER_MEDIAS})},prefillMedias:function m(n,o){h.dispatch({composerID:n,medias:o,type:i.PREFILL_MEDIAS})},setVideoThumbnail:function m(n,o,p){h.dispatch({composerID:n,type:i.VIDEO_SET_THUMBNAIL,thumbSrc:p,uploadID:o})},addPhotoUpload:function m(n,o,p,q){h.dispatch({type:i.PHOTO_ADD_UPLOAD,composerID:n,index:o,photo:q,upload:p})},setPhotoThumbnail:function m(n,o,p){h.dispatch({composerID:n,type:i.PHOTO_SET_THUMBNAIL,thumbSrc:p,uploadID:o})}};f.exports=l}),null);
__d('ReactComposerMediaUploadType',[],(function a(b,c,d,e,f,g){f.exports={PHOTO:'PHOTO',VIDEO:'VIDEO'}}),null);
__d('ReactComposerPhotoUpload',['immutable'],(function a(b,c,d,e,f,g,h){f.exports=h.Record({error:{},filename:null,fileSize:null,fileUpload:null,fileURL:null,height:null,id:null,mediaType:null,originalPhotoID:null,photoID:null,progress:null,useRealProgressPercentage:false,state:null,thumbSrc:null,width:null,xyTags:[],canShowSphericalSingletonNux:false,flatPhotoID:null,sphericalImage:null,isSpherical:false,isSphericalVideo:false,projectionType:null,sphericalPhotoID:null,useLocalSphericalImage:false,isFromPrefill:false})}),null);
__d('ReactComposerMediaUploadStore',['Bootloader','immutable','PhotoEditorSaveStates','ReactComposerAttachmentStore','ReactComposerAttachmentType','ReactComposerDispatcher','ReactComposerMediaUploadActionType','ReactComposerMediaUploadType','ReactComposerPhotoActionType','ReactComposerPhotoStore','ReactComposerPhotoUpload','ReactComposerPhotoUploadState','ReactComposerStoreBase','ReactComposerVideoXUploader','invariant'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){var w,x;w=babelHelpers.inherits(y,t);x=w&&w.prototype;function y(){'use strict';var z;x.constructor.call(this,function(){return {removedIDs:i.Set(),uploads:i.List(),uploadsByID:i.Map(),videoUploader:null}},function(aa){if(z&&z.$ReactComposerMediaUploadStore1(aa))return;switch(aa.type){case n.PHOTO_UPLOAD_ENQUEUED:case n.VIDEO_UPLOAD_ENQUEUED:z&&z.$ReactComposerMediaUploadStore2(aa);break;case n.PHOTO_UPLOAD_RESIZE_STARTED:z&&z.$ReactComposerMediaUploadStore3(aa);break;case n.PHOTO_UPLOAD_RESIZE_PROGRESS:z&&z.$ReactComposerMediaUploadStore4(aa);break;case n.PHOTO_UPLOAD_RESIZE_DONE:z&&z.$ReactComposerMediaUploadStore5(aa,s.PHOTO_UPLOAD_RESIZE_DONE);break;case n.PHOTO_UPLOAD_RESIZE_FAILED:z&&z.$ReactComposerMediaUploadStore5(aa,s.PHOTO_UPLOAD_RESIZE_FAILED);break;case n.PHOTO_UPLOAD_UPLOADING:case n.VIDEO_UPLOAD_UPLOADING:z&&z.$ReactComposerMediaUploadStore6(aa);break;case n.PHOTO_UPLOAD_IS_SPHERICAL:z&&z.$ReactComposerMediaUploadStore7(aa);break;case n.VIDEO_SET_THUMBNAIL:case n.PHOTO_SET_THUMBNAIL:z&&z.$ReactComposerMediaUploadStore8(aa);break;case n.MEDIA_UPLOAD_PROGRESS:z&&z.$ReactComposerMediaUploadStore4(aa);break;case n.PHOTO_UPLOAD_DONE:case n.VIDEO_UPLOAD_DONE:m.waitFor([q.getDispatchToken()]);z&&z.$ReactComposerMediaUploadStore9(aa);break;case n.PHOTO_UPLOAD_EXTRA_DONE:m.waitFor([q.getDispatchToken()]);z&&z.$ReactComposerMediaUploadStore10(aa);break;case n.PHOTO_UPLOAD_FAILED:case n.VIDEO_UPLOAD_FAILED:z&&z.$ReactComposerMediaUploadStore11(aa);break;case n.MEDIA_UPLOAD_REMOVE:case p.PHOTO_REMOVE:z&&z.$ReactComposerMediaUploadStore12(aa);break;case n.MEDIA_UPLOAD_MOVED:z&&z.$ReactComposerMediaUploadStore13(aa);break;case n.PREFILL_MEDIAS:z&&z.$ReactComposerMediaUploadStore14(aa);break;case n.REORDER_MEDIAS:z&&z.$ReactComposerMediaUploadStore15(aa);break;case n.PHOTO_ADD_UPLOAD:z&&z.$ReactComposerMediaUploadStore16(aa);break;case n.SPHERICAL_PHOTO_CHECK_DONE:z&&z.$ReactComposerMediaUploadStore17(aa);break;default:}});z=this}y.prototype.getMediaUploadExists=function(z,aa){'use strict';var ba=this.getComposerData(z);return ba.uploadsByID.get(aa)!==undefined};y.prototype.getMediaUpload=function(z,aa){'use strict';return this.$ReactComposerMediaUploadStore18(this.getComposerData(z),aa)};y.prototype.getUploadIndex=function(z,aa){'use strict';return this.$ReactComposerMediaUploadStore19(this.getComposerData(z),aa)};y.prototype.getUploads=function(z){'use strict';return this.getComposerData(z).uploads};y.prototype.getUploadsOfType=function(z,aa){'use strict';var ba=this.getComposerData(z).uploads.filter(function(ca){return ca.mediaType===aa});return ba};y.prototype.getUploadsCount=function(z,aa){'use strict';if(!aa)return this.getComposerData(z).uploads.size;return this.getComposerData(z).uploads.filter(function(ba){return ba.mediaType===aa}).size};y.prototype.getNonPrefillVideoUploadsCount=function(z){'use strict';return this.getUploadsOfType(z,o.VIDEO).filter(function(aa){return !aa.isFromPrefill}).size};y.prototype.getSphericalPhotoCount=function(z){'use strict';return this.getUploadsOfType(z,o.PHOTO).filter(function(aa){return aa.isSpherical}).size};y.prototype.getNonsphericalPhotoCount=function(z){'use strict';return this.getUploadsOfType(z,o.PHOTO).filter(function(aa){return !aa.isSpherical}).size};y.prototype.getHasUploadBeenRemoved=function(z,aa){'use strict';var ba=this.getComposerData(z);return ba.removedIDs.has(aa)};y.prototype.isUploading=function(z){'use strict';return this.getComposerData(z).uploads.some(function(aa){return aa.state!==s.PHOTO_UPLOAD_RESIZE_FAILED&&aa.state!==s.PHOTO_UPLOAD_DONE&&aa.state!==s.PHOTO_UPLOAD_FAILED})};y.prototype.getTotalNumberOfStickersOnPhotos=function(z){'use strict';var aa=0;this.getComposerData(z).uploads.forEach(function(ba){var ca=ba.get('originalPhotoID');if(ca)aa+=j.getTotalNumOfStickersOnPhoto(ca);});return aa};y.prototype.getVideoUploader=function(z,aa){'use strict';var ba=this.getComposerData(z);if(!ba.videoUploader){var ca=new u({composerID:z,uploaderParams:aa});ba.videoUploader=ca}return ba.videoUploader};y.prototype.$ReactComposerMediaUploadStore2=function(z){'use strict';var aa=this.validateAction(z,['composerID','mediaType','uploadID','filename','fileURL','index','xyTags','isSpherical']),ba=aa[0],ca=aa[1],da=aa[2],ea=aa[3],fa=aa[4],ga=aa[5],ha=aa[6],ia=aa[7];this.$ReactComposerMediaUploadStore20(ba,ga,new r({id:da,mediaType:ca,state:s.PHOTO_UPLOAD_ENQUEUED,filename:ea,fileURL:fa,xyTags:ha,isSpherical:ia}));this.emitChange(ba)};y.prototype.$ReactComposerMediaUploadStore3=function(z){'use strict';var aa=this.validateAction(z,['composerID','uploadID']),ba=aa[0],ca=aa[1],da=this.getComposerData(ba);this.$ReactComposerMediaUploadStore21(da,ca,function(ea){return ea.withMutations(function(fa){return fa.set('state',s.PHOTO_UPLOAD_RESIZE_STARTED).set('progress',0)})});this.emitChange(ba)};y.prototype.$ReactComposerMediaUploadStore6=function(z){'use strict';var aa=this.validateAction(z,['composerID','uploadID','fileUpload']),ba=aa[0],ca=aa[1],da=aa[2],ea=this.getComposerData(ba),fa=da&&da.getFile&&da.getFile().size;this.$ReactComposerMediaUploadStore21(ea,ca,function(ga){return ga.withMutations(function(ha){return ha.set('state',s.PHOTO_UPLOAD_UPLOADING).set('progress',0).set('fileUpload',da).set('fileSize',fa||null)})});this.emitChange(ba)};y.prototype.$ReactComposerMediaUploadStore4=function(z){'use strict';var aa=this.validateAction(z,['composerID','uploadID','progress']),ba=aa[0],ca=aa[1],da=aa[2],ea=this.getComposerData(ba),fa=z.use_real_progress_percentage?z.use_real_progress_percentage:false;this.$ReactComposerMediaUploadStore21(ea,ca,function(ga){return ga.set('progress',da).set('useRealProgressPercentage',fa)});this.emitChange(ba)};y.prototype.$ReactComposerMediaUploadStore9=function(z){'use strict';var aa=this.validateAction(z,['composerID','uploadID','photoID']),ba=aa[0],ca=aa[1],da=aa[2],ea=this.getComposerData(ba);this.$ReactComposerMediaUploadStore21(ea,ca,function(fa){return fa.withMutations(function(ga){return ga.set('state',s.PHOTO_UPLOAD_DONE).set('photoID',da).set('sphericalPhotoID',z.sphericalPhotoID).set('originalPhotoID',z.originalPhotoID||da).set('progress',100).set('isSphericalVideo',!!z.isSphericalVideo).remove('fileUpload')})});if(!z.cubestripURI)this.$ReactComposerMediaUploadStore21(ea,ca,function(fa){return fa.set('isSpherical',false)});this.emitChange(ba)};y.prototype.$ReactComposerMediaUploadStore10=function(z){'use strict';var aa=this.validateAction(z,['composerID','uploadID','photoID','cubestripURI']),ba=aa[0],ca=aa[1],da=aa[2],ea=aa[3],fa=this.getUploadsCount(ba);this.$ReactComposerMediaUploadStore20(ba,fa,new r({id:ca,photoID:da,mediaType:o.PHOTO,originalPhotoID:da,state:s.PHOTO_UPLOAD_DONE,isSpherical:Boolean(ea)}));this.emitChange(ba)};y.prototype.$ReactComposerMediaUploadStore7=function(z){'use strict';var aa=this.validateAction(z,['composerID','uploadID','isSpherical']),ba=aa[0],ca=aa[1],da=aa[2];if(da)h.loadModules(["SphericalPhotoConstants","QE2Logger"],function(ea,fa){return fa.logExposureForUser(ea.QE_WWW_UNIVERSE)},'ReactComposerMediaUploadStore');this.$ReactComposerMediaUploadStore21(this.getComposerData(ba),ca,function(ea){return ea.withMutations(function(fa){return fa.set('isSpherical',da).set('projectionType',z.projectionType)})})};y.prototype.$ReactComposerMediaUploadStore11=function(z){'use strict';var aa=this.validateAction(z,['composerID','uploadID']),ba=aa[0],ca=aa[1],da=this.getComposerData(ba);this.$ReactComposerMediaUploadStore21(da,ca,function(ea){return ea.withMutations(function(fa){return fa.set('state',s.PHOTO_UPLOAD_FAILED).set('error',z.error)})});this.emitChange(ba)};y.prototype.$ReactComposerMediaUploadStore12=function(z){'use strict';var aa=this.validateAction(z,['composerID','uploadID']),ba=aa[0],ca=aa[1],da=this.getComposerData(ba),ea=this.$ReactComposerMediaUploadStore19(da,ca),fa=da.uploads.get(ea);if(fa.mediaType==o.VIDEO)if(fa.state===s.PHOTO_UPLOAD_UPLOADING){da.videoUploader.cancelUpload(ca)}else{if(!da.videoUploader){var ga=k.getAttachmentsConfig(ba,l.MEDIA);ga||v(0);this.getVideoUploader(ba,ga.videoUploadParams)}da.videoUploader.deleteUpload(ca)}da.uploads=da.uploads['delete'](ea);da.uploadsByID=da.uploadsByID['delete'](ca);for(var ha=ea;ha<da.uploads.size;ha++){var ia=da.uploads.get(ha).id;da.uploadsByID=da.uploadsByID.set(ia,ha)}da.removedIDs=da.removedIDs.add(ca);this.emitChange(ba)};y.prototype.$ReactComposerMediaUploadStore8=function(z){'use strict';var aa=this.validateAction(z,['composerID','uploadID','thumbSrc']),ba=aa[0],ca=aa[1],da=aa[2],ea=this.getComposerData(ba);this.$ReactComposerMediaUploadStore21(ea,ca,function(fa){return fa.set('thumbSrc',da)});this.emitChange(ba)};y.prototype.$ReactComposerMediaUploadStore5=function(z,aa){'use strict';var ba=this.validateAction(z,['composerID','uploadID']),ca=ba[0],da=ba[1];this.$ReactComposerMediaUploadStore22(ca,da,aa);this.emitChange(ca)};y.prototype.$ReactComposerMediaUploadStore13=function(z){'use strict';var aa=this.validateAction(z,['composerID','from','to']),ba=aa[0],ca=aa[1],da=aa[2],ea=this.getComposerData(ba);ea.uploads=ea.uploads.splice(ca,1).splice(da,0,ea.uploads.get(ca));ea.uploadsByID=ea.uploads.groupBy(function(fa,ga){return ga}).toMap().map(function(fa){return fa.first().id}).flip();this.emitChange(ba)};y.prototype.$ReactComposerMediaUploadStore15=function(z){'use strict';var aa=this.validateAction(z,['composerID','mediaIDs']),ba=aa[0],ca=aa[1],da=this.getComposerData(ba);da.uploads=ca.map(function(ea){return this.$ReactComposerMediaUploadStore18(da,ea)}.bind(this));da.uploadsByID=da.uploads.groupBy(function(ea,fa){return fa}).toMap().map(function(ea){return ea.first().id}).flip();this.emitChange(ba)};y.prototype.$ReactComposerMediaUploadStore14=function(z){'use strict';var aa=this.validateAction(z,['composerID','medias']),ba=aa[0],ca=aa[1];ca.forEach(function(da,ea){this.$ReactComposerMediaUploadStore20(ba,ea,new r({id:da.uploadID,photoID:da.photoID,mediaType:da.mediaType,originalPhotoID:da.photoID,state:s.PHOTO_UPLOAD_DONE,thumbSrc:da.thumbSrc,fileURL:da.fileURL||da.imageSrc,filename:da.filename,isSpherical:Boolean(da.cubestripURI),height:da.height,width:da.width,isFromPrefill:true}))}.bind(this));this.emitChange(ba)};y.prototype.$ReactComposerMediaUploadStore16=function(z){'use strict';var aa=this.validateAction(z,['composerID','index','upload']),ba=aa[0],ca=aa[1],da=aa[2],ea=this.getComposerData(ba);ea.uploads=ea.uploads.splice(ca,0,da);for(var fa=ca;fa<ea.uploads.size;fa++){var ga=ea.uploads.get(fa).id;ea.uploadsByID=ea.uploadsByID.set(ga,fa)}this.emitChange(ba)};y.prototype.$ReactComposerMediaUploadStore17=function(z){'use strict';var aa=this.validateAction(z,['composerID','uploadID','sphericalImage','useLocalSphericalImage']),ba=aa[0],ca=aa[1],da=aa[2],ea=aa[3],fa=this.getComposerData(ba);this.$ReactComposerMediaUploadStore21(fa,ca,function(ga){return ga.withMutations(function(ha){return ha.set('sphericalImage',da).set('useLocalSphericalImage',ea)})});this.emitChange(ba)};y.prototype.$ReactComposerMediaUploadStore22=function(z,aa,ba){'use strict';var ca=this.getComposerData(z);this.$ReactComposerMediaUploadStore21(ca,aa,function(da){return da.set('state',ba)})};y.prototype.$ReactComposerMediaUploadStore21=function(z,aa,ba){'use strict';var ca=this.$ReactComposerMediaUploadStore23(z,aa),da=ca[0],ea=ca[1];z.uploads=z.uploads.set(ea,ba(da,ea))};y.prototype.$ReactComposerMediaUploadStore23=function(z,aa){'use strict';var ba=this.$ReactComposerMediaUploadStore19(z,aa);return [z.uploads.get(ba),ba]};y.prototype.$ReactComposerMediaUploadStore19=function(z,aa){'use strict';var ba=z.uploadsByID.get(aa);if(ba===undefined)throw new Error('Upload '+aa+" hasn't been registered");return ba};y.prototype.$ReactComposerMediaUploadStore18=function(z,aa){'use strict';var ba=this.$ReactComposerMediaUploadStore19(z,aa);return z.uploads.get(ba)};y.prototype.$ReactComposerMediaUploadStore1=function(z){'use strict';if(n[z.type]){var aa=z.composerID,ba=z.uploadID;if(ba==null)return false;return this.getHasUploadBeenRemoved(aa,ba)}return false};y.prototype.$ReactComposerMediaUploadStore20=function(z,aa,ba){'use strict';var ca=this.getComposerData(z);ca.uploads=ca.uploads.splice(aa,0,ba);for(var da=aa;da<ca.uploads.size;da++){var ea=ca.uploads.get(da).id;ca.uploadsByID=ca.uploadsByID.set(ea,da)}this.$ReactComposerMediaUploadStore24(z,ba)};y.prototype.$ReactComposerMediaUploadStore24=function(z,aa){'use strict';if(aa.mediaType==o.PHOTO){var ba=new Image();ba.onload=function(){var da=this.getComposerData(z);this.$ReactComposerMediaUploadStore21(da,aa.id,function(ea){return ea.withMutations(function(fa){return fa.set('height',ba.height).set('width',ba.width)})});this.emitChange(z)}.bind(this);ba.src=aa.fileURL}else if(aa.mediaType==o.VIDEO){var ca=document.createElement('video');ca.onloadedmetadata=function(){var da=this.getComposerData(z);this.$ReactComposerMediaUploadStore21(da,aa.id,function(ea){return ea.withMutations(function(fa){return fa.set('height',ca.videoHeight).set('width',ca.videoWidth)})});this.emitChange(z)}.bind(this);ca.src=aa.fileURL}};f.exports=new y()}),null);
__d('killswitch',['KSConfig'],(function a(b,c,d,e,f,g,h){'use strict';function i(j){return h.killed.has(j)}i.override=function(j,k){if(k){h.killed.add(j)}else h.killed['delete'](j);};f.exports=i}),null);
__d('MultimediaUploadProcessingDialog.react',['React','XUIDialog.react','XUIDialogTitle.react','XUIDialogBody.react','fbt'],(function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';var m,n,o=h.PropTypes;m=babelHelpers.inherits(p,h.Component);n=m&&m.prototype;function p(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=n.constructor).call.apply(q,[this].concat(t)),this.state={dialogShown:true},this.$MultimediaUploadProcessingDialog1=function(){return this.props.numOfVideos===1?l._("Se est\u00e1 procesando el video de tu publicaci\u00f3n. Te enviaremos una notificaci\u00f3n cuando finalice el proceso y se pueda ver la publicaci\u00f3n."):l._("Se est\u00e1n procesando los videos de tu publicaci\u00f3n. Te enviaremos una notificaci\u00f3n cuando finalice el proceso y se pueda ver la publicaci\u00f3n.")}.bind(this),this.$MultimediaUploadProcessingDialog2=function(){return l._("Procesando videos")},r}p.prototype.componentWillReceiveProps=function(q){if(q.show)this.setState({dialogShown:true});};p.prototype.render=function(){return h.createElement(i,{shown:this.state.dialogShown,'data-testid':'video_processing_dialog',width:400},h.createElement(j,null,this.$MultimediaUploadProcessingDialog2()),h.createElement(k,null,this.$MultimediaUploadProcessingDialog1()))};p.propTypes={numOfVideos:o.number.isRequired};f.exports=p}),null);
__d('ReactComposerMediaFilterUtils',['ComposerXNativeAudioUploadsConfig','VideoUploadConfig'],(function a(b,c,d,e,f,g,h,i){var j={hasVideos:function k(l){return this.filterVideos(l).length>0},hasAudioFiles:function k(l){return this.filterAudioFiles(l).length>0},filterVideos:function k(l){return this.filterFileOfSupportedType(l,i.videoExtensions)},filterAudioFiles:function k(l){return this.filterFileOfSupportedType(l,h.audioExtensions)},filterFileOfSupportedType:function k(l,m){return l.filter(function(n){var o=n.indexOf('.')!==-1?n.split('.').pop().toLowerCase():'';return m[o]})}};f.exports=j}),null);
__d('VideoUploadLogger',['Banzai'],(function a(b,c,d,e,f,g,h){function i(k){this._source=k.source;this._waterfallID=k.waterfall_id;this._targetID=k.target_id;this._delay=k.delay;this._times=[];this._isChunkedUpload=k.is_chunked_upload;this._actorID=k.actor_id;this._composerEntryPointRef=k.composer_entry_point_ref;this._isRemoteUpload=k.is_remote_upload;this._containerType=k.container_type}var j={BANZAI_GK:'videos',BANZAI_ROUTE:'video_waterfall',SOURCE_SIMPLE:'simple',SOURCE_COMPOSER:'composer',EVENT_STARTED_GENERATE_THUMBNAILS:'upload.client.started_generate_thumbnails',EVENT_FINISHED_GENERATE_THUMBNAILS:'upload.client.finished_generate_thumbnails',EVENT_SELECTED_CUSTOM_THUMBNAIL:'upload.client.selected_custom_thumbnail',EVENT_VIDEO_DIMENSIONS_UNREADABLE:'upload.client.video_dimensions_unreadable',EVENT_REPLACE_VIDEO:'upload.client.replace_video',EVENT_STARTED_FLOW:'upload.client.started_flow',EVENT_FINISHED_FLOW:'upload.client.finished_flow',EVENT_FAILED_FLOW:'upload.client.failed_flow',EVENT_CANCELED_FLOW:'upload.client.canceled_flow',EVENT_RESIGNED_FLOW:'upload.client.resigned_flow',EVENT_REQUESTED_UPLOADING:'upload.client.requested_uploading',EVENT_INVALIDATED_UPLOADING:'upload.client.invalidated_uploading',EVENT_STARTED_UPLOADING:'upload.client.started_uploading',EVENT_PROGRESS_UPLOADING_START_REQUEST:'upload.client.progress_uploading_start_request',EVENT_FINISHED_UPLOADING:'upload.client.finished_uploading',EVENT_CANCELED_UPLOADING:'upload.client.canceled_uploading',EVENT_ABANDONED_UPLOADING:'upload.client.abandoned_uploading',EVENT_FAILED_UPLOADING:'upload.client.failed_uploading',EVENT_STARTED_SENDING_BYTES:'upload.client.started_sending_bytes',EVENT_FINISHED_SENDING_BYTES:'upload.client.finished_sending_bytes',EVENT_CANCELED_SENDING_BYTES:'upload.client.canceled_sending_bytes',EVENT_FAILED_SENDING_BYTES:'upload.client.failed_sending_bytes',EVENT_STARTED_START_REQUEST:'upload.client.started_sending_start_request',EVENT_FINISHED_START_REQUEST:'upload.client.finished_sending_start_request',EVENT_FAILED_START_REQUEST:'upload.client.failed_sending_start_request',EVENT_STARTED_POST_REQUEST:'upload.client.started_sending_post_request',EVENT_FINISHED_POST_REQUEST:'upload.client.finished_sending_post_request',EVENT_FAILED_POST_REQUEST:'upload.client.failed_sending_post_request',EVENT_STARTED_SENDING_CHUNK_BYTES:'upload.client.started_sending_chunk_bytes',EVENT_FINISHED_SENDING_CHUNK_BYTES:'upload.client.finished_sending_chunk_bytes',EVENT_CANCELED_SENDING_CHUNK_BYTES:'upload.client.canceled_sending_chunk_bytes',EVENT_FAILED_SENDING_CHUNK_BYTES:'upload.client.failed_sending_chunk_bytes',EVENT_TIMEOUT_SENDING_CHUNK_BYTES:'upload.client.timeout_sending_chunk_bytes',EVENT_RESUMABLE_CALLED:'upload.client.resumable_called',EVENT_RESUMABLE_STARTED:'upload.client.resumable_started',EVENT_RESUMABLE_SUCCESS:'upload.client.resumable_success',EVENT_RESUMABLE_FAILED:'upload.client.resumable_failed',EVENT_ENCODING_START_OBSERVED:'encode.client.encoding_start_observed',EVENT_ENCODING_SUCCESS_OBSERVED:'encode.client.encoding_success_observed',EVENT_ENCODING_FAIL_OBSERVED:'encode.client.encoding_fail_observed',EVENT_RECEIVED_RESPONSE:'upload.client.received_response',EVENT_STARTED_FLOW_EXP1:'upload.client.started_flow_exp1',EVENT_FINISHED_FLOW_EXP1:'upload.client.finished_flow_exp1',EVENT_CANCELED_FLOW_EXP1:'upload.client.canceled_flow_exp1'};Object.assign(i,j);Object.assign(i.prototype,{logEvent:function k(event,l){var m=babelHelpers['extends']({},l);if(m.elapsed_time==null)if(event.indexOf('started')!==-1){this._times[event]=Date.now()}else if(event.indexOf('finished')!==-1){m.elapsed_time=this._computeElapsedTime(event,'finished')}else if(event.indexOf('canceled')!==-1){m.elapsed_time=this._computeElapsedTime(event,'canceled')}else if(event.indexOf('failed')!==-1)m.elapsed_time=this._computeElapsedTime(event,'failed');m.event=event;m.source=this._source;m.waterfall_id=this._waterfallID;m.target_id=this._targetID;m.is_chunked_upload=this._isChunkedUpload;m.actor_id=this._actorID;m.composer_entry_point_ref=this._composerEntryPointRef;m.is_remote_upload=this._isRemoteUpload;m.container_type=this._containerType;h.post(i.BANZAI_ROUTE,m,{delay:this._delay,retry:true})},_computeElapsedTime:function k(event,l){var m=event.replace(l,'started'),n=this._times[m];return n?Date.now()-n:null}});f.exports=i}),null);
__d('VideoUploadProgressBar',['CSS','VideoUploadFeatureDetector','cx'],(function a(b,c,d,e,f,g,h,i,j){function k(l){'use strict';this.$VideoUploadProgressBar1=l.progress_bar;this.$VideoUploadProgressBar2=l.throbber;this.$VideoUploadProgressBar3=l.uploader;this.$VideoUploadProgressBar4=l.start_margin;this.$VideoUploadProgressBar5=l.start_delay;this.$VideoUploadProgressBar6=l.end_margin;this.$VideoUploadProgressBar7=l.end_delay;this.$VideoUploadProgressBar8=l.progress_bar_label;this.$VideoUploadProgressBar9()}k.prototype.reset=function(){'use strict';this.$VideoUploadProgressBar1.setPosition(0)};k.prototype.getRoot=function(){'use strict';return this.$VideoUploadProgressBar1.getRoot()};k.computeProgress=function(l,m,n,o,p){'use strict';var q=Math.min(l+m,n);return q/n*(100-o-p)+o};k.prototype.$VideoUploadProgressBar9=function(){'use strict';if(i.supportsFileAPI()){this.$VideoUploadProgressBar3.subscribe('upload-requested',this.$VideoUploadProgressBar10.bind(this));this.$VideoUploadProgressBar3.subscribe('upload-progressed',this.$VideoUploadProgressBar11.bind(this));this.$VideoUploadProgressBar3.subscribe('online',this.$VideoUploadProgressBar12.bind(this));this.$VideoUploadProgressBar3.subscribe('offline',this.$VideoUploadProgressBar13.bind(this))}else this.$VideoUploadProgressBar3.subscribe('upload-requested',this.$VideoUploadProgressBar14.bind(this));};k.prototype.$VideoUploadProgressBar10=function(event){'use strict';h.show(this.$VideoUploadProgressBar1.getRoot());h.removeClass(this.$VideoUploadProgressBar1.getRoot(),"_5r5a");this.$VideoUploadProgressBar1.setTarget(this.$VideoUploadProgressBar4,this.$VideoUploadProgressBar5);this.$VideoUploadProgressBar15(0)};k.prototype.$VideoUploadProgressBar15=function(l){'use strict';if(this.$VideoUploadProgressBar8)this.$VideoUploadProgressBar1.changeLabel(''+l.toFixed(1)+'%');};k.prototype.$VideoUploadProgressBar11=function(event,l){'use strict';h.removeClass(this.$VideoUploadProgressBar1.getRoot(),"_5r5a");var m=k.computeProgress(l.start_offset,l.sent_bytes,l.file_size,this.$VideoUploadProgressBar4,this.$VideoUploadProgressBar6);this.$VideoUploadProgressBar1.setPosition(m);this.$VideoUploadProgressBar15(m);if(m>=100-this.$VideoUploadProgressBar6){this.$VideoUploadProgressBar1.setTarget(100,this.$VideoUploadProgressBar7);this.$VideoUploadProgressBar15(100)}};k.prototype.$VideoUploadProgressBar12=function(event){'use strict';h.removeClass(this.$VideoUploadProgressBar1.getRoot(),"_5r5a")};k.prototype.$VideoUploadProgressBar13=function(event){'use strict';h.addClass(this.$VideoUploadProgressBar1.getRoot(),"_5r5a")};k.prototype.$VideoUploadProgressBar14=function(event){'use strict';h.show(this.$VideoUploadProgressBar2)};f.exports=k}),null);
__d('VideoUploadCrashMonitor',['Bandicoot','VideoUploadLogger'],(function a(b,c,d,e,f,g,h,i){var j,k;j=babelHelpers.inherits(l,h);k=j&&j.prototype;function l(m,n,o,p,q,r,s,t){'use strict';k.constructor.call(this,'VideoUploadSession');this.$VideoUploadCrashMonitor1={waterfallID:m,actorID:n,source:o,targetID:p,loggingDelay:q,supportsChunking:r,composerEntryPointRef:s,flowStarted:t}}l.prototype.flowStarted=function(){'use strict';this.$VideoUploadCrashMonitor1.flowStarted=true};l.prototype.getCrashTimeData=function(){'use strict';return this.$VideoUploadCrashMonitor1};l.prototype.logCrash=function(m,n,o){'use strict';if(!n.waterfallID)return;var p=new i({actor_id:n.actorID,source:n.source,waterfall_id:n.waterfallID,target_id:n.targetID,delay:n.loggingDelay,is_chunked_upload:n.supportsChunking,composer_entry_point_ref:n.composerEntryPointRef}),q={error:'Crash Detected',error_description:'Detected video upload did not complete due to a crash'};p.logEvent(i.EVENT_FAILED_UPLOADING,q);if(n.flowStarted)p.logEvent(i.EVENT_RESIGNED_FLOW,{});};f.exports=l}),null);
__d('VideoUploadFileValidator',['ErrorDialog','ImageExtensions','Link.react','React','errorCode','fbt','killswitch'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n){var o=[1363019,1363020,1363021,1363022,1363023,1363024,1363025,1363026,1363027,1363030,1363031,1363032,1363033,1363038,1363039,1363040,1363048],p=['VIDEO__INVALID_GUIDE_DATA'];function q(r){'use strict';this.$VideoUploadFileValidator1=r}q.prototype.validate=function(r,s){'use strict';return this.$VideoUploadFileValidator2(r)&&this.$VideoUploadFileValidator3(r)&&this.$VideoUploadFileValidator4(r.getExtension()===i.GIF,s)};q.prototype.getValidationErrorMessage=function(r,s){'use strict';return this.$VideoUploadFileValidator5(r)||this.$VideoUploadFileValidator6(r)||this.$VideoUploadFileValidator7(r.getExtension()===i.GIF,s)};q.canReplaceVideoForError=function(r){'use strict';if(!r)return true;if(p.indexOf(r)>-1)return false;if(o.indexOf(r)>-1)return true;return false};q.prototype.$VideoUploadFileValidator2=function(r){'use strict';var s=this.$VideoUploadFileValidator5(r);if(s){h.show(s.summary,s.description);return false}else return true;};q.prototype.$VideoUploadFileValidator5=function(r){'use strict';if(this.$VideoUploadFileValidator1.extensions[r.getExtension()])return;var s="http://www.facebook.com/help/"+"?faq=218673814818907#What-formats-of-video-files-can-I-upload?",t=k.createElement(j,{href:s},m._("formatos recomendados"));return {summary:m._("Formato de archivo no compatible"),description:m._("No admitimos el formato del archivo que seleccionaste. Usa uno de nuestros {link} para archivos de video.",[m.param('link',t)])}};q.prototype.$VideoUploadFileValidator3=function(r){'use strict';var s=this.$VideoUploadFileValidator6(r);if(s){h.show(s.summary,s.description);return false}else return true;};q.prototype.$VideoUploadFileValidator6=function(r){'use strict';var s;if(r.getSize()===null)return;if(r.getSize()<this.$VideoUploadFileValidator1.minSize)s=this.$VideoUploadFileValidator8();if(r.getSize()>this.$VideoUploadFileValidator1.maxSize)s=this.$VideoUploadFileValidator9();return s};q.prototype.$VideoUploadFileValidator8=function(){'use strict';var r=Math.round(this.$VideoUploadFileValidator1.minSize/1024);return {summary:m._("El archivo de video es demasiado peque\u00f1o"),description:m._("El archivo de video que intentaste subir es demasiado peque\u00f1o. El tama\u00f1o m\u00ednimo para los archivos de video es de {min-size} KB. Sube uno m\u00e1s grande.",[m.param('min-size',r)])}};q.prototype.$VideoUploadFileValidator9=function(){'use strict';var r=Math.floor(this.$VideoUploadFileValidator1.maxSize/1024/1024);return {summary:m._("El archivo de video es demasiado grande"),description:m._("El archivo de video que intentaste subir es demasiado grande. El tama\u00f1o m\u00e1ximo para los archivos de video es de {max-size} MB. Sube uno m\u00e1s peque\u00f1o.",[m.param('max-size',r)])}};q.prototype.$VideoUploadFileValidator4=function(r,s){'use strict';var t=this.$VideoUploadFileValidator7(r,s);if(t){h.show(t.summary,t.description);return false}else return true;};q.prototype.$VideoUploadFileValidator7=function(r,s){'use strict';var t;if(!s)return;var u=s.format.duration;if(u>this.$VideoUploadFileValidator1.maxLength)t=this.$VideoUploadFileValidator10();if(u<this.$VideoUploadFileValidator1.minLength&&!r)t=this.$VideoUploadFileValidator11();if(!s.streams||!s.streams.primaryVideo)return;var v=s.streams.primaryVideo.width,w=s.streams.primaryVideo.height,x=0,y=0;if(s.videoPlayerData!==null){x=s.videoPlayerData.height;y=s.videoPlayerData.width}if(!n('VIDEO_DIMENSIONS_FROM_PLAYER_IN_UPLOAD_DIALOG')&&y!==0&&x!==0){v=y;w=x}if(!s.streams.primaryVideo&&s.streams.primaryAudio)t=this.$VideoUploadFileValidator12();if(v<this.$VideoUploadFileValidator1.minWidth)t=this.$VideoUploadFileValidator13();if(w<this.$VideoUploadFileValidator1.minHeight)t=this.$VideoUploadFileValidator14();var z=v/w;if(this.$VideoUploadFileValidator1.require16to9AspectRatio)if(z>2||z<1.6)t=this.$VideoUploadFileValidator15();if(this.$VideoUploadFileValidator1.minAspectRatio)if(z<this.$VideoUploadFileValidator1.minAspectRatio)t=this.$VideoUploadFileValidator16();if(this.$VideoUploadFileValidator1.maxAspectRatio)if(z>this.$VideoUploadFileValidator1.maxAspectRatio)t=this.$VideoUploadFileValidator17();return t};q.prototype.$VideoUploadFileValidator10=function(){'use strict';if(this.$VideoUploadFileValidator1.source==='profile_video'){return {summary:m._("El video del perfil es demasiado largo"),description:m._("La duraci\u00f3n m\u00e1xima es de {max-length} segundos. Sube un video m\u00e1s corto.",[m.param('max-length',this.$VideoUploadFileValidator1.maxLength)])}}else return {summary:m._("Video demasiado largo"),description:m._("El video que intentaste subir es demasiado largo. La duraci\u00f3n m\u00e1xima para los videos es de {max-length} minutos. Sube uno m\u00e1s corto.",[m.param('max-length',Math.round(this.$VideoUploadFileValidator1.maxLength/60))])};};q.prototype.$VideoUploadFileValidator11=function(){'use strict';return {summary:m._("El archivo de video es demasiado corto"),description:m._({"second":"El video que intentaste subir es demasiado corto. La duraci\u00f3n m\u00ednima es de {min-length} segundos. Sube un video m\u00e1s largo.","seconds":"El video que intentaste subir es demasiado corto. La duraci\u00f3n m\u00ednima es de {min-length} segundos. Sube un video m\u00e1s largo."},[m.param('min-length',this.$VideoUploadFileValidator1.minLength),m['enum'](this.$VideoUploadFileValidator1.minLength===1?'second':'seconds',{second:'second',seconds:'seconds'})])}};q.prototype.$VideoUploadFileValidator12=function(){'use strict';var r="http://www.facebook.com/help/"+"?faq=218673814818907#What-formats-of-video-files-can-I-upload?",s=k.createElement(j,{href:r},m._("formato de video compatible"));return {summary:m._("No se detect\u00f3 ning\u00fan video"),description:m._("Parece que est\u00e1s intentando subir un archivo que no es un video. Sube uno que tenga un {supported-video-format link}",[m.param('supported-video-format link',s)])}};q.prototype.$VideoUploadFileValidator13=function(){'use strict';return {summary:m._("El video no es lo suficientemente ancho"),description:m._("El video que intentaste subir no es lo suficientemente ancho. El ancho m\u00ednimo para los videos es de {min-width}. Sube uno m\u00e1s ancho.",[m.param('min-width',this.$VideoUploadFileValidator1.minWidth)])}};q.prototype.$VideoUploadFileValidator15=function(){'use strict';return {summary:m._("Se produjo un problema al subir el video"),description:m._("Los videos se ven mejor con una relaci\u00f3n de aspecto de 16:9. Edita tu video y vuelve a subirlo.")}};q.prototype.$VideoUploadFileValidator14=function(){'use strict';return {summary:m._("El video es demasiado corto"),description:m._("El video que intentaste subir no es lo suficientemente alto. La altura m\u00ednima para los videos es de {min-height}. Sube uno m\u00e1s alto.",[m.param('min-height',this.$VideoUploadFileValidator1.minHeight)])}};q.prototype.$VideoUploadFileValidator17=function(){'use strict';return {summary:m._("Relaci\u00f3n de aspecto demasiado grande"),description:m._("El video que seleccionaste es demasiado ancho. Las relaciones de aspecto de los videos deben oscilar entre {max_aspect_ratio} y {min_aspect_ratio}.",[m.param('max_aspect_ratio',this.$VideoUploadFileValidator1.maxAspectRatio+':1'),m.param('min_aspect_ratio',this.$VideoUploadFileValidator1.minAspectRatio+':1')])}};q.prototype.$VideoUploadFileValidator16=function(){'use strict';return {summary:m._("Relaci\u00f3n de aspecto demasiado baja"),description:m._("El video que seleccionaste es demasiado alto. Las relaciones de aspecto de los videos deben oscilar entre {max_aspect_ratio} y {min_aspect_ratio}.",[m.param('max_aspect_ratio',this.$VideoUploadFileValidator1.maxAspectRatio+':1'),m.param('min_aspect_ratio',this.$VideoUploadFileValidator1.minAspectRatio+':1')])}};f.exports=q}),null);
__d('VideoUploadSphericalLogger',['Banzai'],(function a(b,c,d,e,f,g,h){var i=3000;function j(){'use strict';this.$VideoUploadSphericalLogger1={};this.$VideoUploadSphericalLogger2=false;this.$VideoUploadSphericalLogger3=0}j.prototype.log=function(){'use strict';this.$VideoUploadSphericalLogger2?this.$VideoUploadSphericalLogger4():this.$VideoUploadSphericalLogger5()};j.prototype.$VideoUploadSphericalLogger5=function(){'use strict';h.post('spherical_video_composer_upload',babelHelpers['extends']({},this.$VideoUploadSphericalLogger1))};j.prototype.$VideoUploadSphericalLogger4=function(){'use strict';var k=Date.now();if(k-this.$VideoUploadSphericalLogger3>i){this.$VideoUploadSphericalLogger3=k;this.$VideoUploadSphericalLogger5()}};j.prototype.setDirectorsCutEnabled=function(k){'use strict';this.$VideoUploadSphericalLogger1.directors_cut_enabled=k;return this};j.prototype.setFieldOfView=function(k){'use strict';this.$VideoUploadSphericalLogger1.field_of_view=k;return this};j.prototype.setFileExtension=function(k){'use strict';this.$VideoUploadSphericalLogger1.file_extension=k;return this};j.prototype.setHasSphericalMetadata=function(k){'use strict';this.$VideoUploadSphericalLogger1.has_spherical_metadata=k;return this};j.prototype.setPitchDegrees=function(k){'use strict';this.$VideoUploadSphericalLogger1.pitch_degrees=k;return this};j.prototype.setTargetID=function(k){'use strict';this.$VideoUploadSphericalLogger1.target_id=k;return this};j.prototype.setVideoID=function(k){'use strict';this.$VideoUploadSphericalLogger1.video_id=k;return this};j.prototype.setUserAction=function(k){'use strict';this.$VideoUploadSphericalLogger1.user_action=k;if(k==='drag_video_preview'||k==='scroll_video_preview'){this.$VideoUploadSphericalLogger2=true}else this.$VideoUploadSphericalLogger2=false;return this};j.prototype.setVideoPreviewPosition=function(k){'use strict';this.$VideoUploadSphericalLogger1.video_preview_position=k;return this};j.prototype.setYawDegrees=function(k){'use strict';this.$VideoUploadSphericalLogger1.yaw_degrees=k;return this};j.prototype.setIsRedesign=function(k){'use strict';this.$VideoUploadSphericalLogger1.is_redesign=k;return this};j.prototype.setFinalGuideEnabled=function(k){'use strict';this.$VideoUploadSphericalLogger1.final_guide_enabled=k;return this};j.prototype.setFinalNumGuidePoints=function(k){'use strict';this.$VideoUploadSphericalLogger1.final_num_guide_points=k;return this};j.prototype.setIsNuxTest=function(k){'use strict';this.$VideoUploadSphericalLogger1.is_nux_test=k;return this};f.exports=new j()}),null);
__d('getVideo64BitAtomLength',['Int64'],(function a(b,c,d,e,f,g,h){'use strict';function i(j,k,l,m){var n=j.getUint32(k+m+l),o=j.getUint32(k+l+m+m);return new h(o,n).toNumber()}f.exports=i}),null);
__d('VideoUploadMetadataParser',['regeneratorRuntime','Promise','VideoUploadFeatureDetector','VideoUploadSphericalLogger','fileSlice','killswitch','getVideo64BitAtomLength'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n){var o=4,p=4,q=5242880,r=24,s=88,t=20,u=16,v=4,w=84,x=20,y=62,z=4,aa=[255,204,130,99,248,85,74,147,136,20,88,122,2,82,31,221],ba=12,ca=12,da=16,ea=36,fa=1,ga=1,ha=4,ia=1,ja=1,ka=4,la=4,ma=1000;function na(oa,pa){'use strict';this.$VideoUploadMetadataParser1=oa;this.$VideoUploadMetadataParser2=pa}na.prototype.getHandler=function(){'use strict';return this.$VideoUploadMetadataParser2};na.prototype.parse=function(){'use strict';if(!j.supportsFileReading()){this.$VideoUploadMetadataParser2(null);return null}switch(this.$VideoUploadMetadataParser1.getExtension()){case 'mp4':case 'mov':case 'm4v':case '3gp':case '3g2':k.setFileExtension(this.$VideoUploadMetadataParser1.getExtension());break;default:this.$VideoUploadMetadataParser2(null);return null;}return this.$VideoUploadMetadataParser3(0,Math.min(q,this.$VideoUploadMetadataParser1.getSize()),null)};na.prototype.$VideoUploadMetadataParser3=function oa(pa,qa,ra){var sa,ta,ua;return h.async(function va(wa){while(1)switch(wa.prev=wa.next){case 0:'use strict';sa=new FileReader();ta=new i(function(xa,ya){sa.onload=function ab(event){var bb;return h.async(function cb(db){while(1)switch(db.prev=db.next){case 0:db.prev=0;bb=this.$VideoUploadMetadataParser4(new DataView(sa.result),0,qa-pa,pa,ra);if(!bb.completed){db.next=8;break}bb=this.$VideoUploadMetadataParser5(bb);bb.completed=true;xa(bb);db.next=13;break;case 8:db.next=10;return h.awrap(this.$VideoUploadMetadataParser3(pa+bb.nextOffset,Math.min(this.$VideoUploadMetadataParser1.getSize(),pa+bb.nextOffset+q),bb));case 10:bb=db.sent;bb.completed=false;xa(bb);case 13:db.next=18;break;case 15:db.prev=15;db.t0=db['catch'](0);ya(db.t0);case 18:case 'end':return db.stop();}},null,this,[[0,15]])}.bind(this);var za=this.$VideoUploadMetadataParser1.getFile();sa.readAsArrayBuffer(l.call(za,pa,qa))}.bind(this));ua=this.$VideoUploadMetadataParser6();return wa.abrupt('return',new i(function(xa,ya){try{i.all([ta,ua]).then(function(za){var ab=za[0];if(ab.completed){var bb=za[1];ab.videoPlayerData=bb;this.$VideoUploadMetadataParser2(ab)}xa(ab)}.bind(this),function(za){this.$VideoUploadMetadataParser2(null);ya(za)}.bind(this)).done()}catch(za){this.$VideoUploadMetadataParser2(null);ya(za)}}.bind(this)));case 5:case 'end':return wa.stop();}},null,this)};na.prototype.$VideoUploadMetadataParser6=function(){'use strict';if(m('VIDEO_DIMENSIONS_FROM_PLAYER_IN_UPLOAD_DIALOG')||!b.URL||!b.URL.createObjectURL)return null;var oa=this.$VideoUploadMetadataParser1.getFile(),pa=document.createElement('video'),qa=new i(function(sa,ta){var ua=setTimeout(function(){clearTimeout(ua);ta('Video onloadedmetadata timed out')},ma)}),ra=new i(function(sa,ta){pa.onloadedmetadata=function(){try{var ua={width:pa.videoWidth,height:pa.videoHeight};sa(ua)}catch(va){ta(va)}};try{pa.src=b.URL.createObjectURL(oa)}catch(ua){ta(ua)}});return i.race([ra,qa])};na.prototype.$VideoUploadMetadataParser7=function(oa,pa,qa){'use strict';var ra=[];for(var sa=0;sa<qa;sa++)ra.push(String.fromCharCode(oa.getUint8(pa+sa)));return ra.join('')};na.prototype.$VideoUploadMetadataParser8=function(oa,pa,qa){'use strict';var ra={version:null,ambisonic_type:null,ambisonic_order:null,ambisonic_channel_ordering:null,ambisonic_normalization:null,num_channels:null,channel_maps:[]},sa=0;ra.version=oa.getUint8(pa+sa);sa=fa;ra.ambisonic_type=oa.getUint8(pa+sa);sa+=ga;ra.ambisonic_order=oa.getUint32(pa+sa);sa+=ha;ra.ambisonic_channel_ordering=oa.getUint8(pa+sa);sa+=ia;ra.ambisonic_normalization=oa.getUint8(pa+sa);sa+=ja;ra.num_channels=oa.getUint32(pa+sa);sa+=ka;for(var ta=0;ta<ra.num_channels;ta++){ra.channel_maps.push(oa.getUint32(pa+sa));sa+=la;if(sa>qa)return null;}return JSON.stringify(ra)};na.prototype.$VideoUploadMetadataParser9=function(oa,pa,qa,ra){'use strict';try{var sa=p+o;if(sa+aa.length<qa&&this.$VideoUploadMetadataParser10(oa,pa+sa)){sa+=aa.length;if(sa<qa){var ta=this.$VideoUploadMetadataParser7(oa,pa+sa,qa-sa),ua;if(window.DOMParser){var va=new DOMParser();ua=va.parseFromString(ta,'text/xml')}else{ua=new window.ActiveXObject('Microsoft.XMLDOM');ua.async='false';ua.loadXML(ta)}var wa=ua.getElementsByTagNameNS('*','Spherical')[0].childNodes[0].nodeValue;if(wa.toLowerCase()==='true'){ra.sphericalMetadata.spherical=true;ra.sphericalMetadata.sphericalMetadataXml=ta}}}}catch(xa){}};na.prototype.$VideoUploadMetadataParser10=function(oa,pa){'use strict';for(var qa=0;qa<aa.length;qa++)if(oa.getUint8(pa+qa)!==aa[qa])return false;return true};na.prototype.$VideoUploadMetadataParser4=function(oa,pa,qa,ra,sa){'use strict';if(!sa)sa={widths:[],heights:[],streamTypes:[],streamDurations:[],spherical:false,sphericalMetadata:{sphericalMetadataXml:null,fbSpatialAudioMetadataXml:null,ytSa3dMetadataJson:null},isParsingInMediaInformationAtom:false,endOfMediaInformationAtomOffset:null};var ta=null;while(pa<qa){var ua=oa.getUint32(pa),va=this.$VideoUploadMetadataParser7(oa,pa+o,p);if(ua===1)ua=n(oa,pa,p,o);if(pa+ua>qa){sa.completed=false;sa.nextOffset=pa;if(ua>qa)sa.nextOffset+=ua;return sa}if(sa.isParsingInMediaInformationAtom&&pa>=sa.endOfMediaInformationAtomOffset){sa.isParsingInMediaInformationAtom=false;sa.endOfMediaInformationAtomOffset=null}if(pa+ra===0&&va!=='ftyp')throw new Error('No ftyp atom');if(ua===0)throw new Error('len is 0');var wa=function kb(){var lb=oa.getUint32(pa+t),mb=oa.getUint32(pa+r);return mb/lb};switch(va){case 'moov':case 'trak':case 'mdia':case 'stbl':pa+=o+p;break;case 'mvhd':sa.duration=wa();pa+=ua;break;case 'tkhd':var xa=oa.getUint16(pa+w),ya=oa.getUint16(pa+s);sa.widths.push(xa);sa.heights.push(ya);ta=oa.getUint32(pa+x);pa+=ua;break;case 'hdlr':if(!sa.isParsingInMediaInformationAtom){var za=this.$VideoUploadMetadataParser7(oa,pa+u,v);switch(za){case 'vide':za='video';break;case 'soun':za='audio';break;case 'subt':za='subtitle';break;default:za='data';}sa.streamTypes.push(za)}pa+=ua;break;case 'mdhd':sa.streamDurations.push(wa());pa+=ua;break;case 'uuid':this.$VideoUploadMetadataParser9(oa,pa,ua,sa);pa+=ua;break;case 'meta':var ab=ca+ba+z,bb=this.$VideoUploadMetadataParser7(oa,pa+ab,4);if(bb!=='face'){pa+=ua;break}var cb=o+p+y,db=this.$VideoUploadMetadataParser7(oa,pa+cb,ua-cb);if(db!==null){if(sa.sphericalMetadata.fbSpatialAudioMetadataXml===null)sa.sphericalMetadata.fbSpatialAudioMetadataXml='<fb360_spatial_audio>';if(ta){sa.sphericalMetadata.fbSpatialAudioMetadataXml+='\n                <track id="'+ta.toString()+'">\n                  '+db+'\n                </track>\n              '}else sa.sphericalMetadata.fbSpatialAudioMetadataXml+='\n                <spatial_audio_formatting>\n                  '+db+'\n                </spatial_audio_formatting>\n              ';}pa+=ua;break;case 'minf':var eb=this.$VideoUploadMetadataParser7(oa,pa+2*o+p,p);if(eb==='smhd'){pa+=o+p;sa.isParsingInMediaInformationAtom=true;sa.endOfMediaInformationAtomOffset=pa+ua}else pa+=ua;break;case 'stsd':var fb=this.$VideoUploadMetadataParser7(oa,pa+p+da,p);if(fb==='mp4a'){pa+=da}else pa+=ua;break;case 'mp4a':var gb=oa.getUint32(pa+ea),hb=oa.getUint32(pa+ea+gb),ib=this.$VideoUploadMetadataParser7(oa,pa+ea+gb+o,p);if(ib==='SA3D'){var jb=this.$VideoUploadMetadataParser8(oa,pa+ea+gb+o+p,hb);if(jb!==null)if(sa.sphericalMetadata.ytSa3dMetadataJson===null)sa.sphericalMetadata.ytSa3dMetadataJson=jb;}pa+=ua;break;default:pa+=ua;}}sa.completed=true;if(sa.sphericalMetadata.fbSpatialAudioMetadataXml)sa.sphericalMetadata.fbSpatialAudioMetadataXml+='</fb360_spatial_audio>';return sa};na.prototype.$VideoUploadMetadataParser5=function(oa){'use strict';var pa={streams:{numAudioTracks:0},format:{},metadata:{}},qa=oa.widths.length,ra=oa.heights.length,sa=oa.streamTypes.length,ta=oa.streamDurations.length;if(qa!==ra||qa!==sa||qa!==ta)return null;for(var ua=0;ua<qa;ua++){var va={width:oa.widths[ua],height:oa.heights[ua],duration:oa.streamDurations[ua],type:oa.streamTypes[ua]};if(va.type==='video'){var wa=va.width*va.height,xa=pa.streams.primaryVideo;if(!xa||xa.width*xa.height>wa)pa.streams.primaryVideo=va;}else if(va.type==='audio'){var ya=pa.streams.primaryAudio;if(!ya||ya.duration<va.duration)pa.streams.primaryAudio=va;pa.streams.numAudioTracks++}}pa.format.duration=oa.duration;pa.format.isSpherical=oa.sphericalMetadata.spherical;if(oa.sphericalMetadata.spherical){pa.metadata.sphericalMetadataXml=oa.sphericalMetadata.sphericalMetadataXml;pa.metadata.fbSpatialAudioMetadataXml=oa.sphericalMetadata.fbSpatialAudioMetadataXml;pa.metadata.ytSa3dMetadataJson=oa.sphericalMetadata.ytSa3dMetadataJson}k.setHasSphericalMetadata(oa.sphericalMetadata.spherical);return pa};f.exports=na}),null);
__d('VideoUploadRequest',['AsyncRequest','DOM','DTSG','FileForm','Form','PHPQuerySerializer','VideoUploadFeatureDetector','emptyFunction','flattenPHPQueryData','submitForm'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r='video';function s(t){'use strict';this.$VideoUploadRequest1=t;this.$VideoUploadRequest2=null;this.$VideoUploadRequest3=false;this.$VideoUploadRequest4=null;this.$VideoUploadRequest5=null;this.$VideoUploadRequest6=null;this.$VideoUploadRequest7=null;this.$VideoUploadRequest8=o;this.$VideoUploadRequest9=o;this.$VideoUploadRequest10=o;this.$VideoUploadRequest11=o;this.$VideoUploadRequest12=null}s.prototype.setAllowCrossOrigin=function(t){'use strict';this.$VideoUploadRequest3=t;return this};s.prototype.setData=function(t){'use strict';this.$VideoUploadRequest4=t;return this};s.prototype.setWaterfallID=function(t){'use strict';this.$VideoUploadRequest6=t;return this};s.prototype.setSuccessHandler=function(t){'use strict';this.$VideoUploadRequest8=t;return this};s.prototype.setErrorHandler=function(t){'use strict';this.$VideoUploadRequest9=t;return this};s.prototype.setTransportErrorHandler=function(t){'use strict';this.$VideoUploadRequest10=t;return this};s.prototype.setUploadProgressHandler=function(t){'use strict';this.$VideoUploadRequest11=t;return this};s.prototype.setTimeoutHandler=function(t,u){'use strict';this.$VideoUploadRequest7=t;this.$VideoUploadRequest12=u;return this};s.prototype.setThumbnail=function(t){'use strict';this.$VideoUploadRequest13=t;return this};s.prototype.setHandle=function(t){'use strict';this.$VideoUploadRequest5=t;return this};s.prototype.setCaptions=function(t){'use strict';this.$VideoUploadRequest14=t;return this};s.prototype.send=function(){'use strict';if(this.$VideoUploadRequest2)throw new Error('An upload request is already in progress.');if(n.supportsXHR()){this.$VideoUploadRequest2=this.$VideoUploadRequest15();if(this.$VideoUploadRequest13||this.$VideoUploadRequest14){var t=new FormData();if(this.$VideoUploadRequest13)t.append('thumb',this.$VideoUploadRequest13);if(this.$VideoUploadRequest14)this.$VideoUploadRequest14.forEach(function(v,w){var x=v.getIsDefault()?'captions_default':'captions_file'+w;t.append(x,v.getFile())});if(this.$VideoUploadRequest4){var u=p(this.$VideoUploadRequest4);Object.keys(u).forEach(function(v){t.append(v,u[v])})}this.$VideoUploadRequest2.setRawData(t)}this.$VideoUploadRequest2.send()}else{this.$VideoUploadRequest2=this.$VideoUploadRequest16();this.$VideoUploadRequest17(this.$VideoUploadRequest2)}};s.prototype.sendChunk=function(t){'use strict';if(this.$VideoUploadRequest2)throw new Error('An upload request is already in progress.');var u=new FormData();if(this.$VideoUploadRequest5){u.append('fbuploader_video_file_chunk',this.$VideoUploadRequest5)}else u.append('video_file_chunk',t);this.$VideoUploadRequest2=this.$VideoUploadRequest15();this.$VideoUploadRequest2.setRawData(u);this.$VideoUploadRequest2.send()};s.prototype.sendFile=function(t){'use strict';if(this.$VideoUploadRequest2)throw new Error('An upload request is already in progress.');this.$VideoUploadRequest2=this.$VideoUploadRequest16();var u=t.cloneNode(false);t.name=r;i.replace(t,u);i.appendContent(this.$VideoUploadRequest2.getRoot(),t);this.$VideoUploadRequest17(this.$VideoUploadRequest2);t.name=u.name;i.replace(u,t)};s.prototype.abort=function(){'use strict';if(!this.$VideoUploadRequest2)return;this.$VideoUploadRequest2.abort();this.$VideoUploadRequest2=null};s.prototype.$VideoUploadRequest15=function(){'use strict';var t=this.__getAsyncRequest().setAllowCrossOrigin(this.$VideoUploadRequest3).setURI(this.$VideoUploadRequest1).setData(this.$VideoUploadRequest4).setRequestHeader('X_FB_VIDEO_WATERFALL_ID',this.$VideoUploadRequest6).setHandler(this.$VideoUploadRequest8).setErrorHandler(this.$VideoUploadRequest9).setTransportErrorHandler(this.$VideoUploadRequest10).setUploadProgressHandler(this.$VideoUploadRequest11);if(this.$VideoUploadRequest12)t.setTimeoutHandler(this.$VideoUploadRequest7,this.$VideoUploadRequest12);return t};s.prototype.__getAsyncRequest=function(){'use strict';return new h()};s.prototype.$VideoUploadRequest16=function(){'use strict';var t=i.create('form',{action:this.$VideoUploadRequest1,method:'POST'});l.createHiddenInputs(babelHelpers['extends']({fb_dtsg:j.getToken()},this.$VideoUploadRequest4),t);var u=new k(t,null,{allowCrossOrigin:this.$VideoUploadRequest3});u.subscribe('success',this.$VideoUploadRequest18.bind(this));u.subscribe('failure',this.$VideoUploadRequest19.bind(this));u.subscribe('progress',this.$VideoUploadRequest20.bind(this));return u};s.prototype.$VideoUploadRequest17=function(t){'use strict';i.appendContent(document.body,t.getRoot());q(t.getRoot())};s.prototype.$VideoUploadRequest18=function(event,t){'use strict';this.$VideoUploadRequest8(t.response)};s.prototype.$VideoUploadRequest19=function(event,t){'use strict';this.$VideoUploadRequest9(t.response)};s.prototype.$VideoUploadRequest20=function(event,t){'use strict';this.$VideoUploadRequest11(t.event)};f.exports=s}),null);
__d('VideoUploadPostRequestManager',['ArbiterMixin','VideoUploadRequest','mixin'],(function a(b,c,d,e,f,g,h,i,j){var k,l;k=babelHelpers.inherits(m,j(h));l=k&&k.prototype;function m(n,o,p,q,r){'use strict';l.constructor.call(this);this.$VideoUploadPostRequestManager1=n;this.$VideoUploadPostRequestManager2=o;this.$VideoUploadPostRequestManager3=p;this.$VideoUploadPostRequestManager4=0;this.$VideoUploadPostRequestManager5=q;this.$VideoUploadPostRequestManager6=r;this.$VideoUploadPostRequestManager7=0}m.prototype.getRequest=function(){'use strict';return this.$VideoUploadPostRequestManager8};m.prototype.sendRequest=function(n){'use strict';if(this.$VideoUploadPostRequestManager8)return;this.$VideoUploadPostRequestManager9=babelHelpers['extends']({},n.getMetadata(),this.__createRequestData(n));this.$VideoUploadPostRequestManager10=this.$VideoUploadPostRequestManager9.thumb;delete this.$VideoUploadPostRequestManager9.thumb;this.$VideoUploadPostRequestManager11=this.$VideoUploadPostRequestManager9.captions;delete this.$VideoUploadPostRequestManager9.captions;this.$VideoUploadPostRequestManager12=n.getWaterfallID();this.$VideoUploadPostRequestManager13();this.inform('request-started')};m.prototype.$VideoUploadPostRequestManager13=function(){'use strict';clearTimeout(this.$VideoUploadPostRequestManager14);this.$VideoUploadPostRequestManager14=null;this.$VideoUploadPostRequestManager8=this.__getVideoUploadRequest(this.$VideoUploadPostRequestManager1).setAllowCrossOrigin(true).setData(this.$VideoUploadPostRequestManager9).setThumbnail(this.$VideoUploadPostRequestManager10).setCaptions(this.$VideoUploadPostRequestManager11).setWaterfallID(this.$VideoUploadPostRequestManager12).setSuccessHandler(this.$VideoUploadPostRequestManager15.bind(this)).setErrorHandler(this.$VideoUploadPostRequestManager16.bind(this)).setTransportErrorHandler(this.$VideoUploadPostRequestManager17.bind(this));this.$VideoUploadPostRequestManager8.send()};m.prototype.__createRequestData=function(n){'use strict';return {video_id:n.getVideoID(),target_id:n.getTargetID(),source:n.getSource(),waterfall_id:n.getWaterfallID(),creator_product:n.getCreatorProduct(),composer_entry_point_ref:n.getComposerEntryPointRef&&n.getComposerEntryPointRef(),supports_chunking:n.getSupportsChunking()}};m.prototype.__getVideoUploadRequest=function(n){'use strict';return new i(n)};m.prototype.clearRequest=function(){'use strict';this.$VideoUploadPostRequestManager8=null;this.$VideoUploadPostRequestManager7=0;this.$VideoUploadPostRequestManager4=0};m.prototype.isInProgress=function(){'use strict';return !!this.$VideoUploadPostRequestManager8};m.prototype.$VideoUploadPostRequestManager18=function(n){'use strict';clearTimeout(this.$VideoUploadPostRequestManager14);this.$VideoUploadPostRequestManager14=setTimeout(this.$VideoUploadPostRequestManager13.bind(this),n)};m.prototype.$VideoUploadPostRequestManager19=function(n,o){'use strict';return Math.pow(n,o)*1000};m.prototype.$VideoUploadPostRequestManager15=function(n){'use strict';var o=n.getPayload();this.inform('request-finished',{video_id:o.video_id,video_asset_id:o.video_asset_id,container_type:o.container_type,transport_retries:this.$VideoUploadPostRequestManager4,server_retries:this.$VideoUploadPostRequestManager7});this.clearRequest()};m.prototype.$VideoUploadPostRequestManager20=function(n){'use strict';this.inform('request-failed',{error_code:n.getError(),error_description:n.getErrorDescription(),error_summary:n.getErrorSummary(),transport_retries:this.$VideoUploadPostRequestManager4,server_retries:this.$VideoUploadPostRequestManager7,error_is_transient:n.isTransient()});this.clearRequest()};m.prototype.$VideoUploadPostRequestManager16=function(n){'use strict';this.$VideoUploadPostRequestManager8=null;this.$VideoUploadPostRequestManager4=0;if(n.isTransient()&&this.$VideoUploadPostRequestManager7<this.$VideoUploadPostRequestManager5){this.$VideoUploadPostRequestManager7++;this.$VideoUploadPostRequestManager18(this.$VideoUploadPostRequestManager19(this.$VideoUploadPostRequestManager6,this.$VideoUploadPostRequestManager7))}else this.$VideoUploadPostRequestManager20(n);};m.prototype.$VideoUploadPostRequestManager17=function(n){'use strict';if(this.$VideoUploadPostRequestManager2===0||this.$VideoUploadPostRequestManager4>=this.$VideoUploadPostRequestManager2){this.$VideoUploadPostRequestManager20(n)}else{this.$VideoUploadPostRequestManager4++;this.$VideoUploadPostRequestManager8=null;this.$VideoUploadPostRequestManager18(this.$VideoUploadPostRequestManager19(this.$VideoUploadPostRequestManager3,this.$VideoUploadPostRequestManager4))}};f.exports=m}),null);
__d('ResumableUploadServiceState.enum',[],(function a(b,c,d,e,f,g){'use strict';var h={CANCEL:'upload-cancel',FAIL:'upload-fail',FILE_TOO_LARGE:'upload-too-large',NOT_STARTED:'upload-not-started',PROGRESS:'upload-progress',START:'upload-start',SUCCESS:'upload-success',TRANSPORT_FAILURE:'upload-transport-fail'};f.exports=h}),null);
__d('ResumableUploadService',['Promise','AsyncRequest','EventEmitter','ResumableUploadServiceState.enum','URI','uuid'],(function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';var n,o;n=babelHelpers.inherits(p,j);o=n&&n.prototype;function p(q,r,s,t,u){o.constructor.call(this);this.consumer=q;this.accessToken=r;this.sessionKey=s||m();this.contentKey=t||'';this.contentValue=u||''}p.prototype.resume=function(q){var r=new l('https://rupload.facebook.com/'+this.consumer+'/'+this.sessionKey);if(this.contentKey&&this.contentValue)r=r.addQueryData(this.contentKey,this.contentValue);var s=function(){return new h(function(w,x){new i().disableInteractionServerTracing().setAllowCrossOrigin(true).setAllowCredentials(false).setMethod('GET').setURI(r).setReadOnly(true).setRequestHeader('Authorization','OAuth '+this.accessToken).setHandler(w).setErrorHandler(x).setOption('suppressEvaluation',true).setTransportErrorHandler(function(event){this.emit(k.TRANSPORT_FAILURE,event)}.bind(this)).send()}.bind(this))}.bind(this),t=function(w){return new h(function(x,y){var z=JSON.parse(w.payload.response),aa=z.offset;this.emit(k.START,{offset:aa});this.uploadAsyncRequest=new i().disableInteractionServerTracing().setAllowCrossOrigin(true).setAllowCredentials(false).setURI(r).setRawData(q.slice(aa)).setHandler(x).setErrorHandler(y).setRequestHeader('Authorization','OAuth '+this.accessToken).setRequestHeader('X-Entity-Name',encodeURIComponent(q.name)).setRequestHeader('X-Entity-Type',q.type).setRequestHeader('X-Entity-Length',String(q.size)).setRequestHeader('Offset',String(aa)).setOption('suppressEvaluation',true).setUploadProgressHandler(function(event){var ba=new ProgressEvent('upload-service',{total:q.size,loaded:event.loaded+Number(aa)});this.emit(k.PROGRESS,ba)}.bind(this)).setTransportErrorHandler(function(event){this.emit(k.TRANSPORT_FAILURE,event)}.bind(this));this.uploadAsyncRequest.send()}.bind(this))}.bind(this),u=function(w){if(w!=null){var x=JSON.parse(w.payload.response);this.emit(k.SUCCESS,x.h)}else this.emit(k.FAIL,'uploading failed');}.bind(this),v=function(w){return this.emit(k.FAIL,w)}.bind(this);return s().then(t,v).then(u,v)};p.prototype.cancel=function(){this.uploadAsyncRequest&&this.uploadAsyncRequest.abort();this.emit(k.CANCEL)};f.exports=p}),null);
__d('VideoUploadConnectionMonitor',['ArbiterMixin','Network','VideoUploadFeatureDetector','debounce','mixin'],(function a(b,c,d,e,f,g,h,i,j,k,l){var m,n;m=babelHelpers.inherits(o,l(h));n=m&&m.prototype;function o(){'use strict';n.constructor.call(this);this.$VideoUploadConnectionMonitor1=false;this.$VideoUploadConnectionMonitor2=[];this.$VideoUploadConnectionMonitor3=false;this.$VideoUploadConnectionMonitor4=true;this.$VideoUploadConnectionMonitor5=k(function(){this.$VideoUploadConnectionMonitor6(false)}.bind(this),2000)}o.prototype.notifyStart=function(){'use strict';if(this.$VideoUploadConnectionMonitor3)return;if(this.$VideoUploadConnectionMonitor2.length===0){this.$VideoUploadConnectionMonitor2.push(i.addListener('online',function(){this.$VideoUploadConnectionMonitor6(true)}.bind(this)));this.$VideoUploadConnectionMonitor2.push(i.addListener('offline',function(){if(this.$VideoUploadConnectionMonitor1){this.$VideoUploadConnectionMonitor5()}else{this.$VideoUploadConnectionMonitor5.reset();setTimeout(this.$VideoUploadConnectionMonitor5,2000)}}.bind(this)))}this.$VideoUploadConnectionMonitor3=true};o.prototype.notifyProgress=function(event){'use strict';if(!this.$VideoUploadConnectionMonitor3)return;if(!event)return;if(j.supportsFullProgress()){this.$VideoUploadConnectionMonitor1=true;if(event.total&&event.loaded===event.total){this.$VideoUploadConnectionMonitor5.reset()}else this.$VideoUploadConnectionMonitor5();}};o.prototype.notifySuccess=function(){'use strict';if(!this.$VideoUploadConnectionMonitor3)return;this.reset();this.$VideoUploadConnectionMonitor6(true)};o.prototype.notifyTransportError=function(){'use strict';if(!this.$VideoUploadConnectionMonitor3)return;this.$VideoUploadConnectionMonitor3=false;this.$VideoUploadConnectionMonitor6(false)};o.prototype.notifyError=function(){'use strict';if(!this.$VideoUploadConnectionMonitor3)return;this.reset();this.$VideoUploadConnectionMonitor6(true)};o.prototype.isOnline=function(){'use strict';return this.$VideoUploadConnectionMonitor4};o.prototype.reset=function(){'use strict';while(this.$VideoUploadConnectionMonitor2.length)this.$VideoUploadConnectionMonitor2.pop().remove();this.$VideoUploadConnectionMonitor5.reset();this.$VideoUploadConnectionMonitor3=false};o.prototype.$VideoUploadConnectionMonitor6=function(p){'use strict';this.$VideoUploadConnectionMonitor5.reset();if(this.$VideoUploadConnectionMonitor4!==p){this.$VideoUploadConnectionMonitor4=p;if(this.$VideoUploadConnectionMonitor4){this.inform('online')}else this.inform('offline');}};f.exports=o}),null);
__d('VideoUploadReceiveRequestManager',['ArbiterMixin','VideoUploadConnectionMonitor','VideoUploadRequest','ResumableUploadService','ResumableUploadServiceState.enum','md5','mixin','fbt'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p,q,r=1363037;p=babelHelpers.inherits(s,n(h));q=p&&p.prototype;function s(t,u,v,w,x,y,z,aa,ba){var ca=arguments.length<=9||arguments[9]===undefined?'':arguments[9],da=arguments.length<=10||arguments[10]===undefined?false:arguments[10];'use strict';q.constructor.call(this);this.$VideoUploadReceiveRequestManager1=t;this.$VideoUploadReceiveRequestManager2=u;this.$VideoUploadReceiveRequestManager3=v;this.$VideoUploadReceiveRequestManager4=w;this.$VideoUploadReceiveRequestManager5=x;this.$VideoUploadReceiveRequestManager6=y;this.$VideoUploadReceiveRequestManager7=z;this.$VideoUploadReceiveRequestManager8=aa;this.$VideoUploadReceiveRequestManager9=ba;this.$VideoUploadReceiveRequestManager10=0;this.$VideoUploadReceiveRequestManager11=0;this.$VideoUploadReceiveRequestManager12=0;this.$VideoUploadReceiveRequestManager13=null;this.$VideoUploadReceiveRequestManager14=null;this.$VideoUploadReceiveRequestManager15=0;this.$VideoUploadReceiveRequestManager16='constructed';this.$VideoUploadReceiveRequestManager17=null;this.$VideoUploadReceiveRequestManager18=ca;this.$VideoUploadReceiveRequestManager19=da;this.$VideoUploadReceiveRequestManager20=new i();this.$VideoUploadReceiveRequestManager20.subscribe('online',this.$VideoUploadReceiveRequestManager21.bind(this));this.$VideoUploadReceiveRequestManager20.subscribe('offline',this.$VideoUploadReceiveRequestManager22.bind(this))}s.prototype.sendRequest=function(t){'use strict';this.$VideoUploadReceiveRequestManager16='sending request';if(this.$VideoUploadReceiveRequestManager23){this.$VideoUploadReceiveRequestManager16='request already in progress';return}this.$VideoUploadReceiveRequestManager15=t.getEndOffset()-t.getStartOffset();this.$VideoUploadReceiveRequestManager24=t;this.$VideoUploadReceiveRequestManager25()};s.prototype.cancelRequest=function(){'use strict';if(!this.$VideoUploadReceiveRequestManager23)return;this.$VideoUploadReceiveRequestManager23.abort();if(this.$VideoUploadReceiveRequestManager17!==null)this.$VideoUploadReceiveRequestManager17.cancel();this.$VideoUploadReceiveRequestManager26()};s.prototype.appendStateLogData=function(t,u){'use strict';t[u+'request_manager_state']=this.$VideoUploadReceiveRequestManager16;t[u+'upload_speed']=this.$VideoUploadReceiveRequestManager14;t[u+'transport_retries']=this.$VideoUploadReceiveRequestManager10;t[u+'server_retries']=this.$VideoUploadReceiveRequestManager11;t[u+'timeout_retries']=this.$VideoUploadReceiveRequestManager12;t[u+'last_timeout_value']=this.$VideoUploadReceiveRequestManager27;t[u+'last_request_start_time']=this.$VideoUploadReceiveRequestManager13;t[u+'pending_request']=this.$VideoUploadReceiveRequestManager23!=null;t[u+'pending_timer']=this.$VideoUploadReceiveRequestManager28!=null;t[u+'cached_chunk']=this.$VideoUploadReceiveRequestManager29!=null;if(this.$VideoUploadReceiveRequestManager24!=null){t[u+'start_offset']=this.$VideoUploadReceiveRequestManager24.getStartOffset();t[u+'end_offset']=this.$VideoUploadReceiveRequestManager24.getEndOffset();t[u+'partition_start_offset']=this.$VideoUploadReceiveRequestManager24.getPartitionStartOffset();t[u+'partition_end_offset']=this.$VideoUploadReceiveRequestManager24.getPartitionEndOffset()}if(this.$VideoUploadReceiveRequestManager20!=null)t[u+'connection_monitor_online']=this.$VideoUploadReceiveRequestManager20.isOnline();};s.prototype.$VideoUploadReceiveRequestManager26=function(){'use strict';this.$VideoUploadReceiveRequestManager23=null;this.$VideoUploadReceiveRequestManager29=null;this.$VideoUploadReceiveRequestManager10=0;this.$VideoUploadReceiveRequestManager11=0;this.$VideoUploadReceiveRequestManager12=0;this.$VideoUploadReceiveRequestManager13=null;this.$VideoUploadReceiveRequestManager14=null;this.$VideoUploadReceiveRequestManager15=0;this.$VideoUploadReceiveRequestManager24.reset();this.$VideoUploadReceiveRequestManager20.reset();clearTimeout(this.$VideoUploadReceiveRequestManager28);this.$VideoUploadReceiveRequestManager28=null};s.prototype.$VideoUploadReceiveRequestManager25=function(t){'use strict';clearTimeout(this.$VideoUploadReceiveRequestManager28);this.$VideoUploadReceiveRequestManager28=null;if(this.$VideoUploadReceiveRequestManager24.getSupportsChunking()&&this.$VideoUploadReceiveRequestManager24.getStartOffset()>=this.$VideoUploadReceiveRequestManager24.getPartitionEndOffset()){if(!t){this.inform('request-finished',{start_offset:this.$VideoUploadReceiveRequestManager24.getEndOffset()-1,end_offset:this.$VideoUploadReceiveRequestManager24.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager10,server_retries:this.$VideoUploadReceiveRequestManager11,upload_speed:this.$VideoUploadReceiveRequestManager14,request_manager_state:this.$VideoUploadReceiveRequestManager16});this.$VideoUploadReceiveRequestManager16='request finished - notified'}else this.$VideoUploadReceiveRequestManager16='request finished - not notified';return}this.$VideoUploadReceiveRequestManager23=this.__getVideoUploadRequest(this.$VideoUploadReceiveRequestManager1).setAllowCrossOrigin(true).setData(this.__createRequestData(this.$VideoUploadReceiveRequestManager24)).setWaterfallID(this.$VideoUploadReceiveRequestManager24.getWaterfallID()).setSuccessHandler(this.__handleSuccessResponse.bind(this)).setErrorHandler(this.__handleServerFailureResponse.bind(this)).setTransportErrorHandler(this.$VideoUploadReceiveRequestManager30.bind(this));if(!this.$VideoUploadReceiveRequestManager19)this.$VideoUploadReceiveRequestManager23.setUploadProgressHandler(this.$VideoUploadReceiveRequestManager31.bind(this));this.$VideoUploadReceiveRequestManager13=Date.now();if(this.$VideoUploadReceiveRequestManager24.getSupportsChunking()){if(this.$VideoUploadReceiveRequestManager4){var u=this.$VideoUploadReceiveRequestManager32(this.$VideoUploadReceiveRequestManager24.getEndOffset()-this.$VideoUploadReceiveRequestManager24.getStartOffset(),this.$VideoUploadReceiveRequestManager14);this.$VideoUploadReceiveRequestManager23.setTimeoutHandler(u,this.__handleResponseTimeout.bind(this));this.$VideoUploadReceiveRequestManager16='sending chunk with timeout = '+u;this.$VideoUploadReceiveRequestManager27=u}else this.$VideoUploadReceiveRequestManager16='sending chunk without timeout';var v=this.$VideoUploadReceiveRequestManager33();if(this.$VideoUploadReceiveRequestManager19){this.$VideoUploadReceiveRequestManager34(v)}else this.$VideoUploadReceiveRequestManager23.sendChunk(v);}else{this.$VideoUploadReceiveRequestManager16='sending file';this.$VideoUploadReceiveRequestManager23.sendFile(this.$VideoUploadReceiveRequestManager24.getFile().getFileInput())}this.$VideoUploadReceiveRequestManager20.notifyStart();this.inform('request-started',{start_offset:this.$VideoUploadReceiveRequestManager24.getStartOffset(),end_offset:this.$VideoUploadReceiveRequestManager24.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager10,server_retries:this.$VideoUploadReceiveRequestManager11,upload_speed:this.$VideoUploadReceiveRequestManager14,request_manager_state:this.$VideoUploadReceiveRequestManager16})};s.prototype.$VideoUploadReceiveRequestManager34=function(t){'use strict';var u=this.$VideoUploadReceiveRequestManager24.getFile(),v=m(u.getFile().lastModified+u.getFile().name+u.getFile().type+this.$VideoUploadReceiveRequestManager24.getWaterfallID())+'-'+this.$VideoUploadReceiveRequestManager24.getStartOffset()+'-'+this.$VideoUploadReceiveRequestManager24.getEndOffset();this.$VideoUploadReceiveRequestManager17=new k('fb_video',this.$VideoUploadReceiveRequestManager18,v,null,null);this.$VideoUploadReceiveRequestManager35();this.$VideoUploadReceiveRequestManager17.resume(t);this.inform('resumable-called')};s.prototype.$VideoUploadReceiveRequestManager35=function(){'use strict';this.$VideoUploadReceiveRequestManager17.addListener(l.START,function(t){this.inform('resumable-started',{resume_from_offset:t.offset})}.bind(this));this.$VideoUploadReceiveRequestManager17.addListener(l.FAIL,function(t){this.inform('resumable-failed',{error_code:t.getError(),error_description:t.getErrorDescription(),error_summary:t.getErrorSummary(),error_is_transient:t.isTransient()});this.__handleServerFailureResponse(t)}.bind(this));this.$VideoUploadReceiveRequestManager17.addListener(l.SUCCESS,function(t){this.$VideoUploadReceiveRequestManager23.setHandle(t);this.$VideoUploadReceiveRequestManager23.sendChunk(null);this.inform('resumable-success',{everstore_handle:t})}.bind(this));this.$VideoUploadReceiveRequestManager17.addListener(l.TRANSPORT_FAILURE,function(t){this.inform('resumable-failed',{error_code:t.getError(),error_description:t.getErrorDescription(),error_summary:t.getErrorSummary(),error_is_transient:t.isTransient()});this.$VideoUploadReceiveRequestManager30(t)}.bind(this));this.$VideoUploadReceiveRequestManager17.addListener(l.PROGRESS,function(event){this.$VideoUploadReceiveRequestManager31(event)}.bind(this))};s.prototype.__getVideoUploadRequest=function(t){'use strict';return new j(t)};s.prototype.$VideoUploadReceiveRequestManager36=function(t){'use strict';this.$VideoUploadReceiveRequestManager16='setting request to send after'+t;clearTimeout(this.$VideoUploadReceiveRequestManager28);this.$VideoUploadReceiveRequestManager28=setTimeout(this.$VideoUploadReceiveRequestManager25.bind(this),t)};s.prototype.$VideoUploadReceiveRequestManager33=function(){'use strict';if(this.$VideoUploadReceiveRequestManager29)return this.$VideoUploadReceiveRequestManager29;if(this.$VideoUploadReceiveRequestManager19){this.$VideoUploadReceiveRequestManager29=this.$VideoUploadReceiveRequestManager24.getFile().getFile().slice(this.$VideoUploadReceiveRequestManager24.getStartOffset(),this.$VideoUploadReceiveRequestManager24.getEndOffset(),'application/octet-stream')}else this.$VideoUploadReceiveRequestManager29=this.$VideoUploadReceiveRequestManager24.getFile().getChunk(this.$VideoUploadReceiveRequestManager24.getStartOffset(),this.$VideoUploadReceiveRequestManager24.getEndOffset());return this.$VideoUploadReceiveRequestManager29};s.prototype.__createRequestData=function(t){'use strict';return {video_id:t.getVideoID(),start_offset:t.getStartOffset(),end_offset:t.getEndOffset(),source:t.getSource(),target_id:t.getTargetID(),waterfall_id:t.getWaterfallID(),composer_entry_point_ref:t.getComposerEntryPointRef&&t.getComposerEntryPointRef(),supports_chunking:t.getSupportsChunking(),upload_speed:this.$VideoUploadReceiveRequestManager14,partition_start_offset:t.getPartitionStartOffset(),partition_end_offset:t.getPartitionEndOffset()}};s.prototype.__handleSuccessResponse=function(t){'use strict';this.$VideoUploadReceiveRequestManager16='success response received';var u=Date.now()-this.$VideoUploadReceiveRequestManager13;u=u===0?1:u;var v=t.getPayload();if(v.start_offset===this.$VideoUploadReceiveRequestManager24.getEndOffset()){var w=this.$VideoUploadReceiveRequestManager24.getEndOffset()-this.$VideoUploadReceiveRequestManager24.getStartOffset();this.$VideoUploadReceiveRequestManager14=Math.floor(w/u)}else this.$VideoUploadReceiveRequestManager14=null;this.$VideoUploadReceiveRequestManager20.notifySuccess();this.inform('request-finished',{start_offset:this.$VideoUploadReceiveRequestManager24.getStartOffset(),end_offset:this.$VideoUploadReceiveRequestManager24.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager10,server_retries:this.$VideoUploadReceiveRequestManager11,upload_speed:this.$VideoUploadReceiveRequestManager14,request_manager_state:this.$VideoUploadReceiveRequestManager16});this.$VideoUploadReceiveRequestManager24.setStartOffset(v.start_offset);this.$VideoUploadReceiveRequestManager24.setEndOffset(v.end_offset);this.$VideoUploadReceiveRequestManager24.setLastKnownUploadSpeed(this.$VideoUploadReceiveRequestManager14);this.$VideoUploadReceiveRequestManager23=null;this.$VideoUploadReceiveRequestManager29=null;this.$VideoUploadReceiveRequestManager10=0;this.$VideoUploadReceiveRequestManager11=0;this.$VideoUploadReceiveRequestManager12=0;if(this.$VideoUploadReceiveRequestManager24.getSupportsChunking())this.$VideoUploadReceiveRequestManager25(true);};s.prototype.__handleServerFailureResponse=function(t){'use strict';this.$VideoUploadReceiveRequestManager16='failure response received';this.$VideoUploadReceiveRequestManager23=null;this.$VideoUploadReceiveRequestManager10=0;this.$VideoUploadReceiveRequestManager14=null;this.$VideoUploadReceiveRequestManager12=0;this.$VideoUploadReceiveRequestManager20.notifyError();if(this.__hasInvalidStartOffsetAndHasRetries(t.getError())){this.$VideoUploadReceiveRequestManager11++;var u=t.getPayload();this.$VideoUploadReceiveRequestManager16='invalid offset response received start='+u.start_offset+' end='+u.end_offset;if(this.$VideoUploadReceiveRequestManager24.getStartOffset()!=u.start_offset||this.$VideoUploadReceiveRequestManager24.getEndOffset()!=u.end_offset){this.$VideoUploadReceiveRequestManager24.setStartOffset(u.start_offset);this.$VideoUploadReceiveRequestManager24.setEndOffset(u.end_offset);this.$VideoUploadReceiveRequestManager29=null}this.$VideoUploadReceiveRequestManager25()}else if((t.isTransient()||this.$VideoUploadReceiveRequestManager9)&&this.$VideoUploadReceiveRequestManager11<this.$VideoUploadReceiveRequestManager3){this.$VideoUploadReceiveRequestManager16='transient server error';this.$VideoUploadReceiveRequestManager11++;this.$VideoUploadReceiveRequestManager36(this.$VideoUploadReceiveRequestManager37(this.$VideoUploadReceiveRequestManager8,this.$VideoUploadReceiveRequestManager11))}else this.$VideoUploadReceiveRequestManager38(t);};s.prototype.__handleResponseTimeout=function(t){'use strict';this.inform('request-timeout',{start_offset:this.$VideoUploadReceiveRequestManager24.getStartOffset(),end_offset:this.$VideoUploadReceiveRequestManager24.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager10,server_retries:this.$VideoUploadReceiveRequestManager11,timeout_retries:this.$VideoUploadReceiveRequestManager12,upload_speed:this.$VideoUploadReceiveRequestManager14,request_manager_state:this.$VideoUploadReceiveRequestManager16});this.$VideoUploadReceiveRequestManager23.abort();this.$VideoUploadReceiveRequestManager23=null;this.$VideoUploadReceiveRequestManager14=null;this.$VideoUploadReceiveRequestManager20.notifyTransportError();if(++this.$VideoUploadReceiveRequestManager12<=this.$VideoUploadReceiveRequestManager5){var u=this.$VideoUploadReceiveRequestManager24.getEndOffset()-this.$VideoUploadReceiveRequestManager24.getStartOffset();u=Math.floor(u/2);u=Math.max(u,this.$VideoUploadReceiveRequestManager15);var v=this.$VideoUploadReceiveRequestManager24.getEndOffset();v=Math.min(v,this.$VideoUploadReceiveRequestManager24.getStartOffset()+u);this.$VideoUploadReceiveRequestManager24.setEndOffset(v);this.$VideoUploadReceiveRequestManager29=null;this.$VideoUploadReceiveRequestManager16='resending after timeout with chunksize='+u;this.$VideoUploadReceiveRequestManager25()}else this.$VideoUploadReceiveRequestManager39({error_code:1006,error_description:o._("Parece que tu navegador est\u00e1 desconectado. Comprueba la conexi\u00f3n de internet y vuelve a intentarlo."),error_summary:o._("No hay conexi\u00f3n de red"),error_is_transient:true});};s.prototype.__hasInvalidStartOffsetAndHasRetries=function(t){'use strict';return t===r&&this.$VideoUploadReceiveRequestManager11<this.$VideoUploadReceiveRequestManager3};s.prototype.$VideoUploadReceiveRequestManager30=function(t){'use strict';this.$VideoUploadReceiveRequestManager20.notifyTransportError();this.$VideoUploadReceiveRequestManager14=null;this.$VideoUploadReceiveRequestManager12=0;if(this.$VideoUploadReceiveRequestManager10<this.$VideoUploadReceiveRequestManager2){this.$VideoUploadReceiveRequestManager16='resending after transport failure';this.$VideoUploadReceiveRequestManager10++;this.$VideoUploadReceiveRequestManager23=null;this.$VideoUploadReceiveRequestManager36(this.$VideoUploadReceiveRequestManager37(this.$VideoUploadReceiveRequestManager7,this.$VideoUploadReceiveRequestManager10))}else this.$VideoUploadReceiveRequestManager38(t);};s.prototype.$VideoUploadReceiveRequestManager38=function(t){'use strict';this.$VideoUploadReceiveRequestManager39({error_code:t.getError(),error_description:t.getErrorDescription(),error_summary:t.getErrorSummary(),error_is_transient:t.isTransient()})};s.prototype.$VideoUploadReceiveRequestManager39=function(t){'use strict';this.$VideoUploadReceiveRequestManager16='handling failure error';this.inform('request-failed',t);this.$VideoUploadReceiveRequestManager26()};s.prototype.$VideoUploadReceiveRequestManager31=function(event){'use strict';this.$VideoUploadReceiveRequestManager20.notifyProgress(event);this.inform('request-progressed',{file_size:this.$VideoUploadReceiveRequestManager24.getFile().getSize(),start_offset:this.$VideoUploadReceiveRequestManager24.getStartOffset(),sent_bytes:event.loaded,transport_retries:this.$VideoUploadReceiveRequestManager10})};s.prototype.$VideoUploadReceiveRequestManager21=function(event){'use strict';this.inform('online');this.$VideoUploadReceiveRequestManager10=0;this.$VideoUploadReceiveRequestManager12=0;if(this.$VideoUploadReceiveRequestManager28)this.$VideoUploadReceiveRequestManager25();};s.prototype.$VideoUploadReceiveRequestManager22=function(event){'use strict';this.inform('offline')};s.prototype.$VideoUploadReceiveRequestManager37=function(t,u){'use strict';if(this.$VideoUploadReceiveRequestManager19)return Math.min(Math.pow(t,u),8)*1000;return Math.pow(t,u)*1000};s.prototype.$VideoUploadReceiveRequestManager32=function(t,u){'use strict';var v;if(u>0){v=u}else v=10;var w=Math.floor(t/v*this.$VideoUploadReceiveRequestManager6/100);return Math.max(w,30000)};f.exports=s}),null);
__d("VideoUploadRequestContext",[],(function a(b,c,d,e,f,g){function h(){"use strict";this.reset()}h.prototype.setFile=function(i){"use strict";this.$VideoUploadRequestContext1=i;return this};h.prototype.getFile=function(){"use strict";return this.$VideoUploadRequestContext1};h.prototype.setMetadata=function(i){"use strict";this.$VideoUploadRequestContext2=i;return this};h.prototype.getMetadata=function(){"use strict";return this.$VideoUploadRequestContext2};h.prototype.setVideoID=function(i){"use strict";this.$VideoUploadRequestContext3=i;return this};h.prototype.getVideoID=function(){"use strict";return this.$VideoUploadRequestContext3};h.prototype.setStartOffset=function(i){"use strict";this.$VideoUploadRequestContext4=i;return this};h.prototype.getStartOffset=function(){"use strict";return this.$VideoUploadRequestContext4};h.prototype.setEndOffset=function(i){"use strict";this.$VideoUploadRequestContext5=i;return this};h.prototype.getEndOffset=function(){"use strict";return this.$VideoUploadRequestContext5};h.prototype.setPartitionStartOffset=function(i){"use strict";this.$VideoUploadRequestContext6=i;return this};h.prototype.getPartitionStartOffset=function(){"use strict";return this.$VideoUploadRequestContext6};h.prototype.setPartitionEndOffset=function(i){"use strict";this.$VideoUploadRequestContext7=i;return this};h.prototype.getPartitionEndOffset=function(){"use strict";return this.$VideoUploadRequestContext7};h.prototype.setTargetID=function(i){"use strict";this.$VideoUploadRequestContext8=i;return this};h.prototype.getTargetID=function(){"use strict";return this.$VideoUploadRequestContext8};h.prototype.setSource=function(i){"use strict";this.$VideoUploadRequestContext9=i;return this};h.prototype.getSource=function(){"use strict";return this.$VideoUploadRequestContext9};h.prototype.setWaterfallID=function(i){"use strict";this.$VideoUploadRequestContext10=i;return this};h.prototype.getWaterfallID=function(){"use strict";return this.$VideoUploadRequestContext10};h.prototype.setComposerEntryPointRef=function(i){"use strict";this.$VideoUploadRequestContext11=i};h.prototype.getComposerEntryPointRef=function(){"use strict";return this.$VideoUploadRequestContext11};h.prototype.setSupportsChunking=function(i){"use strict";this.$VideoUploadRequestContext12=i;return this};h.prototype.getSupportsChunking=function(){"use strict";return this.$VideoUploadRequestContext12};h.prototype.setSupportsFileAPI=function(i){"use strict";this.$VideoUploadRequestContext13=i;return this};h.prototype.getSupportsFileAPI=function(){"use strict";return this.$VideoUploadRequestContext13};h.prototype.setCreatorProduct=function(i){"use strict";this.$VideoUploadRequestContext14=i;return this};h.prototype.getCreatorProduct=function(){"use strict";return this.$VideoUploadRequestContext14};h.prototype.setLastKnownUploadSpeed=function(i){"use strict";this.$VideoUploadRequestContext15=i};h.prototype.getLastKnownUploadSpeed=function(){"use strict";return this.$VideoUploadRequestContext15||0};h.prototype.setUseParallelChunks=function(i){"use strict";this.$VideoUploadRequestContext16=i};h.prototype.getUseParallelChunks=function(){"use strict";return this.$VideoUploadRequestContext16};h.prototype.setIsSphericalVideo=function(i){"use strict";this.$VideoUploadRequestContext17=i};h.prototype.getIsSphericalVideo=function(){"use strict";return this.$VideoUploadRequestContext17};h.prototype.setSphericalMetadata=function(i){"use strict";this.$VideoUploadRequestContext18=i};h.prototype.getSphericalMetadata=function(){"use strict";return this.$VideoUploadRequestContext18};h.prototype.setEnableOmnistab=function(i){"use strict";this.$VideoUploadRequestContext19=i};h.prototype.getEnableOmnistab=function(){"use strict";return this.$VideoUploadRequestContext19};h.prototype.reset=function(){"use strict";this.$VideoUploadRequestContext1=null;this.$VideoUploadRequestContext3=null;this.$VideoUploadRequestContext4=null;this.$VideoUploadRequestContext5=null;this.$VideoUploadRequestContext8=null;this.$VideoUploadRequestContext9=null;this.$VideoUploadRequestContext10=null;this.$VideoUploadRequestContext11=null;this.$VideoUploadRequestContext12=null;this.$VideoUploadRequestContext13=null;this.$VideoUploadRequestContext6=null;this.$VideoUploadRequestContext7=null;this.$VideoUploadRequestContext14=null;this.$VideoUploadRequestContext15=0;this.$VideoUploadRequestContext16=false;this.$VideoUploadRequestContext17=false;this.$VideoUploadRequestContext2={};this.$VideoUploadRequestContext18={};this.$VideoUploadRequestContext19=false};f.exports=h}),null);
__d("ManagedError",[],(function a(b,c,d,e,f,g){function h(i,j){Error.prototype.constructor.call(this,i);this.message=i;this.innerError=j}h.prototype=new Error();h.prototype.constructor=h;f.exports=h}),null);
__d('AssertionError',['ManagedError'],(function a(b,c,d,e,f,g,h){function i(j){h.prototype.constructor.apply(this,arguments)}i.prototype=new h();i.prototype.constructor=i;f.exports=i}),null);
__d('Assert',['AssertionError','sprintf'],(function a(b,c,d,e,f,g,h,i){function j(o,p){if(typeof o!=='boolean'||!o)throw new h(p);return o}function k(o,p,q){var r;if(p===undefined){r='undefined'}else if(p===null){r='null'}else{var s=Object.prototype.toString.call(p);r=/\s(\w*)/.exec(s)[1].toLowerCase()}j(o.indexOf(r)!==-1,q||i('Expression is of type %s, not %s',r,o));return p}function l(o,p,q){j(p instanceof o,q||'Expression not instance of type');return p}function m(o,p){n['is'+o]=p;n['maybe'+o]=function(q,r){if(q!=null)p(q,r);}}var n={isInstanceOf:l,isTrue:j,isTruthy:function o(p,q){return j(!!p,q)},type:k,define:function o(p,q){p=p.substring(0,1).toUpperCase()+p.substring(1).toLowerCase();m(p,function(r,s){j(q(r),s)})}};['Array','Boolean','Date','Function','Null','Number','Object','Regexp','String','Undefined'].forEach(function(o){m(o,k.bind(null,o.toLowerCase()))});f.exports=n}),null);
__d('VideoUploadStartRequestManager',['ArbiterMixin','VideoUploadRequest','FileHasher','performanceNow','mixin','Assert'],(function a(b,c,d,e,f,g,h,i,j,k,l,m){var n,o;n=babelHelpers.inherits(p,l(h));o=n&&n.prototype;function p(q,r,s,t,u,v,w){'use strict';o.constructor.call(this);this.$VideoUploadStartRequestManager1=q;this.$VideoUploadStartRequestManager2=r;this.$VideoUploadStartRequestManager3=s;this.$VideoUploadStartRequestManager4=0;this.$VideoUploadStartRequestManager5=t;this.$VideoUploadStartRequestManager6=u;this.$VideoUploadStartRequestManager7=v;this.$VideoUploadStartRequestManager8=w;this.$VideoUploadStartRequestManager9=0}p.prototype.getRequest=function(){'use strict';return this.$VideoUploadStartRequestManager10};p.prototype.sendRequest=function(q){'use strict';if(this.$VideoUploadStartRequestManager11||this.$VideoUploadStartRequestManager10)return;this.$VideoUploadStartRequestManager12=q;if(this.$VideoUploadStartRequestManager5&&this.$VideoUploadStartRequestManager12.getFile().getFile()&&this.$VideoUploadStartRequestManager12.getFile().getFile().size<this.$VideoUploadStartRequestManager6&&j.isSupported()){this.$VideoUploadStartRequestManager13=k();this.$VideoUploadStartRequestManager11=new j();this.$VideoUploadStartRequestManager11.hash(this.$VideoUploadStartRequestManager12.getFile().getFile(),function(r){this.$VideoUploadStartRequestManager13=k()-this.$VideoUploadStartRequestManager13;this.$VideoUploadStartRequestManager14=r.hash;this.$VideoUploadStartRequestManager11.destroy();this.$VideoUploadStartRequestManager11=null;if(!r.hash)this.$VideoUploadStartRequestManager15=r.exception;this.$VideoUploadStartRequestManager16()}.bind(this))}else this.$VideoUploadStartRequestManager16();};p.prototype.$VideoUploadStartRequestManager16=function(){'use strict';this.$VideoUploadStartRequestManager17();this.inform('request-started',{hash_time:this.$VideoUploadStartRequestManager13,hash_exception:this.$VideoUploadStartRequestManager15})};p.prototype.$VideoUploadStartRequestManager17=function(){'use strict';clearTimeout(this.$VideoUploadStartRequestManager18);this.$VideoUploadStartRequestManager18=null;this.$VideoUploadStartRequestManager10=this.__getVideoUploadRequest(this.$VideoUploadStartRequestManager1).setAllowCrossOrigin(true).setData(this.__getDataToSend(this.$VideoUploadStartRequestManager12,this.$VideoUploadStartRequestManager14)).setWaterfallID(this.$VideoUploadStartRequestManager12.getWaterfallID()).setSuccessHandler(this.$VideoUploadStartRequestManager19.bind(this)).setErrorHandler(this.$VideoUploadStartRequestManager20.bind(this)).setTransportErrorHandler(this.$VideoUploadStartRequestManager21.bind(this));this.$VideoUploadStartRequestManager10.send()};p.prototype.__getVideoUploadRequest=function(q){'use strict';return new i(q)};p.prototype.__getDataToSend=function(q,r){'use strict';return {file_size:q.getFile().getSize(),file_extension:q.getFile().getExtension(),target_id:q.getTargetID(),source:q.getSource(),waterfall_id:q.getWaterfallID(),composer_entry_point_ref:q.getComposerEntryPointRef&&q.getComposerEntryPointRef(),supports_chunking:q.getSupportsChunking(),supports_file_api:q.getSupportsFileAPI(),partition_start_offset:q.getPartitionStartOffset(),partition_end_offset:q.getPartitionEndOffset(),creator_product:q.getCreatorProduct(),original_file_hash:r,spherical:q.getIsSphericalVideo(),spherical_metadata:q.getSphericalMetadata()}};p.prototype.cancelRequest=function(){'use strict';this.$VideoUploadStartRequestManager22()};p.prototype.$VideoUploadStartRequestManager23=function(q){'use strict';clearTimeout(this.$VideoUploadStartRequestManager18);this.$VideoUploadStartRequestManager18=setTimeout(this.$VideoUploadStartRequestManager17.bind(this),q)};p.prototype.$VideoUploadStartRequestManager22=function(){'use strict';if(this.$VideoUploadStartRequestManager11){this.$VideoUploadStartRequestManager11.destroy();this.$VideoUploadStartRequestManager11=null}if(this.$VideoUploadStartRequestManager10){this.$VideoUploadStartRequestManager10.abort();this.$VideoUploadStartRequestManager10=null}this.$VideoUploadStartRequestManager9=0;this.$VideoUploadStartRequestManager4=0;this.$VideoUploadStartRequestManager12=null;clearTimeout(this.$VideoUploadStartRequestManager18);this.$VideoUploadStartRequestManager18=null};p.prototype.$VideoUploadStartRequestManager24=function(q,r){'use strict';return Math.pow(q,r)*1000};p.prototype.$VideoUploadStartRequestManager19=function(q){'use strict';var r=q.getPayload();this.inform('request-finished',this.__getSuccessInformData(r));this.$VideoUploadStartRequestManager10=null;m.isTrue(this.$VideoUploadStartRequestManager11==null,'Unexpected: if file hasher is not null, clean up is required.')};p.prototype.__getSuccessInformData=function(q){'use strict';return {video_id:q.video_id,start_offset:q.start_offset,end_offset:q.end_offset,transport_retries:this.$VideoUploadStartRequestManager4,server_retries:this.$VideoUploadStartRequestManager9,skip_upload:q.skip_upload,hash_time:this.$VideoUploadStartRequestManager13}};p.prototype.$VideoUploadStartRequestManager25=function(q){'use strict';this.inform('request-failed',this.$VideoUploadStartRequestManager26(q));this.$VideoUploadStartRequestManager10=null;m.isTrue(this.$VideoUploadStartRequestManager11==null,'Unexpected: if file hasher is not null, clean up is required.')};p.prototype.$VideoUploadStartRequestManager20=function(q){'use strict';this.$VideoUploadStartRequestManager10=null;this.$VideoUploadStartRequestManager4=0;if(q.isTransient()&&this.$VideoUploadStartRequestManager9<this.$VideoUploadStartRequestManager7){this.$VideoUploadStartRequestManager9++;this.$VideoUploadStartRequestManager23(this.$VideoUploadStartRequestManager24(this.$VideoUploadStartRequestManager8,this.$VideoUploadStartRequestManager9))}else this.$VideoUploadStartRequestManager25(q);};p.prototype.$VideoUploadStartRequestManager21=function(q){'use strict';if(this.$VideoUploadStartRequestManager2===0||this.$VideoUploadStartRequestManager4>=this.$VideoUploadStartRequestManager2){this.$VideoUploadStartRequestManager25(q)}else{this.$VideoUploadStartRequestManager4++;this.$VideoUploadStartRequestManager10=null;this.$VideoUploadStartRequestManager23(this.$VideoUploadStartRequestManager24(this.$VideoUploadStartRequestManager3,this.$VideoUploadStartRequestManager4))}};p.prototype.$VideoUploadStartRequestManager26=function(q){'use strict';return {error_code:q.getError(),error_description:q.getErrorDescription(),error_summary:q.getErrorSummary(),transport_retries:this.$VideoUploadStartRequestManager4,server_retries:this.$VideoUploadStartRequestManager9,error_is_transient:q.isTransient()}};f.exports=p}),null);
__d('VideoUploadSession',['ArbiterMixin','AsyncRequest','VideoUploadCrashMonitor','VideoUploadFeatureDetector','VideoUploadFileValidator','VideoUploadLogger','VideoUploadMetadataParser','VideoUploadPostRequestManager','VideoUploadReceiveRequestManager','VideoUploadRequestContext','VideoUploadStartRequestManager','WaterfallIDGenerator','mixin'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u,v;u=babelHelpers.inherits(w,t(h));v=u&&u.prototype;function w(x){'use strict';v.constructor.call(this);this.$VideoUploadSession1=x.source;this.$VideoUploadSession2=x.target_id;this.$VideoUploadSession3=x.logging_delay;this.$VideoUploadSession4=x.silent_file_validation;this.$VideoUploadSession5=x.background_upload;this.$VideoUploadSession6=x.actor_id;this.$VideoUploadSession7=x.composer_entry_point_ref;this.$VideoUploadSession8=x.monitor_crashes;this.$VideoUploadSession9=x.isMultiMediaPost;this.$VideoUploadSession10=x.container_type;this.$VideoUploadSession11=x.number_of_partitions;this.$VideoUploadSession12=x.multi_partitioning_enabled;this.$VideoUploadSession13=x.change_default_chunk_size;this.$VideoUploadSession14=new l({minSize:x.min_size,maxSize:x.max_size,minLength:x.min_length,maxLength:x.max_length,minWidth:x.min_width,minHeight:x.min_height,extensions:x.extensions,source:x.source,require16to9AspectRatio:x.require_16to9_aspect_ratio,minAspectRatio:x.min_aspect_ratio,maxAspectRatio:x.max_aspect_ratio});this.$VideoUploadSession15=k.supportsChunking();this.$VideoUploadSession16=k.supportsFileAPI();if(this.$VideoUploadSession15){this.$VideoUploadSession17=x.parallel_chunk_uploads;if(this.$VideoUploadSession17){this.$VideoUploadSession18=x.parallel_chunk_upload_filesize;this.$VideoUploadSession19=x.default_chunk_size}}else this.$VideoUploadSession17=false;this.$VideoUploadSession20=this.$VideoUploadSession21(x);this.$VideoUploadSession22=this.$VideoUploadSession23(x);if(this.$VideoUploadSession17)if(this.$VideoUploadSession12){var y=0;this.$VideoUploadSession24=[];for(y=0;y<this.$VideoUploadSession11-1;y++)this.$VideoUploadSession24[y]=this.$VideoUploadSession23(x);}else this.$VideoUploadSession24=this.$VideoUploadSession23(x);this.$VideoUploadSession25=this.$VideoUploadSession26(x)}w.prototype.$VideoUploadSession27=function(){'use strict';this.$VideoUploadSession28=[];this.$VideoUploadSession29=[];this.$VideoUploadSession30=[];this.$VideoUploadSession31=[];this.$VideoUploadSession32=[];var x=0;for(x=0;x<this.$VideoUploadSession33-1;x++)this.$VideoUploadSession28.push(false);};w.prototype.$VideoUploadSession34=function(){'use strict';this.$VideoUploadSession35=s.generate();this.$VideoUploadSession36=new m({actor_id:this.$VideoUploadSession6,source:this.$VideoUploadSession1,waterfall_id:this.$VideoUploadSession35,target_id:this.$VideoUploadSession2,delay:this.$VideoUploadSession3,is_chunked_upload:this.$VideoUploadSession15,composer_entry_point_ref:this.$VideoUploadSession7,container_type:this.$VideoUploadSession10});this.inform('set-waterfall-id',{waterfallID:this.$VideoUploadSession35})};w.prototype.createTestLogger=function(){'use strict';this.$VideoUploadSession34()};w.prototype.getLogger=function(){'use strict';if(!this.$VideoUploadSession36)return null;return this.$VideoUploadSession36};w.prototype.start=function(x){'use strict';this.$VideoUploadSession37=null;this.$VideoUploadSession38=false;this.$VideoUploadSession39=false;this.$VideoUploadSession40=x;this.$VideoUploadSession41=0;this.$VideoUploadSession42=false;this.$VideoUploadSession43={sphericalMetadataXml:null,fbSpatialAudioMetadataXml:null,ytSa3dMetadataJson:null};this.$VideoUploadSession44=false;this.$VideoUploadSession34();if(this.$VideoUploadSession12)this.$VideoUploadSession33=Math.min(this.$VideoUploadSession11,Math.ceil(this.$VideoUploadSession40.getSize()/this.$VideoUploadSession18));this.__logEvent(m.EVENT_REQUESTED_UPLOADING);this.inform('upload-requested');var y=new n(this.$VideoUploadSession40,this.$VideoUploadSession45.bind(this));y.parse()};w.prototype.post=function(x){'use strict';this.__logEvent(m.EVENT_STARTED_POST_REQUEST);this.inform('post-started',x);var y=this.__createPostRequestContext(x);this.$VideoUploadSession25.sendRequest(y);this.$VideoUploadSession46=x};w.prototype.__createPostRequestContext=function(x){'use strict';var y=new q();this.__setupPostRequestContext(y,x);return y};w.prototype.__setupPostRequestContext=function(x,y){'use strict';x.setMetadata(y).setVideoID(this.$VideoUploadSession37).setTargetID(this.$VideoUploadSession2).setSource(this.$VideoUploadSession1).setWaterfallID(this.$VideoUploadSession35).setSupportsChunking(this.$VideoUploadSession15).setCreatorProduct(this.$VideoUploadSession40.getCreatorProduct()).setFile(this.$VideoUploadSession40);if(y){if(y.spherical){this.$VideoUploadSession42=true;x.setIsSphericalVideo(this.$VideoUploadSession42)}if(y.enable_omnistab){this.$VideoUploadSession44=true;x.setEnableOmnistab(this.$VideoUploadSession44)}}if(x.setComposerEntryPointRef)x.setComposerEntryPointRef(this.$VideoUploadSession7);};w.prototype.cancel=function(){'use strict';if(!this.$VideoUploadSession38)return;var x=this.__fetchReceiveRequestManagerStateLogData();this.$VideoUploadSession47();if(this.$VideoUploadSession5){if(!this.$VideoUploadSession39)this.__logEvent(m.EVENT_CANCELED_UPLOADING);if(this.$VideoUploadSession48){this.__logEvent(m.EVENT_CANCELED_FLOW,x);this.$VideoUploadSession48=false}}else{this.__logEvent(m.EVENT_CANCELED_UPLOADING);this.__logEvent(m.EVENT_CANCELED_FLOW,x)}};w.prototype.abandon=function(){'use strict';if(!this.$VideoUploadSession38)return;var x=this.__fetchReceiveRequestManagerStateLogData();this.$VideoUploadSession47();if(this.$VideoUploadSession5){if(!this.$VideoUploadSession39)this.__logEvent(m.EVENT_ABANDONED_UPLOADING);if(this.$VideoUploadSession48){this.__logEvent(m.EVENT_CANCELED_FLOW,x);this.$VideoUploadSession48=false}}else{this.__logEvent(m.EVENT_ABANDONED_UPLOADING);this.__logEvent(m.EVENT_CANCELED_FLOW,x)}};w.prototype.isPostInProgress=function(){'use strict';return this.$VideoUploadSession25.isInProgress()};w.prototype.isInProgress=function(){'use strict';return this.$VideoUploadSession38};w.prototype.getVideoID=function(){'use strict';return this.$VideoUploadSession37};w.prototype.getUploadTime=function(){'use strict';return this.$VideoUploadSession49};w.prototype.getExPartitionNumber=function(x){'use strict';var y=0;for(y=0;y<this.$VideoUploadSession33-1;y++)if(x>=this.$VideoUploadSession29[y]&&x<this.$VideoUploadSession30[y])break;if(y===this.$VideoUploadSession33)return -1;return y};w.prototype.startFlow=function(){'use strict';if(!this.$VideoUploadSession5||this.$VideoUploadSession48)return;this.__logEvent(m.EVENT_STARTED_FLOW,{is_spherical:this.$VideoUploadSession42?'true':null});this.$VideoUploadSession48=true;if(this.$VideoUploadSession50)this.$VideoUploadSession50.flowStarted();};w.prototype.$VideoUploadSession45=function(x){'use strict';var y,z;if(this.$VideoUploadSession4){var aa=this.$VideoUploadSession14.getValidationErrorMessage(this.$VideoUploadSession40,x);if(aa){z={error_summary:aa.summary,error_description:aa.description};y=false}else y=true;}else y=this.$VideoUploadSession14.validate(this.$VideoUploadSession40,x);if(!y){this.__logEvent(m.EVENT_INVALIDATED_UPLOADING);this.inform('upload-failed',z);return}if(x&&x.format){this.$VideoUploadSession42=x.format.isSpherical;if(x.metadata){this.$VideoUploadSession43.sphericalMetadataXml=x.metadata.sphericalMetadataXml;this.$VideoUploadSession43.fbSpatialAudioMetadataXml=x.metadata.fbSpatialAudioMetadataXml;this.$VideoUploadSession43.ytSa3dMetadataJson=x.metadata.ytSa3dMetadataJson}}if(!this.$VideoUploadSession5)this.__logEvent(m.EVENT_STARTED_FLOW,{is_spherical:this.$VideoUploadSession42?'true':null});this.$VideoUploadSession51=this.$VideoUploadSession17&&this.$VideoUploadSession40.getSize()>=this.$VideoUploadSession18;this.$VideoUploadSession52=false;this.$VideoUploadSession53=0;this.$VideoUploadSession54=this.$VideoUploadSession53;this.$VideoUploadSession55=0;if(this.$VideoUploadSession12){this.$VideoUploadSession27()}else this.$VideoUploadSession28=false;if(this.$VideoUploadSession51){if(this.$VideoUploadSession12){var ba=0;this.$VideoUploadSession56=Math.ceil(this.$VideoUploadSession40.getSize()/this.$VideoUploadSession33);var ca=this.$VideoUploadSession56,da=this.$VideoUploadSession56;for(ba=0;ba<this.$VideoUploadSession33-1;ba++){this.$VideoUploadSession29[ba]=ca;ca=Math.min(this.$VideoUploadSession29[ba]+da,this.$VideoUploadSession40.getSize());this.$VideoUploadSession30[ba]=ca;this.$VideoUploadSession31[ba]=this.$VideoUploadSession29[ba];this.$VideoUploadSession32[ba]=0}}else{this.$VideoUploadSession56=Math.floor(this.$VideoUploadSession40.getSize()/2);this.$VideoUploadSession29=this.$VideoUploadSession56;this.$VideoUploadSession31=this.$VideoUploadSession29;this.$VideoUploadSession32=0;this.$VideoUploadSession30=this.$VideoUploadSession40.getSize()}}else this.$VideoUploadSession56=this.$VideoUploadSession40.getSize();var ea=new q().setFile(this.$VideoUploadSession40).setTargetID(this.$VideoUploadSession2).setSource(this.$VideoUploadSession1).setWaterfallID(this.$VideoUploadSession35).setSupportsChunking(this.$VideoUploadSession15).setSupportsFileAPI(this.$VideoUploadSession16).setCreatorProduct(this.$VideoUploadSession40.getCreatorProduct()).setPartitionStartOffset(this.$VideoUploadSession53).setPartitionEndOffset(this.$VideoUploadSession56);if(this.$VideoUploadSession17)ea.setUseParallelChunks(this.$VideoUploadSession17);if(this.$VideoUploadSession42){ea.setIsSphericalVideo(this.$VideoUploadSession42);ea.setSphericalMetadata(this.$VideoUploadSession43)}if(ea.setComposerEntryPointRef)ea.setComposerEntryPointRef(this.$VideoUploadSession7);this.$VideoUploadSession57();this.$VideoUploadSession20.sendRequest(ea);this.inform('metadata-parsed',x)};w.prototype.$VideoUploadSession21=function(x){'use strict';var y=this.$VideoUploadSession15?x.chunk_start_uri:x.start_uri,z=this.__getVideoUploadStartRequestManager(y,x.start_max_transport_retries,x.start_transport_retry_interval_base,x.skip_upload_enabled,x.skip_upload_file_size_limit,x.start_max_server_retries,x.start_server_retry_interval_base);z.subscribe('request-started',this.$VideoUploadSession58.bind(this));z.subscribe('request-finished',this.$VideoUploadSession59.bind(this));z.subscribe('request-failed',this.$VideoUploadSession60.bind(this));return z};w.prototype.$VideoUploadSession23=function(x){'use strict';var y=this.$VideoUploadSession15?x.chunk_receive_uri:x.receive_uri,z=this.__getVideoUploadReceiveRequestManager(y,x);z.subscribe('request-started',this.$VideoUploadSession61.bind(this));z.subscribe('request-progressed',this.$VideoUploadSession62.bind(this));z.subscribe('request-finished',this.$VideoUploadSession63.bind(this));z.subscribe('request-failed',this.$VideoUploadSession64.bind(this));z.subscribe('request-timeout',this.$VideoUploadSession65.bind(this));z.subscribe('online',this.$VideoUploadSession66.bind(this));z.subscribe('offline',this.$VideoUploadSession67.bind(this));z.subscribe('resumable-called',this.$VideoUploadSession68.bind(this));z.subscribe('resumable-started',this.$VideoUploadSession69.bind(this));z.subscribe('resumable-success',this.$VideoUploadSession70.bind(this));z.subscribe('resumable-failed',this.$VideoUploadSession71.bind(this));return z};w.prototype.$VideoUploadSession26=function(x){'use strict';var y=this.$VideoUploadSession15?x.chunk_post_uri:x.post_uri,z=this.__getVideoUploadPostRequestManager(y,x);z.subscribe('request-finished',this.__handlePostRequestFinished.bind(this));z.subscribe('request-failed',this.$VideoUploadSession72.bind(this));return z};w.prototype.$VideoUploadSession58=function(event,x){'use strict';this.__logEvent(m.EVENT_STARTED_UPLOADING,{hash_time:x.hash_time,hash_exception:x.hash_exception});this.__logEvent(m.EVENT_STARTED_START_REQUEST);this.$VideoUploadSession73=Date.now();this.inform('upload-started')};w.prototype.$VideoUploadSession59=function(event,x){'use strict';this.__logEvent(m.EVENT_PROGRESS_UPLOADING_START_REQUEST,{transport_retries:x.transport_retries,hash_time:x.hash_time,skip_upload:x.skip_upload?1:null});this.__logEvent(m.EVENT_FINISHED_START_REQUEST);this.$VideoUploadSession37=x.video_id;this.$VideoUploadSession74=x.skip_upload;if(!x.skip_upload){var y;y=this.__createReceiveRequestContext(x,false);this.$VideoUploadSession22.sendRequest(y);if(this.$VideoUploadSession51)if(this.$VideoUploadSession12){var z=0;for(z=0;z<this.$VideoUploadSession33-1;z++){y=this.__createReceiveRequestContext(x,true,z);this.$VideoUploadSession24[z].sendRequest(y)}}else{y=this.__createReceiveRequestContext(x,true);this.$VideoUploadSession24.sendRequest(y)}}else{this.inform('upload-progressed',{start_offset:0,end_offset:this.$VideoUploadSession40.getSize(),file_size:this.$VideoUploadSession40.getSize(),sent_bytes:this.$VideoUploadSession40.getSize(),video_id:x.video_id,skip_upload:x.skip_upload});if(this.$VideoUploadSession5)this.__logFinishedUploading();this.inform('upload-finished',{start_offset:0,end_offset:this.$VideoUploadSession40.getSize(),video_id:x.video_id,is_spherical_video:this.$VideoUploadSession42})}};w.prototype.__fetchReceiveRequestManagerStateLogData=function(){'use strict';var x={};if(this.$VideoUploadSession22!=null){this.$VideoUploadSession22.appendStateLogData(x,'requestManager_');x.request_manager_state=x.requestManager_last_log_state}if(this.$VideoUploadSession12){var y=0;for(y=0;y<this.$VideoUploadSession33-1;y++)if(this.$VideoUploadSession24[y]!=null)this.$VideoUploadSession24[y].appendStateLogData(x,'requestManagerEx_'+y.toString());}else if(this.$VideoUploadSession24!=null)this.$VideoUploadSession24.appendStateLogData(x,'requestManagerEx_');return x};w.prototype.__createReceiveRequestContext=function(x,y,z){'use strict';if(!y)y=false;var aa=new q();this.$VideoUploadSession12?this.__setupReceiveRequestContext(aa,x,y,z):this.__setupReceiveRequestContext(aa,x,y);return aa};w.prototype.__setupReceiveRequestContext=function(x,y,z,aa){'use strict';var ba,ca,da,ea;if(!z){ba=this.$VideoUploadSession53;ca=this.$VideoUploadSession56;if(this.$VideoUploadSession13){da=this.$VideoUploadSession53;ea=this.$VideoUploadSession56}else{da=y.start_offset;ea=y.end_offset}}else if(this.$VideoUploadSession12){if(this.$VideoUploadSession13)this.$VideoUploadSession19=this.$VideoUploadSession30[aa]-this.$VideoUploadSession29[aa];ba=this.$VideoUploadSession29[aa];ca=this.$VideoUploadSession30[aa];da=this.$VideoUploadSession29[aa];ea=this.$VideoUploadSession29[aa]+this.$VideoUploadSession19>=this.$VideoUploadSession30[aa]?this.$VideoUploadSession30[aa]:this.$VideoUploadSession29[aa]+this.$VideoUploadSession19}else{if(this.$VideoUploadSession13)this.$VideoUploadSession19=this.$VideoUploadSession30-this.$VideoUploadSession29;ba=this.$VideoUploadSession29;ca=this.$VideoUploadSession30;da=this.$VideoUploadSession29;ea=this.$VideoUploadSession29+this.$VideoUploadSession19>=this.$VideoUploadSession30?this.$VideoUploadSession30:this.$VideoUploadSession29+this.$VideoUploadSession19}x.setFile(this.$VideoUploadSession40).setVideoID(y.video_id).setStartOffset(da).setEndOffset(ea).setPartitionStartOffset(ba).setPartitionEndOffset(ca).setTargetID(this.$VideoUploadSession2).setSource(this.$VideoUploadSession1).setWaterfallID(this.$VideoUploadSession35).setSupportsChunking(this.$VideoUploadSession15);if(this.$VideoUploadSession17)x.setUseParallelChunks(this.$VideoUploadSession17);if(x.setComposerEntryPointRef)x.setComposerEntryPointRef(this.$VideoUploadSession7);};w.prototype.$VideoUploadSession60=function(event,x){'use strict';var y=this.__getLogErrorData(x);this.__logEvent(m.EVENT_FAILED_START_REQUEST,y);this.__logEvent(m.EVENT_FAILED_UPLOADING,y);var z=x.error_is_transient?m.EVENT_RESIGNED_FLOW:m.EVENT_FAILED_FLOW;if(this.$VideoUploadSession5){if(this.$VideoUploadSession48){this.__logEvent(z);this.$VideoUploadSession48=false}}else this.__logEvent(z);this.$VideoUploadSession75();this.inform('upload-failed',x)};w.prototype.$VideoUploadSession61=function(event,x){'use strict';if(!x.start_offset&&!x.transport_retries&&!x.server_retries)this.__logEvent(m.EVENT_STARTED_SENDING_BYTES,{total_bytes:this.$VideoUploadSession40.getSize()});if(this.$VideoUploadSession15)this.__logEvent(m.EVENT_STARTED_SENDING_CHUNK_BYTES,{start_offset:x.start_offset,total_bytes:x.end_offset-x.start_offset,transport_retries:x.transport_retries,server_retries:x.server_retries,upload_speed:x.upload_speed,request_manager_state:x.request_manager_state});};w.prototype.$VideoUploadSession62=function(event,x){'use strict';if(x.start_offset<this.$VideoUploadSession56){this.$VideoUploadSession54=x.start_offset;this.$VideoUploadSession55=x.sent_bytes}else if(this.$VideoUploadSession12){var y=0;y=this.getExPartitionNumber(x.start_offset);if(y>-1){this.$VideoUploadSession31[y]=x.start_offset;this.$VideoUploadSession32[y]=x.sent_bytes}}else{this.$VideoUploadSession31=x.start_offset;this.$VideoUploadSession32=x.sent_bytes}x.start_offset=this.$VideoUploadSession54;x.sent_bytes=this.$VideoUploadSession55;if(this.$VideoUploadSession51)if(this.$VideoUploadSession12){for(y=0;y<this.$VideoUploadSession33-1;y++){x.start_offset+=this.$VideoUploadSession31[y]-this.$VideoUploadSession29[y];x.sent_bytes+=this.$VideoUploadSession32[y]}}else{x.start_offset+=this.$VideoUploadSession31-this.$VideoUploadSession29;x.sent_bytes+=this.$VideoUploadSession32}var z=Math.min(x.start_offset+x.sent_bytes,x.file_size);if(z>this.$VideoUploadSession41){this.$VideoUploadSession41=z;this.inform('upload-progressed',x)}};w.prototype.$VideoUploadSession63=function(event,x){'use strict';if(this.$VideoUploadSession15)this.__logEvent(m.EVENT_FINISHED_SENDING_CHUNK_BYTES,{start_offset:x.start_offset,sent_bytes:x.end_offset-x.start_offset,transport_retries:x.transport_retries,server_retries:x.server_retries,upload_speed:x.upload_speed,request_manager_state:x.request_manager_state});var y=false;if(x.start_offset<this.$VideoUploadSession56){this.$VideoUploadSession52=x.end_offset>=this.$VideoUploadSession56}else if(this.$VideoUploadSession12){var z=0;z=this.getExPartitionNumber(x.start_offset);if(z===-1){var aa={error_summary:'Invalid offset',error_description:'Offset doesn\'t fall in any exPartition range.'};this.__logEvent(m.EVENT_FAILED_UPLOADING);this.inform('upload-failed',aa);return}this.$VideoUploadSession28[z]=x.end_offset>=this.$VideoUploadSession30[z]}else this.$VideoUploadSession28=x.end_offset>=this.$VideoUploadSession30;if(this.$VideoUploadSession12){for(z=0;z<this.$VideoUploadSession33-1;z++)if(this.$VideoUploadSession28[z]===false){y=false;break}else y=true;}else y=this.$VideoUploadSession28;if(!this.$VideoUploadSession16||this.$VideoUploadSession52&&(!this.$VideoUploadSession51||y)){this.__logEvent(m.EVENT_FINISHED_SENDING_BYTES,{sent_bytes:this.$VideoUploadSession40.getSize()});this.$VideoUploadSession49=Date.now()-this.$VideoUploadSession73;if(this.$VideoUploadSession5)this.__logFinishedUploading();x.video_id=this.$VideoUploadSession37;x.is_spherical_video=this.$VideoUploadSession42;this.inform('upload-finished',x);if(this.$VideoUploadSession9){if(!this.$VideoUploadSession5)this.__logFinishedUploading();this.__logEvent(m.EVENT_FINISHED_FLOW,x);this.$VideoUploadSession48=false;this.$VideoUploadSession75();this.inform('multimedia-upload-finished',x)}}};w.prototype.$VideoUploadSession64=function(event,x){'use strict';var y=this.__getLogErrorData(x);if(this.$VideoUploadSession15)this.__logEvent(m.EVENT_FAILED_SENDING_CHUNK_BYTES,y);this.__logEvent(m.EVENT_FAILED_UPLOADING,y);var z=x.error_is_transient?m.EVENT_RESIGNED_FLOW:m.EVENT_FAILED_FLOW;if(this.$VideoUploadSession5){if(this.$VideoUploadSession48){this.__logEvent(z);this.$VideoUploadSession48=false}}else this.__logEvent(z);this.$VideoUploadSession75();this.inform('upload-failed',x)};w.prototype.$VideoUploadSession65=function(event,x){'use strict';var y={start_offset:x.start_offset,sent_bytes:x.end_offset-x.start_offset,transport_retries:x.transport_retries,server_retries:x.server_retries,timeout_retries:x.timeout_retries,upload_speed:x.upload_speed,request_manager_state:x.request_manager_state};this.__logEvent(m.EVENT_TIMEOUT_SENDING_CHUNK_BYTES,y)};w.prototype.$VideoUploadSession66=function(event,x){'use strict';this.inform('online',x)};w.prototype.$VideoUploadSession67=function(event,x){'use strict';this.inform('offline',x)};w.prototype.$VideoUploadSession68=function(event,x){'use strict';this.__logEvent(m.EVENT_RESUMABLE_CALLED,x)};w.prototype.$VideoUploadSession69=function(event,x){'use strict';this.__logEvent(m.EVENT_RESUMABLE_STARTED,x)};w.prototype.$VideoUploadSession70=function(event,x){'use strict';this.__logEvent(m.EVENT_RESUMABLE_SUCCESS,x)};w.prototype.$VideoUploadSession71=function(event,x){'use strict';this.__logEvent(m.EVENT_RESUMABLE_FAILED,x)};w.prototype.__handlePostRequestFinished=function(event,x){'use strict';this.__logEvent(m.EVENT_FINISHED_POST_REQUEST);if(!x.video_id)x.video_id=this.$VideoUploadSession37;if(!this.$VideoUploadSession5)this.__logFinishedUploading();this.__logEvent(m.EVENT_FINISHED_FLOW);this.$VideoUploadSession48=false;this.$VideoUploadSession75();var y=babelHelpers['extends']({},x,this.$VideoUploadSession46);this.inform('post-finished',y)};w.prototype.__logFinishedUploading=function(){'use strict';this.__logEvent(m.EVENT_FINISHED_UPLOADING,{elapsed_time:this.$VideoUploadSession49,skip_upload:this.$VideoUploadSession74?1:null});this.$VideoUploadSession39=true};w.prototype.$VideoUploadSession72=function(event,x){'use strict';var y=this.__getLogErrorData(x);this.__logEvent(m.EVENT_FAILED_POST_REQUEST,y);if(this.$VideoUploadSession38){this.__logEvent(m.EVENT_FAILED_UPLOADING,y);var z=x.error_is_transient?m.EVENT_RESIGNED_FLOW:m.EVENT_FAILED_FLOW;this.__logEvent(z)}this.$VideoUploadSession75();this.inform('post-failed',x)};w.prototype.$VideoUploadSession47=function(){'use strict';this.$VideoUploadSession20.cancelRequest();this.$VideoUploadSession22.cancelRequest();if(this.$VideoUploadSession51)if(this.$VideoUploadSession12){var x=0;for(x=0;x<this.$VideoUploadSession33-1;x++)this.$VideoUploadSession24[x].cancelRequest();}else this.$VideoUploadSession24.cancelRequest();this.$VideoUploadSession75();if(this.$VideoUploadSession37){new i('/ajax/video/actions/delete').setData({fbid:this.$VideoUploadSession37,redirect:false}).send();this.$VideoUploadSession37=null}};w.prototype.$VideoUploadSession57=function(){'use strict';this.$VideoUploadSession38=true;if(this.$VideoUploadSession8){this.$VideoUploadSession50=new j(this.$VideoUploadSession35,this.$VideoUploadSession6,this.$VideoUploadSession1,this.$VideoUploadSession2,this.$VideoUploadSession3,this.$VideoUploadSession15,this.$VideoUploadSession7,!this.$VideoUploadSession5||this.$VideoUploadSession48);this.$VideoUploadSession50.startSession()}};w.prototype.$VideoUploadSession75=function(){'use strict';this.$VideoUploadSession38=false;if(this.$VideoUploadSession50){this.$VideoUploadSession50.endSession();this.$VideoUploadSession50=null}};w.prototype.__getLogErrorData=function(x){'use strict';return {error:x.error_summary,error_code:x.error_code,error_description:x.error_description,transport_retries:x.transport_retries,server_retries:x.server_retries,request_manager_state:x.request_manager_state}};w.prototype.__logEvent=function(event,x){'use strict';var y=this.getLogger();x=x||{};if(this.$VideoUploadSession40){x.file_size=this.$VideoUploadSession40.getSize();x.file_extension=this.$VideoUploadSession40.getExtension();x.sent_bytes=this.$VideoUploadSession41}y.logEvent(event,x)};w.prototype.__getVideoUploadStartRequestManager=function(x,y,z,aa,ba,ca,da){'use strict';return new r(x,y,z,aa,ba,ca,da)};w.prototype.__getVideoUploadReceiveRequestManager=function(x,y){'use strict';return new p(x,y.max_transport_retries,y.max_server_retries,y.response_timeout_enabled,y.max_response_timeout_retries,y.response_timeout_speed_variation_factor_ppt,y.transport_retry_interval_base,y.server_retry_interval_base,y.receive_errors_force_retry,y.access_token,y.resumability_enabled)};w.prototype.__getVideoUploadPostRequestManager=function(x,y){'use strict';return new o(x,y.post_max_transport_retries,y.post_transport_retry_interval_base,y.post_max_server_retries,y.post_server_retry_interval_base)};f.exports=w}),null);
__d('VideoUploader',['ArbiterMixin','VideoUploadCrashMonitor','VideoUploadSession','mixin'],(function a(b,c,d,e,f,g,h,i,j,k){var l,m;l=babelHelpers.inherits(n,k(h));m=l&&l.prototype;function n(o){'use strict';m.constructor.call(this);this.$VideoUploader1=o;this.$VideoUploader2=null;if(o.monitor_crashes){this.$VideoUploader3=new i();this.$VideoUploader3.logKnownCrashes()}}n.prototype.getLogger=function(){'use strict';if(!this.$VideoUploader2)return;if(this.$VideoUploader2.getLogger)return this.$VideoUploader2.getLogger();};n.prototype.upload=function(o){'use strict';if(this.$VideoUploader2)return;this.$VideoUploader2=this.__getVideoUploadSession(this.$VideoUploader1);this.$VideoUploader2.subscribe(this.__getEventsWhichShouldListenFromSession(),function(event,p){return this.$VideoUploader4(event,p)}.bind(this));this.$VideoUploader2.start(o)};n.prototype.__getVideoUploadSession=function(o){'use strict';return new j(o)};n.prototype.__getEventsWhichShouldListenFromSession=function(){'use strict';return ['upload-requested','upload-started','upload-progressed','upload-finished','upload-failed','post-started','post-finished','post-failed','online','offline','metadata-parsed','set-waterfall-id']};n.prototype.postUserRequest=function(){'use strict';if(!this.$VideoUploader2)return;if(this.$VideoUploader2.startFlow)this.$VideoUploader2.startFlow();};n.prototype.post=function(o){'use strict';if(!this.$VideoUploader2)return;this.$VideoUploader2.post(o)};n.prototype.getVideoID=function(){'use strict';return this.$VideoUploader2.getVideoID()};n.prototype.cancel=function(){'use strict';if(!this.$VideoUploader2)return;this.$VideoUploader2.cancel();this.$VideoUploader2=null};n.prototype.abandon=function(){'use strict';if(!this.$VideoUploader2)return;this.$VideoUploader2.abandon();this.$VideoUploader2=null};n.prototype.reset=function(){'use strict';this.$VideoUploader2=null};n.prototype.getUploadSession=function(){'use strict';return this.$VideoUploader2};n.prototype.getLoggerData=function(){'use strict';return {waterfall_id:this.$VideoUploader2?this.$VideoUploader2.$VideoUploader5:null,actor_id:this.$VideoUploader1.actor_id,target_id:this.$VideoUploader1.target_id,target_type:this.$VideoUploader1.target_type,composer_entry_point_ref:this.$VideoUploader1.composer_entry_point_ref}};n.prototype.isPostInProgress=function(){'use strict';return !!this.$VideoUploader2&&this.$VideoUploader2.isPostInProgress()};n.prototype.isSessionInProgress=function(){'use strict';return !!this.$VideoUploader2&&this.$VideoUploader2.isInProgress()};n.prototype.getUploadParameters=function(){'use strict';return this.$VideoUploader1};n.prototype.__getSession=function(){'use strict';return this.$VideoUploader2};n.prototype.__getEventsForWhichSessionShouldBeSetToNull=function(){'use strict';return ['upload-failed','post-finished','multimedia-upload-finished']};n.prototype.$VideoUploader4=function(event,o){'use strict';if(this.__getEventsForWhichSessionShouldBeSetToNull().includes(event))this.$VideoUploader2=null;this.__delegateEvent(event,o)};n.prototype.__delegateEvent=function(event,o){'use strict';this.inform(event,o)};f.exports=n}),null);
__d('ReactComposerVideoXUploader',['Arbiter','DOM','JSLogger','Map','MultimediaUploadProcessingDialog.react','PhotosUploadID','React','ReactComposerEvents','ReactComposerMediaFilterUtils','ReactComposerMediaUploadActions','ReactComposerMediaUploadActionType','ReactComposerMediaUploadStore','ReactComposerMediaUploadType','ReactDOM','Run','Set','SubscriptionsHandler','VideoUploader','VideoUploadFile','VideoUploadLogger','VideoUploadProgressBar','ifRequired','invariant','throttle','ReactComposerMediaUtils'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea){'use strict';var fa=250;function ga(ha){this.$ReactComposerVideoXUploader12=function(){this.$ReactComposerVideoXUploader20().logEvent(aa.EVENT_FINISHED_FLOW_EXP1);var ia=i.create('div');i.appendContent(document.body,ia);var ja=this.$ReactComposerVideoXUploader6>0;ca('ReactComposerOptimisticPostingStore',function(ka){if(ka.hadOptimisticallyPosted(this.$ReactComposerVideoXUploader1))ja=false;}.bind(this),function(){});if(ja)u.render(n.createElement(l,{numOfVideos:this.$ReactComposerVideoXUploader6}),ia);}.bind(this);this.$ReactComposerVideoXUploader13=function(){this.$ReactComposerVideoXUploader20().logEvent(aa.EVENT_STARTED_FLOW_EXP1);this.$ReactComposerVideoXUploader6=s.getNonPrefillVideoUploadsCount(this.$ReactComposerVideoXUploader1)}.bind(this);this.$ReactComposerVideoXUploader3=ha;this.$ReactComposerVideoXUploader2=new x();this.$ReactComposerVideoXUploader6=0;this.$ReactComposerVideoXUploader7=new k();this.$ReactComposerVideoXUploader8=new w();this.$ReactComposerVideoXUploader9=false;ha.composerID||da(0);ha.uploaderParams||da(0);this.$ReactComposerVideoXUploader2.addSubscriptions(h.subscribe(o.POST_SUCCEEDED+ha.composerID,ea(this.$ReactComposerVideoXUploader12,fa,this)),h.subscribe(o.POST_STARTED+ha.composerID,ea(this.$ReactComposerVideoXUploader13,fa,this)));this.$ReactComposerVideoXUploader1=ha.composerID;this.$ReactComposerVideoXUploader4=ha.uploaderParams;this.$ReactComposerVideoXUploader5=j.create('composer');v.onLeave(function(){return this.cancelUploads()}.bind(this));v.onUnload(function(){return this.cancelUploads()}.bind(this))}ga.prototype.cancelUploads=function(){this.$ReactComposerVideoXUploader8.forEach(function(ha){var ia=ha.uploadID;this.$ReactComposerVideoXUploader8['delete'](ha);var ja=this.$ReactComposerVideoXUploader7.get(ia);if(ja)ja.abandon();}.bind(this));this.$ReactComposerVideoXUploader9=false};ga.prototype.upload=function(ha){ha.forEach(function(ja){if(!p.hasVideos([ja.name]))return;if(!ja.uploadID)ja.uploadID=m.getNewID();this.$ReactComposerVideoXUploader14(ja)}.bind(this));var ia=ha.find(function(ja){return p.hasVideos([ja.name])});if(!this.$ReactComposerVideoXUploader9&&ia)this.uploadVideo(ia);};ga.prototype.uploadVideo=function(ha){if(!ha)return;this.$ReactComposerVideoXUploader9=true;var ia=JSON.parse(JSON.stringify(this.$ReactComposerVideoXUploader4));ia.isMultiMediaPost=true;var ja=new y(ia);this.$ReactComposerVideoXUploader7.set(ha.uploadID,ja);var ka=z.fromFile(ha);this.$ReactComposerVideoXUploader2.addSubscriptions(ja.subscribe('upload-started',this.$ReactComposerVideoXUploader15.bind(this,ha)),ja.subscribe('upload-progressed',this.$ReactComposerVideoXUploader16.bind(this,ha)),ja.subscribe('upload-failed',this.$ReactComposerVideoXUploader17.bind(this,ha)),ja.subscribe('upload-finished',this.$ReactComposerVideoXUploader18.bind(this,ha)),ja.subscribe('set-waterfall-id',this.$ReactComposerVideoXUploader19.bind(this,ha)));try{ja.upload(ka)}catch(la){this.$ReactComposerVideoXUploader5.error('error_send_unpublished_files',la);throw la}};ga.prototype.cancelUpload=function(ha){var ia=this.$ReactComposerVideoXUploader7.get(ha);if(ia){ia.cancel();ia.reset();this.$ReactComposerVideoXUploader7['delete'](ha);if(this.$ReactComposerVideoXUploader8.size>0){var ja=this.$ReactComposerVideoXUploader8.values().next().value;this.uploadVideo(ja)}else this.$ReactComposerVideoXUploader9=false;}this.deleteUpload(ha)};ga.prototype.deleteUpload=function(ha){this.$ReactComposerVideoXUploader8.forEach(function(ia){if(ia.uploadID===ha)this.$ReactComposerVideoXUploader8['delete'](ia);}.bind(this))};ga.prototype.$ReactComposerVideoXUploader18=function(ha,ia,ja){q.doneUploading({composerID:this.$ReactComposerVideoXUploader1,uploadID:ha.uploadID,type:r.VIDEO_UPLOAD_DONE,fileUpload:ha,timeToUpload:0,photoID:ja.video_id,sphericalPhotoID:'',thumbSrc:'',isSphericalVideo:ja.is_spherical_video});var ka=this.$ReactComposerVideoXUploader7.get(ha.uploadID);if(ka){ka.reset();this.$ReactComposerVideoXUploader7['delete'](ha.uploadID)}c('ReactComposerMediaUtils').changeToPeopleTaggerAfterUpload(this.$ReactComposerVideoXUploader1);this.$ReactComposerVideoXUploader9=false;this.$ReactComposerVideoXUploader8['delete'](ha);if(this.$ReactComposerVideoXUploader8.size>0){var la=this.$ReactComposerVideoXUploader8.values().next().value;this.uploadVideo(la)}};ga.prototype.$ReactComposerVideoXUploader14=function(ha){this.$ReactComposerVideoXUploader8.add(ha);q.enqueue(this.$ReactComposerVideoXUploader1,ha.uploadID,ha.name,s.getUploads(this.$ReactComposerVideoXUploader1).size,r.VIDEO_UPLOAD_ENQUEUED,t.VIDEO,URL.createObjectURL(ha))};ga.prototype.$ReactComposerVideoXUploader15=function(ha,ia){q.startUploading(this.$ReactComposerVideoXUploader1,ha.uploadID,ha,r.VIDEO_UPLOAD_UPLOADING)};ga.prototype.$ReactComposerVideoXUploader16=function(ha,ia,ja){var ka=ba.computeProgress(ja.start_offset,ja.sent_bytes,ja.file_size,0,0),la=false;if(this.$ReactComposerVideoXUploader4)la=this.$ReactComposerVideoXUploader4.use_real_progress_percentage;if(!la)ka=Math.round(ka);q.progressUploading(this.$ReactComposerVideoXUploader1,ha.uploadID,ka,la)};ga.prototype.$ReactComposerVideoXUploader17=function(ha,ia,ja){var ka={code:ja.error_code,description:ja.error_description,summary:ja.error_summary,"transient":ja.error_is_transient||ja.error_code==1004||ja.error_code==1006};q.failUploading(this.$ReactComposerVideoXUploader1,ha.uploadID,ha,0,ka,r.VIDEO_UPLOAD_FAILED)};ga.prototype.$ReactComposerVideoXUploader19=function(ha,ia,ja){if(!this.$ReactComposerVideoXUploader10)this.$ReactComposerVideoXUploader10=ja.waterfallID;};ga.prototype.$ReactComposerVideoXUploader21=function(){this.$ReactComposerVideoXUploader11=new aa({actor_id:this.$ReactComposerVideoXUploader4.actorID,source:this.$ReactComposerVideoXUploader4.source,waterfall_id:this.$ReactComposerVideoXUploader10,target_id:this.$ReactComposerVideoXUploader4.targetID,composer_entry_point_ref:this.$ReactComposerVideoXUploader4.composerEntryPointRef})};ga.prototype.$ReactComposerVideoXUploader20=function(){if(!this.$ReactComposerVideoXUploader11)this.$ReactComposerVideoXUploader21();return this.$ReactComposerVideoXUploader11};ga.prototype.destroy=function(){this.$ReactComposerVideoXUploader2.release()};ga.prototype.getUploader=function(ha){return this.$ReactComposerVideoXUploader7.get(ha)};f.exports=ga}),null);
__d('ReactComposerMultilingualStatusActionType',['keyMirrorRecursive'],(function a(b,c,d,e,f,g,h){f.exports=h({MOUNTED_MULTILINGUAL_STATUS:null,MULTILINGUAL_PROMPT_CLICK:null,MULTILINGUAL_PROMPT_CLOSE:null,LANGUAGE_CREATED:null,LANGUAGE_CHANGED:null,LANGUAGE_REMOVED:null,SET_LANGUAGE_EDITOR_STATE:null,SET_SPECIFIED_POST_LANGUAGE:null,PREFILL_MULTILINGUAL_DATA:null},'ReactComposerMultilingualStatusActionType')}),null);
__d('ReactComposerStatusActionType',['keyMirrorRecursive'],(function a(b,c,d,e,f,g,h){f.exports=h({SET_EDITOR_STATE:null,SET_ORIGINAL_EDITOR_STATE:null,SET_TEXT_LENGTH:null,SET_MENTIONS:null,SET_MENTIONS_SOURCE:null,SET_TYPEAHEAD_REPORTER:null},'ReactComposerStatusActionType')}),null);
__d('getImplicitURLMatches',['URI','URLMatcher'],(function a(b,c,d,e,f,g,h,i){'use strict';function j(k,l){var m=k.getText(),n=0,o;while((o=i.match(m))!==null){var p=m.indexOf(o),q=p+o.length;if(h.isValidURI(o))l(n+p,n+q);n+=q;m=m.substring(q)}}f.exports=j}),null);
__d('getImplicitURLRangesForContentState',['getImplicitURLMatches'],(function a(b,c,d,e,f,g,h){'use strict';function i(j){return j.getBlockMap().map(function(k){var l=[];h(k,function(m,n){l.push({start:m,end:n})});return l}).toArray()}f.exports=i}),null);
__d('getMentionsTextForContentState',['DraftEntity','emptyFunction'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=i.thatReturnsTrue,k=/[\\\]:]/g;function l(n){var o=arguments.length<=1||arguments[1]===undefined?'':arguments[1],p=n.getBlockMap().map(function(q){var r=q.getText(),s=[];q.findEntityRanges(j,function(t,u){s.push(m(r.slice(t,u),q.getEntityAt(t)))});return s.join('')});return p.join('\n'+o)}function m(n,o){if(o){var p=h.get(o);if(p.getType()==='MENTION'){n=n.replace(k,function(r){return '\\'+r});var q=p.getData().id;if(/^\d+$/.test(q))return '@['+q+':'+n+']';}else if(p.getType()==='EMOTICON'){return p.getData().originalEmoticon}else if(p.getType()==='EMOJI')return p.getData().emoji.join('');}return n.replace('@[','@ [')}f.exports=l}),null);
__d('getRichComposedTextDataForSave',['ComposedEntityType','UnicodeUtils','URI'],(function a(b,c,d,e,f,g,h,i,j){'use strict';function k(l){var m=l.encodedContent,n=l.implicitLinks,o=m.blocks,p=m.entityMap;n=n||[];var q=Object.keys(p).map(function(t){return Number(t)}),r=q.length?Math.max.apply(Math,q):0,s=r+1;n.forEach(function(t,u){t.forEach(function(v){var w=v.start,x=v.end,y=o[u],z=y.text,aa=y.entityRanges,ba=s++,ca=i.strlen(z.slice(0,w)),da=i.strlen(z.slice(w,x)),ea=o[u].entityRanges.some(function(ka){return ka.offset<ca+da&&ka.offset+ka.length>ca});if(ea)return;var fa={offset:ca,length:da,key:ba},ga=o[u].text.slice(w,x),ha=new j(ga),ia=ha.getProtocol();if(!ia)ha.setProtocol('http');var ja={id:null,type:h.IMPLICIT_LINK,data:{url:ha.toString()}};aa.push(fa);p[String(ba)]=ja})});return {blocks:o.map(function(t){return t.text}),block_depths:o.map(function(t){return t.depth}),block_types:o.map(function(t){return t.type}),block_data:o.map(function(t){return t.data?JSON.stringify(t.data):'{}'}),entities:o.map(function(t){return JSON.stringify(t.entityRanges)}),entity_map:JSON.stringify(p),inline_styles:o.map(function(t){return JSON.stringify(t.inlineStyleRanges)})}}f.exports=k}),null);
__d('ReactComposerStatusStore',['ComposedBlockType','ComposedEntityType','ReactComposerMultilingualStatusActionType','ReactComposerStatusActionType','ReactComposerStoreBase','ReactComposerTaggerStore','EditorState','encodeBlocks','getImplicitURLRangesForContentState','getMentionsTextForContentState','getRichComposedTextDataForSave'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s,t;function u(w){for(var x=w.blocks,y=Array.isArray(x),z=0,x=y?x:x[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var aa;if(y){if(z>=x.length)break;aa=x[z++]}else{z=x.next();if(z.done)break;aa=z.value}var ba=aa;if(ba.type!==h.UNSTYLED||ba.inlineStyleRanges.length!==0)return true;}for(var ca in w.entityMap){var da=w.entityMap[ca];if(da.type!==i.MENTION)return true;}return false}s=babelHelpers.inherits(v,l);t=s&&s.prototype;function v(){'use strict';var w;t.constructor.call(this,function(){var x=n.createEmpty();return {activeEditorState:x,activeLanguageDialect:null,editorState:x,length:0,mentionsSource:null,originalEditorState:null,typeaheadReporter:null,mentions:null}},function(x){switch(x.type){case k.SET_MENTIONS_SOURCE:w&&w.$ReactComposerStatusStore1(x);break;case k.SET_TYPEAHEAD_REPORTER:w&&w.$ReactComposerStatusStore2(x);break;case k.SET_EDITOR_STATE:w&&w.$ReactComposerStatusStore3(x);break;case j.SET_LANGUAGE_EDITOR_STATE:w&&w.$ReactComposerStatusStore4(x);break;case k.SET_ORIGINAL_EDITOR_STATE:w&&w.$ReactComposerStatusStore5(x);break;case k.SET_MENTIONS:w&&w.$ReactComposerStatusStore6(x);break;case k.SET_TEXT_LENGTH:w&&w.$ReactComposerStatusStore7(x);break;}});w=this}v.prototype.getMentionsSource=function(w){'use strict';return this.getComposerData(w).mentionsSource};v.prototype.getTypeaheadReporter=function(w){'use strict';return this.getComposerData(w).typeaheadReporter};v.prototype.getEditorState=function(w){'use strict';return this.getComposerData(w).editorState};v.prototype.getOriginalEditorState=function(w){'use strict';return this.getComposerData(w).originalEditorState};v.prototype.getActiveEditorState=function(w){'use strict';return this.getComposerData(w).activeEditorState};v.prototype.getActiveLanguageDialect=function(w){'use strict';return this.getComposerData(w).activeLanguageDialect};v.prototype.getMentions=function(w){'use strict';return this.getComposerData(w).mentions};v.prototype.getMessage=function(w){var x=arguments.length<=1||arguments[1]===undefined?false:arguments[1];'use strict';var y=this.getEditorState(w);if(!y)return '';var z=y.getCurrentContent(),aa=x?'\n':'';return q(z,aa)};v.prototype.getMessageText=function(w){'use strict';var x=this.getEditorState(w);if(!x)return '';var y=x.getCurrentContent();return y?y.getPlainText():''};v.prototype.getRichTextBlocks=function(w){'use strict';var x=m.hasMarkdown(w);if(x)return null;var y=this.getEditorState(w);if(!y)return null;var z=y.getCurrentContent(),aa=o(z);if(!u(aa))return null;var ba={encodedContent:aa,implicitLinks:p(z)};return r(ba)};v.prototype.getOriginalMessageText=function(w){'use strict';var x=this.getOriginalEditorState(w);if(!x)return '';var y=x.getCurrentContent();return y?y.getPlainText():''};v.prototype.getTextLength=function(w){'use strict';return this.getComposerData(w).textLength};v.prototype.$ReactComposerStatusStore1=function(w){'use strict';var x=this.getComposerData(w.composerID);x.mentionsSource=w.mentionsSource;this.emitChange(w.composerID)};v.prototype.$ReactComposerStatusStore2=function(w){'use strict';var x=this.getComposerData(w.composerID);x.typeaheadReporter=w.typeaheadReporter;this.emitChange(w.composerID)};v.prototype.$ReactComposerStatusStore3=function(w){'use strict';var x=this.getComposerData(w.composerID);x.editorState=w.editorState;x.activeEditorState=w.editorState;x.activeLanguageDialect=null;this.emitChange(w.composerID)};v.prototype.$ReactComposerStatusStore4=function(w){'use strict';var x=this.getComposerData(w.composerID);x.activeEditorState=w.editorState;x.activeLanguageDialect=w.languageDialect;this.emitChange(w.composerID)};v.prototype.$ReactComposerStatusStore5=function(w){'use strict';var x=this.getComposerData(w.composerID);x.originalEditorState=w.originalEditorState;this.emitChange(w.composerID)};v.prototype.$ReactComposerStatusStore6=function(w){'use strict';var x=this.getComposerData(w.composerID);x.mentions=w.mentions;this.emitChange(w.composerID)};v.prototype.$ReactComposerStatusStore7=function(w){'use strict';var x=this.validateAction(w,['composerID','textLength']),y=x[0],z=x[1],aa=this.getComposerData(y);aa.textLength=z;this.emitChange(y)};f.exports=new v()}),null);
__d('ReactComposerTaggerActionType',['keyMirrorRecursive'],(function a(b,c,d,e,f,g,h){f.exports=h({DESELECT_TAGGER:null,SET_SELECTED_TAGGER:null,UPDATE_TAGGERS_SOURCE:null,SET_TAGGER_SOURCE:null,SET_TAGGER_DATA:null,SET_SELECTED_DATETIME:null,SET_SELECTED_PEOPLE:null,SET_TAGGER_SHOW_NUX:null,SET_TAGGER_SHOW_TOOLTIP:null,SET_IS_BRANDED_CONTENT_VIDEO:null,SET_TAGGER_CONFIG:null},'ReactComposerTaggerActionType')}),null);
__d('ReactComposerTaggerActions',['ReactComposerDispatcher','ReactComposerTaggerActionType','ReactComposerTaggerStore'],(function a(b,c,d,e,f,g,h,i,j){k.prototype.deselectCurrentTagger=function(l,m){'use strict';var n=j.getSelectedTagger(l);if(n){var o={composerID:l,sourceLoggingName:m,type:i.DESELECT_TAGGER,taggerID:n};h.dispatch(o)}};k.prototype.selectTagger=function(l,m,n,o){'use strict';var p=j.getSelectedTagger(l);if(n===p&&o!==true){this.deselectCurrentTagger(l,m)}else this.$ReactComposerTaggerActions1(l,n,false,true,m);};k.prototype.selectTaggerWithoutLogging=function(l,m){'use strict';this.$ReactComposerTaggerActions1(l,m,true,true)};k.prototype.selectTaggerWithoutAutofocus=function(l,m,n){'use strict';this.$ReactComposerTaggerActions1(l,n,false,false,m)};k.prototype.$ReactComposerTaggerActions1=function(l,m,n,o,p){'use strict';var q={composerID:l,sourceLoggingName:p,type:i.SET_SELECTED_TAGGER,taggerID:m,autoFocus:o,suppressWaterfallLogging:n};h.dispatch(q)};k.prototype.updateTaggersSource=function(l,m){'use strict';var n={composerID:l,type:i.UPDATE_TAGGERS_SOURCE,taggersSource:m};h.dispatch(n)};k.prototype.setTaggerSource=function(l,m,n){'use strict';var o={composerID:l,type:i.SET_TAGGER_SOURCE,taggerID:m,taggerSource:n};h.dispatch(o)};k.prototype.setTaggerConfig=function(l,m,n){'use strict';var o={composerID:l,type:i.SET_TAGGER_CONFIG,taggerConfig:n,taggerID:m};h.dispatch(o)};k.prototype.setTaggerData=function(l,m,n,o){'use strict';this.$ReactComposerTaggerActions2(l,n,o,false,m)};k.prototype.setTaggerDataWithoutLogging=function(l,m,n){'use strict';this.$ReactComposerTaggerActions2(l,m,n,true)};k.prototype.$ReactComposerTaggerActions2=function(l,m,n,o,p){'use strict';var q={composerID:l,sourceLoggingName:p,type:i.SET_TAGGER_DATA,taggerID:m,taggerData:n,suppressWaterfallLogging:o};h.dispatch(q)};k.prototype.selectDateTime=function(l,m){'use strict';var n={composerID:l,type:i.SET_SELECTED_DATETIME,selectedDateTime:m};h.dispatch(n)};k.prototype.selectPeople=function(l,m){'use strict';var n={composerID:l,type:i.SET_SELECTED_PEOPLE,selectedPeople:m};h.dispatch(n)};k.prototype.handleSetTaggerShowNUX=function(l,m,n){'use strict';var o={composerID:l,type:i.SET_TAGGER_SHOW_NUX,taggerID:m,showNUX:n};h.dispatch(o)};k.prototype.handleSetTaggerShowTooltip=function(l,m,n){'use strict';var o={composerID:l,type:i.SET_TAGGER_SHOW_TOOLTIP,taggerID:m,showTooltip:n};h.dispatch(o)};k.prototype.setIsBrandedContentVideo=function(l,m){'use strict';var n={composerID:l,isBrandedContentVideo:m,type:i.SET_IS_BRANDED_CONTENT_VIDEO};h.dispatch(n)};function k(){'use strict'}f.exports=new k()}),null);
__d('ReactComposerMinutiaeAttachmentActionType',['keyMirrorRecursive'],(function a(b,c,d,e,f,g,h){f.exports=h({FETCH_ATTACHMENT:null,SET_EXPLICIT_LOCATION:null,SET_MARKUP:null,SET_HIDE_OBJECT_ATTACHMENT:null},'ReactComposerMinutiaeAttachmentActionType')}),null);
__d("XReactComposerMinutiaeAttachmentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/react_composer\/minutiae\/attachment\/",{av:{type:"FBID"},composer_id:{type:"String",required:true},action_id:{type:"String",required:true},object_id:{type:"String",required:true},target_id:{type:"String",required:true},is_timeline:{type:"Bool",defaultValue:false},explicit_place_tag_id:{type:"String"}})}),null);
__d('ReactComposerMinutiaeAttachmentStore',['ActorURI','AsyncRequest','ReactComposerAttachmentActionType','ReactComposerAttachmentType','ReactComposerMinutiaeAttachmentActionType','ReactComposerStoreBase','XReactComposerMinutiaeAttachmentController'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n){var o,p;o=babelHelpers.inherits(q,m);p=o&&o.prototype;function q(){'use strict';var r;p.constructor.call(this,function(){return {isFetching:false,markup:null,pendingRequest:null,explicitLocation:null}},function(s){switch(s.type){case l.FETCH_ATTACHMENT:r&&r.$ReactComposerMinutiaeAttachmentStore1(s);break;case l.SET_MARKUP:r&&r.$ReactComposerMinutiaeAttachmentStore2(s);break;case j.SELECT_ATTACHMENT:r&&r.$ReactComposerMinutiaeAttachmentStore3(s);break;case l.SET_EXPLICIT_LOCATION:r&&r.$ReactComposerMinutiaeAttachmentStore4(s);break;case l.SET_HIDE_OBJECT_ATTACHMENT:r&&r.$ReactComposerMinutiaeAttachmentStore5(s);break;}});r=this}q.prototype.getMarkup=function(r){'use strict';return this.getComposerData(r).markup};q.prototype.getHideObjectAttachment=function(r){'use strict';return this.getComposerData(r).hideObjectAttachment};q.prototype.isFetching=function(r){'use strict';return this.getComposerData(r).isFetching};q.prototype.$ReactComposerMinutiaeAttachmentStore4=function(r){'use strict';var s=this.validateAction(r,['composerID','explicitLocation']),t=s[0],u=s[1],v=this.getComposerData(t);v.explicitLocation=u;this.emitChange(t)};q.prototype.$ReactComposerMinutiaeAttachmentStore1=function(r){'use strict';var s=this.validateAction(r,['composerID','actionID','objectID','targetID','actorID','isTimeline']),t=s[0],u=s[1],v=s[2],w=s[3],x=s[4],y=s[5],z=this.getComposerData(t);z.isFetching=true;var aa=n.getURIBuilder().setString('composer_id',t).setString('action_id',u).setString('object_id',v).setString('target_id',w).setBool('is_timeline',y);if(z.explicitLocation)aa.setString('explicit_place_tag_id',z.explicitLocation);var ba=h.create(aa.getURI(),x);z.pendingRequest=new i(ba).setFinallyHandler(function(){z.isFetching=false;z.pendingRequest=null;this.emitChange(t)}.bind(this));z.pendingRequest.send();this.emitChange(t)};q.prototype.$ReactComposerMinutiaeAttachmentStore2=function(r){'use strict';var s=this.validateAction(r,['composerID','markup']),t=s[0],u=s[1],v=this.getComposerData(t);v.markup=u;this.emitChange(t)};q.prototype.$ReactComposerMinutiaeAttachmentStore5=function(r){'use strict';var s=this.validateAction(r,['composerID','hideAttachment']),t=s[0],u=s[1],v=this.getComposerData(t);v.hideObjectAttachment=u;this.emitChange(t)};q.prototype.$ReactComposerMinutiaeAttachmentStore3=function(r){'use strict';var s=this.validateAction(r,['composerID','id']),t=s[0],u=s[1];if(u===k.STATUS)return;var v=this.getComposerData(t);v.markup=null;v.isFetching=false;v.pendingRequest&&v.pendingRequest.abandon();this.emitChange(t)};f.exports=new q()}),null);
__d('ReactComposerTaggerEligibilityUtils',['ReactComposerMediaUploadStore','ReactComposerMinutiaeAttachmentStore','ReactComposerScrapedAttachmentStore','ReactComposerSproutsDisplayState','ReactComposerAttachmentStore','ReactComposerAttachmentType','ReactComposerStatusStore','ReactComposerStore','ReactComposerTaggerStore','ReactComposerTaggerType','URLScraper','ifRequired'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){'use strict';var t={isSATPEligible:function u(v,w){var x=n.getMessageText(v).match(/\n/g),y=x?x.length>w.maxNewlines:false,z=p.getTaggerData(v,q.STICKER),aa=p.getTaggerData(v,q.FUNDRAISER),ba=o.getSproutsDisplayState(v)!==k.EXPANDED,ca=true;if(!(l.getSelectedAttachmentID(v)===m.STATUS&&l.isSelectedAttachmentActive(v))||ba||j.hasAttachment(v)||h.getUploadsCount(v)!==0||p.hasExplicitLocation(v)||p.hasMarkdown(v)||z&&z.stickerID||aa&&aa.charityID||i.getMarkup(v)!=null||n.getTextLength(v)>w.textLengthLimit||n.getRichTextBlocks(v)!=null||y)ca=false;s('ReactComposerPostToGroupStore',function(ea){if(ca)ca=!ea.getIsTabSelected(v);});var da=n.getMessageText(v);if(r.permissiveMatch(da)!=null)ca=false;return ca},isGIFEligible:function u(v){var w=l.getSelectedAttachmentID(v);if(w===m.PLACE_LIST||w==m.VISUAL_POLL)return false;return j.isEnabled(v)&&h.getUploads(v).size===0}};f.exports=t}),null);
__d('ReactComposerTaggerStore',['immutable','ReactComposerAttachmentActionType','ReactComposerAttachmentStore','ReactComposerScrapedAttachmentActionType','ReactComposerDispatcher','ReactComposerMediaUploadActionType','ReactComposerPhotoActionType','ReactComposerPhotoStore','ReactComposerStoreBase','ReactComposerTaggerActionType','ReactComposerTaggerType','ReactComposerAttachmentType','SearchableEntry','ReactComposerTaggerEligibilityUtils','Set','isEmpty'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){var x,y;x=babelHelpers.inherits(z,p);y=x&&x.prototype;function z(){'use strict';var aa;y.constructor.call(this,function(){var ba={};ba[r.PEOPLE]=[];ba[r.LOCATION]={};ba[r.BACKDATE]={};ba[r.ACTIVITY]={};ba[r.TARGETING]={};ba[r.PUBLISHER_ABTEST_HOLDOUT]={};ba[r.SPONSOR]={sponsors:[],directShareStatus:0,sponsorRelationship:0};ba[r.PRODUCT]=[];ba[r.MARKDOWN]={};ba[r.CONTENT_WARNINGS]=[];ba[r.MESSAGING]=[];ba[r.POLITICAL_INFO]={};ba[r.ISSUE_TAG]=[];ba[r.CONTACT_YOUR_REPRESENTATIVE]={};ba[r.GIF]={};ba[r.FUNDRAISER]={};var ca={};ca[r.FORMATTED_TEXT]={maxNewLines:3,textLengthLimit:130};return {$ReactComposerTaggerStore1:h.Set(),autoFocusOnSelectedTagger:true,selectedTagger:null,taggersData:ba,taggersSource:{},taggersShowNUX:{},taggersShowTooltip:{},sourceAttachment:null,taggersConfig:ca}},function(ba){switch(ba.type){case q.DESELECT_TAGGER:aa&&aa.$ReactComposerTaggerStore2(ba);break;case q.SET_SELECTED_TAGGER:aa&&aa.$ReactComposerTaggerStore3(ba);break;case q.UPDATE_TAGGERS_SOURCE:aa&&aa.$ReactComposerTaggerStore4(ba);break;case q.SET_TAGGER_SOURCE:aa&&aa.$ReactComposerTaggerStore5(ba);break;case q.SET_TAGGER_DATA:aa&&aa.$ReactComposerTaggerStore6(ba);break;case q.SET_TAGGER_SHOW_NUX:aa&&aa.$ReactComposerTaggerStore7(ba);break;case q.SET_TAGGER_SHOW_TOOLTIP:aa&&aa.$ReactComposerTaggerStore8(ba);break;case q.SET_TAGGER_CONFIG:aa&&aa.$ReactComposerTaggerStore9(ba);break;case n.PHOTO_ADD_FACEBOX:aa&&aa.$ReactComposerTaggerStore10(ba);break;case n.PHOTO_TAG_XY:aa&&aa.$ReactComposerTaggerStore11(ba);break;case n.PHOTO_TAG_XY_PRODUCT:aa&&aa.$ReactComposerTaggerStore12(ba);break;case n.PHOTO_TAG_FACEBOX:aa&&aa.$ReactComposerTaggerStore13(ba);break;case n.PHOTO_UNTAG_ALL:aa&&aa.$ReactComposerTaggerStore14(ba);break;case n.PHOTO_UNTAG_FACEBOX:l.waitFor([o.getDispatchToken()]);aa&&aa.$ReactComposerTaggerStore15(ba);break;case n.PHOTO_UPDATE_ALL_PHOTO_TAGS:aa&&aa.$ReactComposerTaggerStore16(ba);break;case n.PHOTO_REMOVE:l.waitFor([o.getDispatchToken()]);aa&&aa.$ReactComposerTaggerStore17(ba);break;case m.PHOTO_UPLOAD_DONE:aa&&aa.$ReactComposerTaggerStore18(ba);break;case i.SELECT_ATTACHMENT:aa&&aa.$ReactComposerTaggerStore19(ba);break;case k.ATTACHMENT_SCRAPED:aa&&aa.$ReactComposerTaggerStore20(ba);break;}});aa=this}z.prototype.isDisabled=function(aa,ba){'use strict';var ca=[],da=[],ea=false;switch(ba){case r.FORMATTED_TEXT:return !u.isSATPEligible(aa,this.getTaggersConfig(aa,r.FORMATTED_TEXT));case r.GIF:return !u.isGIFEligible(aa);case r.PEOPLE:case r.LOCATION:case r.OG:da=[s.TASK];break;case r.PRODUCT:case r.CONTENT_WARNINGS:case r.BACKDATE:case r.TARGETING:case r.PUBLISHER_ABTEST_HOLDOUT:case r.MARKDOWN:case r.ISSUE_TAG:case r.SPONSOR:case r.MESSAGING:case r.ALBUM:case r.VAULTPHOTO:case r.PAGE_CTA:case r.SALES_PROMO:return false;case r.RECOMMENDATION:ca=[r.POLITICAL_INFO,r.CONTACT_YOUR_REPRESENTATIVE,r.FUN_FACT,r.ALBUM,r.FUNDRAISER,r.CAMERA,r.GIF];ea=true;break;case r.FIND_PLAYERS:ea=true;break;case r.VISUAL_POLL:ca=[r.POLITICAL_INFO,r.CONTACT_YOUR_REPRESENTATIVE,r.ALBUM,r.FUNDRAISER,r.CAMERA,r.GIF];ea=true;break;case r.POLITICAL_INFO:case r.CAMERA:da=[s.PLACE_LIST];break;case r.ACTIVITY:ca=[r.CONTACT_YOUR_REPRESENTATIVE];da=[s.TASK];break;case r.FUN_FACT:ca=[r.FUNDRAISER,r.STICKER];da=[s.PLACE_LIST,s.VISUAL_POLL];break;case r.STICKER:ca=[r.FUN_FACT];da=[s.VISUAL_POLL];break;case r.CONTACT_YOUR_REPRESENTATIVE:ca=[r.ACTIVITY];da=[s.PLACE_LIST];break;case r.FUNDRAISER:ca=[r.FUN_FACT];da=[s.PLACE_LIST];break;default:throw new Error(ba+' is an unhandled tagger type in '+'ReactComposerTaggerStore.isDisabled');}var fa=j.getSelectedAttachmentID(aa);return this.$ReactComposerTaggerStore21(aa,ca)||ea&&fa!==s.STATUS&&fa!==this.$ReactComposerTaggerStore22(ba)||da.includes(fa)};z.prototype.$ReactComposerTaggerStore22=function(aa){'use strict';switch(aa){case r.RECOMMENDATION:return s.PLACE_LIST;case r.FIND_PLAYERS:return s.FIND_PLAYERS;case r.VISUAL_POLL:return s.VISUAL_POLL;default:return null;}};z.prototype.$ReactComposerTaggerStore21=function(aa,ba){'use strict';for(var ca=ba,da=Array.isArray(ca),ea=0,ca=da?ca:ca[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var fa;if(da){if(ea>=ca.length)break;fa=ca[ea++]}else{ea=ca.next();if(ea.done)break;fa=ea.value}var ga=fa;if(this.hasData(aa,ga))return true;}return false};z.prototype.hasData=function(aa,ba){'use strict';var ca=this.getTaggerData(aa,ba);if(ca==null)return false;switch(ba){case r.PEOPLE:case r.PRODUCT:case r.CONTENT_WARNINGS:return ca.length>0;case r.LOCATION:return !!ca.place;case r.BACKDATE:return !!ca.year;case r.ACTIVITY:return !!ca.action&&!!ca.object;case r.TARGETING:case r.PUBLISHER_ABTEST_HOLDOUT:case r.MARKDOWN:case r.POLITICAL_INFO:case r.ISSUE_TAG:return !w(ca);case r.FUN_FACT:return !!ca.promptID;case r.SPONSOR:return ca.sponsors&&ca.sponsors.length>0;case r.FORMATTED_TEXT:return !!ca.formatActive;case r.STICKER:return !!ca.stickerID;case r.GIF:return !!ca.hasGIF;case r.MESSAGING:return ca.hasCTA;case r.CONTACT_YOUR_REPRESENTATIVE:return !!ca.politicalRepresentative;case r.FUNDRAISER:return !!ca.charityID;default:throw new Error(ba+' is an unhandled tagger type in '+'ReactComposerTaggerStore.hasData');}};z.prototype.shouldShowNUX=function(aa,ba){'use strict';var ca=this.getComposerData(aa);return !!ca.taggersShowNUX[ba]};z.prototype.shouldShowTooltip=function(aa,ba){'use strict';var ca=this.getComposerData(aa);return !!ca.taggersShowTooltip[ba]};z.prototype.areAllTaggersEmpty=function(aa){'use strict';var ba=this.getTaggersData(aa);for(var ca in ba)if(this.hasData(aa,ca))return false;return true};z.prototype.getSelectedTagger=function(aa){'use strict';return this.getComposerData(aa).selectedTagger};z.prototype.getAutoFocusOnSelectedTagger=function(aa){'use strict';return this.getComposerData(aa).autoFocusOnSelectedTagger};z.prototype.getTaggerSource=function(aa,ba){'use strict';return this.getComposerData(aa).taggersSource[ba]};z.prototype.getTaggerData=function(aa,ba){'use strict';return this.getComposerData(aa).taggersData[ba]};z.prototype.getTaggersData=function(aa){'use strict';return this.getComposerData(aa).taggersData};z.prototype.getTaggersConfig=function(aa,ba){'use strict';return this.getComposerData(aa).taggersConfig[ba]};z.prototype.hasMinutiae=function(aa){'use strict';var ba=this.getTaggerData(aa,r.ACTIVITY);return !!(ba&&ba.action&&ba.object)};z.prototype.hasLocationTag=function(aa){'use strict';var ba=this.getTaggerData(aa,r.LOCATION);return !!(ba&&(ba.place||ba.implicitLocation))};z.prototype.hasExplicitLocation=function(aa){'use strict';var ba=this.getTaggerData(aa,r.LOCATION);return !!(ba&&ba.place)};z.prototype.hasImplicitLocation=function(aa){'use strict';var ba=this.getTaggerData(aa,r.LOCATION);return !!(ba&&ba.implicitLocation&&!ba.place)};z.prototype.hasBackdate=function(aa){'use strict';var ba=this.getTaggerData(aa,r.BACKDATE)||{};return !!ba.year};z.prototype.hasMarkdown=function(aa){'use strict';return !!this.getTaggerData(aa,r.MARKDOWN).isMarkdown};z.prototype.hasMessagingCTA=function(aa){'use strict';return !!this.getTaggerData(aa,r.MESSAGING).hasCTA};z.prototype.getPoliticalDistrictInfo=function(aa){'use strict';return this.getTaggerData(aa,r.POLITICAL_INFO)};z.prototype.getNumberOfWithWhoTags=function(aa){'use strict';var ba=this.getTaggerData(aa,r.PEOPLE)||[];return ba.length};z.prototype.$ReactComposerTaggerStore2=function(aa){'use strict';var ba=this.getComposerData(aa.composerID);ba.selectedTagger=null;this.emitChange(aa.composerID)};z.prototype.$ReactComposerTaggerStore3=function(aa){'use strict';var ba=this.getComposerData(aa.composerID);if(ba.selectedTagger===aa.taggerID&&!aa.disableToggle){ba.selectedTagger=null}else ba.selectedTagger=aa.taggerID;ba.autoFocusOnSelectedTagger=aa.autoFocus;this.emitChange(aa.composerID)};z.prototype.$ReactComposerTaggerStore9=function(aa){'use strict';var ba=this.getComposerData(aa.composerID);ba.taggersConfig[aa.taggerID]=aa.taggersConfig;this.emitChange(aa.composerID)};z.prototype.$ReactComposerTaggerStore5=function(aa){'use strict';var ba=this.getComposerData(aa.composerID);ba.taggersSource[aa.taggerID]=aa.taggerSource;this.emitChange(aa.composerID)};z.prototype.$ReactComposerTaggerStore4=function(aa){'use strict';var ba=this.validateAction(aa,['composerID','taggersSource']),ca=ba[0],da=ba[1],ea=this.getComposerData(ca);for(var fa in da)ea.taggersSource[fa]=da[fa];this.emitChange(ca)};z.prototype.$ReactComposerTaggerStore6=function(aa){'use strict';var ba=this.getComposerData(aa.composerID),ca=Array.isArray(aa.taggerData)?aa.taggerData.slice():Object.assign({},aa.taggerData);ba.taggersData[aa.taggerID]=ca;this.emitChange(aa.composerID)};z.prototype.$ReactComposerTaggerStore7=function(aa){'use strict';var ba=this.getComposerData(aa.composerID);ba.taggersShowNUX[aa.taggerID]=aa.showNUX;this.emitChange(aa.composerID)};z.prototype.$ReactComposerTaggerStore8=function(aa){'use strict';var ba=this.getComposerData(aa.composerID);ba.taggersShowTooltip[aa.taggerID]=aa.showTooltip;this.emitChange(aa.composerID)};z.prototype.$ReactComposerTaggerStore20=function(aa){'use strict';var ba=this.getComposerData(aa.composerID);ba.sourceAttachment=j.getSelectedAttachmentID(aa.composerID);this.emitChange(aa.composerID)};z.prototype.$ReactComposerTaggerStore19=function(aa){'use strict';var ba=this.getComposerData(aa.composerID);if(aa.id===ba.sourceAttachment||ba.sourceAttachment===null)return;this.getTaggerData(aa.composerID,r.GIF).hasGIF=false;this.emitChange(aa.composerID)};z.prototype.$ReactComposerTaggerStore18=function(aa){'use strict';var ba=this.getComposerData(aa.composerID),ca=Object.assign({mediaLocation:aa.mediaLocation},ba.taggersData[r.LOCATION]);ba.taggersData[r.LOCATION]=ca;this.emitChange(aa.composerID)};z.prototype.$ReactComposerTaggerStore10=function(aa){'use strict';var ba=this.validateAction(aa,['composerID','facebox','photoID']),ca=ba[0],da=ba[1],ea=ba[2],fa=da.bestRecognition;if(fa)this.$ReactComposerTaggerStore23(ca,fa.subjectID,fa.value,ea);};z.prototype.$ReactComposerTaggerStore11=function(aa){'use strict';var ba=this.validateAction(aa,['composerID','subject','value','photoID']),ca=ba[0],da=ba[1],ea=ba[2],fa=ba[3];this.$ReactComposerTaggerStore23(ca,da,ea,fa)};z.prototype.$ReactComposerTaggerStore14=function(aa){'use strict';var ba=this.validateAction(aa,['composerID','photoID']),ca=ba[0],da=ba[1];this.$ReactComposerTaggerStore24(ca,da);this.$ReactComposerTaggerStore25(ca,da)};z.prototype.$ReactComposerTaggerStore12=function(aa){'use strict';var ba=this.validateAction(aa,['composerID','subject','value','photoID']),ca=ba[0],da=ba[1],ea=ba[2],fa=ba[3];this.$ReactComposerTaggerStore26(ca,da,ea,fa)};z.prototype.$ReactComposerTaggerStore13=function(aa){'use strict';var ba=this.validateAction(aa,['composerID','subjectID','value','photoID']),ca=ba[0],da=ba[1],ea=ba[2],fa=ba[3];this.$ReactComposerTaggerStore23(ca,da,ea,fa)};z.prototype.$ReactComposerTaggerStore15=function(aa){'use strict';var ba=this.validateAction(aa,['composerID','subjectID']),ca=ba[0],da=ba[1];if(!o.getIsSubjectTagged(ca,da))this.$ReactComposerTaggerStore27(ca,da);};z.prototype.$ReactComposerTaggerStore16=function(aa){'use strict';var ba=this.validateAction(aa,['composerID','photoID','faceboxes','xyTags']),ca=ba[0],da=ba[1],ea=ba[2],fa=ba[3];this.$ReactComposerTaggerStore24(ca,da);ea.forEach(function(ga){ga&&ga.taggedSubjectID&&this.$ReactComposerTaggerStore23(ca,ga.taggedSubjectID,ga.taggedValue,da)}.bind(this));fa.forEach(function(ga){ga&&this.$ReactComposerTaggerStore23(ca,ga.subject,ga.name,da)}.bind(this))};z.prototype.$ReactComposerTaggerStore17=function(aa){'use strict';var ba=this.validateAction(aa,'composerID');this.getComposerData(ba).$ReactComposerTaggerStore1.forEach(function(ca){if(!o.getIsSubjectTagged(ba,ca))this.$ReactComposerTaggerStore27(ba,ca);}.bind(this))};z.prototype.$ReactComposerTaggerStore23=function(aa,ba,ca,da){'use strict';var ea=new t({uniqueID:ba,title:ca,auxiliaryData:{isFacebox:true,photos:new v([da])}}),fa=this.getComposerData(aa),ga=fa.taggersData[r.PEOPLE],ha=ga.find(function(ja){return ja.getUniqueID()===ea.getUniqueID()});fa.$ReactComposerTaggerStore1=fa.$ReactComposerTaggerStore1.add(ba);if(ha){var ia=ha.getAuxiliaryData();if(this.$ReactComposerTaggerStore28(ha))ia.photos.add(da);}else fa.taggersData[r.PEOPLE]=ga.concat(ea);this.emitChange(aa)};z.prototype.$ReactComposerTaggerStore26=function(aa,ba,ca,da){'use strict';var ea=new t({uniqueID:ba,title:ca,auxiliaryData:{isFacebox:true,photos:new v([da])}}),fa=this.getComposerData(aa),ga=fa.taggersData[r.PRODUCT],ha=ga.find(function(ia){return ia.getUniqueID()===ea.getUniqueID()});if(ha){if(this.$ReactComposerTaggerStore28(ha))ha.getAuxiliaryData().photos.add(da);}else fa.taggersData[r.PRODUCT]=ga.concat(ea);this.emitChange(aa)};z.prototype.$ReactComposerTaggerStore27=function(aa,ba){'use strict';var ca=this.getComposerData(aa);ca.taggersData[r.PEOPLE]=ca.taggersData[r.PEOPLE].filter(function(da){return da.getUniqueID()!==ba});ca.taggersData[r.PRODUCT]=ca.taggersData[r.PRODUCT].filter(function(da){return da.getUniqueID()!==ba});ca.$ReactComposerTaggerStore1=ca.$ReactComposerTaggerStore1['delete'](ba);this.emitChange(aa)};z.prototype.$ReactComposerTaggerStore24=function(aa,ba){'use strict';var ca=this.getComposerData(aa),da=ca.taggersData[r.PEOPLE];this.$ReactComposerTaggerStore29(aa,da,ba)};z.prototype.$ReactComposerTaggerStore25=function(aa,ba){'use strict';var ca=this.getComposerData(aa),da=ca.taggersData[r.PRODUCT];this.$ReactComposerTaggerStore29(aa,da,ba)};z.prototype.$ReactComposerTaggerStore29=function(aa,ba,ca){'use strict';var da=[];for(var ea=ba,fa=Array.isArray(ea),ga=0,ea=fa?ea:ea[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var ha;if(fa){if(ga>=ea.length)break;ha=ea[ga++]}else{ga=ea.next();if(ga.done)break;ha=ga.value}var ia=ha,ja=ia.getAuxiliaryData();if(this.$ReactComposerTaggerStore28(ia)&&ja.photos['delete'](ca)&&ja.photos.size==0)da.push(ia.getUniqueID());}for(var ka=da,la=Array.isArray(ka),ma=0,ka=la?ka:ka[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var na;if(la){if(ma>=ka.length)break;na=ka[ma++]}else{ma=ka.next();if(ma.done)break;na=ma.value}var oa=na;this.$ReactComposerTaggerStore27(aa,oa)}};z.prototype.$ReactComposerTaggerStore28=function(aa){'use strict';return aa.getAuxiliaryData().photos};f.exports=new z()}),null);
__d('ReactComposerPhotoLegacyLimitExceededDialog',['DOM','LayerDestroyOnHide','React','ReactDOM','XUIDialog.react','XUIDialogBody.react','XUIDialogFooter.react','XUIDialogOkayButton.react','XUIDialogTitle.react','fbt'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r={show:function s(t){var u=q._("Se agregaron demasiadas fotos"),v=q._("Puedes agregar un m\u00e1ximo de {maxselect} fotos a las publicaciones. Para agregar m\u00e1s fotos, crea un \u00e1lbum.",[q.param('maxselect',t)]),w=h.create('div');k.render(j.createElement(l,{shown:true,behaviors:{LayerDestroyOnHide:i},width:600},j.createElement(p,null,j.createElement('span',null,u)),j.createElement(m,null,v),j.createElement(n,null,j.createElement(o,{use:'confirm',action:'cancel'}))),w)}};f.exports=r}),null);
__d('ReactComposerVideoLegacyLimitExceededDialog',['ErrorDialog','fbt'],(function a(b,c,d,e,f,g,h,i){var j={show:function k(){h.show(i._("Demasiados archivos"),i._("Selecciona solo un archivo de video a la vez."))}};f.exports=j}),null);
__d('ReactComposerVideoUploadActionType',['keyMirrorRecursive'],(function a(b,c,d,e,f,g,h){f.exports=h({VIDEO_SET_UPLOADER:null,VIDEO_UPLOAD_ADD:null,VIDEO_UPLOAD_REMOVE:null},'ReactComposerVideoUploadActionType')}),null);
__d('ReactComposerVideoUploadStore',['immutable','ReactComposerStoreBase','ReactComposerVideoUploadActionType'],(function a(b,c,d,e,f,g,h,i,j){var k,l,m=h.Record({file:null});k=babelHelpers.inherits(n,i);l=k&&k.prototype;function n(){'use strict';var o;l.constructor.call(this,function(){return {uploader:null,video:null}},function(p){switch(p.type){case j.VIDEO_SET_UPLOADER:o&&o.$ReactComposerVideoUploadStore1(p);break;case j.VIDEO_UPLOAD_ADD:o&&o.$ReactComposerVideoUploadStore2(p);break;case j.VIDEO_UPLOAD_REMOVE:o&&o.$ReactComposerVideoUploadStore3(p);break;default:}});o=this}n.prototype.getUploader=function(o){'use strict';return this.getComposerData(o).uploader};n.prototype.getVideo=function(o){'use strict';return this.getComposerData(o).video};n.prototype.$ReactComposerVideoUploadStore1=function(o){'use strict';var p=this.validateAction(o,['composerID','uploader']),q=p[0],r=p[1],s=this.getComposerData(q);s.uploader=r;this.emitChange(q)};n.prototype.$ReactComposerVideoUploadStore2=function(o){'use strict';var p=this.validateAction(o,['composerID','file']),q=p[0],r=p[1],s=this.getComposerData(q);s.video=new m({file:r});this.emitChange(q)};n.prototype.$ReactComposerVideoUploadStore3=function(o){'use strict';var p=this.validateAction(o,'composerID'),q=this.getComposerData(p);q.video=null;q.input&&q.input.clear();this.emitChange(p)};f.exports=new n()}),null);
__d('ReactComposerVideoUploadActions',['ReactComposerDispatcher','ReactComposerVideoUploadActionType','ReactComposerVideoUploadStore'],(function a(b,c,d,e,f,g,h,i){c('ReactComposerVideoUploadStore');var j={setUploader:function k(l,m){h.dispatch({composerID:l,type:i.VIDEO_SET_UPLOADER,uploader:m})},add:function k(l,m){h.dispatch({composerID:l,type:i.VIDEO_UPLOAD_ADD,file:m})},remove:function k(l){h.dispatch({composerID:l,type:i.VIDEO_UPLOAD_REMOVE})}};f.exports=j}),null);
__d('ReactComposerMediaUtils',['Arbiter','Bootloader','Map','PUWMethods','ReactComposerAttachmentStore','ReactComposerAttachmentType','ReactComposerLoggingName','ReactComposerMediaFilterUtils','ReactComposerMediaUploadActions','ReactComposerMediaUploadStore','ReactComposerMediaUploadType','ReactComposerPhotoActions','ReactComposerPhotoLegacyLimitExceededDialog','ReactComposerTaggerActions','ReactComposerTaggerStore','ReactComposerTaggerType','ReactComposerVideoLegacyLimitExceededDialog','ReactComposerVideoUploadActions','ReactComposerVideoUploadStore','VideoUploader','VideoUploadFeatureDetector','VideoUploadFile','curry','invariant','uniqueID'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa){'use strict';var ga={clearInput:function ha(ia,ja){var ka=this.getFileNamesFromFileInput(ia.getInput());if(ja||!ga.hasVideos(ka))ia.clear();},getFileNames:function ha(ia){var ja=[];for(var ka=0;ka<ia.length;ka++)ja.push(ia[ka].name);return ja},getFileNamesFromFileInput:function ha(ia){if(ba.supportsFileAPI()){return this.getFileNames(ia.files)}else return [ia.value.split('/').pop().split('\\').pop()];},hasVideos:function ha(ia){return o.hasVideos(ia)},hasAudioFiles:function ha(ia){return o.hasAudioFiles(ia)},filterVideos:function ha(ia){return o.filterVideos(ia)},filterAudioFiles:function ha(ia){return o.filterAudioFiles(ia)},filterFileOfSupportedType:function ha(ia,ja){return o.filterFileOfSupportedType(ia,ja)},uploadVideo:function ha(ia,ja){var ka=q.getUploadsOfType(ia,r.PHOTO);if(ka.size>0)p.removeAllPhotoUploads(ia,ka);y.add(ia,ja)},uploadPhotos:function ha(ia,ja,ka,la,ma,na){var oa=ka.isUploadLimitExceeded(la,ja);if(oa){t.show(ka.getMaxSelectableFilesCount(la));return}var pa=ja?ja.length:1;if(pa<1)return;if(z.getVideo(ia))y.remove(ia);p.photosSelect(ia,pa,ma);na&&na()},uploadVideosFromTarget:function ha(ia,ja,ka,la,ma){if(ma){this.uploadMultiMediaFromTarget(ia,ja,ka,la,ma)}else{if(ja.files&&ja.files.length>1){x.show();return}this.uploadVideo(ia,ca.fromFileInput(ja))}},uploadVideos:function ha(ia,ja,ka,la,ma,na){if(ma){this.uploadMultiMedia(ia,ja,ka,la,k.FILE_SELECTOR,na)}else{if(ja&&ja.length>1){x.show();return}this.uploadVideo(ia,ca.fromFile(ja[0]))}},uploadMultiMediaFromTarget:function ha(ia,ja,ka,la,ma){var na=this.getVideoXUploader(ia);na.upload(Array.from(ja.files));this.uploadPhotos(ia,ja.files,ka,la,k.FILE_SELECTOR,function(){ka&&ka.upload(ja)},ma)},uploadPhotosOrVideoFromTarget:function ha(ia,ja,ka,la,ma){var na=this.getFileNamesFromFileInput(ja);if(this.hasVideos(na)){this.uploadVideosFromTarget(ia,ja,ka,la,ma)}else this.uploadPhotos(ia,ja.files,ka,la,k.FILE_SELECTOR,function(){ka&&ka.upload(ja)});},uploadMultiMedia:function ha(ia,ja,ka,la){var ma=arguments.length<=4||arguments[4]===undefined?k.FILE_SELECTOR:arguments[4],na=arguments[5],oa=this.getVideoXUploader(ia,na);oa.upload(ja);var pa=ja.filter(function(qa){return !this.hasVideos([qa.name])}.bind(this));this.uploadPhotos(ia,pa,ka,la,ma,function(){pa.forEach(function(qa){qa.uploadID=fa();qa.filename=''});ka.enqueueAsyncUploadRequest(ia,pa,{},{},false)})},uploadPhotosOrVideo:function ha(ia,ja,ka,la){var ma=arguments.length<=4||arguments[4]===undefined?k.FILE_SELECTOR:arguments[4],na=arguments[5],oa=arguments.length<=6||arguments[6]===undefined?null:arguments[6],pa=this.getFileNames(ja);if(this.hasVideos(pa)){this.uploadVideos(ia,ja,ka,la,na,oa)}else this.uploadPhotos(ia,ja,ka,la,ma,function(){ja.forEach(function(qa){qa.uploadID=fa();qa.filename=''});ka.enqueueAsyncUploadRequest(ia,ja,{},{},false)});},subscribeToImageEdit:function ha(ia,ja){return h.subscribe(['AttachmentsPhotoEditor/newImage'+ia,'AttachmentsPhotoEditor/tagsUpdated'+ia],da(ga.onImageEdited,ia,ja))},onImageEdited:function ha(ia,ja,ka,la){if(ka==='AttachmentsPhotoEditor/newImage'+ia){var ma=q.getUploadsOfType(ia,r.PHOTO),na=ma.find(function(ra){return ra.photoID===la.fbid||ra.originalPhotoID===la.fbid}),oa=q.getUploadIndex(ia,na.id),pa=la.blob;pa.uploadID=fa();pa.name=na.filename||fa();var qa=new j([[pa.uploadID,oa]]);ja&&ja.enqueueAsyncUploadRequest(ia,[pa],{data:{original_fbid:la.fbid,xy_tags:la.xyTags,stickers:la.stickers,text_overlays:la.textOverlays,has_crop:la.hasCrop,has_filter:la.hasFilter},indexMap:qa},{xyTags:la.xyTags},false);s.removePhoto(ia,na.photoID,na.id);p.photosSelect(ia,1,k.METHOD_EDITOR)}else if(ka==='AttachmentsPhotoEditor/tagsUpdated'+ia)ga.handleFaceboxAndXYTags(ia,la.fbid,la.xyTags);s.finishPhotoEdit(ia)},handleFaceboxAndXYTags:function ha(ia,ja,ka){s.untagAllForPhoto(ia,ja);ka.forEach(function(la){if(la.from_facebox){s.tagFacebox(ia,ja,la.facebox,la.subject,la.name)}else if(la.is_product_tag){s.tagXYProduct(ia,ja,la.name,la.source,la.subject,la.x,la.y)}else s.tagXY(ia,ja,la.name,la.source,la.subject,la.x,la.y);})},handleXYTagsOnly:function ha(ia,ja,ka){ka.forEach(function(la){if(la.from_facebox){return}else if(la.is_product_tag){s.tagXYProduct(ia,ja,la.name,la.source,la.subject,la.x,la.y)}else s.tagXY(ia,ja,la.name,la.source,la.subject,la.x,la.y);})},handleVideoUploadForDroppedFiles:function ha(ia,ja,ka){var la=q.getUploadsCount(ka.composerID)>0;if(la)return false;var ma=this.getFileNames(ia);if(!ma||ma.length!==1)return false;var na=ga.hasVideos(ma);if(na){i.loadModules(["ComposerXVideoUploadDialogController"],function(oa){return oa.showDialog({targetID:ka.targetID,files:ia,composerEntryPointRef:ka.composerType,canShowOptimisticPost:ja.shouldShowOptimisticVideoPost})},'ReactComposerMediaUtils');return true}return false},handleSpecialMediaUpload:function ha(event,ia,ja,ka){var la=q.getUploadsCount(ka.composerID)>0;if(!ja.useVideoUploadDialog||la)return false;var ma=event.target;if(!ma||!ma.files||ma.files.length!==1)return false;var na=ga.getFileNamesFromFileInput(ma),oa=ga.hasVideos(na),pa=ga.hasAudioFiles(na);if(pa&&ja.canUploadAudio){i.loadModules(["ComposerXAudioUploadDialogController"],function(qa){return qa.showDialog({targetID:ka.targetID,fileInput:ia,originalComposerID:ka.composerID})},'ReactComposerMediaUtils');return true}else if(oa){i.loadModules(["ComposerXVideoUploadDialogController"],function(qa){return qa.showDialog({targetID:ka.targetID,fileInput:ia,composerEntryPointRef:ka.composerType,canShowOptimisticPost:ja.shouldShowOptimisticVideoPost,originalComposerID:ka.composerID})},'ReactComposerMediaUtils');return true}return false},isMultimediaPost:function ha(ia){return q.getUploadsCount(ia,r.VIDEO)>0&&q.getUploadsCount(ia,r.PHOTO)>0},getVideoXUploader:function ha(ia){var ja=arguments.length<=1||arguments[1]===undefined?null:arguments[1],ka=null;if(ja&&ja.videoUploadParams){ka=ja}else ka=l.getAttachmentsConfig(ia,m.MEDIA);ka||ea(0);var la=q.getVideoUploader(ia,ka.videoUploadParams);return la},getVideoUploader:function ha(ia){var ja=l.getAttachmentsConfig(ia,m.MEDIA);ja||ea(0);var ka=JSON.parse(JSON.stringify(ja.videoUploadParams));return new aa(ka)},changeToPeopleTaggerAfterUpload:function ha(ia){var ja=v.getSelectedTagger(ia),ka=l.getIsAttachmentSelected(ia,m.MEDIA);if(ja===null&&ka)u.selectTaggerWithoutAutofocus(ia,n.PHOTO_UPLOAD_DONE,w.PEOPLE);}};f.exports=ga}),null);