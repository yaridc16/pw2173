if (self.CavalryLogger) { CavalryLogger.start_js(["omn4O"]); }

__d("MercuryAPIArgsSource",[],(function a(b,c,d,e,f,g){f.exports={CHAT:"chat",JEWEL:"jewel",MERCURY:"mercury",MERCURYSYNC:"mercury_sync",WEBMESSENGER:"web_messenger",MESSENGER:"messenger"}}),null);
__d("MercuryAudioType",[],(function a(b,c,d,e,f,g){f.exports={AudioClip:"fb_voice_message",VoiceMessageWithTranscript:"fb_voice_message_with_transcript"}}),null);
__d("PageCommItemStatus",[],(function a(b,c,d,e,f,g){f.exports={FOLLOW_UP:"FOLLOW_UP",DONE:"DONE",TODO:"TODO",SPAM:"SPAM"}}),null);
__d('EventReminderConstants',[],(function a(b,c,d,e,f,g){'use strict';var h={INITIAL:'initial',GOING:'going',WATCHED:'watched',UNWATCHED:'unwatched'},i={ASSOCIATED_EVENT:'ASSOCIATED_EVENT'},j={GOING:'GOING',DECLINED:'DECLINED',INVITED:'INVITED'},k={NO_ERROR:'NO_ERROR',PAST_TIME:'PAST_TIME',AFTER_ONE_YEAR:'AFTER_ONE_YEAR'};f.exports={EventGuestStates:h,EventPlanType:i,GuestStates:j,TimeErrorType:k}}),null);
__d("XGroupsMemberConnectionsIntentLoggingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/groups\/member_connections\/log_intent\/",{member_id:{type:"Int"},group_id:{type:"Int"},intent_type:{type:"Enum",enumType:1}})}),null);
__d('GroupsMemberConnectionsLogger',['AsyncRequest','Event','XGroupsMemberConnectionsIntentLoggingController'],(function a(b,c,d,e,f,g){'use strict';var h={logIntentOnJavaScriptEvent:function i(j,k,l,m,n){c('Event').listen(j,k,function(){h.logIntent(l,m,n)})},logIntent:function i(j,k,l){var m=c('XGroupsMemberConnectionsIntentLoggingController').getURIBuilder().setInt('member_id',k).setInt('group_id',j).setEnum('intent_type',l).getURI();new (c('AsyncRequest'))(m).send()}};f.exports=h}),null);
__d('IgnoreMessagesTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear()}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:IgnoreMessagesLoggerConfig',this.$IgnoreMessagesTypedLogger1,c('Banzai').BASIC)};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:IgnoreMessagesLoggerConfig',this.$IgnoreMessagesTypedLogger1,c('Banzai').VITAL)};h.prototype.clear=function(){this.$IgnoreMessagesTypedLogger1={};return this};h.prototype.updateData=function(j){this.$IgnoreMessagesTypedLogger1=babelHelpers['extends']({},this.$IgnoreMessagesTypedLogger1,j);return this};h.prototype.setEvent=function(j){this.$IgnoreMessagesTypedLogger1.event=j;return this};h.prototype.setPlatform=function(j){this.$IgnoreMessagesTypedLogger1.platform=j;return this};h.prototype.setThreadID=function(j){this.$IgnoreMessagesTypedLogger1.thread_id=j;return this};h.prototype.setVC=function(j){this.$IgnoreMessagesTypedLogger1.vc=j;return this};var i={event:true,platform:true,thread_id:true,vc:true};f.exports=h}),null);
__d('MessengerMessageRequestsTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear()}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:MessengerMessageRequestsLoggerConfig',this.$MessengerMessageRequestsTypedLogger1,c('Banzai').BASIC)};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:MessengerMessageRequestsLoggerConfig',this.$MessengerMessageRequestsTypedLogger1,c('Banzai').VITAL)};h.prototype.clear=function(){this.$MessengerMessageRequestsTypedLogger1={};return this};h.prototype.updateData=function(j){this.$MessengerMessageRequestsTypedLogger1=babelHelpers['extends']({},this.$MessengerMessageRequestsTypedLogger1,j);return this};h.prototype.setAction=function(j){this.$MessengerMessageRequestsTypedLogger1.action=j;return this};h.prototype.setAppID=function(j){this.$MessengerMessageRequestsTypedLogger1.appid=j;return this};h.prototype.setAppversion=function(j){this.$MessengerMessageRequestsTypedLogger1.appversion=j;return this};h.prototype.setClienttime=function(j){this.$MessengerMessageRequestsTypedLogger1.clienttime=j;return this};h.prototype.setContainermodule=function(j){this.$MessengerMessageRequestsTypedLogger1.containermodule=j;return this};h.prototype.setCountry=function(j){this.$MessengerMessageRequestsTypedLogger1.country=j;return this};h.prototype.setEntryPoint=function(j){this.$MessengerMessageRequestsTypedLogger1.entry_point=j;return this};h.prototype.setExtraClientData=function(j){this.$MessengerMessageRequestsTypedLogger1.extra_client_data=j;return this};h.prototype.setFolderType=function(j){this.$MessengerMessageRequestsTypedLogger1.folder_type=j;return this};h.prototype.setName=function(j){this.$MessengerMessageRequestsTypedLogger1.name=j;return this};h.prototype.setSurface=function(j){this.$MessengerMessageRequestsTypedLogger1.surface=j;return this};h.prototype.setThreadID=function(j){this.$MessengerMessageRequestsTypedLogger1.thread_id=j;return this};h.prototype.setThreadKey=function(j){this.$MessengerMessageRequestsTypedLogger1.thread_key=j;return this};h.prototype.setThreadKeyList=function(j){this.$MessengerMessageRequestsTypedLogger1.thread_key_list=j;return this};h.prototype.setVC=function(j){this.$MessengerMessageRequestsTypedLogger1.vc=j;return this};h.prototype.updateExtraData=function(j){j=c('nullthrows')(c('GeneratedLoggerUtils').serializeMap(j));c('GeneratedLoggerUtils').checkExtraDataFieldNames(j,i);this.$MessengerMessageRequestsTypedLogger1=babelHelpers['extends']({},this.$MessengerMessageRequestsTypedLogger1,j);return this};h.prototype.addToExtraData=function(j,k){var l={};l[j]=k;return this.updateExtraData(l)};var i={action:true,appid:true,appversion:true,clienttime:true,containermodule:true,country:true,entry_point:true,extra_client_data:true,folder_type:true,name:true,surface:true,thread_id:true,thread_key:true,thread_key_list:true,vc:true};f.exports=h}),null);
__d('MercuryMessageClientState',[],(function a(b,c,d,e,f,g){var h={DO_NOT_SEND_TO_SERVER:'do_not_send_to_server',SEND_TO_SERVER:'send_to_server'};f.exports=h}),null);
__d("MercuryActionType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({LOG_MESSAGE:"ma-type:log-message",USER_GENERATED_MESSAGE:"ma-type:user-generated-message",ADD_GROUP_ADMINS:"ma-type:add_group_admins",REMOVE_GROUP_ADMINS:"ma-type:remove_group_admins",CHANGE_READ_STATUS:"ma-type:change_read_status",MARK_THREAD_SEEN:"ma-type:mark_thread_seen",CHANGE_MUTE_SETTINGS:"ma-type:change-mute-settings",SEND_MESSAGE:"ma-type:send-message",DELETE_MESSAGES:"ma-type:delete-messages",DELETE_THREAD:"ma-type:delete-thread",UPDATE_SNIPPET:"ma-type:update-snippet",CHANGE_ARCHIVED_STATUS:"ma-type:change-archived-status",CHANGE_FOLDER:"ma-type:change-folder",ADD_PARTICIPANTS:"ma-type:add-participants",CANCEL_ATTACHMENT_PLACEHOLDER:"ma-type:cancel-attachment-placeholder",CONFIRM_ATTACHMENT_PLACEHOLDER:"ma-type:confirm-attachment-placeholder",CHANGE_FLAG:"ma-type:change_flag",MOVE_PENDING_TO_INBOX:"ma-type:move_pending_to_inbox",CREATE_PAGE_ADMIN_NOTE:"ma-type:create-page-admin-note",REPLACE_MESSAGE:"ma-type:replace-message",UPDATE_CUSTOM_LIKE:"ma-type:update_custom_like",UNWRAP_MESSAGE:"ma-type:unwrap-message",JOINABLE_MODE:"ma-type:joinable-mode",APPROVAL_MODE:"ma-type:approval-mode",APPROVAL_QUEUE:"ma-type:approval-queue",IS_PIN_PROTECTED:"ma-type:is_pin_protected",REACTION_UPDATE:"ma-type:reaction-update",LIVE_LOCATION_UPDATE:"ma-type:live-location-update",UPDATE_RTC_CALL_DATA:"ma-type:update-rtc-call-data",UPDATE_COMM_STATUS:"ma-type:update-comm-status",EVENT_RSVP_CHANGED:"ma-type:event-rsvp-changed"})}),null);
__d('MercurySingletonProvider',['CurrentUser'],(function a(b,c,d,e,f,g){'use strict';function h(i){this.$MercurySingletonProvider1={};this.$MercurySingletonProvider2=i}h.prototype.getForFBID=function(i){if(!this.$MercurySingletonProvider1[i])this.$MercurySingletonProvider1[i]=new this.$MercurySingletonProvider2(i);return this.$MercurySingletonProvider1[i]};h.prototype.get=function(){return this.getForFBID(c('CurrentUser').getID())};h.mock=function(i){throw new Error('MercurySingletonProvider.mock() must only be used in tests.')};f.exports=h}),null);
__d('MercuryAssert',['MercuryIDs'],(function a(b,c,d,e,f,g){f.exports={isParticipantID:function h(i){if(!c('MercuryIDs').isValid(i))throw new Error('bad_participant_id '+i);},allParticipantIDs:function h(i){i.forEach(this.isParticipantID)},isUserParticipantID:function h(i){var j=c('MercuryIDs').tokenize(i);if(j.type!='fbid')throw new Error('bad_user_id '+i);},isEmailParticipantID:function h(i){var j=c('MercuryIDs').tokenize(i);if(j.type!='email')throw new Error('bad_email_id '+i);},allThreadID:function h(i){i.forEach(this.isThreadID)},isThreadID:function h(i){if(!c('MercuryIDs').isValid(i))throw new Error('bad_thread_id '+i);}}}),null);
__d('MercuryThreadInformer',['ArbiterMixin','LogHistory','MercuryAssert','MercurySingletonProvider','mapObject','mixin'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('LogHistory').getInstance('mercury_informer');h=babelHelpers.inherits(k,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;k.get=function(){return l.get()};k.getForFBID=function(m){return l.getForFBID(m)};function k(m){i.constructor.call(this);this.$MercuryThreadInformer1=m;this.$MercuryThreadInformer2={};this.$MercuryThreadInformer3={};this.$MercuryThreadInformer4={};this.$MercuryThreadInformer5={};this.$MercuryThreadInformer6=false;this.$MercuryThreadInformer7=false;this.$MercuryThreadInformer8=false;this.$MercuryThreadInformer9={};this.$MercuryThreadInformer10={};this.$MercuryThreadInformer11={};this.$MercuryThreadInformer12=0}k.prototype.updatedThread=function(m){this.$MercuryThreadInformer3[m]=true;this.$MercuryThreadInformer13()};k.prototype.invalidatedThread=function(m){this.$MercuryThreadInformer4[m]=true;this.$MercuryThreadInformer13()};k.prototype.deletedThread=function(m){this.$MercuryThreadInformer2[m]=true;this.$MercuryThreadInformer13()};k.prototype.updatedThreadlist=function(){this.$MercuryThreadInformer6=true;this.$MercuryThreadInformer13()};k.prototype.updatedUnseenState=function(){this.$MercuryThreadInformer7=true;this.$MercuryThreadInformer13()};k.prototype.updatedUnreadState=function(){this.$MercuryThreadInformer8=true;this.$MercuryThreadInformer13()};k.prototype.changedThreadReadState=function(m,n,o){if(!this.$MercuryThreadInformer5[m]||this.$MercuryThreadInformer5[m].timestamp<o)this.$MercuryThreadInformer5[m]={mark_as_read:n,timestamp:o};this.$MercuryThreadInformer13()};k.prototype.receivedMessage=function(m){c('MercuryAssert').isThreadID(m.thread_id);var n=m.thread_id;if(!this.$MercuryThreadInformer9[n])this.$MercuryThreadInformer9[n]=[];this.$MercuryThreadInformer9[n].push(m);this.updatedThread(n)};k.prototype.reorderedMessages=function(m,n){this.$MercuryThreadInformer10[m]={source:n};this.$MercuryThreadInformer13()};k.prototype.updatedMessage=function(m,n,o){if(!this.$MercuryThreadInformer11[m])this.$MercuryThreadInformer11[m]={};this.$MercuryThreadInformer11[m][n]={source:o};this.updatedThread(m)};k.prototype.synchronizeInforms=function(m){this.$MercuryThreadInformer12++;try{m()}catch(n){throw n}finally{this.$MercuryThreadInformer12--;this.$MercuryThreadInformer13()}};k.prototype.listen=function(m,n){return this.subscribe('threads-updated',function(o,p){if(p[m])n(m);})};k.prototype.$MercuryThreadInformer13=function(){if(!this.$MercuryThreadInformer12){var m=this.$MercuryThreadInformer2,n=this.$MercuryThreadInformer3,o=this.$MercuryThreadInformer4,p=this.$MercuryThreadInformer5,q=this.$MercuryThreadInformer6,r=this.$MercuryThreadInformer7,s=this.$MercuryThreadInformer8,t=this.$MercuryThreadInformer9,u=this.$MercuryThreadInformer10,v=this.$MercuryThreadInformer11;this.$MercuryThreadInformer2={};this.$MercuryThreadInformer3={};this.$MercuryThreadInformer4={};this.$MercuryThreadInformer5={};this.$MercuryThreadInformer6=false;this.$MercuryThreadInformer7=false;this.$MercuryThreadInformer8=false;this.$MercuryThreadInformer9={};this.$MercuryThreadInformer10={};this.$MercuryThreadInformer11={};var w=Object.keys(n);if(w.length||q)this.inform('threadlist-updated',w);if(w.length)this.$MercuryThreadInformer14('threads-updated',n);for(var x in o){this.$MercuryThreadInformer14('thread-invalidated',o);break}for(var x in p){this.$MercuryThreadInformer14('thread-read-changed',p);break}for(x in m){this.$MercuryThreadInformer14('threads-deleted',m);break}if(r)this.$MercuryThreadInformer14('unseen-updated',null);if(s)this.$MercuryThreadInformer14('unread-updated',null);for(x in t){this.$MercuryThreadInformer14('messages-received',t);break}for(x in u){this.$MercuryThreadInformer14('messages-reordered',u);break}for(x in v){this.$MercuryThreadInformer14('messages-updated',v);break}}};k.prototype.$MercuryThreadInformer14=function(m,n){if(m==='threads-updated')j.debug(m,JSON.stringify(n));this.inform(m,n)};var l=new (c('MercurySingletonProvider'))(k);f.exports=k}),null);
__d('MercuryDispatcher',['invariant','ArbiterMixin','LogHistory','MercuryActionType','MercuryPayloadSource','MercurySingletonProvider','MercuryThreadInformer','isEmpty','mixin'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('LogHistory').getInstance('mercury_dispatcher');i=babelHelpers.inherits(l,c('mixin')(c('ArbiterMixin')));j=i&&i.prototype;l.getForFBID=function(n){return m.getForFBID(n)};l.get=function(){return m.get()};function l(n){j.constructor.call(this);this.$MercuryDispatcher1=n}l.prototype.handleUpdate=function(n){this.$MercuryDispatcher2(n);!!n.from_client!==!!n.preprocessed||h(0);delete n.preprocessed;if(!c('isEmpty')(n))c('MercuryThreadInformer').getForFBID(this.$MercuryDispatcher1).synchronizeInforms(function(){if(n.payload_source===c('MercuryPayloadSource').SERVER_INVALIDATE_GLOBAL_STATE)this.inform('invalidate-global-state',{});if(n.payload_source===c('MercuryPayloadSource').SERVER_INVALIDATE_THREAD_STATE){var o=n.threads&&n.threads.length>0&&n.threads[0]&&n.threads[0].thread_id;if(o)this.inform('invalidate-thread-state',o);}this.inform('update-thread-ids',n.newlyAddedClientIDs);this.inform('update-participants',n);this.inform('update-threads',n);this.inform('update-unread',n);this.inform('update-threadlist',n);this.inform('update-messages',n);this.inform('update-unseen',n);this.inform('update-typing-state',n);this.inform('update-delivery',n);this.inform('update-roger',n.roger);this.inform('update-blocked-users',n);this.inform('model-update-completed',null)}.bind(this));};l.prototype.$MercuryDispatcher2=function(n){var o=n.payload_source;if(o===c('MercuryPayloadSource').CLIENT_CHANGE_READ_STATUS||o===c('MercuryPayloadSource').CLIENT_MARK_THREAD_SEEN)return;var p={from_client:n.from_client,messages:null};if(n.actions){var q=n.actions.filter(function(r){return r.action_type===c('MercuryActionType').USER_GENERATED_MESSAGE||r.action_type===c('MercuryActionType').LOG_MESSAGE}).map(function(r){return {action_type:r.action_type,other_user_fbid:r.other_user_fbid,thread_fbid:r.thread_fbid,message_id:r.message_id}});if(q.length)p.messages=q;}k.debug('update:'+o,JSON.stringify(p))};var m=new (c('MercurySingletonProvider'))(l);f.exports=l}),null);
__d("MercuryActionStatus",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({UNSENT:0,SUCCESS:1,UNCONFIRMED:3,FAILED_UNKNOWN_REASON:4,UNABLE_TO_CONFIRM:5,RESENT:6,RESENDING:7,ERROR:10})}),null);
__d('MercuryLocalIDs',['PresenceUtil','randomInt'],(function a(b,c,d,e,f,g){'use strict';var h={generateMessageID:function j(k){var l=k||Date.now(),m=c('randomInt')(0,4294967295),n=c('PresenceUtil').getSessionID();return '<'+l+':'+m+'-'+n+'@mail.projektitan.com>'},generateThreadID:function j(k){return 'root:'+h.generateOfflineThreadingID(k)},generateOfflineThreadingID:function j(k){var l=k||Date.now(),m=c('randomInt')(0,4294967295),n=('0000000000000000000000'+m.toString(2)).slice(-22),o=l.toString(2)+n;return i(o.slice(-63))}};function i(j){var k='';while(j!='0'){var l=0,m='';for(var n=0;n<j.length;n++){l=2*l+parseInt(j[n],10);if(l>=10){m+='1';l-=10}else m+='0';}k=l.toString()+k;j=m.slice(m.indexOf('1'))}return k}f.exports=h}),null);
__d("MercuryMessageSourceTags",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CHAT:"source:chat",EMAIL:"source:email",MESSENGER:"source:messenger",MOBILE:"source:mobile"})}),null);
__d("MercurySendMessageFields",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({AUTO_RETRY_CNT:"auto_retry_cnt",MANUAL_RETRY_CNT:"manual_retry_cnt"})}),null);
__d("MercurySourceType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CHAT_ORCA:"source:chat:orca",CHAT_IPHONE:"source:chat:iphone",CHAT_JABBER:"source:chat:jabber",CHAT_MEEBO:"source:chat:meebo",CHAT_WEB:"source:chat:web",CHAT_TEST:"source:chat:test",CHAT_FORWARD_DIALOG:"source:chat:forward",CHAT:"source:chat",CONTACT_ADD_MUTATION:"source:contact_add:graphql_mutation",CONTACT_ADD_CYMK:"source:contact_add:cymk_suggestion",EMAIL:"source:email",EVENT_MESSAGE_BLAST:"source:event_message_blast",EVENT_REMINDERS:"source:event_reminders",FUNDRAISER_MESSAGE_BLAST:"source:fundraiser_message_blast",GENERIC_ADMIN_TEXT:"source:generic_admin_text",GIGABOXX_API:"source:gigaboxx:api",GIGABOXX_BLAST:"source:gigaboxx:blast",GIGABOXX_EMAIL_REPLY:"source:gigaboxx:emailreply",GIGABOXX_MOBILE:"source:gigaboxx:mobile",GIGABOXX_WAP:"source:gigaboxx:wap",GIGABOXX_WEB:"source:gigaboxx:web",INVITE:"source:invite",LEIA:"source:leia",MESSENGER_WEB:"source:messenger:web",MESSENGER_WEB_SEARCH:"source:messenger:web_search",SAM_UFI:"source:sam:ufi",SHARE_DIALOG:"source:share:dialog",SEND_PLUGIN:"source:sendplugin",SMS:"source:sms",TEST:"source:test",TITAN_WAP:"source:titan:wap",TITAN_M_BASIC:"source:titan:m_basic",TITAN_M_FREE:"source:titan:m_free_basic",TITAN_M_JAPAN:"source:titan:m_japan",TITAN_M_MINI:"source:titan:m_mini",TITAN_M_TOUCH:"source:titan:m_touch",TITAN_M_APP:"source:titan:m_app",TITAN_M_TABLET:"source:titan:m_tablet",TITAN_M_ZERO:"source:titan:m_zero",TITAN_M_TALK:"source:titan:m_talk",TITAN_WEB:"source:titan:web",TITAN_FACEWEB_ANDROID:"source:titan:faceweb_android",TITAN_FACEWEB_BUFFY:"source:titan:faceweb_buffy",TITAN_FACEWEB_IPAD:"source:titan:faceweb_ipad",TITAN_FACEWEB_IPHONE:"source:titan:faceweb_iphone",TITAN_FACEWEB_UNKNOWN:"source:titan:faceweb_unknown",TITAN_API:"source:titan:api",TITAN_API_MOBILE:"source:titan:api_mobile",TITAN_ORCA:"source:titan:orca",TITAN_EMAIL_REPLY:"source:titan:emailreply",MOBILE:"source:mobile",PAGE_PLATFORM_API:"source:page_platform_api",UNKNOWN:"source:unknown",WEB:"source:web",HELPCENTER:"source:helpcenter",NEW_SHARE_DIALOG:"source:share:dialog:new",PAID_PROMOTION:"source:paid_promotion",BUFFY_SMS:"source:buffy:sms",WEBRTC_MOBILE:"source:webrtc:mobile",MESSENGER_COMMERCE:"source:messenger:commerce",MESSENGER_BOT:"source:bot",MESSENGER_EMPLOYEE_ONLY_BOT:"source:bot:employee_only",MESSENGER_OMNIM:"source:messenger:omnim",PAGES_PRIVATE_REPLY:"source:pages:private_reply",MESSENGER_FORWARD_DIALOG:"source:messenger:forward",MESSENGER_AD:"source:messenger:ad",MARKETPLACE:"source:marketplace",MESSENGER_LEAD_GEN:"source:messenger:lead_gen",PAGES_MESSAGE_SHORTLINK:"source:pages:message_shortlink",STICKER_SUBSCRIBE:"source:messenger:sticker_subscribe",PHOTO_TAG:"source:messenger:photo_tag",INTERNAL_TEST_PENDING:"source:internal:test_pending",JOB_SEARCH_APPLICATION:"source:job_search:application",MESSENGER_JOINABLE_LINK:"source:messenger:joinable_link",MESSENGER_SMS_BRIDGE_CONVERT:"source:messenger:sms_bridge_conversion",TINCAN_ORCA:"source:tincan:orca",TINCAN_IOS:"source:tincan:ios",TINCAN_UNKNOWN:"source:tincan:unknown",FACEBOOK_GROUPS_CHANNELS:"source:groups:channels",GROUP_COMMERCE:"source:group_commerce",INTERNAL_TOOL:"source:internal:tool",PAGES_PLATFORM:"source:pages:platform",PAGES_RECOMMENDATION:"source:pages:recommendation",PAGE_AUTO_RESPONSE:"source:pages:auto_response",PAGES_INVITE:"source:pages:invite",PAGES_CHAT_EXTENSION:"source:pages:chat_extension",SAVED_CHAT_EXTENSION:"source:saved:chat_extension",CREATOR_PAGE_INITIATE_TO_CREATOR_PAGE:"source:pages:creator_page_initiate_to_creator_page",LIVE_VIDEO_CHAT:"source:live_video_chat",LIVE_CHAT_PLUGIN:"source:discovery:live_chat_plugin",FRIENDING_ADMIN_BUMP:"source:messenger_growth:friending_admin_bump",NEW_MESSENGER_USER_ADMIN_BUMP:"source:messenger_growth:new_messenger_user_admin_bump",EVENT_UPCOMING_BUMP:"source:messenger_growth:event_upcoming_bump",PHOTO_TAG_BUMP:"source:messenger_growth:photo_tag_bump",WALL_POST_BUMP:"source:messenger_growth:wall_post_bump",CUSTOMIZATION_UPSELL_BUMP:"source:messenger_growth:customization_upsell_bump",PAGE_COMMENT_MSG:"source:pages:question_triggered_convo",COMMENT_PIVOT:"source:messenger_growth:comment_pivot"})}),null);
__d('EmojiLikeConstants',['EmojiStaticConfig'],(function a(b,c,d,e,f,g){'use strict';var h=c('EmojiStaticConfig').sizeMap,i={XSMALL:'xsmall',SMALL:'small',MEDIUM:'medium',LARGE:'large'},j={dp16:'xsmall',dp32:'small',dp64:'medium',db64:'medium',dp128:'large'},k={PICKER:'picker',HOT_LIKE:'hot_like'},l=[983040],m='hot_emoji_source',n='hot_emoji_size',o='emoji_like',p='\uD83D\uDC4D',q=[128077];f.exports={FB_THUMBS_UP_EMOJI:l,size:i,sizeMap:h,sizeMapTransfer:j,source:k,SOURCE_TAG_PREFIX:m,TAG_PREFIX_NEW:n,TAG_PREFIX_OLD:o,THUMBS_UP_EMOJI:p,THUMBS_UP_EMOJI_CODES:q}}),null);
__d('MercuryTagHelper',[],(function a(b,c,d,e,f,g){'use strict';var h={get:function i(j,k){var l=j.find(function(m){return m.startsWith(k)});return l&&l.substr(l.indexOf(':')+1)}};f.exports=h}),null);
__d('EmojiLikeUtils',['EmojiLikeConstants','EmoticonEmojiList','MercuryTagHelper'],(function a(b,c,d,e,f,g){'use strict';function h(n,o){if(!n.tags){n.tags=[i(o)]}else n.tags.push(i(o));return n}function i(n){var o=c('EmojiLikeConstants').TAG_PREFIX_NEW;return o+':'+n}function j(n,o){if(!n.tags){n.tags=[k(o)]}else n.tags.push(k(o));return n}function k(n){return c('EmojiLikeConstants').SOURCE_TAG_PREFIX+':'+n}function l(n){return m(n)!=null}function m(n){if(!n.tags)return null;var o=c('MercuryTagHelper').get(n.tags,c('EmojiLikeConstants').TAG_PREFIX_NEW);if(o)return o;return c('MercuryTagHelper').get(n.tags,c('EmojiLikeConstants').TAG_PREFIX_OLD)}f.exports={getEmojiSize:m,isEmojiLike:l,setEmojiSize:h,setEmojiSource:j}}),null);
__d("MercuryAttachmentContentType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({PHOTO:"attach:image",VIDEO:"attach:video",MUSIC:"attach:music",VOICE:"attach:voice",TEXT:"attach:text",MSWORD:"attach:ms:word",MSXLS:"attach:ms:xls",MSPPT:"attach:ms:ppt",ORION:"attach:orion",SHOERACK_INVITATION:"attach:shoerackinvite",UNKNOWN:"attach:unknown"})}),null);
__d("MercuryAttachmentType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ERROR:"error",FILE:"file",PHOTO:"photo",STICKER:"sticker",SHARE:"share",UNKNOWN:"unknown",VIDEO:"video",ANIMATED_IMAGE:"animated_image",EMOJI_LIKE:"emoji_like",GIFT:"gift",THIRDPARTYSTICKER:"third_party_sticker"})}),null);
__d("StoryAttachmentStyle",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({FALLBACK:"fallback",SHARE:"share",OG_COMPOSER_SIMPLE:"og_composer_simple",SPORTS_MATCHUP:"sports_matchup",SHARE_LARGE_IMAGE:"share_large_image",PHOTO:"photo",COVER_PHOTO:"cover_photo",INSPIRATION_PHOTO:"inspiration_photo",ALBUM:"album",NEW_ALBUM:"new_album",COUPON:"coupon",QUESTION:"question",ANSWER:"answer",OPTION:"option",GALLERY:"gallery",STREAM_PUBLISH:"stream_publish",MUSIC_AGGREGATION:"music_aggregation",ITEM_LIST:"list",HIGH_SCORE:"high_score",SCORE_LEADERBOARD:"score_leaderboard",FRIEND_LIST:"friend_list",POPULAR_OBJECTS:"popular_objects",AVATAR_LIST:"avatar_list",AVATAR:"avatar",AVATAR_WITH_VIDEO:"avatar_with_video",EVENT:"event",CANCELED_EVENT:"canceled_event",MINUTIAE_EVENT:"minutiae_event",EXPERIENCE:"experience",LIFE_EVENT:"life_event",GIFT:"gift",IMAGE_SHARE:"image_share",ANIMATED_IMAGE_SHARE:"animated_image_share",ANIMATED_IMAGE_AUTOPLAY:"animated_image_autoplay",ANIMATED_IMAGE_VIDEO:"animated_image_video",ANIMATED_IMAGE_VIDEO_AUTOPLAY:"animated_image_video_autoplay",NOTE:"note",TOPIC:"topic",TOPIC_FOLLOWING_TOPIC:"topic_following_topic",FILE_UPLOAD:"file_upload",NOTIFICATION_TARGET:"notification_target",UNAVAILABLE:"unavailable",PAGE_RECOMMENDATION:"page_recommendation",PAGE_VIDEO_PLAYLIST:"page_video_playlist",VIDEO:"video",VIDEO_INLINE:"video_inline",VIDEO_AUTOPLAY:"video_autoplay",VIDEO_SHARE:"video_share",VIDEO_SHARE_HIGHLIGHTED:"video_share_highlighted",VIDEO_SHARE_YOUTUBE:"video_share_youtube",VIDEO_DIRECT_RESPONSE:"video_direct_response",VIDEO_DIRECT_RESPONSE_AUTOPLAY:"video_direct_response_autoplay",VIDEO_SHOP:"video_shop",INSPIRATION_VIDEO:"inspiration_video",MULTI_VIDEOS_STITCHED:"multi_videos_stitched",MAP:"map",OG_MAP:"og_map",PRODUCT:"product",EXTERNAL_PRODUCT:"external_product",FITNESS_COURSE:"fitness_course",APPLICATION:"application",STICKER:"sticker",EXTERNAL_OG_PRODUCT:"external_og_product",TRAVEL_LOG:"travel_log",MULTI_SHARE:"multi_share",MULTI_SHARE_NO_END_CARD:"multi_share_no_end_card",MULTI_SHARE_NON_LINK_VIDEO:"multi_share_non_link_video",MULTI_SHARE_SEARCH_END_CARD:"multi_share_search_end_card",MULTI_SHARE_FIXED_TEXT:"multi_share_fixed_text",YEAR_IN_REVIEW:"year_in_review",AVATAR_LARGE_COVER:"avatar_large_cover",COMMERCE_PRODUCT_ITEM:"commerce_product_item",COMMERCE_STORE:"commerce_store",THIRD_PARTY_PHOTO:"third_party_photo",PROMPT:"prompt",BIRTHDAY:"birthday",BIRTHDAY_PERCEPTICONS:"birthday_percepticons",DISCUSSION_CONVERSATION:"discussion_conversation",DISCUSSION_COMMENT:"discussion_comment",GROUP_SELL_PRODUCT_ITEM:"group_sell_product_item",GROUP_SELL_PRODUCT_ITEM_MARK_AS_SOLD:"group_sell_mark_as_sold",GAMETIME:"gametime",GAMETIME_LEAGUE:"gametime_league",GAMETIME_PLAY:"gametime_play",GROUP_REPORTED_POST_QUEUE:"group_reported_post_queue",GROUP_PENDING_POST_QUEUE:"group_pending_post_queue",GROUP_JOIN_REQUEST_QUEUE:"group_join_request_queue",GREETING_CARD:"greeting_card",LEAD_GEN:"lead_gen",ATTACHED_STORY:"attached_story",POST_CHANNEL:"post_channel",TEXT_FOR_COLLAGE:"text_for_collage",SOUVENIR:"souvenir",SLIDESHOW:"slideshow",ORION:"orion",ORION_REQUEST:"orion_request",P2P_PAYMENT:"p2p_payment",P2P_SERVER_BUBBLE:"p2p_server_bubble",INSTANT_ARTICLE:"instant_article",MOMENTS_APP_INVITATION:"moments_app_invitation",MOMENTS_APP_PHOTO_REQUEST:"moments_app_photo_request",RIDE_ORDERED:"ride_ordered",RIDE_RECEIPT:"ride_receipt",BUSINESS_MESSAGE_ITEMS:"business_message_items",RETAIL_CANCELLATION:"retail_cancellation",RETAIL_PROMOTION:"retail_promotion",RETAIL_ITEM:"retail_item",RETAIL_NOW_IN_STOCK:"retail_now_in_stock",RETAIL_RECEIPT:"retail_receipt",RETAIL_SHIPMENT:"retail_shipment",RETAIL_SHIPMENT_FOR_SUPPORTED_CARRIER:"retail_shipment_for_supported_carrier",RETAIL_SHIPMENT_FOR_UNSUPPORTED_CARRIER:"retail_shipment_for_unsupported_carrier",RETAIL_SHIPMENT_TRACKING_EVENT:"retail_shipment_tracking_event",RETAIL_SHIPMENT_TRACKING_EVENT_ETA:"retail_shipment_tracking_event_eta",RETAIL_SHIPMENT_TRACKING_EVENT_IN_TRANSIT:"retail_shipment_tracking_event_in_transit",RETAIL_SHIPMENT_TRACKING_EVENT_OUT_FOR_DELIVERY:"retail_shipment_tracking_event_out_for_delivery",RETAIL_SHIPMENT_TRACKING_EVENT_DELAYED:"retail_shipment_tracking_event_delayed",RETAIL_SHIPMENT_TRACKING_EVENT_DELIVERED:"retail_shipment_tracking_event_delivered",SURVEY:"survey",MESSAGE_LOCATION:"message_location",GROUP_ADD_MEMBERS:"group_add_memebers",GROUP_MEMBER_ADDED:"group_member_added",RTC_CALL_LOG:"rtc_call_log",EVENTS_PENDING_POST_QUEUE:"events_pending_post_queue",EVENT_CALENDAR:"event_calendar",FACEPILE:"facepile",ATTRIBUTED_SHARE:"attributed_share",VIDEO_CINEMAGRAPH:"video_cinemagraph",LOCAL_CONTEXT_SHARE:"local_context_share",H_SCROLL:"h_scroll",EGO_HSCROLL:"ego_hscroll",MEDIA_QUESTION:"media_question",RICH_MEDIA:"rich_media",RICH_MEDIA_COLLECTION:"rich_media_collection",SQUARE_IMAGE_SHARE:"square_image_share",RETAIL_AGENT_ITEM_SUGGESTION:"retail_agent_item_suggestion",RETAIL_AGENT_ITEM_RECEIPT:"retail_agent_item_receipt",NOTE_COMPOSED:"note_composed",AVATAR_WITH_BIRTHDAY:"avatar_with_birthday",AIRLINE_FLIGHT_RESCHEDULE_UPDATE_BUBBLE:"airline_flight_reschedule_update_bubble",AIRLINE_CONFIRMATION:"airline_confirmation",AIRLINE_CHECK_IN:"airline_check_in",AIRLINE_BOARDING_PASS:"airline_boarding_pass",AIRLINE_FLIGHT_RESCHEDULE_UPDATE:"airline_flight_reschedule_update",LIGHTBOX_VIDEO:"lightbox_video",GLOBALLY_DELETED_MESSAGE_PLACEHOLDER:"globally_deleted_message_placeholder",GENIE_MESSAGE:"genie_message",MOVIE_BOT_MOVIE_LIST:"movie_bot_movie_list",MOVIE_BOT_MOVIE_SHOWTIME_LIST:"movie_bot_movie_showtime_list",AVATAR_WITH_EGO_ACTION:"avatar_with_ego_action",EVENT_TICKET_DEPRECATED:"event_ticket",VERTICAL_ATTACHMENT_LIST:"vertical_attachment_list",INSTANT_ARTICLE_LEGACY:"instant_article_legacy",FUNDRAISER_PAGE:"fundraiser_page",FINANCIAL_BILL_PAYMENT_REQUEST:"financial_bill_payment_request",GOODWILL_THROWBACK_FRIENDVERSARY_POLAROIDS_CARD:"goodwill_throwback_friendversary_polaroids_card",WELCOME_CARD_IMAGE:"welcome_card_image",LARGE_IMAGE_LIKE:"large_image_like",ASK_FRIENDS:"ask_friends",CULTURAL_MOMENT:"cultural_moment",TELEPHONE_CALL_LOG:"telephone_call_log",SUPER_EMOJI:"super_emoji",BOOK:"book",SUBTOPIC_CUSTOMIZATION_QUESTION:"subtopic_customization_question",SUBTOPIC_CUSTOMIZATION_OPTION:"subtopic_customization_option",RESTAURANT:"restaurant",CONNECTION_QUESTION:"connection_question",CONNECTION_QUESTION_OPTION:"connection_question_option",PYMI_ITEM:"pymi_item",GOODWILL_THROWBACK_FRIENDVERSARY_COLLAGE_CARD:"goodwill_throwback_friendversary_collage_card",CITY:"city",AVATAR_WITH_SHARE:"avatar_with_share",LIGHTWEIGHT_PLACE:"lightweight_place",QUOTED_SHARE:"quoted_share",SMS_LOG:"sms_log",CENTERED_TEXT:"centered_text",GOODWILL_THROWBACK_FRIENDVERSARY_DATA_CARD:"goodwill_throwback_friendversary_data_card",GOODWILL_THROWBACK_FACEVERSARY_COLLAGE_CARD:"goodwill_throwback_faceversary_collage_card",GOODWILL_THROWBACK_ANNIVERSARY_COLLAGE_CARD:"goodwill_throwback_anniversary_collage_card",MESSAGE_EVENT:"message_event",MESSAGE_THREAD:"message_thread",QUOTE:"quote",VOTER_REGISTRATION_SHARE:"voter_registration_share",AIRLINE_ITINERARY:"airline_itinerary",AIRLINE_UPDATE:"airline_update",PLACE_LIST:"place_list",IMPLICIT_PLACE_LIST_CONVERSION:"implicit_place_list_conversion",AIRLINE_CHECKIN_REMINDER:"airline_checkin_reminder",MINUTIAE_UNIT:"minutiae_unit",INSTANT_ARTICLE_PHOTO:"instant_article_photo",INSTANT_ARTICLE_VIDEO:"instant_article_video",PHOTO_LINK_SHARE:"photo_link_share",BUSINESS_LOCATION:"business_location",GOODWILL_WEATHER:"goodwill_weather",CULTURAL_MOMENT_HOLIDAY_CARD:"cultural_moment_holiday_card",TRANSACTION_INVOICE:"transaction_invoice",GROUP:"group",COMMENT_PLACE_INFO:"comment_place_info",COMMENT_PRODUCT_INFO:"comment_product_info",GOODWILL_THROWBACK_FRIENDVERSARY_POLAROIDS_CARD_IPB:"goodwill_throwback_friendversary_polaroids_card_ipb",GOODWILL_THROWBACK_FRIENDVERSARY_COLLAGE_CARD_IPB:"goodwill_throwback_friendversary_collage_card_ipb",FUNDRAISER_PERSON_TO_CHARITY:"fundraiser_person_to_charity",FUNDRAISER_PERSON_FOR_PERSON:"fundraiser_person_for_person",FUNDRAISER_FOR_STORY:"fundraiser_for_story",MESSAGE_LIVE_LOCATION:"message_live_location",MESSENGER_INVITE:"messenger_invite",GAMES_INSTANT_PLAY:"games_instant_play",PROFILE_MEDIA:"profile_media",NATIVE_TEMPLATES:"native_templates",GOODWILL_THROWBACK_VIDEO_BASIC:"goodwill_throwback_video_basic",COMMERCE_PRODUCT_MINI:"commerce_product_mini",COMMERCE_PRODUCT_MINI_LIST:"commerce_product_mini_list",COMMENT:"comment",MESSENGER_TEAM_BOT_SHARE:"messenger_team_bot_share",LIVE_VIDEO_SCHEDULE:"live_video_schedule",PRODUCT_ITEM:"product_item",PLATFORM_INSTANT_APP:"platform_instant_app",YEAR_OVERVIEW:"year_overview",NATIVE_COMPONENT_FLOW_BOOKING_REQUEST:"native_component_flow_booking_request",FRIEND_REQUEST:"friend_request",MESSENGER_GROUP_JOINABLE_LINK:"messenger_group_joinable_link",SOCIAL_SEARCH_CONVERSION_PROMPT:"social_search_conversion_prompt",MDOTME_USER_LINK:"mdotme_user_link",DYNAMIC_MULTI_SHARE_ITEMS:"dynamic_multi_share_items",EVENT_REMINDER:"event_reminder",INSTANT_GAMES_SHARE_MESSAGE:"instant_games_share_message",MESSENGER_PLATFORM_COMPACT_ITEM:"messenger_platform_compact_item",MESSENGER_PLATFORM_COVER_ITEM:"messenger_platform_cover_item",MULTI_SHARE_NON_LINK_VIDEO_AUTO_SCROLL:"multi_share_non_link_video_auto_scroll",ENDORSEMENT:"endorsement",OFFER_VIEW_LIVE_COUNTDOWN:"offer_view_live_countdown",ENHANCED_LINK_REDDIT_POST:"enhanced_link_reddit_post",MESSENGER_COMMERCE_COVER_ITEM:"messenger_commerce_cover_item",ENHANCED_LINK_YELP_BUSINESS:"enhanced_link_yelp_business",PAGES_PLATFORM_LEAD_GEN:"pages_platform_lead_gen",NATIVE_STORY:"native_story",MFS_BILL_PAY_CREATION_UPDATE:"mfs_bill_pay_creation_update",MFS_BILL_PAY_REFERENCE_CODE_UPDATE:"mfs_bill_pay_reference_code_update",MFS_BILL_PAY_AGENT_CASH_IN_UPDATE:"mfs_bill_pay_agent_cash_in_update",ISSUE_POSITION:"issue_position",PAGES_PLATFORM_BOOKING_MESSAGE:"pages_platform_booking_message",EXTERNAL_GALLERY:"external_gallery",MEME_SHARE:"meme_share",MESSENGER_PLATFORM_ELEMENT:"messenger_platform_element",INSTANT_GAMES_SHARE_SCORE_MESSAGE:"instant_games_share_score_message",MESSENGER_PLATFORM_BUTTON_LIST:"messenger_platform_button_list",BALLOT:"ballot",LIGHTWEIGHT_ACTION:"lightweight_action",TAROT_DIGEST:"tarot_digest",EVENT_TOUR:"event_tour",ADAPTIVE_MEDIA:"adaptive_media",DYNAMIC_GAME_BOARD:"dynamic_game_board",PAYMENT_PLATFORM:"payment_platform",OMNI_M_FLOW:"omni_m_flow",GROUP_QUIZ:"group_quiz",TRIAL_AD:"trial_ad",TEEM_COLLECTIONS:"teem_collections",CRISIS_STATUS:"crisis_status",CRISIS_LISTING:"crisis_listing",VR_CONTENT:"vr_content",VIDEO_RECOMMENDATION_HSCROLL:"video_recommendation_hscroll",VIDEO_TRAILER:"video_trailer",SHOW_PAGE_SHARE:"show_page_share",MFS_ATTACHMENT:"mfs_attachment",GROUP_TASK:"group_task",CHECKLIST:"checklist",VIDEO_RECOMMENDATION_SINGLETON:"video_recommendation_singleton",PAGE_REVIEW_PROMPT:"page_review_prompt",VIDEO_SHOW:"video_show",UNCONNECTED_VIDEO:"unconnected_video",SHOW_SHARE:"show_share",JOB_SEARCH_JOB_APPLICATION:"job_search_job_application",PAGE_MESSENGER_ATTACHMENT:"page_messenger_attachment",CONTACT_YOUR_REP:"contact_your_rep",LOCATION_EXTENSION:"location_extension",PLACE_RECOMMENDATION:"place_recommendation",JOB_SEARCH_JOB_OPENING:"job_search_job_opening",PAGE_MESSAGE_ONLINE_INDICATOR:"page_message_online_indicator",LOCAL_PIVOT:"local_pivot",ORION_REQUEST_NEW:"orion_request_new",PHOTO_WITH_SHIELD:"photo_with_shield",PLAYABLE_AD:"playable_ad",FUN_FACT_PROMPT:"fun_fact_prompt",FATIGUED_SHARE:"fatigued_share",DISCUSSION_QUESTION:"discussion_question",PARTIES_INVITE:"parties_invite",PROFILE_INTRO_CARD_BIO:"profile_intro_card_bio",PAGES_SHARE:"pages_share",PRODUCT_RECOMMENDATION_LIST:"product_recommendation_list",VISUAL_POLL:"visual_poll",MULTI_PLACE_RECOMMENDATION:"multi_place_recommendation",PAGE_IN_COMMENT:"page_in_comment",MESSENGER_PLATFORM_MEDIA_ATTACHMENT:"messenger_platform_media_attachment",SCHEDULED_VIDEO_ANNOUNCEMENT:"scheduled_video_announcement",HSCROLL_ITEM:"hscroll_item",MESSENGER_CALL_LOG:"messenger_call_log",PAGE_REVIEW_UPDATE:"page_review_update",LOYALTY_CARD_OFFER:"loyalty_card_offer",GOODWILL_GRID:"goodwill_grid",TRAVEL_PLAN:"travel_plan",FIND_PLAYERS:"find_players",ASSET3D:"asset3d",MESSENGER_GROUP_PERSONAL_LINK:"messenger_group_personal_link",FREQUENTLY_ASKED_QUESTION:"frequently_asked_question",STORY_LIST:"story_list",GOODWILL_SHARED_CARD:"goodwill_shared_card",PAYMENT_BUBBLE_VIEW:"PAYMENT_BUBBLE_VIEW",POST_TO_EVENT_CREATE:"post_to_event_create",MONTAGE_DIRECT:"montage_direct",NEO_INVITATION:"neo_invitation",NATIVE_TEMPLATES_LINK_SHARE_TEST:"native_templates_link_share_test",GOODWILL_HSCROLL:"goodwill_hscroll",NEO_KID_INITIATE_FRIENDING:"neo_kid_initiate_friending",EVENT_MINI_ATTACHMENT:"event_mini_attachment",SAVED_LIST:"saved_list",LOCAL_GUIDE:"local_guide"})}),null);
__d('MercuryAttachment',['cx','EmojiLikeUtils','MercuryAttachmentContentType','MercuryAttachmentType','MercuryAudioType','Set','StoryAttachmentStyle'],(function a(b,c,d,e,f,g,h){'use strict';var i=function m(n){return n===Object(n)},j="_1c_u",k=new (c('Set'))([c('MercuryAttachmentType').ANIMATED_IMAGE,c('MercuryAttachmentType').PHOTO,c('MercuryAttachmentType').VIDEO,c('MercuryAttachmentType').THIRDPARTYSTICKER]),l={getAttachIconClass:function m(n){switch(n){case c('MercuryAttachmentContentType').PHOTO:return "_y2-";case c('MercuryAttachmentContentType').VIDEO:return "_y2_";case c('MercuryAttachmentContentType').MUSIC:return "_y30";case c('MercuryAttachmentContentType').VOICE:return "_y31";case c('MercuryAttachmentContentType').TEXT:return "_y32";case c('MercuryAttachmentContentType').MSWORD:return "_y33";case c('MercuryAttachmentContentType').MSXLS:return "_y34";case c('MercuryAttachmentContentType').MSPPT:return "_y35";}return "_y36"},getAttachIconClassByMime:function m(n){return this.getAttachIconClass(this.getAttachTypeByMime(n))},getAttachTypeByMime:function m(n){if(n.startsWith('image')){return c('MercuryAttachmentContentType').PHOTO}else if(n.startsWith('video')){return c('MercuryAttachmentContentType').VIDEO}else if(n.startsWith('audio')){return c('MercuryAttachmentContentType').MUSIC}else if(n.startsWith('text/plain')){return c('MercuryAttachmentContentType').TEXT}else if(n=='application/msword'||n.startsWith('application/vnd.ms-word')||n.startsWith('application/vnd.openxmlformats-officedocument.wordprocessingml')){return c('MercuryAttachmentContentType').MSWORD}else if(n.startsWith('application/vnd.ms-excel')||n.startsWith('application/vnd.openxmlformats-officedocument.spreadsheetml')){return c('MercuryAttachmentContentType').MSXLS}else if(n.startsWith('application/vnd.ms-powerpoint')||n.startsWith('application/vnd.openxmlformats-officedocument.presentationml')){return c('MercuryAttachmentContentType').MSPPT}else return c('MercuryAttachmentContentType').UNKNOWN;},convertRaw:function m(n){var o=[];for(var p=0;p<n.length;p++){var q=n[p];if(q.attach_type===c('MercuryAttachmentType').PHOTO){o.push(q)}else if(q.filename){var r=l.getAttachTypeByMime(q.filetype),s={};s.attach_type=c('MercuryAttachmentType').FILE;s.name=q.filename;s.icon_type=r;s.url='';o.push(s)}}return o},get:function m(n){var o=[];if(n.attachments){o=n.attachments}else if(n.raw_attachments)o=this.convertRaw(n.raw_attachments);var p=c('EmojiLikeUtils').getEmojiSize(n);if(p)o=o.concat([{attach_type:c('MercuryAttachmentType').EMOJI_LIKE,size:p}]);if(!(n.attachments&&n.attachments.length>0)){if(n.sticker_id)return o.concat([{attach_type:c('MercuryAttachmentType').STICKER}]);if(n.preview_attachments&&n.preview_attachments.length>0)return o.concat(n.preview_attachments);}return o},resizeContain:function m(n,o){var p=n.width/n.height,q=o.width/o.height;if(q<p){return {width:Math.ceil(Math.min(n.height*q,o.width)),height:Math.ceil(Math.min(n.height,o.height))}}else return {width:Math.ceil(Math.min(n.width,o.width)),height:Math.ceil(Math.min(n.width/q,o.height))};},isBubblePreferred:function m(n){return this.isFileAttachment(n)},isPhotoAttachment:function m(n){return !!(n.attach_type==c('MercuryAttachmentType').PHOTO||n.attach_type==c('MercuryAttachmentType').ANIMATED_IMAGE||n.attach_type==c('MercuryAttachmentType').THIRDPARTYSTICKER||n.attach_type==c('MercuryAttachmentType').FILE&&n.preview_url)},isPhotoGroupAttachment:function m(n){return k.has(n.attach_type)},isSinglePhotoGroupAttachment:function m(n){return !!(n.attachments&&n.attachments.length===1&&n.attachments[0]&&this.isPhotoGroupAttachment(n.attachments[0]))},isVideoAttachment:function m(n){return n.attach_type==c('MercuryAttachmentType').VIDEO},isShareAttachment:function m(n){return n.attach_type==c('MercuryAttachmentType').SHARE},isFileAttachment:function m(n){return n.attach_type==c('MercuryAttachmentType').FILE},isErrorAttachment:function m(n){return n.attach_type==c('MercuryAttachmentType').ERROR},isStickerAttachment:function m(n){return n.attach_type==c('MercuryAttachmentType').STICKER},isEmojiLikeAttachment:function m(n){return n.attach_type===c('MercuryAttachmentType').EMOJI_LIKE},isVoiceAttachment:function m(n){if(!n.metadata)return false;return n.metadata.type===c('MercuryAudioType').AudioClip||n.metadata.type===c('MercuryAudioType').VoiceMessageWithTranscript},hasAttribution:function m(n){return !!n.app_attribution},isSingleVideoAttachment:function m(n){var o=this.get(n).filter(i).filter(function(p){return this.isVideoAttachment(p)}.bind(this));return o.length===1},isSharedVideoAttachment:function m(n){var o=n.attach_type===c('MercuryAttachmentType').SHARE&&n.share&&n.share.subattachments&&n.share.subattachments[0];return !!(o&&o.target&&o.target.video_id)},isGenieSharedVideoAttachment:function m(n){return !!(n.attach_type===c('MercuryAttachmentType').SHARE&&n.share&&n.share.style_list.indexOf(c('StoryAttachmentStyle').GENIE_MESSAGE)>-1&&n.share.target&&n.share.target.attachment&&this.isSharedVideoAttachment(n.share.target.attachment))},isSharedVideoAttachmentMessage:function m(n){var o=this.get(n).filter(i).filter(function(p){return this.isSharedVideoAttachment(p)||this.isGenieSharedVideoAttachment(p)}.bind(this));return o.length===1},getVideoElem:function m(n,o){var p=o.getMessageElement(n);if(!p)return null;var q=p.getElementsByClassName(j);return q&&q.length?q[0]:p}};f.exports=l}),null);
__d('MercuryDisplayTimeFilterMessageRenderer',['fbt'],(function a(b,c,d,e,f,g,h){'use strict';var i={renderFilteredContent:function j(k){if(k.is_filtered_content_bh)return h._("Este mensaje se ha eliminado porque contiene enlaces bloqueados o da\u00f1inos.");if(k.is_filtered_content_account)return h._("Este mensaje se ha eliminado temporalmente porque la cuenta del remitente requiere verificaci\u00f3n.");if(k.is_filtered_content_quasar)return h._("Este mensaje se ha eliminado porque incluye contenido bloqueado o da\u00f1ino.");if(k.is_filtered_content_invalid_app)return h._("Este mensaje se ha eliminado porque la aplicaci\u00f3n desde la que se env\u00eda est\u00e1 bloqueada y no puede enviar mensajes.");return h._("Este mensaje se ha eliminado temporalmente porque es necesario verificar la cuenta del remitente, o se ha identificado como abusiva.")}};f.exports=i}),null);
__d('MercuryGiftSnippetRenderer',['fbt'],(function a(b,c,d,e,f,g,h){'use strict';var i={renderText:function j(k,l){return k?h._("Has enviado un mensaje de San Valent\u00edn."):h._("{name} ha enviado un mensaje de San Valent\u00edn.",[h.param('name',l)])}};f.exports=i}),null);
__d("MercuryGlobalActionType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({MARK_ALL_READ:"mga-type:mark-all-read",MARK_ALL_SEEN:"mga-type:mark-all-seen"})}),null);
__d("MercuryLogMessageType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({SUBSCRIBE:"log:subscribe",UNSUBSCRIBE:"log:unsubscribe",VIDEO_CALL:"log:video-call",PHONE_CALL:"log:phone-call",THREAD_NAME:"log:thread-name",THREAD_IMAGE:"log:thread-image",SERVER_ERROR:"log:error-msg",LIVE_LISTEN:"log:live-listen",WALLPAPER:"log:wallpaper",ORION:"log:orion",SWITCH_TO_WORK:"log:switch",PAGE_REPLY:"log:page-reply",GENERIC_ADMIN_TEXT:"log:generic-admin-text"})}),null);
__d('ImageSourceType',[],(function a(b,c,d,e,f,g){var h={PROFILE_PICTURE:'profile_picture',IMAGE:'image'};f.exports=h}),null);
__d("PhotoResizeModeConst",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CONTAIN:"s",COVER:"p"})}),null);
__d('ImageSourceRequest',['CurrentUser','ImageSourceType','KeyedCallbackManager','PhotoResizeModeConst','MercuryServerDispatcher'],(function a(b,c,d,e,f,g){function h(){'use strict';this._request={fbid:null,type:null,width:null,height:null,resize_mode:null};this._callback=null}h.prototype.setFBID=function(l){'use strict';this._request.fbid=l;return this};h.prototype.setType=function(l){'use strict';if(![c('ImageSourceType').PROFILE_PICTURE,c('ImageSourceType').IMAGE].includes(l))throw new TypeError('ImageSourceRequest.setType: invalid type '+l);this._request.type=l;return this};h.prototype.setDimensions=function(l,m){'use strict';this._request.width=l;this._request.height=m;return this};h.prototype.setResizeMode=function(l){'use strict';if(![c('PhotoResizeModeConst').COVER,c('PhotoResizeModeConst').CONTAIN].includes(l))throw new TypeError('ImageSourceRequest.setResizeMode: invalid resize mode '+l);this._request.resize_mode=l;return this};h.prototype.setCallback=function(l){'use strict';this._callback=l;return this};h.prototype.send=function(){'use strict';if(!this._request.fbid||!this._request.width||!this._request.height||!this._request.type||!this._request.resize_mode||!this._callback)throw new Error('ImageSourceRequest: You must set all the fields');var l=j(),m=k(this._request);l.executeOrEnqueue(m,this._callback);if(l.getUnavailableResourcesFromRequest(m).length===1){c('MercuryServerDispatcher').trySend('/ajax/image_source.php',{requests:[this._request]});return true}return false};var i=null;function j(){if(i)return i;var l=new (c('KeyedCallbackManager'))();i=l;c('MercuryServerDispatcher').registerEndpoints({'/ajax/image_source.php':{request_user_id:c('CurrentUser').getID(),mode:c('MercuryServerDispatcher').BATCH_DEFERRED_MULTI,batch_function:function m(n,o){var p;(p=n.requests).push.apply(p,o.requests);return n},handler:function m(n,o){var p=o.getData().requests;for(var q=0;q<p.length;++q)l.setResource(k(p[q]),n[q]);}}});return l}function k(l){return [l.fbid,l.type,l.width,l.height,l.resize_mode].join('|')}f.exports=h}),null);
__d('MercurySendErrorLogger',['Banzai','BanzaiLogger'],(function a(b,c,d,e,f,g){var h=c('BanzaiLogger').create({retry:true}),i=c('Banzai').isEnabled('mercury_send_error_logging'),j={log:function k(l){if(!i)return;var m={message_id:l.message_id,timestamp_client:Date.now(),error_type:l.error_data.type,error_code:l.error_data.code,error_description:l.error_data.description,is_transient:l.error_data.is_transient};h.log('MercurySendErrorLoggerConfig',m)}};f.exports=j}),null);
__d('MercuryServerPayloadPreprocessor',['invariant','MessengerEnvironment','MercuryIDs','MercuryActionStatus','MercuryActionType','MercuryAttachment','MercuryDispatcher','MercurySendErrorLogger','MercurySingletonProvider','MercuryThreadIDMap','URI'],(function a(b,c,d,e,f,g,h){'use strict';function i(k){this.$MercuryServerPayloadPreprocessor1=k;this.$MercuryServerPayloadPreprocessor2=c('MercuryThreadIDMap').getForFBID(this.$MercuryServerPayloadPreprocessor1);this.$MercuryServerPayloadPreprocessor3=c('MercuryDispatcher').getForFBID(this.$MercuryServerPayloadPreprocessor1)}i.getForFBID=function(k){return j.getForFBID(k)};i.get=function(){return j.get()};i.prototype.handleUpdate=function(k){var l={};!k.from_client||h(0);(k.threads||[]).forEach(function(x){this.$MercuryServerPayloadPreprocessor4(x,l);var y=this.$MercuryServerPayloadPreprocessor2.getServerIDFromClientIDNow(x.thread_id);e(['MercuryServerRequests'],function(z){var aa=z.getForFBID(this.$MercuryServerPayloadPreprocessor1);aa.markThreadFetched(x.thread_id);if(y)aa.markThreadFetched(y);aa.updateLastActionTimestamp(x.timestamp)}.bind(this))}.bind(this));(k.ordered_threadlists||[]).forEach(function(x){var y=x.thread_fbids||[];y=y.concat(x.other_user_fbids||[]);x.thread_ids=y.map(function(z){return this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(z.toString())}.bind(this))}.bind(this));if(k.pinned_threads&&k.pinned_threads.thread_fbids)k.pinned_threads.thread_fbids=k.pinned_threads.thread_fbids.map(function(x){return this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(x)}.bind(this));if(k.delivery_receipts){var m={};for(var n=k.delivery_receipts,o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var q;if(o){if(p>=n.length)break;q=n[p++]}else{p=n.next();if(p.done)break;q=p.value}var r=q,s=r.other_user_fbid?c('MercuryIDs').getThreadIDFromUserID(r.other_user_fbid):this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(r.thread_fbid);if(s)m[s]=r.time;}k.delivery_receipts=m}k.actions=k.actions||[];k.actions.forEach(function(x){if(x.action_type===c('MercuryActionType').SEND_MESSAGE&&x.status===c('MercuryActionStatus').ERROR)c('MercurySendErrorLogger').log(x);var y=null,z=null;if(x.other_user_fbid){z=c('MercuryIDs').getThreadIDFromUserID(x.other_user_fbid);y=x.other_user_fbid}else if(x.thread_fbid){z=c('MercuryIDs').getThreadIDFromThreadFBID(x.thread_fbid);y=x.thread_fbid}else if(x.thread_id){z=c('MercuryIDs').getThreadIDFromThreadFBID(x.thread_id);y=x.thread_id}else if(x.status&&x.status!=c('MercuryActionStatus').SUCCESS&&x.client_thread_id){z=x.client_thread_id}else h(0);y=y&&y.toString();x.thread_id=this.$MercuryServerPayloadPreprocessor2.hasClientIDForServerID(y)?this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(y):z;if(x.action_type==c('MercuryActionType').SEND_MESSAGE&&x.client_thread_id&&y){x.thread_id=x.client_thread_id;this.$MercuryServerPayloadPreprocessor2.forceSetServerIDToClientID(y,x.client_thread_id);l[y]=x.client_thread_id}x.thread_id||h(0);if(!k.payload_source||!k.payload_source.startsWith('server'))e(['MercuryServerRequests'],function(aa){aa.getForFBID(this.$MercuryServerPayloadPreprocessor1).updateLastActionTimestamp(x.timestamp)}.bind(this));}.bind(this));this.$MercuryServerPayloadPreprocessor5(k);this.$MercuryServerPayloadPreprocessor6(k);if(k.end_of_history){var t=[];for(var u=0;u<k.end_of_history.length;u++){var v=k.end_of_history[u];if(v.type=='user'){t.push('user:'+v.fbid)}else if(v.type=='thread'&&this.$MercuryServerPayloadPreprocessor2.hasClientIDForServerID(v.fbid))t.push(this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(v.fbid));}k.end_of_history=t}if(k.roger){var w={};Object.keys(k.roger).forEach(function(x){var y=Object.keys(k.roger[x]),z=void 0;if(x){z=this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(x)}else if(y.length===1)z=c('MercuryIDs').getThreadIDFromUserID(y[0]);if(z){var aa=k.roger[x];w[z]={};for(var ba in aa)if(Object.prototype.hasOwnProperty.call(aa,ba)){var ca=c('MercuryIDs').getParticipantIDFromUserID(ba);w[z][ca]=aa[ba]}}}.bind(this));k.roger=w}k.newlyAddedClientIDs=l;k.preprocessed=true;this.$MercuryServerPayloadPreprocessor3.handleUpdate(k)};i.prototype.$MercuryServerPayloadPreprocessor4=function(k,l){var m=k.other_user_fbid?k.other_user_fbid:k.thread_fbid;m||h(0);var n=this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(m);if(!n){n=k.other_user_fbid?c('MercuryIDs').getThreadIDFromUserID(k.other_user_fbid):c('MercuryIDs').getThreadIDFromThreadFBID(k.thread_fbid);this.$MercuryServerPayloadPreprocessor2.setServerIDToClientID(m,n);this.$MercuryServerPayloadPreprocessor2.setDeprecatedServerIDToClientID(k.thread_id,n);l[m]=n}k.thread_id=n};i.prototype.$MercuryServerPayloadPreprocessor5=function(k){k.actions.forEach(function(l){if(l.action_type===c('MercuryActionType').USER_GENERATED_MESSAGE){l.attachments=l.attachments||[];l.attachments.forEach(function(m){if(c('MercuryAttachment').isShareAttachment(m)&&c('MessengerEnvironment').messengerui){var n=new (c('URI'))(m.share.uri);if(!n.getDomain())m.share.uri=n.setDomain('facebook.com').setSubdomain(c('URI').getRequestURI().getSubdomain()).setProtocol('https').toString();}})}})};i.prototype.$MercuryServerPayloadPreprocessor6=function(k){k.actions.forEach(function(l){if(l.action_type!==c('MercuryActionType').USER_GENERATED_MESSAGE)return;var m=l;if(!m.has_attachment||!m.attachments)return;for(var n=m.attachments.length-1;n>=0;n-=1){var o=m.attachments[n];if(!o.share||!o.share.style_list||o.share.style_list[0]!='genie_message')continue;if(o.share.target.genie_id)m.author=c('MercuryIDs').getParticipantIDFromUserID(o.share.target.genie_id);if(o.share.target&&!o.share.target.attachment){m.attachments.splice(n,1);m.has_attachment=m.attachments.length>0}}})};var j=new (c('MercurySingletonProvider'))(i);f.exports=i}),null);
__d("MercuryErrorType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({SERVER:1,TRANSPORT:2,TIMEOUT:3})}),null);
__d('MercuryMessageIDs',['KeyedCallbackManager'],(function a(b,c,d,e,f,g){'use strict';var h=new (c('KeyedCallbackManager'))(),i={getServerIDs:function j(k,l){var m=k.filter(function(o){return o.indexOf('id')===-1}),n=function o(p){var q=k.map(function(r){return p[r]?p[r]:r});l(q)};return h.executeOrEnqueue(m,n)},addServerID:function j(k,l){h.setResource(k,l)}};f.exports=i}),null);
__d('MercuryServerSendMessageQueueOptions',[],(function a(b,c,d,e,f,g){function h(i,j,k,l,m,n){'use strict';this.success_handler=i;this.error_handler=j;this.transport_error_handler=k;this.timeout_handler=l;this.timeout=m;this.connection_retries=n}f.exports=h}),null);
__d('MercuryServerSendMessageQueueSimulatedError',['AsyncRequest','AsyncResponse'],(function a(b,c,d,e,f,g){var h=9999,i={create:function j(k){var l=new (c('AsyncRequest'))(this.endpoint_uri).setData({message_batch:[k],client:this.client}),m=new (c('AsyncResponse'))(l,{});Object.assign(m,{error:h,silentError:false,transientError:true,request:l});return m}};f.exports=i}),null);
__d("XMessagingSendController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messaging\/send\/",{})}),null);
__d('MercuryServerSendMessageQueue',['fbt','BanzaiODS','ChatReliabilityInstrumentation','LogHistory','MercuryLoggingHelper','MercuryServerRequestsConfig','Run','MercuryServerDispatcher','MercuryServerSendMessageQueueSimulatedError','XMessagingSendController'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('LogHistory').getInstance('mercury_server_send_message_queue');function j(k,l,m,n){var o;this.pending_message=null;this.queue=[];this.$MercuryServerSendMessageQueue5=function(){if(this.queue.length||this.pending_message)return h._("Todav\u00eda no has enviado el mensaje. \u00bfQuieres salir sin enviarlo?");return undefined}.bind(this);this.sender_id=k;this.queue_id=l;this.$MercuryServerSendMessageQueue2=m.success_handler;this.$MercuryServerSendMessageQueue1=m.error_handler;this.$MercuryServerSendMessageQueue4=m.transport_error_handler;this.$MercuryServerSendMessageQueue3=m.timeout_handler;this.client=n;c('Run').onBeforeUnload(this.$MercuryServerSendMessageQueue5,false);var p=null;if(c('MercuryServerRequestsConfig').msgrRegion)p={name:'X-MSGR-Region',value:c('MercuryServerRequestsConfig').msgrRegion};var q=c('XMessagingSendController').getURIBuilder().getURI().toString(),r=(o={},o[q]={request_user_id:this.sender_id,endpoint_id:this.queue_id,mode:c('MercuryServerDispatcher').IMMEDIATE,customHeader:p,handler:this.handleSuccess.bind(this),error_handler:this.handleError.bind(this),transport_error_handler:this.handleTransportError.bind(this),timeout:m.timeout,timeout_handler:this.handleTimeout.bind(this),connection_retries:m.connection_retries},o);c('MercuryServerDispatcher').registerEndpoints(r)}j.prototype.enqueue=function(k){this.queue.push(k);this.$MercuryServerSendMessageQueue6()};j.prototype.$MercuryServerSendMessageQueue6=function(){if(this.pending_message||!this.queue.length){if(this.pending_message)this.$MercuryServerSendMessageQueue7();return}this.pending_message=this.queue.shift();var k={client:this.client,action_type:this.pending_message.action_type,app_id:this.pending_message.app_id,audio_ids:this.pending_message.audio_ids,body:this.pending_message.body,client_thread_id:this.pending_message.client_thread_id,content_attachment:this.pending_message.content_attachment,ephemeral_ttl_mode:this.pending_message.ephemeral_ttl_mode,file_ids:this.pending_message.file_ids,gif_ids:this.pending_message.gif_ids,has_attachment:this.pending_message.has_attachment,image_ids:this.pending_message.image_ids,location_attachment:this.pending_message.location_attachment,lightweight_action_attachment:this.pending_message.lightweight_action_attachment,log_message_data:this.pending_message.log_message_data,log_message_type:this.pending_message.log_message_type,message_id:this.pending_message.message_id,message_source_data:this.pending_message.message_source_data,montage_reply_data:this.pending_message.montage_reply_data,offline_threading_id:this.pending_message.offline_threading_id,other_user_fbid:this.pending_message.other_user_fbid,photo_fbids:this.pending_message.photo_fbids,shareable_attachment:this.pending_message.shareable_attachment,signature_id:this.pending_message.signatureID,source:this.pending_message.source,specific_to_list:this.pending_message.specific_to_list,sticker_id:this.pending_message.sticker_id,tags:this.pending_message.tags,thread_fbid:this.pending_message.thread_fbid,timestamp:this.pending_message.timestamp,ui_push_phase:this.pending_message.ui_push_phase,video_ids:this.pending_message.video_ids,platform_xmd:this.pending_message.platform_xmd,profile_xmd:this.pending_message.profile_xmd};for(var l in k)if(k[l]===undefined||k[l]===null)delete k[l];if(!k.action_type){var m=c('MercuryLoggingHelper').obfuscateMessage(k);c('ChatReliabilityInstrumentation').logERROR('missing action type before sending to send controller',m);i.debug('missing_action_type',JSON.stringify(m))}c('MercuryServerDispatcher').trySend(c('XMessagingSendController').getURIBuilder().getURI().toString(),k,null,this.sender_id,this.queue_id)};j.prototype.$MercuryServerSendMessageQueue8=function(){while(this.queue.length)this.$MercuryServerSendMessageQueue9(this.queue.shift());};j.prototype.$MercuryServerSendMessageQueue9=function(k){this.$MercuryServerSendMessageQueue1(c('MercuryServerSendMessageQueueSimulatedError').create(k));i.error('mark_as_failed',JSON.stringify({fbid:this.sender_id,queue_id:this.queue_id,message:c('MercuryLoggingHelper').obfuscateMessage(k)}))};j.prototype.handleSuccess=function(k,l){this.$MercuryServerSendMessageQueue2(k,l);this.pending_message=null;this.$MercuryServerSendMessageQueue6()};j.prototype.handleError=function(k){this.$MercuryServerSendMessageQueue1(k);this.$MercuryServerSendMessageQueue8();this.pending_message=null};j.prototype.handleTransportError=function(k){this.$MercuryServerSendMessageQueue4(k);this.$MercuryServerSendMessageQueue8();this.pending_message=null};j.prototype.handleTimeout=function(k){this.$MercuryServerSendMessageQueue3(k);this.$MercuryServerSendMessageQueue8();this.pending_message=null};j.prototype.$MercuryServerSendMessageQueue7=function(){i.debug('maybe_send_next_pending_message',JSON.stringify({fbid:this.sender_id,queue_id:this.queue_id,pending_message:c('MercuryLoggingHelper').obfuscateMessage(this.pending_message),queue:this.queue.map(function(l){return c('MercuryLoggingHelper').obfuscateMessage(l)})}));var k='send_queue.delayed.queue_length.'+this.queue.length.toString();c('BanzaiODS').bumpEntityKey('chat.web',k)};f.exports=j}),null);
__d('MercurySingletonMixin',['CurrentUser'],(function a(b,c,d,e,f,g){var h={_getInstances:function i(){if(!this._instances)this._instances={};return this._instances},get:function i(){return this.getForFBID(c('CurrentUser').getID())},getForFBID:function i(j){var k=this._getInstances();if(!k[j])k[j]=new this(j);return k[j]}};f.exports=h}),null);
__d('MercuryServerSendMessageQueueRouter',['BanzaiODS','LogHistory','Map','MercuryServerSendMessageQueue','MercurySingletonMixin'],(function a(b,c,d,e,f,g){var h=c('LogHistory').getInstance('mercury_server_send_message_queue_router'),i='chat.web.send_queue_router';c('BanzaiODS').setEntitySample(i,.1);function j(k){'use strict';this.queues=new (c('Map'))();this.fbid=k}j.prototype.enqueue=function(k,l,m,n){'use strict';var o=this.queues.get(k);if(o===undefined){o=new (c('MercuryServerSendMessageQueue'))(this.fbid,k,l,m);this.queues.set(k,o);h.debug('added queue',JSON.stringify({fbid:this.fbid,queue_id:k}));c('BanzaiODS').bumpEntityKey(i,'new_queue')}o.enqueue(n)};Object.assign(j,c('MercurySingletonMixin'));f.exports=j}),null);
__d('MercurySyncConstants',[],(function a(b,c,d,e,f,g){'use strict';var h={ARBITER_EVENT_INVALID_STATE:'SYNC:INVALID_STATE',ARBITER_EVENT_INVALID_STATE_RETRY:'SYNC:INVALID_STATE_RETRY',ARBITER_EVENT_INVALID_STATE_RECOVER:'SYNC:INVALID_STATE_RECOVER',ARBITER_EVENT_SERVER_REQUESTS_FAIL:'NET:SERVER_REQUESTS_FAIL',ARBITER_EVENT_SERVER_REQUESTS_RECOVER:'NET:SERVER_REQUESTS_RECOVER'};f.exports=h}),null);
__d('MercurySyncDeltaHolder',['Map','MercurySingletonProvider'],(function a(b,c,d,e,f,g){'use strict';function h(){this.$MercurySyncDeltaHolder2=new (c('Map'))();this.$MercurySyncDeltaHolder3=[];this.$MercurySyncDeltaHolder1=0}h.getForFBID=function(j){return i.getForFBID(j)};h.get=function(){return i.get()};h.prototype.peek=function(){this.$MercurySyncDeltaHolder3=this.$MercurySyncDeltaHolder3.sort(function(j,k){return j-k});return this.$MercurySyncDeltaHolder3[0]};h.prototype.getTop=function(){this.$MercurySyncDeltaHolder3=this.$MercurySyncDeltaHolder3.sort(function(j,k){return j-k});return this.$MercurySyncDeltaHolder3.reverse()[0]};h.prototype.pop=function(){this.$MercurySyncDeltaHolder3=this.$MercurySyncDeltaHolder3.sort(function(l,m){return l-m});if(this.$MercurySyncDeltaHolder3.length===0)return undefined;var j=this.$MercurySyncDeltaHolder3.shift(),k=this.$MercurySyncDeltaHolder2.get(j);this.$MercurySyncDeltaHolder2['delete'](j);return {seqID:j,delta:k}};h.prototype.push=function(j,k){if(this.$MercurySyncDeltaHolder2.has(j))return;this.$MercurySyncDeltaHolder2.set(j,k);this.$MercurySyncDeltaHolder3.push(j)};h.prototype.getLastSeqID=function(){return this.$MercurySyncDeltaHolder1};h.prototype.updateLastSeqID=function(j){this.$MercurySyncDeltaHolder1=j};var i=new (c('MercurySingletonProvider'))(h);f.exports=h}),null);
__d("PageMessageEnumTag",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({FLAG:"flag",IMPORTANT:"important",LOW_VALUE:"low_value",SPAM_SPOOFING:"spam_spoofing",JOB_APPLICATION:"job_application",CONFIRMED_APPOINTMENT:"confirmed_appointment",PENDING_APPOINTMENT:"pending_appointment",REQUESTED_APPOINTMENT:"requested_appointment",MESSENGER_ADS:"messenger_ads"})}),null);
__d("XMercuryUnseenThreadIDsController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/mercury\/unseen_thread_ids\/",{})}),null);
__d("XMessagingChangeMentionsMuteModeController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ajax\/mercury\/change_mentions_mute_thread\/",{})}),null);
__d("XMessagingChangeReactionsMuteModeController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ajax\/mercury\/change_reactions_mute_thread\/",{})}),null);
__d('MercuryServerRequests',['errorCode','invariant','Arbiter','AsyncResponse','BanzaiODS','ChannelConstants','ChatReliabilityInstrumentation','CurrentUser','EventProfiler','LogHistory','MercuryActionStatus','MercuryActionType','MercuryAPIArgsSource','MercuryAssert','MercuryConfig','MercuryDispatcher','MercuryErrorType','MercuryGlobalActionType','MercuryIDs','MercuryLogMessageType','MercuryMessageClientState','MercuryPayloadSource','MercurySendErrorLogger','MercuryServerPayloadPreprocessor','MercuryServerRequestsConfig','MercuryServerSendMessageQueueRouter','MercuryServerURIs','MercurySingletonProvider','MercurySourceType','MercurySyncDeltaHolder','MercurySyncConstants','MercuryThreadIDMap','MercuryThreadlistConstants','MercuryMessageIDs','MessagingConfig','MessagingTag','PageMessageEnumTag','MercuryServerSendMessageQueueOptions','MercuryServerDispatcher','Set','XMercuryUnseenThreadIDsController','XMessagingChangeMentionsMuteModeController','XMessagingChangeReactionsMuteModeController','createObjectFrom','ifRequired','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('LogHistory').getInstance('mercury_server'),k=c('MercuryAPIArgsSource').MERCURY,l=1000,m=30*1000,n=true;function o(z){return z.getError()?'_'+z.getError():''}function p(z,aa){var ba=babelHelpers['extends']({},z),ca=void 0;if(aa.threads){if(!ba.threads)ba.threads={};for(ca in aa.threads)ba.threads[ca]=Object.keys(c('createObjectFrom')((ba.threads[ca]||[]).concat(aa.threads[ca]||[])));}if(aa.messages){if(!ba.messages)ba.messages={};for(ca in aa.messages){if(!ba.messages[ca])ba.messages[ca]={};for(var da in aa.messages[ca])if(ba.messages[ca][da]){ba.messages[ca][da]=t(ba.messages[ca][da],aa.messages[ca][da])}else ba.messages[ca][da]=aa.messages[ca][da];}}ba.client=z.client||aa.client;return ba}function q(z,aa){var ba=Object.assign(c('createObjectFrom')(z.folders,true),c('createObjectFrom')(aa.folders,true)),ca=z.client||aa.client;return {folders:Object.keys(ba),client:ca}}function r(z,aa){for(var ba in aa)if(z[ba]&&typeof z[ba]==='object'){z[ba]=t(z[ba],aa[ba])}else if(aa[ba]&&typeof aa[ba]==='object'){var ca={};Object.assign(ca,aa[ba]);z[ba]=ca}return z}function s(z,aa){return aa}function t(z,aa){var ba=z.offset<aa.offset?z.offset:aa.offset,ca=z.offset+z.limit,da=aa.offset+aa.limit,ea=ca>da?ca:da,fa=ea-ba,ga=z.timestamp>aa.timestamp?z.timestamp:aa.timestamp;return {offset:ba,limit:fa,timestamp:ga}}function u(z,aa){var ba=z.client||aa.client,ca={ids:{},client:ba};Object.assign(ca.ids,z.ids,aa.ids);return ca}function v(z,aa){var ba={},ca=void 0,da=z.client||aa.client;delete z.client;delete aa.client;for(ca in z)Object.assign(ba,c('createObjectFrom')(z[ca],ca));for(ca in aa)Object.assign(ba,c('createObjectFrom')(aa[ca],ca));var ea={client:da};for(var fa in ba){ca=ba[fa];if(!ea[ca])ea[ca]=[];ea[ca].push(fa)}return ea}function w(z,aa){var ba=z.client||aa.client,ca=c('createObjectFrom')(z.ids,true),da=c('createObjectFrom')(aa.ids,true),ea=Object.assign(ca,da);return {ids:Object.keys(ea),client:ba}}function x(z){this.$MercuryServerRequests1=z;this.$MercuryServerRequests2=0;this.$MercuryServerRequests3={};this.$MercuryServerRequests4={};this.$MercuryServerRequests9=new (c('Set'))();this.__threadIDMap=c('MercuryThreadIDMap').getForFBID(this.$MercuryServerRequests1);this.$MercuryServerRequests5=c('MercuryDispatcher').getForFBID(this.$MercuryServerRequests1);this.$MercuryServerRequests6=c('MercuryServerPayloadPreprocessor').getForFBID(this.$MercuryServerRequests1);this.$MercuryServerRequests7=new (c('MercuryServerSendMessageQueueOptions'))(function(aa,ba){this.__handleUpdate(aa,ba)}.bind(this),function(aa){return this.$MercuryServerRequests10(aa)}.bind(this),function(aa){this.$MercuryServerRequests11(aa)}.bind(this),function(aa){return this.$MercuryServerRequests12(aa)}.bind(this),c('MercuryServerRequestsConfig').sendMessageTimeout,c('MessagingConfig').SEND_CONNECTION_RETRIES);this.$MercuryServerRequests8=c('MercurySyncDeltaHolder').getForFBID(this.$MercuryServerRequests1);this.$MercuryServerRequests13()}x.getForFBID=function(z){return y.getForFBID(z)};x.get=function(){return y.get()};x.prototype.fetchThreadlistInfo=function(z,aa){var ba=arguments.length<=2||arguments[2]===undefined?c('MessagingTag').INBOX:arguments[2],ca=arguments[3],da,ea=this,fa=arguments.length<=4||arguments[4]===undefined?k:arguments[4],ga=arguments[5];if(n){var da=function(){n=false;c('EventProfiler').tagCurrentActiveInteractionsAs('FirstMercuryThreadFetch');var ja=false;c('ifRequired')('MercuryJewelBootloadModulesWithEagerFetch',function(ka){ja=ka.isFetching();if(ja)ka.afterFetchThreadListInfo(this.$MercuryServerRequests6.handleUpdate.bind(this.$MercuryServerRequests6));}.bind(ea));if(ja)return {v:void 0};}();if(typeof da==="object")return da.v;}var ha=ca?c('MercuryServerDispatcher').IMMEDIATE:null,ia={client:fa};ia[ba]={offset:z,limit:aa,filter:ca,before:ga};this.__sendRequest(c('MercuryServerURIs').THREADLIST_INFO,ia,ha)};x.prototype.fetchUnseenThreadIDs=function(){var z=arguments.length<=0||arguments[0]===undefined?c('MessagingTag').INBOX:arguments[0],aa=arguments.length<=1||arguments[1]===undefined?k:arguments[1];this.__sendRequest(c('XMercuryUnseenThreadIDsController').getURIBuilder().getURI().toString(),{})};x.prototype.fetchUnreadThreadIDs=function(z){var aa=arguments.length<=1||arguments[1]===undefined?k:arguments[1];this.__sendRequest(c('MercuryServerURIs').UNREAD_THREADS,{folders:[z],client:aa})};x.prototype.fetchThreadData=function(z){var aa=arguments.length<=1||arguments[1]===undefined?k:arguments[1];c('MercuryAssert').allThreadID(z);var ba={threads:{},client:aa},ca=[],da=[];z.forEach(function(fa){if(this.$MercuryServerRequests3[fa])return;this.$MercuryServerRequests3[fa]=true;var ga=this.__threadIDMap.getServerIDFromClientIDNow(fa),ha=c('MercuryIDs').tokenize(fa);if(ha.type=='user'){ca.push(ha.value);ba.threads.user_ids=ca}else if(ha.type=='thread'){if(ga){da.push(ga)}else da.push(ha.value);ba.threads.thread_fbids=da}else if(ha.type=='root'){if(ga){da.push(ga);ba.threads.thread_fbids=da}}else if(ha.type!='pending')throw new Error('Unknown thread type',ha);}.bind(this));this.$MercuryServerRequests5.inform('fetch-thread-data',ba);if(ba.threads.user_ids)ba.threads.user_ids.forEach(function(fa){if(!fa){j.error('empty user id',JSON.stringify(ca));c('ChatReliabilityInstrumentation').logERROR('Invalid user ID sent to thread_info.php: '+JSON.stringify(ca))}});if(ba.threads.thread_fbids)ba.threads.thread_fbids.forEach(function(fa){if(!fa)c('ChatReliabilityInstrumentation').logERROR('Invalid FBID sent to thread_info.php: '+JSON.stringify(z));});for(var ea in ba.threads){this.__sendRequest(c('MercuryServerURIs').THREAD_INFO,ba);break}};x.prototype.ensureThreadIsFetched=function(z){var aa=arguments.length<=1||arguments[1]===undefined?k:arguments[1];if(!this.__threadIDMap.getClientIDFromServerIDNow(z)&&!this.$MercuryServerRequests3[z]){if(!z){c('ChatReliabilityInstrumentation').logERROR('Ensure invalid FBID sent to thread_info.php');j.error('attempting to fetch empty thread_fbid. Bad idea!');return}this.$MercuryServerRequests3[z]=true;this.__sendRequest(c('MercuryServerURIs').THREAD_INFO,{threads:{thread_fbids:[z]},client:aa})}};x.prototype.fetchThreadMessages=function(z,aa,ba,ca,da){var ea=arguments.length<=5||arguments[5]===undefined?k:arguments[5];c('MercuryAssert').isThreadID(z);var fa=void 0,ga=void 0,ha=c('MercuryIDs').tokenize(z),ia=this.__threadIDMap.getServerIDFromClientIDNow(z),ja=false;if(ia){fa=ia;ga=ha.type=='user'?'user_ids':'thread_fbids'}else{fa=ha.value;switch(ha.type){case 'user':ga='user_ids';ja=true;break;case 'thread':ga='thread_fbids';break;}}var ka={messages:{},threads:{},client:ea};if(ga){ka.messages[ga]={};ka.messages[ga][fa]={offset:aa,timestamp:ca,limit:ba};if(ja)ka.threads[ga]=[fa];this.__sendRequest(c('MercuryServerURIs').THREAD_INFO,ka,da)}else this.__threadIDMap.getServerIDFromClientID(z,function(la){ka.messages.thread_fbids={};ka.messages.thread_fbids[la]={offset:aa,timestamp:ca,limit:ba};this.__sendRequest(c('MercuryServerURIs').THREAD_INFO,ka,da)}.bind(this));};x.prototype.handleThreadInfoError=function(z,aa){var ba,ca=this,da=z.getData(),ea=[];if(da.messages){for(var fa in da.messages.thread_fbids){var ga=this.__threadIDMap.getClientIDFromServerIDNow(fa);if(ga)ea.push(this.$MercuryServerRequests14(ga));}for(var ha in da.messages.user_ids)ea.push(this.$MercuryServerRequests14('user:'+ha));for(var ia in da.messages.group_ids)ea.push(this.$MercuryServerRequests14('group:'+ia));}if(ea.length)this.$MercuryServerRequests5.handleUpdate({actions:ea,from_client:true,payload_source:c('MercuryPayloadSource').CLIENT_CHANNEL_MESSAGE});if(da.threads&&(da.threads.user_ids||da.threads.thread_fbids||da.threads.group_ids||da.threads.thread_ids)){var ja=5,ka=true;if(!da.retry_count){da.retry_count=0;if(da.messages)delete da.messages;}else if(da.retry_count>=ja&&(!aa||!c('MercuryConfig').MR4E)){ka=false;(da.threads.thread_ids||[]).concat(da.threads.thread_fbids||[]).forEach(function(ma){if(ma in this.$MercuryServerRequests3)delete this.$MercuryServerRequests3[ma];},this)}[].concat(da.threads.thread_ids||[],da.threads.thread_fbids||[],da.threads.user_ids||[],da.threads.group_ids||[]).forEach(function(ma){if(ma){this.$MercuryServerRequests9.add(ma)}else c('ChatReliabilityInstrumentation').logERROR('lost a thread id somehow');}.bind(this));if(ka){var la=Math.pow(2,Math.min(da.retry_count,ja))*1000;c('setTimeoutAcrossTransitions')(function(){j.log('retry_thread','{}');this.__sendRequest(c('MercuryServerURIs').THREAD_INFO,da)}.bind(this),la);da.retry_count++}if(this.$MercuryServerRequests9.size)(function(){var ma=[];ca.$MercuryServerRequests9.forEach(function(na){return ma.push(na)});j.debug('failed threads',JSON.stringify(ma));c('Arbiter').inform(c('MercurySyncConstants').ARBITER_EVENT_SERVER_REQUESTS_FAIL,ma)})();}};x.prototype.markFolderAsRead=function(z){this.__sendRequest(c('MercuryServerURIs').MARK_FOLDER_READ,{folder:z});var aa=[{action_type:c('MercuryGlobalActionType').MARK_ALL_READ,folder:z}];this.$MercuryServerRequests5.handleUpdate({global_actions:aa,from_client:true,payload_source:c('MercuryPayloadSource').CLIENT_CHANGE_READ_STATUS})};x.prototype.changeThreadReadStatus=function(z,aa,ba,ca,da,ea){c('MercuryAssert').isThreadID(z);this.__threadIDMap.getServerIDFromClientID(z,function(fa){var ga,ha={ids:(ga={},ga[fa]=aa,ga),source:ba,watermarkTimestamp:ca,shouldSendReadReceipt:da,commerce_last_message_type:ea};j.log('initiate_change_read_status',JSON.stringify({thread_id:z,thread_fbid:fa,mark_as_read:aa,watermarkTimestamp:ca}));this.__sendRequest(c('MercuryServerURIs').CHANGE_READ_STATUS,ha)}.bind(this))};x.prototype.changeThreadArchivedStatus=function(z,aa,ba){c('MercuryAssert').isThreadID(z);this.__threadIDMap.getServerIDFromClientID(z,function(ca){var da={ids:{},source:ba};da.ids[ca]=aa;this.__sendRequest(c('MercuryServerURIs').CHANGE_ARCHIVED_STATUS,da)}.bind(this))};x.prototype.changeThreadFolder=function(z,aa){c('MercuryAssert').isThreadID(z);this.__threadIDMap.getServerIDFromClientID(z,function(ba){var ca={};ca[aa]=[ba];this.__sendRequest(c('MercuryServerURIs').MOVE_THREAD,ca)}.bind(this))};x.prototype.changeMutingOnThread=function(z,aa){c('MercuryAssert').isThreadID(z);this.__threadIDMap.getServerIDFromClientID(z,function(ba){this.__sendRequest(c('MercuryServerURIs').CHANGE_MUTE_THREAD,{thread_fbid:ba,mute_settings:aa,payload_source:k})}.bind(this))};x.prototype.changeMentionsMutingOnThread=function(z,aa){c('MercuryAssert').isThreadID(z);this.__threadIDMap.getServerIDFromClientID(z,function(ba){this.__sendRequest(c('XMessagingChangeMentionsMuteModeController').getURIBuilder().getURI(),{thread_fbid:ba,mentions_mute_mode:aa,payload_source:k})}.bind(this))};x.prototype.changeReactionsMutingOnThread=function(z,aa){c('MercuryAssert').isThreadID(z);this.__threadIDMap.getServerIDFromClientID(z,function(ba){this.__sendRequest(c('XMessagingChangeReactionsMuteModeController').getURIBuilder().getURI(),{thread_fbid:ba,reactions_mute_mode:aa,payload_source:k})}.bind(this))};x.prototype.markThreadSpam=function(z,aa){c('MercuryAssert').isThreadID(z);this.__threadIDMap.getServerIDFromClientID(z,function(ba){this.__sendRequest(c('MercuryServerURIs').MARK_SPAM,{id:ba,source:aa})}.bind(this))};x.prototype.unmarkThreadSpam=function(z,aa){c('MercuryAssert').isThreadID(z);this.__threadIDMap.getServerIDFromClientID(z,function(ba){this.__sendRequest(c('MercuryServerURIs').UNMARK_SPAM,{id:ba,source:aa})}.bind(this))};x.prototype.deleteThread=function(z,aa){c('MercuryAssert').isThreadID(z);this.__threadIDMap.getServerIDFromClientID(z,function(ba){var ca={ids:[ba],source:aa};this.__sendRequest(c('MercuryServerURIs').DELETE_THREAD,ca)}.bind(this))};x.prototype.deleteMessages=function(z,aa){c('MercuryMessageIDs').getServerIDs(aa||[],function(ba){this.__sendRequest(c('MercuryServerURIs').DELETE_MESSAGES,{message_ids:ba})}.bind(this))};x.prototype.sendDeliveryReceipts=function(z,aa){c('MercuryMessageIDs').getServerIDs(z||[],function(ba){this.__sendRequest(c('MercuryServerURIs').DELIVERY_RECEIPTS,{message_ids:ba,thread_ids:aa})}.bind(this))};x.prototype.sendNewMessage=function(z){var aa=arguments.length<=1||arguments[1]===undefined?k:arguments[1];if(!z.offline_threading_id)c('BanzaiODS').bumpEntityKey('chat.web','missing_otid_on_send');if(z.client_state&&z.client_state!==c('MercuryMessageClientState').SEND_TO_SERVER)return;var ba=c('MercuryIDs').tokenize(z.thread_id),ca=ba.type,da=babelHelpers['extends']({},z);da.thread_id=null;if(ca=='user'){da.other_user_fbid=ba.value;this.$MercuryServerRequests15(da,aa)}else if(ca=='thread'){da.thread_fbid=ba.value;this.$MercuryServerRequests15(da,aa)}else if(ca=='root'&&ba.value==da.offline_threading_id){da.client_thread_id=z.thread_id;this.$MercuryServerRequests15(da,aa)}else{c('MercuryIDs').isLocalThread(z.thread_id)||i(0);this.__threadIDMap.getServerIDFromClientID(z.thread_id,function(ea){da.thread_fbid=ea;this.$MercuryServerRequests15(da,aa)}.bind(this))}};x.prototype.$MercuryServerRequests15=function(z,aa){c('Arbiter').inform(c('ChannelConstants').ATTEMPT_RECONNECT);this.$MercuryServerRequests4[z.message_id]=Date.now();c('MercuryServerSendMessageQueueRouter').getForFBID(this.$MercuryServerRequests1).enqueue(z.other_user_fbid||z.thread_fbid||z.client_thread_id,this.$MercuryServerRequests7,aa,z)};x.prototype.markSeen=function(){var z=this.$MercuryServerRequests2;this.__sendRequest(c('MercuryServerURIs').MARK_SEEN,{seen_timestamp:z})};x.prototype.$MercuryServerRequests16=function(z,aa,ba,ca){var da=z.getData(),ea=da.message_batch||[da];j.debug('handle_send_message_error_common',JSON.stringify({reliability_error_status:ba,request_error_status:aa,error_data:ca,message_list:ea}));var fa=ea.map(function(ha){var ia={action_type:c('MercuryActionType').SEND_MESSAGE,other_user_fbid:ha.other_user_fbid,thread_fbid:ha.thread_fbid,client_message_id:ha.message_id,message_id:ha.message_id,client_thread_id:ha.client_thread_id,status:aa,error_data:ca};return ia});fa.forEach(function(ha){if(ha.action_type===c('MercuryActionType').SEND_MESSAGE&&ha.status===c('MercuryActionStatus').ERROR)this.__logMercurySendError(ha);},this);var ga={actions:fa,payload_source:c('MercuryPayloadSource').CLIENT_HANDLE_ERROR};this.$MercuryServerRequests6.handleUpdate(ga)};x.prototype.handleSendMessageError=function(z){var aa=z.getPayload(),ba=null,ca=null;if(aa&&aa.error_payload){ba=c('MercuryActionStatus').UNCONFIRMED;ca='send_error'}else{ba=c('MercuryActionStatus').ERROR;ca='request_error'+o(z)}var da=z.error;if(da===1404102)c('AsyncResponse').verboseErrorHandler(z);var ea=/<.*>/.test(z.getErrorDescription())?z.getErrorSummary():z.getErrorDescription();this.$MercuryServerRequests16(z.getRequest(),ba,ca,{type:c('MercuryErrorType').SERVER,code:z.getError(),description:ea,is_transient:z.isTransient()})};x.prototype.handleSendMessageTransportError=function(z){this.$MercuryServerRequests16(z.getRequest(),c('MercuryActionStatus').ERROR,'transport_error'+o(z),{type:c('MercuryErrorType').TRANSPORT,code:z.getError(),is_transient:true})};x.prototype.handleSendMessageTimeout=function(z){this.$MercuryServerRequests16(z,c('MercuryActionStatus').ERROR,'transport_timeout',{type:c('MercuryErrorType').TIMEOUT,is_transient:true})};x.prototype.getLastActionTimestamp=function(){return this.$MercuryServerRequests2};x.prototype.__logMercurySendError=function(z){c('MercurySendErrorLogger').log(z)};x.prototype.updateLastActionTimestamp=function(z){var aa=Date.now()-1000*60*60*24;if(z&&z>aa)this.$MercuryServerRequests2=Math.max(this.$MercuryServerRequests2,z);};x.prototype.markThreadFetched=function(z){delete this.$MercuryServerRequests3[z];if(this.$MercuryServerRequests9['delete'](z)&&!this.$MercuryServerRequests9.size){j.debug('no_failed_threads','{}');c('Arbiter').inform(c('MercurySyncConstants').ARBITER_EVENT_SERVER_REQUESTS_RECOVER)}};x.prototype.$MercuryServerRequests14=function(z){return {action_type:c('MercuryActionType').LOG_MESSAGE,thread_id:z,message_id:z,timestamp:Date.now(),is_unread:false,source:c('MercurySourceType').UNKNOWN,log_message_body:'',log_message_type:c('MercuryLogMessageType').SERVER_ERROR,log_message_data:{}}};x.prototype.__getForAsyncRequest=function(z){var aa=z.getData(),ba=aa.request_user_id?aa.request_user_id:c('CurrentUser').getID();return x.getForFBID(ba)};x.prototype.__handleUpdate=function(z,aa){this.__getForAsyncRequest(aa).$MercuryServerRequests6.handleUpdate(z)};x.prototype.$MercuryServerRequests17=function(z){var aa=this.__getForAsyncRequest(z);aa.handleThreadInfoError(z)};x.prototype.$MercuryServerRequests18=function(z){var aa=this.__getForAsyncRequest(z);aa.handleThreadInfoError(z,true)};x.prototype.$MercuryServerRequests10=function(z){var aa=this.__getForAsyncRequest(z.getRequest());aa.handleSendMessageError(z)};x.prototype.$MercuryServerRequests11=function(z){var aa=this.__getForAsyncRequest(z.getRequest());aa.handleSendMessageTransportError(z)};x.prototype.$MercuryServerRequests12=function(z){var aa=this.__getForAsyncRequest(z);aa.handleSendMessageTimeout(z)};x.prototype.$MercuryServerRequests13=function(){var z,aa=null;if(c('MercuryServerRequestsConfig').msgrRegion)aa={name:'X-MSGR-Region',value:c('MercuryServerRequestsConfig').msgrRegion};var ba=(z={},z[c('MercuryServerURIs').THREAD_INFO]={request_user_id:this.$MercuryServerRequests1,mode:c('MercuryServerDispatcher').BATCH_DEFERRED_MULTI,customHeader:aa,batch_function:p,handler:function(fa,ga){return this.__handleUpdate(fa,ga)}.bind(this),error_handler:function(fa){return this.$MercuryServerRequests17(fa.getRequest())}.bind(this),timeout_handler:function(fa){return this.$MercuryServerRequests18(fa)}.bind(this),timeout:m},z[c('MercuryServerURIs').MARK_FOLDER_READ]={request_user_id:this.$MercuryServerRequests1,mode:c('MercuryServerDispatcher').IMMEDIATE,customHeader:aa,handler:function(fa,ga){return this.__handleUpdate(fa,ga)}.bind(this)},z[c('MercuryServerURIs').CHANGE_READ_STATUS]={request_user_id:this.$MercuryServerRequests1,mode:c('MercuryServerDispatcher').IMMEDIATE,customHeader:aa,handler:function(fa,ga){this.__handleUpdate(fa,ga);var ha=(fa.threads||[]).map(function(ia){return ia&&ia.thread_id});j.log('response_change_read_status',JSON.stringify({threads:ha}))}.bind(this)},z[c('MercuryServerURIs').MARK_SEEN]={request_user_id:this.$MercuryServerRequests1,mode:c('MercuryServerDispatcher').BATCH_SUCCESSIVE,customHeader:aa,batch_function:s,handler:function(fa,ga){return this.__handleUpdate(fa,ga)}.bind(this)},z[c('MercuryServerURIs').THREADLIST_INFO]={request_user_id:this.$MercuryServerRequests1,mode:c('MercuryServerDispatcher').BATCH_SUCCESSIVE_UNIQUE,customHeader:aa,batch_function:r,handler:function(fa,ga){return this.__handleUpdate(fa,ga)}.bind(this)},z[c('MercuryServerURIs').MARK_SPAM]={request_user_id:this.$MercuryServerRequests1,mode:c('MercuryServerDispatcher').IMMEDIATE,customHeader:aa,handler:function(fa,ga){return this.__handleUpdate(fa,ga)}.bind(this)},z[c('MercuryServerURIs').UNMARK_SPAM]={request_user_id:this.$MercuryServerRequests1,mode:c('MercuryServerDispatcher').IMMEDIATE,customHeader:aa,handler:function(fa,ga){return this.__handleUpdate(fa,ga)}.bind(this)},z[c('MercuryServerURIs').UNREAD_THREADS]={request_user_id:this.$MercuryServerRequests1,mode:c('MercuryServerDispatcher').BATCH_SUCCESSIVE_UNIQUE,customHeader:aa,batch_function:q,handler:function(fa,ga){return this.__handleUpdate(fa,ga)}.bind(this)},z[c('MercuryServerURIs').CHANGE_ARCHIVED_STATUS]={request_user_id:this.$MercuryServerRequests1,mode:c('MercuryServerDispatcher').BATCH_SUCCESSIVE,customHeader:aa,batch_function:u,handler:function(fa,ga){return this.__handleUpdate(fa,ga)}.bind(this)},z[c('MercuryServerURIs').DELETE_THREAD]={request_user_id:this.$MercuryServerRequests1,mode:c('MercuryServerDispatcher').BATCH_SUCCESSIVE,customHeader:aa,batch_function:w,handler:function(fa,ga){return this.__handleUpdate(fa,ga)}.bind(this)},z[c('MercuryServerURIs').DELETE_MESSAGES]={request_user_id:this.$MercuryServerRequests1,mode:c('MercuryServerDispatcher').IMMEDIATE,customHeader:aa,handler:function(fa,ga){return this.__handleUpdate(fa,ga)}.bind(this)},z[c('MercuryServerURIs').DELIVERY_RECEIPTS]={request_user_id:this.$MercuryServerRequests1,mode:c('MercuryServerDispatcher').IMMEDIATE,customHeader:aa,handler:function(fa,ga){return this.__handleUpdate(fa,ga)}.bind(this)},z[c('MercuryServerURIs').MOVE_THREAD]={request_user_id:this.$MercuryServerRequests1,mode:c('MercuryServerDispatcher').BATCH_SUCCESSIVE,customHeader:aa,batch_function:v,handler:function(fa,ga){return this.__handleUpdate(fa,ga)}.bind(this)},z[c('MercuryServerURIs').CHANGE_MUTE_THREAD]={request_user_id:this.$MercuryServerRequests1,mode:c('MercuryServerDispatcher').IMMEDIATE,customHeader:aa,handler:function(fa,ga){return this.__handleUpdate(fa,ga)}.bind(this)},z),ca=c('XMercuryUnseenThreadIDsController').getURIBuilder().getURI().toString();ba[ca]={request_user_id:this.$MercuryServerRequests1,mode:c('MercuryServerDispatcher').IMMEDIATE,customHeader:aa,handler:function(fa,ga){return this.__handleUpdate(fa,ga)}.bind(this)};var da=c('XMessagingChangeMentionsMuteModeController').getURIBuilder().getURI().toString();ba[da]={request_user_id:this.$MercuryServerRequests1,mode:c('MercuryServerDispatcher').IMMEDIATE,customHeader:aa,handler:function(fa,ga){return this.__handleUpdate(fa,ga)}.bind(this)};var ea=c('XMessagingChangeReactionsMuteModeController').getURIBuilder().getURI().toString();ba[ea]={request_user_id:this.$MercuryServerRequests1,mode:c('MercuryServerDispatcher').IMMEDIATE,customHeader:aa,handler:function(fa,ga){return this.__handleUpdate(fa,ga)}.bind(this)};c('MercuryServerDispatcher').registerEndpoints(ba)};x.prototype.__sendRequest=function(z,aa,ba){if(c('MercuryConfig').MessengerCachiusUseClientSeqIDWWW)switch(z){case c('MercuryServerURIs').THREADLIST_INFO:case c('MercuryServerURIs').THREAD_INFO:aa.cachius_min_seq_id=this.$MercuryServerRequests8.getLastSeqID();break;default:break;}c('MercuryServerDispatcher').trySend(z,aa,ba,this.$MercuryServerRequests1)};x.prototype.__getFBID=function(){return this.$MercuryServerRequests1};var y=new (c('MercurySingletonProvider'))(x);f.exports=x}),null);
__d('MercuryThreadIDMap',['KeyedCallbackManager','MercuryAssert','MercuryIDs','MercurySingletonProvider'],(function a(b,c,d,e,f,g){'use strict';function h(j){this.$MercuryThreadIDMap1=j;this.$MercuryThreadIDMap2=new (c('KeyedCallbackManager'))();this.$MercuryThreadIDMap3=new (c('KeyedCallbackManager'))()}h.getForFBID=function(j){return i.getForFBID(j)};h.get=function(){return i.get()};h.prototype.setServerIDToClientID=function(j,k){var l=this.getClientIDFromServerIDNow(j);if(l){l!==k;return}this.forceSetServerIDToClientID(j,k)};h.prototype.forceSetServerIDToClientID=function(j,k){this.$MercuryThreadIDMap2.setResource(j,k);this.$MercuryThreadIDMap3.setResource(k,j)};h.prototype.setDeprecatedServerIDToClientID=function(j,k){if(j)this.$MercuryThreadIDMap2.setResource(j,k);};h.prototype.getClientIDFromServerIDNow=function(j){return this.$MercuryThreadIDMap2.getResource(j)};h.prototype.getClientIDFromServerID=function(j,k){this.$MercuryThreadIDMap2.executeOrEnqueue(j,k);e(['MercuryServerRequests'],function(l){l.getForFBID(this.$MercuryThreadIDMap1).ensureThreadIsFetched(j)}.bind(this))};h.prototype.getServerIDFromClientIDNow=function(j){return this.$MercuryThreadIDMap3.getResource(j)};h.prototype.getServerIDFromClientID=function(j,k){c('MercuryAssert').isThreadID(j);var l=this.$MercuryThreadIDMap3.executeOrEnqueue(j,k);e(['MercuryServerRequests'],function(m){var n=this.$MercuryThreadIDMap3.getUnavailableResources(l),o=c('MercuryIDs').tokenize(j);if(n.length&&o.type!='root')m.getForFBID(this.$MercuryThreadIDMap1).fetchThreadData(n);}.bind(this))};h.prototype.hasClientIDForServerID=function(j){return !!this.getClientIDFromServerIDNow(j)};h.prototype.convertThreadIDIfAvailable=function(j){var k=this.getClientIDFromServerIDNow(j);return k||j};h.prototype.canLinkExternally=function(j){c('MercuryAssert').isThreadID(j);var k=c('MercuryIDs').tokenize(j);return k.type=='user'||!!this.getServerIDFromClientIDNow(j)};var i=new (c('MercurySingletonProvider'))(h);f.exports=h}),null);
__d('MercuryParticipantFetcher',['LogHistory','MercuryIDs','MercuryPayloadSource','MercuryServerPayloadPreprocessor','Set','ShortProfiles','setImmediate','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g){'use strict';var h=c('LogHistory').getInstance('short_profiles');function i(k){this.$MercuryParticipantFetcher4=c('MercuryServerPayloadPreprocessor').getForFBID(k);this.$MercuryParticipantFetcher1=false;this.$MercuryParticipantFetcher2=new (c('Set'))();this.$MercuryParticipantFetcher3=new (c('Set'))();this.$MercuryParticipantFetcher5=setInterval(this.$MercuryParticipantFetcher7.bind(this),20*1000)}i.prototype.fetch=function(k){this.$MercuryParticipantFetcher8(k);this.$MercuryParticipantFetcher7()};i.prototype.fetchMulti=function(k){if(k.length){k.forEach(function(l){return this.$MercuryParticipantFetcher8(l)}.bind(this));this.$MercuryParticipantFetcher7()}};i.prototype.$MercuryParticipantFetcher8=function(k){if(!this.$MercuryParticipantFetcher3.has(k))this.$MercuryParticipantFetcher2.add(k);};i.prototype.$MercuryParticipantFetcher7=function(){if(this.$MercuryParticipantFetcher1||this.$MercuryParticipantFetcher2.size===0)return;this.$MercuryParticipantFetcher1=true;c('setImmediate')(function(){this.$MercuryParticipantFetcher1=false;this.$MercuryParticipantFetcher2.forEach(function(k){return this.$MercuryParticipantFetcher3.add(k)}.bind(this));this.$MercuryParticipantFetcher9(this.$MercuryParticipantFetcher2,function(k){k.forEach(function(l){return this.$MercuryParticipantFetcher3['delete'](l.id)}.bind(this));this.$MercuryParticipantFetcher10(k);if(this.$MercuryParticipantFetcher6)clearTimeout(this.$MercuryParticipantFetcher6);}.bind(this));this.$MercuryParticipantFetcher11();this.$MercuryParticipantFetcher2.clear()}.bind(this))};i.prototype.$MercuryParticipantFetcher11=function(){this.$MercuryParticipantFetcher6=c('setTimeoutAcrossTransitions')(function(){this.$MercuryParticipantFetcher3.forEach(function(k){return this.$MercuryParticipantFetcher2.add(k)}.bind(this));this.$MercuryParticipantFetcher3.clear()}.bind(this),11*1000)};i.prototype.$MercuryParticipantFetcher9=function(k,l){var m=[];k.forEach(function(n){var o=c('MercuryIDs').tokenize(n),p=o.type,q=o.value;p==='fbid'&&m.push(q)});if(m.length>0){c('ShortProfiles').getMulti(m,function(n){var o=[];for(var p in n)o.push(j(n[p],p));l(o);if(o.length!==m.length)h.error('server_fetch_participant_count_error',JSON.stringify({expectedIDs:m,receivedIDs:Object.keys(n)}));});h.debug('client_fetch_participants',JSON.stringify({userIDs:m}))}};i.prototype.$MercuryParticipantFetcher10=function(k){this.$MercuryParticipantFetcher4.handleUpdate({participants:k,from_client:false,payload_source:c('MercuryPayloadSource').SERVER_FETCH_PARTICIPANTS})};function j(k,l){var m=babelHelpers['extends']({gender:k.gender,fbid:k.id||l,href:k.uri,id:c('MercuryIDs').getParticipantIDFromUserID(k.id||l),image_src:k.thumbSrc,name:k.name,short_name:k.firstName,employee:k.employee,is_employee_away:k.is_employee_away,type:k.type,vanity:k.vanity,is_friend:k.is_friend,is_messenger_user:k.is_messenger_user},{});if(k.officeStatus){m.officeStatus=k.officeStatus;m.officeStatusEndDate=k.officeStatusEndDate;m.officeStatusComment=k.officeStatusComment;m.officeStatusLocation=k.officeStatusLocation}if(k.timezone||k.timezone===0)m.timezone=k.timezone;if(k.personal_id)m.personal_id=k.personal_id;if(k.work_id)m.work_id=k.work_id;return m}f.exports=i}),null);
__d('bs_js_null_undefined',[],(function a(b,c,d,e,f,g){'use strict';function h(k,l){if(k==null){return k}else return l(k);}function i(k,l){if(k==null){return 0}else return l(k);}function j(k){if(k){return k[0]}else return undefined;}g.bind=h;g.iter=i;g.from_opt=j}),null);
__d('bs_js_primitive',[],(function a(b,c,d,e,f,g){'use strict';function h(n){if(n===null){return 1}else return +(n===undefined);}function i(n){if(n===null||n===undefined){return 0}else return [n];}function j(n){if(n===undefined){return 0}else return [n];}function k(n){if(n===null){return 0}else return [n];}function l(n){if(n){return n[0]}else return undefined;}function m(n){if(n){return n[0][1]}else return undefined;}g.is_nil_undef=h;g.null_undefined_to_opt=i;g.undefined_to_opt=j;g.null_to_opt=k;g.option_get=l;g.option_get_unwrap=m}),null);
__d("bs_caml_builtin_exceptions",[],(function a(b,c,d,e,f,g){'use strict';var h=["Out_of_memory",0],i=["Sys_error",-1],j=["Failure",-2],k=["Invalid_argument",-3],l=["End_of_file",-4],m=["Division_by_zero",-5],n=["Not_found",-6],o=["Match_failure",-7],p=["Stack_overflow",-8],q=["Sys_blocked_io",-9],r=["Assert_failure",-10],s=["Undefined_recursive_module",-11];h.tag=248;i.tag=248;j.tag=248;k.tag=248;l.tag=248;m.tag=248;n.tag=248;o.tag=248;p.tag=248;q.tag=248;r.tag=248;s.tag=248;g.out_of_memory=h;g.sys_error=i;g.failure=j;g.invalid_argument=k;g.end_of_file=l;g.division_by_zero=m;g.not_found=n;g.match_failure=o;g.stack_overflow=p;g.sys_blocked_io=q;g.assert_failure=r;g.undefined_recursive_module=s}),null);
__d('bs_caml_int32',['bs_caml_builtin_exceptions'],(function a(b,c,d,e,f,g){'use strict';function h(n,o){if(o===0){throw c('bs_caml_builtin_exceptions').division_by_zero}else return n/o|0;}function i(n,o){if(o===0){throw c('bs_caml_builtin_exceptions').division_by_zero}else return n%o;}function j(n){return (n&255)<<8|(n&65280)>>>8}function k(n){return (n&255)<<24|(n&65280)<<8|(n&16711680)>>>8|(n&4278190080)>>>24}var l=Math.imul||function(n,o){o|=0;return ((n>>16)*o<<16)+(n&65535)*o|0},m=k;g.div=h;g.mod_=i;g.caml_bswap16=j;g.caml_int32_bswap=k;g.caml_nativeint_bswap=m;g.imul=l}),null);
__d('bs_block',[],(function a(b,c,d,e,f,g){'use strict';function h(i,j){j.tag=i;return j}g.__=h}),null);
__d('bs_caml_obj',['bs_block','bs_caml_builtin_exceptions'],(function a(b,c,d,e,f,g){'use strict';function h(v){var w=v.length|0,x=new Array(w);for(var y=0,z=w-1|0;y<=z;++y)x[y]=v[y];x.tag=v.tag|0;return x}function i(v,w){var x=v.length|0;if(w<=0||w>x){throw [c('bs_caml_builtin_exceptions').invalid_argument,"Obj.truncate"]}else if(x!==w){for(var y=w,z=x-1|0;y<=z;++y)v[y]=0;v.length=w;return 0}else return 0;}function j(v){return c('bs_block').__(250,[v])}function k(v,w){var x=w.length|0;for(var y=0,z=x-1|0;y<=z;++y)v[y]=w[y];var aa=w.tag|0;if(aa!==0){v.tag=aa;return 0}else return 0;}function l(v,w){if(v<w){return -1}else if(v===w){return 0}else return 1;}function m(v,w){while(true){var x=w,y=v,z=typeof y,aa=typeof x;if(z==="string"){var ba=y,ca=x;if(ba<ca){return -1}else if(ba===ca){return 0}else return 1;}else{var da=+(z==="number"),ea=+(aa==="number");if(da!==0){if(ea!==0){return l(y,x)}else return -1;}else if(ea!==0){return 1}else if(z==="boolean"||z==="undefined"||y===null){var fa=y,ga=x;if(fa===ga){return 0}else if(fa<ga){return -1}else return 1;}else if(z==="function"||aa==="function"){throw [c('bs_caml_builtin_exceptions').invalid_argument,"compare: functional value"]}else{var ha=y.tag|0,ia=x.tag|0;if(ha===250){v=y[0];continue}else if(ia===250){w=x[0];continue}else if(ha===248){return l(y[1],x[1])}else if(ha===251){throw [c('bs_caml_builtin_exceptions').invalid_argument,"equal: abstract value"]}else if(ha!==ia){if(ha<ia){return -1}else return 1;}else{var ja=y.length|0,ka=x.length|0;if(ja===ka){var la=y,ma=x,na=0,oa=ja;while(true){var pa=na;if(pa===oa){return 0}else{var qa=m(la[pa],ma[pa]);if(qa!==0){return qa}else{na=pa+1|0;continue}}}}else if(ja<ka){var ra=y,sa=x,ta=0,ua=ja;while(true){var va=ta;if(va===ua){return -1}else{var wa=m(ra[va],sa[va]);if(wa!==0){return wa}else{ta=va+1|0;continue}}}}else{var xa=y,ya=x,za=0,ab=ka;while(true){var bb=za;if(bb===ab){return 1}else{var cb=m(xa[bb],ya[bb]);if(cb!==0){return cb}else{za=bb+1|0;continue}}}}}}}}}function n(v,w){while(true){var x=w,y=v;if(y===x){return 1}else{var z=typeof y;if(z==="string"||z==="number"||z==="boolean"||z==="undefined"||y===null){return 0}else{var aa=typeof x;if(z==="function"||aa==="function"){throw [c('bs_caml_builtin_exceptions').invalid_argument,"equal: functional value"]}else if(aa==="number"||aa==="undefined"||x===null){return 0}else{var ba=y.tag|0,ca=x.tag|0;if(ba===250){v=y[0];continue}else if(ca===250){w=x[0];continue}else if(ba===248){return +(y[1]===x[1])}else if(ba===251){throw [c('bs_caml_builtin_exceptions').invalid_argument,"equal: abstract value"]}else if(ba!==ca){return 0}else{var da=y.length|0,ea=x.length|0;if(da===ea){var fa=y,ga=x,ha=0,ia=da;while(true){var ja=ha;if(ja===ia){return 1}else if(n(fa[ja],ga[ja])){ha=ja+1|0;continue}else return 0;}}else return 0;}}}}}}function o(v,w){return 1-n(v,w)}function p(v,w){return +(m(v,w)>=0)}function q(v,w){return +(m(v,w)>0)}function r(v,w){return +(m(v,w)<=0)}function s(v,w){return +(m(v,w)<0)}var t=l,u=l;g.caml_obj_dup=h;g.caml_obj_truncate=i;g.caml_lazy_make_forward=j;g.caml_update_dummy=k;g.caml_int_compare=l;g.caml_int32_compare=t;g.caml_nativeint_compare=u;g.caml_compare=m;g.caml_equal=n;g.caml_notequal=o;g.caml_greaterequal=p;g.caml_greaterthan=q;g.caml_lessthan=s;g.caml_lessequal=r}),null);
__d('bs_caml_string',['bs_caml_builtin_exceptions'],(function a(b,c,d,e,f,g){'use strict';function h(v){return String.fromCharCode(v)}function i(v,w){if(w>=v.length||w<0){throw [c('bs_caml_builtin_exceptions').invalid_argument,"index out of bounds"]}else return v.charCodeAt(w);}function j(v){if(v<0){throw [c('bs_caml_builtin_exceptions').invalid_argument,"String.create"]}else return new Array(v);}function k(v,w){if(v===w){return 0}else if(v<w){return -1}else return 1;}function l(v,w,x,y){if(x>0){for(var z=w,aa=(x+w|0)-1|0;z<=aa;++z)v[z]=y;return 0}else return 0;}function m(v,w,x,y,z){if(z>0){var aa=v.length-w|0;if(z<=aa){for(var ba=0,ca=z-1|0;ba<=ca;++ba)x[y+ba|0]=v.charCodeAt(w+ba|0);return 0}else{for(var da=0,ea=aa-1|0;da<=ea;++da)x[y+da|0]=v.charCodeAt(w+da|0);for(var fa=aa,ga=z-1|0;fa<=ga;++fa)x[y+fa|0]=0;return 0}}else return 0;}function n(v,w,x,y,z){if(z>0){if(v===x){var aa=v,ba=w,ca=y,da=z;if(ba<ca){var ea=(aa.length-ca|0)-1|0,fa=da-1|0,ga=ea>fa?fa:ea;for(var ha=ga;ha>=0;--ha)aa[ca+ha|0]=aa[ba+ha|0];return 0}else if(ba>ca){var ia=(aa.length-ba|0)-1|0,ja=da-1|0,ka=ia>ja?ja:ia;for(var la=0;la<=ka;++la)aa[ca+la|0]=aa[ba+la|0];return 0}else return 0;}else{var ma=v.length-w|0;if(z<=ma){for(var na=0,oa=z-1|0;na<=oa;++na)x[y+na|0]=v[w+na|0];return 0}else{for(var pa=0,qa=ma-1|0;pa<=qa;++pa)x[y+pa|0]=v[w+pa|0];for(var ra=ma,sa=z-1|0;ra<=sa;++ra)x[y+ra|0]=0;return 0}}}else return 0;}function o(v){var w=v.length,x=new Array(w);for(var y=0,z=w-1|0;y<=z;++y)x[y]=v.charCodeAt(y);return x}function p(v){var w=v,x=0,y=v.length,z="",aa=y;if(x===0&&y<=4096&&y===w.length){return String.fromCharCode.apply(null,w)}else{var ba=0;while(aa>0){var ca=aa<1024?aa:1024,da=new Array(ca);n(w,ba,da,0,ca);z=z+String.fromCharCode.apply(null,da);aa=aa-ca|0;ba=ba+ca|0}return z}}function q(v){var w=v.length,x=new Array(w);for(var y=0,z=w-1|0;y<=z;++y)x[y]=v[y];return p(x)}function r(v){if(v>31){return +(v<127)}else return 0;}function s(v,w){return v.charCodeAt(w)+(v.charCodeAt(w+1|0)<<8)|0}function t(v,w){return ((v.charCodeAt(w)+(v.charCodeAt(w+1|0)<<8)|0)+(v.charCodeAt(w+2|0)<<16)|0)+(v.charCodeAt(w+3|0)<<24)|0}function u(v,w){if(w<0||w>=v.length){throw [c('bs_caml_builtin_exceptions').invalid_argument,"index out of bounds"]}else return v.charCodeAt(w);}g.bytes_of_string=o;g.bytes_to_string=p;g.caml_is_printable=r;g.caml_string_of_char_array=q;g.caml_string_get=i;g.caml_string_compare=k;g.caml_create_string=j;g.caml_fill_string=l;g.caml_blit_string=m;g.caml_blit_bytes=n;g.caml_string_get16=s;g.caml_string_get32=t;g.string_of_char=h;g.get=u}),null);
__d('bs_char',['bs_caml_string','bs_caml_builtin_exceptions'],(function a(b,c,d,e,f,g){'use strict';function h(m){if(m<0||m>255){throw [c('bs_caml_builtin_exceptions').invalid_argument,"Char.chr"]}else return m;}function i(m){var n=0;if(m>=40){if(m!==92){n=m>=127?1:2}else return "\\\\";}else if(m>=32){if(m>=39){return "\\'"}else n=2;}else if(m>=14){n=1}else switch(m){case 8:return "\\b";case 9:return "\\t";case 10:return "\\n";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 11:case 12:n=1;break;case 13:return "\\r";}switch(n){case 1:var o=new Array(4);o[0]=92;o[1]=48+(m/100|0)|0;o[2]=48+(m/10|0)%10|0;o[3]=48+m%10|0;return c('bs_caml_string').bytes_to_string(o);case 2:var p=new Array(1);p[0]=m;return c('bs_caml_string').bytes_to_string(p);}}function j(m){if(m>=65&&m<=90||m>=192&&m<=214||m>=216&&m<=222){return m+32|0}else return m;}function k(m){if(m>=97&&m<=122||m>=224&&m<=246||m>=248&&m<=254){return m-32|0}else return m;}function l(m,n){return m-n|0}g.chr=h;g.escaped=i;g.lowercase=j;g.uppercase=k;g.compare=l}),null);
__d('bs_caml_array',['bs_caml_builtin_exceptions'],(function a(b,c,d,e,f,g){'use strict';function h(p,q,r){var s=new Array(r),t=0,u=q;while(t<r){s[t]=p[u];t=t+1|0;u=u+1|0}return s}function i(p,q){while(true){var r=q,s=p;if(r){q=r[1];p=r[0].length+s|0;continue}else return s;}}function j(p,q,r){while(true){var s=r,t=q;if(s){var u=s[0],v=u.length,w=t,x=0;while(x<v){p[w]=u[x];w=w+1|0;x=x+1|0}r=s[1];q=w;continue}else return 0;}}function k(p){var q=i(0,p),r=new Array(q);j(r,0,p);return r}function l(p,q,r){if(q<0||q>=p.length){throw [c('bs_caml_builtin_exceptions').invalid_argument,"index out of bounds"]}else{p[q]=r;return 0}}function m(p,q){if(q<0||q>=p.length){throw [c('bs_caml_builtin_exceptions').invalid_argument,"index out of bounds"]}else return p[q];}function n(p,q){var r=new Array(p);for(var s=0,t=p-1|0;s<=t;++s)r[s]=q;return r}function o(p,q,r,s,t){if(s<=q){for(var u=0,v=t-1|0;u<=v;++u)r[u+s|0]=p[u+q|0];return 0}else{for(var w=t-1|0;w>=0;--w)r[w+s|0]=p[w+q|0];return 0}}g.caml_array_sub=h;g.caml_array_concat=k;g.caml_make_vect=n;g.caml_array_blit=o;g.caml_array_get=m;g.caml_array_set=l}),null);
__d('bs_curry',['bs_caml_array'],(function a(b,c,d,e,f,g){'use strict';function h(ga,ha){while(true){var ia=ha,ja=ga,ka=ja.length,la=ka?ka:1,ma=ia.length,na=la-ma|0;if(na){if(na<0){ha=c('bs_caml_array').caml_array_sub(ia,la,-na|0);ga=ja.apply(null,c('bs_caml_array').caml_array_sub(ia,0,la));continue}else return function(oa,pa){return function(qa){return h(oa,pa.concat([qa]))}}(ja,ia);}else return ja.apply(null,ia);}}function i(ga,ha,ia){if(ia>7||ia<0){return h(ga,[ha])}else switch(ia){case 0:case 1:return ga(ha);case 2:return function(ja){return ga(ha,ja)};case 3:return function(ja,ka){return ga(ha,ja,ka)};case 4:return function(ja,ka,la){return ga(ha,ja,ka,la)};case 5:return function(ja,ka,la,ma){return ga(ha,ja,ka,la,ma)};case 6:return function(ja,ka,la,ma,na){return ga(ha,ja,ka,la,ma,na)};case 7:return function(ja,ka,la,ma,na,oa){return ga(ha,ja,ka,la,ma,na,oa)};}}function j(ga,ha){var ia=ga.length;if(ia===1){return ga(ha)}else return i(ga,ha,ia);}function k(ga){var ha=ga.length;if(ha===1){return ga}else return function(ia){return j(ga,ia)};}function l(ga,ha,ia,ja){if(ja>7||ja<0){return h(ga,[ha,ia])}else switch(ja){case 0:case 1:return h(ga(ha),[ia]);case 2:return ga(ha,ia);case 3:return function(ka){return ga(ha,ia,ka)};case 4:return function(ka,la){return ga(ha,ia,ka,la)};case 5:return function(ka,la,ma){return ga(ha,ia,ka,la,ma)};case 6:return function(ka,la,ma,na){return ga(ha,ia,ka,la,ma,na)};case 7:return function(ka,la,ma,na,oa){return ga(ha,ia,ka,la,ma,na,oa)};}}function m(ga,ha,ia){var ja=ga.length;if(ja===2){return ga(ha,ia)}else return l(ga,ha,ia,ja);}function n(ga){var ha=ga.length;if(ha===2){return ga}else return function(ia,ja){return m(ga,ia,ja)};}function o(ga,ha,ia,ja,ka){var la=0;if(ka>7||ka<0){return h(ga,[ha,ia,ja])}else switch(ka){case 0:case 1:la=1;break;case 2:return h(ga(ha,ia),[ja]);case 3:return ga(ha,ia,ja);case 4:return function(ma){return ga(ha,ia,ja,ma)};case 5:return function(ma,na){return ga(ha,ia,ja,ma,na)};case 6:return function(ma,na,oa){return ga(ha,ia,ja,ma,na,oa)};case 7:return function(ma,na,oa,pa){return ga(ha,ia,ja,ma,na,oa,pa)};}if(la===1)return h(ga(ha),[ia,ja]);}function p(ga,ha,ia,ja){var ka=ga.length;if(ka===3){return ga(ha,ia,ja)}else return o(ga,ha,ia,ja,ka);}function q(ga){var ha=ga.length;if(ha===3){return ga}else return function(ia,ja,ka){return p(ga,ia,ja,ka)};}function r(ga,ha,ia,ja,ka,la){var ma=0;if(la>7||la<0){return h(ga,[ha,ia,ja,ka])}else switch(la){case 0:case 1:ma=1;break;case 2:return h(ga(ha,ia),[ja,ka]);case 3:return h(ga(ha,ia,ja),[ka]);case 4:return ga(ha,ia,ja,ka);case 5:return function(na){return ga(ha,ia,ja,ka,na)};case 6:return function(na,oa){return ga(ha,ia,ja,ka,na,oa)};case 7:return function(na,oa,pa){return ga(ha,ia,ja,ka,na,oa,pa)};}if(ma===1)return h(ga(ha),[ia,ja,ka]);}function s(ga,ha,ia,ja,ka){var la=ga.length;if(la===4){return ga(ha,ia,ja,ka)}else return r(ga,ha,ia,ja,ka,la);}function t(ga){var ha=ga.length;if(ha===4){return ga}else return function(ia,ja,ka,la){return s(ga,ia,ja,ka,la)};}function u(ga,ha,ia,ja,ka,la,ma){var na=0;if(ma>7||ma<0){return h(ga,[ha,ia,ja,ka,la])}else switch(ma){case 0:case 1:na=1;break;case 2:return h(ga(ha,ia),[ja,ka,la]);case 3:return h(ga(ha,ia,ja),[ka,la]);case 4:return h(ga(ha,ia,ja,ka),[la]);case 5:return ga(ha,ia,ja,ka,la);case 6:return function(oa){return ga(ha,ia,ja,ka,la,oa)};case 7:return function(oa,pa){return ga(ha,ia,ja,ka,la,oa,pa)};}if(na===1)return h(ga(ha),[ia,ja,ka,la]);}function v(ga,ha,ia,ja,ka,la){var ma=ga.length;if(ma===5){return ga(ha,ia,ja,ka,la)}else return u(ga,ha,ia,ja,ka,la,ma);}function w(ga){var ha=ga.length;if(ha===5){return ga}else return function(ia,ja,ka,la,ma){return v(ga,ia,ja,ka,la,ma)};}function x(ga,ha,ia,ja,ka,la,ma,na){var oa=0;if(na>7||na<0){return h(ga,[ha,ia,ja,ka,la,ma])}else switch(na){case 0:case 1:oa=1;break;case 2:return h(ga(ha,ia),[ja,ka,la,ma]);case 3:return h(ga(ha,ia,ja),[ka,la,ma]);case 4:return h(ga(ha,ia,ja,ka),[la,ma]);case 5:return h(ga(ha,ia,ja,ka,la),[ma]);case 6:return ga(ha,ia,ja,ka,la,ma);case 7:return function(pa){return ga(ha,ia,ja,ka,la,ma,pa)};}if(oa===1)return h(ga(ha),[ia,ja,ka,la,ma]);}function y(ga,ha,ia,ja,ka,la,ma){var na=ga.length;if(na===6){return ga(ha,ia,ja,ka,la,ma)}else return x(ga,ha,ia,ja,ka,la,ma,na);}function z(ga){var ha=ga.length;if(ha===6){return ga}else return function(ia,ja,ka,la,ma,na){return y(ga,ia,ja,ka,la,ma,na)};}function aa(ga,ha,ia,ja,ka,la,ma,na,oa){var pa=0;if(oa>7||oa<0){return h(ga,[ha,ia,ja,ka,la,ma,na])}else switch(oa){case 0:case 1:pa=1;break;case 2:return h(ga(ha,ia),[ja,ka,la,ma,na]);case 3:return h(ga(ha,ia,ja),[ka,la,ma,na]);case 4:return h(ga(ha,ia,ja,ka),[la,ma,na]);case 5:return h(ga(ha,ia,ja,ka,la),[ma,na]);case 6:return h(ga(ha,ia,ja,ka,la,ma),[na]);case 7:return ga(ha,ia,ja,ka,la,ma,na);}if(pa===1)return h(ga(ha),[ia,ja,ka,la,ma,na]);}function ba(ga,ha,ia,ja,ka,la,ma,na){var oa=ga.length;if(oa===7){return ga(ha,ia,ja,ka,la,ma,na)}else return aa(ga,ha,ia,ja,ka,la,ma,na,oa);}function ca(ga){var ha=ga.length;if(ha===7){return ga}else return function(ia,ja,ka,la,ma,na,oa){return ba(ga,ia,ja,ka,la,ma,na,oa)};}function da(ga,ha,ia,ja,ka,la,ma,na,oa,pa){var qa=0;if(pa>7||pa<0){return h(ga,[ha,ia,ja,ka,la,ma,na,oa])}else switch(pa){case 0:case 1:qa=1;break;case 2:return h(ga(ha,ia),[ja,ka,la,ma,na,oa]);case 3:return h(ga(ha,ia,ja),[ka,la,ma,na,oa]);case 4:return h(ga(ha,ia,ja,ka),[la,ma,na,oa]);case 5:return h(ga(ha,ia,ja,ka,la),[ma,na,oa]);case 6:return h(ga(ha,ia,ja,ka,la,ma),[na,oa]);case 7:return h(ga(ha,ia,ja,ka,la,ma,na),[oa]);}if(qa===1)return h(ga(ha),[ia,ja,ka,la,ma,na,oa]);}function ea(ga,ha,ia,ja,ka,la,ma,na,oa){var pa=ga.length;if(pa===8){return ga(ha,ia,ja,ka,la,ma,na,oa)}else return da(ga,ha,ia,ja,ka,la,ma,na,oa,pa);}function fa(ga){var ha=ga.length;if(ha===8){return ga}else return function(ia,ja,ka,la,ma,na,oa,pa){return ea(ga,ia,ja,ka,la,ma,na,oa,pa)};}g.app=h;g.curry_1=i;g._1=j;g.__1=k;g.curry_2=l;g._2=m;g.__2=n;g.curry_3=o;g._3=p;g.__3=q;g.curry_4=r;g._4=s;g.__4=t;g.curry_5=u;g._5=v;g.__5=w;g.curry_6=x;g._6=y;g.__6=z;g.curry_7=aa;g._7=ba;g.__7=ca;g.curry_8=da;g._8=ea;g.__8=fa}),null);
__d('bs_caml_exceptions',[],(function a(b,c,d,e,f,g){'use strict';var h=[0];function i(m){m[1]=h[0];h[0]+=1;return m}function j(){h[0]+=1;return h[0]}function k(m){var n=j(0),o=[m,n];o.tag=248;return o}function l(m){if(m===undefined){return 0}else if(m.tag===248){return 1}else{var n=m[0];if(n!==undefined){return +(n.tag===248)}else return 0;}}g.caml_set_oo_id=i;g.get_id=j;g.create=k;g.isCamlExceptionOrOpenVariant=l}),null);
__d('bs_caml_utils',[],(function a(b,c,d,e,f,g){'use strict';var h=String.prototype.repeat&&function(i,j){return j.repeat(i)}||function(i,j){if(j.length==0||i==0)return '';if(j.length*i>=1<<28)throw new RangeError('repeat count must not overflow maximum string size');var k='';for(;;){if((i&1)==1)k+=j;i>>>=1;if(i==0)break;j+=j}return k};g.repeat=h}),null);
__d('bs_caml_int64',['bs_caml_obj','bs_caml_int32','bs_caml_utils','bs_caml_builtin_exceptions'],(function a(b,c,d,e,f,g){'use strict';var h=[-2147483648,0],i=[134217727,1],j=[0,1],k=[0,0],l=[-1,4294967295];function m(wa){return +((wa&2147483648)!==0)}function n(wa,xa){var ya=xa[1],za=wa[1],ab=za+ya&4294967295,bb=m(za)&&(m(ya)||!m(ab))||m(ya)&&!m(ab)?1:0,cb=wa[0]+xa[0]+bb&4294967295;return [cb,ab>>>0]}function o(wa){var xa=wa[0]^-1,ya=wa[1]^-1;return [xa,ya>>>0]}function p(wa,xa){if(wa[0]===xa[0]){return +(wa[1]===xa[1])}else return 0;}function q(wa){if(p(wa,h)){return h}else return n(o(wa),j);}function r(wa,xa){return n(wa,q(xa))}function s(wa,xa){if(xa){var ya=wa[1];if(xa>=32){return [ya<<(xa-32|0),0]}else{var za=ya>>>(32-xa|0)|wa[0]<<xa;return [za,ya<<xa>>>0]}}else return wa;}function t(wa,xa){if(xa){var ya=wa[0],za=xa-32|0;if(za){if(za>0){var ab=ya>>>za;return [0,ab>>>0]}else{var bb=ya>>>xa,cb=ya<<(-za|0)|wa[1]>>>xa;return [bb,cb>>>0]}}else return [0,ya>>>0];}else return wa;}function u(wa,xa){if(xa){var ya=wa[0];if(xa<32){var za=ya>>xa,ab=ya<<(32-xa|0)|wa[1]>>>xa;return [za,ab>>>0]}else{var bb=ya>>(xa-32|0);return [ya>=0?0:-1,bb>>>0]}}else return wa;}function v(wa){if(wa[0]!==0||wa[1]!==0){return 0}else return 1;}function w(wa,xa){while(true){var ya=xa,za=wa,ab=0,bb,cb=za[0],db=0,eb=0,fb=0;if(cb!==0){fb=4}else if(za[1]!==0){fb=4}else return k;if(fb===4)if(ya[0]!==0){eb=3}else if(ya[1]!==0){eb=3}else return k;if(eb===3)if(cb!==-2147483648){db=2}else if(za[1]!==0){db=2}else{bb=ya[1];ab=1}if(db===2){var gb=ya[0],hb=za[1],ib=0;if(gb!==-2147483648){ib=3}else if(ya[1]!==0){ib=3}else{bb=hb;ab=1}if(ib===3){var jb=ya[1];if(cb<0){if(gb<0){xa=q(ya);wa=q(za);continue}else return q(w(q(za),ya));}else if(gb<0){return q(w(za,q(ya)))}else{var kb=cb>>>16,lb=cb&65535,mb=hb>>>16,nb=hb&65535,ob=gb>>>16,pb=gb&65535,qb=jb>>>16,rb=jb&65535,sb=0,tb=0,ub=0,vb=nb*rb;ub=(vb>>>16)+mb*rb;tb=ub>>>16;ub=(ub&65535)+nb*qb;tb=tb+(ub>>>16)+lb*rb;sb=tb>>>16;tb=(tb&65535)+mb*qb;sb+=tb>>>16;tb=(tb&65535)+nb*pb;sb+=tb>>>16;tb=tb&65535;sb=sb+(kb*rb+lb*qb+mb*pb+nb*ob)&65535;var wb=tb|sb<<16,xb=vb&65535|(ub&65535)<<16;return [wb,xb>>>0]}}}if(ab===1)if((bb&1)===0){return k}else return h;}}function x(wa){var xa=c('bs_caml_int32').caml_int32_bswap(wa[1]),ya=c('bs_caml_int32').caml_int32_bswap(wa[0]);return [xa,ya>>>0]}function y(wa,xa){return [wa[0]^xa[0],(wa[1]^xa[1])>>>0]}function z(wa,xa){return [wa[0]|xa[0],(wa[1]|xa[1])>>>0]}function aa(wa,xa){return [wa[0]&xa[0],(wa[1]&xa[1])>>>0]}function ba(wa,xa){var ya=xa[0],za=wa[0];if(za>ya){return 1}else if(za<ya){return 0}else return +(wa[1]>=xa[1]);}function ca(wa,xa){return 1-p(wa,xa)}function da(wa,xa){return 1-ba(wa,xa)}function ea(wa,xa){if(wa[0]>xa[0]){return 1}else if(wa[0]<xa[0]){return 0}else return +(wa[1]>xa[1]);}function fa(wa,xa){return 1-ea(wa,xa)}function ga(wa){return wa[0]*4294967296+wa[1]}var ha=Math.pow(2,32),ia=Math.pow(2,63),ja=-Math.pow(2,63);function ka(wa){if(isNaN(wa)||!isFinite(wa)){return k}else if(wa<=ja){return h}else if(wa+1>=ia){return i}else if(wa<0){return q(ka(-wa))}else{var xa=wa/ha|0,ya=wa%ha|0;return [xa,ya>>>0]}}function la(wa,xa){while(true){var ya=xa,za=wa,ab=za[0],bb=0,cb=0;if(ya[0]!==0){cb=2}else if(ya[1]!==0){cb=2}else throw c('bs_caml_builtin_exceptions').division_by_zero;if(cb===2)if(ab!==-2147483648){if(ab!==0){bb=1}else if(za[1]!==0){bb=1}else return k;}else if(za[1]!==0){bb=1}else if(p(ya,j)||p(ya,l)){return za}else if(p(ya,h)){return j}else{var db=ya[0],eb=u(za,1),fb=s(la(eb,ya),1),gb=0;if(fb[0]!==0){gb=3}else if(fb[1]!==0){gb=3}else if(db<0){return j}else return q(j);if(gb===3){var hb=w(ya,fb),ib=n(za,q(hb));return n(fb,la(ib,ya))}}if(bb===1){var jb=ya[0],kb=0;if(jb!==-2147483648){kb=2}else if(ya[1]!==0){kb=2}else return k;if(kb===2)if(ab<0){if(jb<0){xa=q(ya);wa=q(za);continue}else return q(la(q(za),ya));}else if(jb<0){return q(la(za,q(ya)))}else{var lb=k,mb=za;while(ba(mb,ya)){var nb=Math.max(1,Math.floor(ga(mb)/ga(ya))),ob=Math.ceil(Math.log(nb)/Math.LN2),pb=ob<=48?1:Math.pow(2,ob-48),qb=ka(nb),rb=w(qb,ya);while(rb[0]<0||ea(rb,mb)){nb-=pb;qb=ka(nb);rb=w(qb,ya)}if(v(qb))qb=j;lb=n(lb,qb);mb=n(mb,q(rb))}return lb}}}}function ma(wa,xa){var ya=w(la(wa,xa),xa);return n(wa,q(ya))}function na(wa,xa){var ya=la(wa,xa),za=w(ya,xa);return [ya,n(wa,q(za))]}function oa(wa,xa){var ya=c('bs_caml_obj').caml_nativeint_compare(wa[0],xa[0]);if(ya){return ya}else return c('bs_caml_obj').caml_nativeint_compare(wa[1],xa[1]);}function pa(wa){return [wa<0?-1:0,wa>>>0]}function qa(wa){return wa[1]|0}function ra(wa){var xa=function db(eb){return (eb>>>0).toString(16)},ya=wa[0],za=wa[1],ab=0;if(ya!==0){ab=1}else if(za!==0){ab=1}else return "0";if(ab===1)if(za!==0){if(ya!==0){var bb=xa(wa[1]),cb=8-bb.length|0;if(cb<=0){return xa(wa[0])+bb}else return xa(wa[0])+(c('bs_caml_utils').repeat(cb,"0")+bb);}else return xa(wa[1]);}else return xa(wa[0])+"00000000";}function sa(wa){return [2147483647&wa[0],wa[1]]}function ta(wa){var xa=new Int32Array([wa[1],wa[0]]);return new Float64Array(xa.buffer)[0]}function ua(wa){var xa=new Float64Array([wa]),ya=new Int32Array(xa.buffer),za=ya[1],ab=za,bb=ya[0],cb=bb;return [ab,cb>>>0]}function va(wa,xa){var ya=wa.charCodeAt(xa+4|0)<<32|wa.charCodeAt(xa+5|0)<<40|wa.charCodeAt(xa+6|0)<<48|wa.charCodeAt(xa+7|0)<<56,za=wa.charCodeAt(xa)|wa.charCodeAt(xa+1|0)<<8|wa.charCodeAt(xa+2|0)<<16|wa.charCodeAt(xa+3|0)<<24;return [ya,za>>>0]}g.min_int=h;g.max_int=i;g.one=j;g.zero=k;g.not=o;g.of_int32=pa;g.to_int32=qa;g.add=n;g.neg=q;g.sub=r;g.lsl_=s;g.lsr_=t;g.asr_=u;g.is_zero=v;g.mul=w;g.xor=y;g.or_=z;g.and_=aa;g.swap=x;g.ge=ba;g.eq=p;g.neq=ca;g.lt=da;g.gt=ea;g.le=fa;g.to_float=ga;g.of_float=ka;g.div=la;g.mod_=ma;g.div_mod=na;g.compare=oa;g.to_hex=ra;g.discard_sign=sa;g.float_of_bits=ta;g.bits_of_float=ua;g.get64=va}),null);
__d('bs_caml_format',['bs_curry','bs_caml_int32','bs_caml_int64','bs_caml_utils','bs_caml_builtin_exceptions'],(function a(b,c,d,e,f,g){'use strict';function h(aa){throw [c('bs_caml_builtin_exceptions').failure,aa]}function i(aa){if(aa>=65){if(aa>=97){if(aa>=123){return -1}else return aa-87|0;}else if(aa>=91){return -1}else return aa-55|0;}else if(aa>57||aa<48){return -1}else return aa-48|0;}function j(aa){switch(aa){case 0:return 8;case 1:return 16;case 2:return 10;case 3:return 2;}}function k(aa){var ba=1,ca=2,da=0;if(aa[da]==="-"){ba=-1;da=da+1|0}var ea=aa.charCodeAt(da),fa=aa.charCodeAt(da+1|0);if(ea===48)if(fa>=89){if(fa!==98){if(fa!==111){if(fa===120){ca=1;da=da+2|0}}else{ca=0;da=da+2|0}}else{ca=3;da=da+2|0}}else if(fa!==66){if(fa!==79){if(fa>=88){ca=1;da=da+2|0}}else{ca=0;da=da+2|0}}else{ca=3;da=da+2|0}return [da,ba,ca]}function l(aa){var ba=k(aa),ca=ba[0],da=j(ba[2]),ea=4294967295,fa=aa.length,ga=ca<fa?aa.charCodeAt(ca):0,ha=i(ga);if(ha<0||ha>=da)throw [c('bs_caml_builtin_exceptions').failure,"int_of_string"];var ia=function la(ma,na){while(true){var oa=na,pa=ma;if(oa===fa){return pa}else{var qa=aa.charCodeAt(oa);if(qa===95){na=oa+1|0;continue}else{var ra=i(qa);if(ra<0||ra>=da){throw [c('bs_caml_builtin_exceptions').failure,"int_of_string"]}else{var sa=da*pa+ra;if(sa>ea){throw [c('bs_caml_builtin_exceptions').failure,"int_of_string"]}else{na=oa+1|0;ma=sa;continue}}}}}},ja=ba[1]*ia(ha,ca+1|0),ka=ja|0;if(da===10&&ja!==ka)throw [c('bs_caml_builtin_exceptions').failure,"int_of_string"];return ka}function m(aa){var ba=k(aa),ca=ba[2],da=ba[0],ea=c('bs_caml_int64').of_int32(j(ca)),fa=c('bs_caml_int64').of_int32(ba[1]),ga;switch(ca){case 0:ga=[536870911,4294967295];break;case 1:ga=[268435455,4294967295];break;case 2:ga=[429496729,2576980377];break;case 3:ga=[2147483647,4294967295];break;}var ha=aa.length,ia=da<ha?aa.charCodeAt(da):0,ja=c('bs_caml_int64').of_int32(i(ia));if(c('bs_caml_int64').lt(ja,[0,0])||c('bs_caml_int64').ge(ja,ea))throw [c('bs_caml_builtin_exceptions').failure,"int64_of_string"];var ka=function na(oa,pa){while(true){var qa=pa,ra=oa;if(qa===ha){return ra}else{var sa=aa.charCodeAt(qa);if(sa===95){pa=qa+1|0;continue}else{var ta=c('bs_caml_int64').of_int32(i(sa));if(c('bs_caml_int64').lt(ta,[0,0])||c('bs_caml_int64').ge(ta,ea)||c('bs_caml_int64').gt(ra,ga)){throw [c('bs_caml_builtin_exceptions').failure,"int64_of_string"]}else{var ua=c('bs_caml_int64').add(c('bs_caml_int64').mul(ea,ra),ta);pa=qa+1|0;oa=ua;continue}}}}},la=c('bs_caml_int64').mul(fa,ka(ja,da+1|0)),ma=c('bs_caml_int64').or_(la,[0,0]);if(c('bs_caml_int64').eq(ea,[0,10])&&c('bs_caml_int64').neq(la,ma))throw [c('bs_caml_builtin_exceptions').failure,"int64_of_string"];return ma}function n(aa){switch(aa){case 0:return 8;case 1:return 16;case 2:return 10;}}function o(aa){if(aa>=65&&aa<=90||aa>=192&&aa<=214||aa>=216&&aa<=222){return aa+32|0}else return aa;}function p(aa){var ba=aa.length;if(ba>31)throw [c('bs_caml_builtin_exceptions').invalid_argument,"format_int: format too long"];var ca=["+","-"," ",0,2,0,0,0,1,-1,"f"],da=0;while(true){var ea=da;if(ea>=ba){return ca}else{var fa=aa.charCodeAt(ea),ga=0;if(fa>=69){if(fa>=88){if(fa>=121){ga=1}else switch(fa-88|0){case 0:ca[4]=1;ca[7]=1;da=ea+1|0;continue;case 13:case 14:case 15:ga=5;break;case 12:case 17:ga=4;break;case 23:ca[4]=0;da=ea+1|0;continue;case 29:ca[4]=2;da=ea+1|0;continue;case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 16:case 18:case 19:case 20:case 21:case 22:case 24:case 25:case 26:case 27:case 28:case 30:case 31:ga=1;break;case 32:ca[4]=1;da=ea+1|0;continue;}}else if(fa>=72){ga=1}else{ca[5]=1;ca[7]=1;ca[10]=String.fromCharCode(o(fa));da=ea+1|0;continue}}else{var ha=fa-32|0;if(ha>25||ha<0){ga=1}else switch(ha){case 3:ca[3]=1;da=ea+1|0;continue;case 0:case 11:ga=2;break;case 13:ca[0]="-";da=ea+1|0;continue;case 14:ca[9]=0;var ia=ea+1|0;while(function(ka){return function(){var la=aa.charCodeAt(ka)-48|0;return +(la>=0&&la<=9)}}(ia)()){ca[9]=(c('bs_caml_int32').imul(ca[9],10)+aa.charCodeAt(ia)|0)-48|0;ia=ia+1|0}da=ia;continue;case 1:case 2:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 12:case 15:ga=1;break;case 16:ca[2]="0";da=ea+1|0;continue;case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:ga=3;break;}}switch(ga){case 1:da=ea+1|0;continue;case 2:ca[1]=String.fromCharCode(fa);da=ea+1|0;continue;case 3:ca[6]=0;var ja=ea;while(function(ka){return function(){var la=aa.charCodeAt(ka)-48|0;return +(la>=0&&la<=9)}}(ja)()){ca[6]=(c('bs_caml_int32').imul(ca[6],10)+aa.charCodeAt(ja)|0)-48|0;ja=ja+1|0}da=ja;continue;case 4:ca[5]=1;ca[4]=2;da=ea+1|0;continue;case 5:ca[5]=1;ca[10]=String.fromCharCode(fa);da=ea+1|0;continue;}}}}function q(aa,ba){var ca=aa[0],da=aa[1],ea=aa[2],fa=aa[3],ga=aa[4],ha=aa[5],ia=aa[6],ja=aa[7],ka=aa[8],la=ba.length;if(ha&&(ka<0||da!=="-"))la=la+1|0;if(fa)if(ga){if(ga===1)la=la+2|0;}else la=la+1|0;var ma="";if(ca==="+"&&ea===" ")for(var na=la,oa=ia-1|0;na<=oa;++na)ma=ma+ea;if(ha)if(ka<0){ma=ma+"-"}else if(da!=="-")ma=ma+da;if(fa&&ga===0)ma=ma+"0";if(fa&&ga===1)ma=ma+"0x";if(ca==="+"&&ea==="0")for(var pa=la,qa=ia-1|0;pa<=qa;++pa)ma=ma+ea;ma=ja?ma+ba.toUpperCase():ma+ba;if(ca==="-")for(var ra=la,sa=ia-1|0;ra<=sa;++ra)ma=ma+" ";return ma}function r(aa,ba){if(aa==="%d"){return String(ba)}else{var ca=p(aa),da=ca,ea=ba,fa=ea<0?da[5]?(da[8]=-1,-ea):ea>>>0:ea,ga=fa.toString(n(da[4]));if(da[9]>=0){da[2]=" ";var ha=da[9]-ga.length|0;if(ha>0)ga=c('bs_caml_utils').repeat(ha,"0")+ga;}return q(da,ga)}}function s(aa,ba){var ca=p(aa),da=ca[5]&&c('bs_caml_int64').lt(ba,[0,0])?(ca[8]=-1,c('bs_caml_int64').neg(ba)):ba,ea="",fa=ca[4];switch(fa){case 0:var ga=[0,8],ha="01234567";if(c('bs_caml_int64').lt(da,[0,0])){var ia=c('bs_caml_int64').discard_sign(da),ja=c('bs_caml_int64').div_mod(ia,ga),ka=c('bs_caml_int64').add([268435456,0],ja[0]),la=ja[1];ea=String.fromCharCode(ha.charCodeAt(la[1]|0))+ea;while(c('bs_caml_int64').neq(ka,[0,0])){var ma=c('bs_caml_int64').div_mod(ka,ga);ka=ma[0];la=ma[1];ea=String.fromCharCode(ha.charCodeAt(la[1]|0))+ea}}else{var na=c('bs_caml_int64').div_mod(da,ga),oa=na[0],pa=na[1];ea=String.fromCharCode(ha.charCodeAt(pa[1]|0))+ea;while(c('bs_caml_int64').neq(oa,[0,0])){var qa=c('bs_caml_int64').div_mod(oa,ga);oa=qa[0];pa=qa[1];ea=String.fromCharCode(ha.charCodeAt(pa[1]|0))+ea}}break;case 1:ea=c('bs_caml_int64').to_hex(da)+ea;break;case 2:var ra=[0,10],sa="0123456789";if(c('bs_caml_int64').lt(da,[0,0])){var ta=c('bs_caml_int64').discard_sign(da),ua=c('bs_caml_int64').div_mod(ta,ra),va=c('bs_caml_int64').div_mod(c('bs_caml_int64').add([0,8],ua[1]),ra),wa=c('bs_caml_int64').add(c('bs_caml_int64').add([214748364,3435973836],ua[0]),va[0]),xa=va[1];ea=String.fromCharCode(sa.charCodeAt(xa[1]|0))+ea;while(c('bs_caml_int64').neq(wa,[0,0])){var ya=c('bs_caml_int64').div_mod(wa,ra);wa=ya[0];xa=ya[1];ea=String.fromCharCode(sa.charCodeAt(xa[1]|0))+ea}}else{var za=c('bs_caml_int64').div_mod(da,ra),ab=za[0],bb=za[1];ea=String.fromCharCode(sa.charCodeAt(bb[1]|0))+ea;while(c('bs_caml_int64').neq(ab,[0,0])){var cb=c('bs_caml_int64').div_mod(ab,ra);ab=cb[0];bb=cb[1];ea=String.fromCharCode(sa.charCodeAt(bb[1]|0))+ea}}break;}if(ca[9]>=0){ca[2]=" ";var db=ca[9]-ea.length|0;if(db>0)ea=c('bs_caml_utils').repeat(db,"0")+ea;}return q(ca,ea)}function t(aa,ba){var ca=p(aa),da=ca[9]<0?6:ca[9],ea=ba<0?(ca[8]=-1,-ba):ba,fa="";if(isNaN(ea)){fa="nan";ca[2]=" "}else if(isFinite(ea)){var ga=ca[10];switch(ga){case "e":fa=ea.toExponential(da);var ha=fa.length;if(fa[ha-3|0]==="e")fa=fa.slice(0,ha-1|0)+("0"+fa.slice(ha-1|0));break;case "f":fa=ea.toFixed(da);break;case "g":var ia=da!==0?da:1;fa=ea.toExponential(ia-1|0);var ja=fa.indexOf("e"),ka=Number(fa.slice(ja+1|0))|0;if(ka<-4||ea>=1e+21||ea.toFixed().length>ia){var la=ja-1|0;while(fa[la]==="0")la=la-1|0;if(fa[la]===".")la=la-1|0;fa=fa.slice(0,la+1|0)+fa.slice(ja);var ma=fa.length;if(fa[ma-3|0]==="e")fa=fa.slice(0,ma-1|0)+("0"+fa.slice(ma-1|0));}else{var na=ia;if(ka<0){na=na-(ka+1|0)|0;fa=ea.toFixed(na)}else while(function(){fa=ea.toFixed(na);return +(fa.length>(ia+1|0))}())na=na-1|0;if(na!==0){var oa=fa.length-1|0;while(fa[oa]==="0")oa=oa-1|0;if(fa[oa]===".")oa=oa-1|0;fa=fa.slice(0,oa+1|0)}}break;default:}}else{fa="inf";ca[2]=" "}return q(ca,fa)}var u=function aa(ba,ca){var da=+ba;if(ba.length>0&&da===da)return da;ba=ba.replace(/_/g,"");da=+ba;if(ba.length>0&&da===da||/^[+-]?nan$/i.test(ba))return da;if(/^ *0x[0-9a-f_]+p[+-]?[0-9_]+/i.test(ba)){var ea=ba.indexOf('p');ea=ea==-1?ba.indexOf('P'):ea;var fa=+ba.substring(ea+1);da=+ba.substring(0,ea);return da*Math.pow(2,fa)}if(/^\+?inf(inity)?$/i.test(ba))return Infinity;if(/^-inf(inity)?$/i.test(ba))return -Infinity;ca("float_of_string")};function v(aa){return c('bs_curry')._2(u,aa,h)}var w=r,x=r,y=l,z=l;g.caml_format_float=t;g.caml_format_int=r;g.caml_nativeint_format=w;g.caml_int32_format=x;g.caml_float_of_string=v;g.caml_int64_format=s;g.caml_int_of_string=l;g.caml_int32_of_string=y;g.caml_int64_of_string=m;g.caml_nativeint_of_string=z}),null);
__d('bs_caml_io',['bs_curry','bs_caml_builtin_exceptions'],(function a(b,c,d,e,f,g){'use strict';function h(u,v){return u+v}var i=undefined,j=["",function(u,v){var w=v.length-1|0;if(typeof process!=="undefined"&&process.stdout&&process.stdout.write){return process.stdout.write(v)}else if(v[w]==="\n"){return 0}else return 0;}],k=["",function(u,v){var w=v.length-1|0;if(v[w]==="\n"){return 0}else return 0;}];function l(){throw [c('bs_caml_builtin_exceptions').failure,"caml_ml_open_descriptor_in not implemented"]}function m(){throw [c('bs_caml_builtin_exceptions').failure,"caml_ml_open_descriptor_out not implemented"]}function n(u){if(u[0]!==""){c('bs_curry')._2(u[1],u,u[0]);u[0]="";return 0}else return 0;}var o=function u(v){return typeof process!=="undefined"&&process.stdout&&(process.stdout.write(v),true)};function p(u,v,w,x){var y=w===0&&x===v.length?v:v.slice(w,x);if(typeof process!=="undefined"&&process.stdout&&process.stdout.write&&u===j){return process.stdout.write(y)}else{var z=y.lastIndexOf("\n");if(z<0){u[0]=u[0]+y;return 0}else{u[0]=u[0]+y.slice(0,z+1|0);n(u);u[0]=u[0]+y.slice(z+1|0);return 0}}}function q(u,v){return p(u,String.fromCharCode(v),0,1)}function r(u,v,w,x){throw [c('bs_caml_builtin_exceptions').failure,"caml_ml_input ic not implemented"]}function s(){throw [c('bs_caml_builtin_exceptions').failure,"caml_ml_input_char not implemnted"]}function t(){return [j,[k,0]]}g.$caret=h;g.stdin=i;g.stdout=j;g.stderr=k;g.caml_ml_open_descriptor_in=l;g.caml_ml_open_descriptor_out=m;g.caml_ml_flush=n;g.node_std_output=o;g.caml_ml_output=p;g.caml_ml_output_char=q;g.caml_ml_input=r;g.caml_ml_input_char=s;g.caml_ml_out_channels_list=t}),null);
__d('bs_caml_missing_polyfill',[],(function a(b,c,d,e,f,g){'use strict';var h=function i(j){throw new Error(j)};g.not_implemented=h}),null);
__d('bs_caml_sys',['bs_caml_builtin_exceptions'],(function a(b,c,d,e,f,g){'use strict';function h(q){var r=typeof process==="undefined"?undefined:process;if(r!==undefined){var s=r.env[q];if(s!==undefined){return s}else throw c('bs_caml_builtin_exceptions').not_found;}else throw c('bs_caml_builtin_exceptions').not_found;}function i(){var q=typeof process==="undefined"?undefined:process;if(q!==undefined){return q.uptime()}else return -1;}function j(){return [((Date.now()|0)^4294967295)*Math.random()|0]}function k(){return 127}function l(){var q=typeof process==="undefined"?undefined:process;if(q!==undefined){return q.cwd()}else return "/";}function m(){var q=typeof process==="undefined"?undefined:process;if(q!==undefined){return [q.argv[0],q.argv]}else return ["",[""]];}function n(q){var r=typeof process==="undefined"?undefined:process;if(r!==undefined){return r.exit(q)}else return 0;}function o(){throw [c('bs_caml_builtin_exceptions').failure,"caml_sys_is_directory not implemented"]}function p(){throw [c('bs_caml_builtin_exceptions').failure,"caml_sys_file_exists not implemented"]}g.caml_sys_getenv=h;g.caml_sys_time=i;g.caml_sys_random_seed=j;g.caml_sys_system_command=k;g.caml_sys_getcwd=l;g.caml_sys_get_argv=m;g.caml_sys_exit=n;g.caml_sys_is_directory=o;g.caml_sys_file_exists=p}),null);
__d('bs_camlinternalFormatBasics',['bs_block'],(function a(b,c,d,e,f,g){'use strict';function h(k){if(typeof k==="number"){return 0}else switch(k.tag|0){case 0:return c('bs_block').__(0,[h(k[0])]);case 1:return c('bs_block').__(1,[h(k[0])]);case 2:return c('bs_block').__(2,[h(k[0])]);case 3:return c('bs_block').__(3,[h(k[0])]);case 4:return c('bs_block').__(4,[h(k[0])]);case 5:return c('bs_block').__(5,[h(k[0])]);case 6:return c('bs_block').__(6,[h(k[0])]);case 7:return c('bs_block').__(7,[h(k[0])]);case 8:return c('bs_block').__(8,[k[0],h(k[1])]);case 9:var l=k[0];return c('bs_block').__(9,[l,l,h(k[2])]);case 10:return c('bs_block').__(10,[h(k[0])]);case 11:return c('bs_block').__(11,[h(k[0])]);case 12:return c('bs_block').__(12,[h(k[0])]);case 13:return c('bs_block').__(13,[h(k[0])]);case 14:return c('bs_block').__(14,[h(k[0])]);}}function i(k,l){if(typeof k==="number"){return l}else switch(k.tag|0){case 0:return c('bs_block').__(0,[i(k[0],l)]);case 1:return c('bs_block').__(1,[i(k[0],l)]);case 2:return c('bs_block').__(2,[i(k[0],l)]);case 3:return c('bs_block').__(3,[i(k[0],l)]);case 4:return c('bs_block').__(4,[i(k[0],l)]);case 5:return c('bs_block').__(5,[i(k[0],l)]);case 6:return c('bs_block').__(6,[i(k[0],l)]);case 7:return c('bs_block').__(7,[i(k[0],l)]);case 8:return c('bs_block').__(8,[k[0],i(k[1],l)]);case 9:return c('bs_block').__(9,[k[0],k[1],i(k[2],l)]);case 10:return c('bs_block').__(10,[i(k[0],l)]);case 11:return c('bs_block').__(11,[i(k[0],l)]);case 12:return c('bs_block').__(12,[i(k[0],l)]);case 13:return c('bs_block').__(13,[i(k[0],l)]);case 14:return c('bs_block').__(14,[i(k[0],l)]);}}function j(k,l){if(typeof k==="number"){return l}else switch(k.tag|0){case 0:return c('bs_block').__(0,[j(k[0],l)]);case 1:return c('bs_block').__(1,[j(k[0],l)]);case 2:return c('bs_block').__(2,[k[0],j(k[1],l)]);case 3:return c('bs_block').__(3,[k[0],j(k[1],l)]);case 4:return c('bs_block').__(4,[k[0],k[1],k[2],j(k[3],l)]);case 5:return c('bs_block').__(5,[k[0],k[1],k[2],j(k[3],l)]);case 6:return c('bs_block').__(6,[k[0],k[1],k[2],j(k[3],l)]);case 7:return c('bs_block').__(7,[k[0],k[1],k[2],j(k[3],l)]);case 8:return c('bs_block').__(8,[k[0],k[1],k[2],j(k[3],l)]);case 9:return c('bs_block').__(9,[j(k[0],l)]);case 10:return c('bs_block').__(10,[j(k[0],l)]);case 11:return c('bs_block').__(11,[k[0],j(k[1],l)]);case 12:return c('bs_block').__(12,[k[0],j(k[1],l)]);case 13:return c('bs_block').__(13,[k[0],k[1],j(k[2],l)]);case 14:return c('bs_block').__(14,[k[0],k[1],j(k[2],l)]);case 15:return c('bs_block').__(15,[j(k[0],l)]);case 16:return c('bs_block').__(16,[j(k[0],l)]);case 17:return c('bs_block').__(17,[k[0],j(k[1],l)]);case 18:return c('bs_block').__(18,[k[0],j(k[1],l)]);case 19:return c('bs_block').__(19,[j(k[0],l)]);case 20:return c('bs_block').__(20,[k[0],k[1],j(k[2],l)]);case 21:return c('bs_block').__(21,[k[0],j(k[1],l)]);case 22:return c('bs_block').__(22,[j(k[0],l)]);case 23:return c('bs_block').__(23,[k[0],j(k[1],l)]);case 24:return c('bs_block').__(24,[k[0],k[1],j(k[2],l)]);}}g.concat_fmtty=i;g.erase_rel=h;g.concat_fmt=j}),null);
__d('bs_pervasives',['bs_curry','bs_caml_io','bs_caml_obj','bs_caml_sys','bs_caml_format','bs_caml_string','bs_caml_exceptions','bs_caml_missing_polyfill','bs_caml_builtin_exceptions','bs_camlinternalFormatBasics'],(function a(b,c,d,e,f,g){'use strict';function h(wc){throw [c('bs_caml_builtin_exceptions').failure,wc]}function i(wc){throw [c('bs_caml_builtin_exceptions').invalid_argument,wc]}var j=c('bs_caml_exceptions').create("Pervasives.Exit");function k(wc,xc){if(c('bs_caml_obj').caml_lessequal(wc,xc)){return wc}else return xc;}function l(wc,xc){if(c('bs_caml_obj').caml_greaterequal(wc,xc)){return wc}else return xc;}function m(wc){if(wc>=0){return wc}else return -wc|0;}function n(wc){return wc^-1}var o=-2147483648;function p(wc,xc){return wc+xc}function q(wc){if(wc<0||wc>255){throw [c('bs_caml_builtin_exceptions').invalid_argument,"char_of_int"]}else return wc;}function r(wc){if(wc){return "true"}else return "false";}function s(wc){switch(wc){case "false":return 0;case "true":return 1;default:throw [c('bs_caml_builtin_exceptions').invalid_argument,"bool_of_string"];}}function t(wc){return ""+wc}function u(wc){var xc=wc.length,yc=0;while(true){var zc=yc;if(zc>=xc){return p(wc,".")}else{var ad=c('bs_caml_string').get(wc,zc);if(ad>=48){if(ad>=58){return wc}else{yc=zc+1|0;continue}}else if(ad!==45){return wc}else{yc=zc+1|0;continue}}}}function v(wc){return u(c('bs_caml_format').caml_format_float("%.12g",wc))}function w(wc,xc){if(wc){return [wc[0],w(wc[1],xc)]}else return xc;}var x=c('bs_caml_io').stdin,y=c('bs_caml_io').stdout,z=c('bs_caml_io').stderr;function aa(wc,xc,yc){return c('bs_caml_io').caml_ml_open_descriptor_out(c('bs_caml_missing_polyfill').not_implemented("caml_sys_open not implemented by bucklescript yet\n"))}function ba(wc){return aa([1,[3,[4,[7,0]]]],438,wc)}function ca(wc){return aa([1,[3,[4,[6,0]]]],438,wc)}function da(){var wc=c('bs_caml_io').caml_ml_out_channels_list(0);while(true){var xc=wc;if(xc){try{c('bs_caml_io').caml_ml_flush(xc[0])}catch(yc){}wc=xc[1];continue}else return 0;}}function ea(wc,xc){return c('bs_caml_io').caml_ml_output(wc,xc,0,xc.length)}function fa(wc,xc){return c('bs_caml_io').caml_ml_output(wc,xc,0,xc.length)}function ga(wc,xc,yc,zc){if(yc<0||zc<0||yc>(xc.length-zc|0)){throw [c('bs_caml_builtin_exceptions').invalid_argument,"output"]}else return c('bs_caml_io').caml_ml_output(wc,xc,yc,zc);}function ha(wc,xc,yc,zc){if(yc<0||zc<0||yc>(xc.length-zc|0)){throw [c('bs_caml_builtin_exceptions').invalid_argument,"output_substring"]}else return c('bs_caml_io').caml_ml_output(wc,xc,yc,zc);}function ia(wc,xc){return c('bs_caml_missing_polyfill').not_implemented("caml_output_value not implemented by bucklescript yet\n")}function ja(wc){c('bs_caml_io').caml_ml_flush(wc);return c('bs_caml_missing_polyfill').not_implemented("caml_ml_close_channel not implemented by bucklescript yet\n")}function ka(wc){try{c('bs_caml_io').caml_ml_flush(wc)}catch(xc){}try{return c('bs_caml_missing_polyfill').not_implemented("caml_ml_close_channel not implemented by bucklescript yet\n")}catch(xc){return 0}}function la(wc,xc,yc){return c('bs_caml_io').caml_ml_open_descriptor_in(c('bs_caml_missing_polyfill').not_implemented("caml_sys_open not implemented by bucklescript yet\n"))}function ma(wc){return la([0,[7,0]],0,wc)}function na(wc){return la([0,[6,0]],0,wc)}function oa(wc,xc,yc,zc){if(yc<0||zc<0||yc>(xc.length-zc|0)){throw [c('bs_caml_builtin_exceptions').invalid_argument,"input"]}else return c('bs_caml_missing_polyfill').not_implemented("caml_ml_input not implemented by bucklescript yet\n");}function pa(wc,xc,yc,zc){while(true){var ad=zc,bd=yc;if(ad<=0){return 0}else{var cd=c('bs_caml_missing_polyfill').not_implemented("caml_ml_input not implemented by bucklescript yet\n");if(cd){zc=ad-cd|0;yc=bd+cd|0;continue}else throw c('bs_caml_builtin_exceptions').end_of_file;}}}function qa(wc,xc,yc,zc){if(yc<0||zc<0||yc>(xc.length-zc|0)){throw [c('bs_caml_builtin_exceptions').invalid_argument,"really_input"]}else return pa(wc,xc,yc,zc);}function ra(wc,xc){var yc=c('bs_caml_string').caml_create_string(xc);qa(wc,yc,0,xc);return c('bs_caml_string').bytes_to_string(yc)}function sa(wc){var xc=function zc(ad,bd,cd){while(true){var dd=cd,ed=bd;if(dd){var fd=dd[0],gd=fd.length;c('bs_caml_string').caml_blit_bytes(fd,0,ad,ed-gd|0,gd);cd=dd[1];bd=ed-gd|0;continue}else return ad;}},yc=function zc(ad,bd){while(true){var cd=bd,dd=ad,ed=c('bs_caml_missing_polyfill').not_implemented("caml_ml_input_scan_line not implemented by bucklescript yet\n");if(ed){if(ed>0){var fd=c('bs_caml_string').caml_create_string(ed-1|0);c('bs_caml_missing_polyfill').not_implemented("caml_ml_input not implemented by bucklescript yet\n");c('bs_caml_io').caml_ml_input_char(wc);if(dd){var gd=(cd+ed|0)-1|0;return xc(c('bs_caml_string').caml_create_string(gd),gd,[fd,dd])}else return fd;}else{var hd=c('bs_caml_string').caml_create_string(-ed|0);c('bs_caml_missing_polyfill').not_implemented("caml_ml_input not implemented by bucklescript yet\n");bd=cd-ed|0;ad=[hd,dd];continue}}else if(dd){return xc(c('bs_caml_string').caml_create_string(cd),cd,dd)}else throw c('bs_caml_builtin_exceptions').end_of_file;}};return c('bs_caml_string').bytes_to_string(yc(0,0))}function ta(){try{return c('bs_caml_missing_polyfill').not_implemented("caml_ml_close_channel not implemented by bucklescript yet\n")}catch(wc){return 0}}function ua(wc){return c('bs_caml_io').caml_ml_output_char(y,wc)}function va(wc){return fa(y,wc)}function wa(wc){return ea(y,wc)}function xa(wc){return fa(y,""+wc)}function ya(wc){return fa(y,u(c('bs_caml_format').caml_format_float("%.12g",wc)))}function za(wc){return 0}function ab(){c('bs_caml_io').caml_ml_output_char(y,10);return c('bs_caml_io').caml_ml_flush(y)}function bb(wc){return c('bs_caml_io').caml_ml_output_char(z,wc)}function cb(wc){return fa(z,wc)}function db(wc){return ea(z,wc)}function eb(wc){return fa(z,""+wc)}function fb(wc){return fa(z,u(c('bs_caml_format').caml_format_float("%.12g",wc)))}function gb(wc){return 0}function hb(){c('bs_caml_io').caml_ml_output_char(z,10);return c('bs_caml_io').caml_ml_flush(z)}function ib(){c('bs_caml_io').caml_ml_flush(y);return sa(x)}function jb(){return c('bs_caml_format').caml_int_of_string((c('bs_caml_io').caml_ml_flush(y),sa(x)))}function kb(){return c('bs_caml_format').caml_float_of_string((c('bs_caml_io').caml_ml_flush(y),sa(x)))}function lb(wc){return wc[1]}function mb(wc,xc){return [c('bs_camlinternalFormatBasics').concat_fmt(wc[0],xc[0]),p(wc[1],p("%,",xc[1]))]}var nb=[da];function ob(wc){var xc=nb[0];nb[0]=function(){c('bs_curry')._1(wc,0);return c('bs_curry')._1(xc,0)};return 0}function pb(){return c('bs_curry')._1(nb[0],0)}function qb(wc){pb(0);return c('bs_caml_sys').caml_sys_exit(wc)}var rb=2147483647,sb=Infinity,tb=-Infinity,ub=NaN,vb=Number.MAX_VALUE,wb=Number.MIN_VALUE,xb=2.220446049250313e-16,yb=c('bs_caml_io').caml_ml_flush,zb=c('bs_caml_io').caml_ml_output_char,ac=c('bs_caml_io').caml_ml_output_char;function bc(wc,xc){return c('bs_caml_missing_polyfill').not_implemented("caml_ml_output_int not implemented by bucklescript yet\n")}function cc(wc,xc){return c('bs_caml_missing_polyfill').not_implemented("caml_ml_seek_out not implemented by bucklescript yet\n")}function dc(){return c('bs_caml_missing_polyfill').not_implemented("caml_ml_pos_out not implemented by bucklescript yet\n")}function ec(){return c('bs_caml_missing_polyfill').not_implemented("caml_ml_channel_size not implemented by bucklescript yet\n")}function fc(wc,xc){return c('bs_caml_missing_polyfill').not_implemented("caml_ml_set_binary_mode not implemented by bucklescript yet\n")}var gc=c('bs_caml_io').caml_ml_input_char,hc=c('bs_caml_io').caml_ml_input_char;function ic(){return c('bs_caml_missing_polyfill').not_implemented("caml_ml_input_int not implemented by bucklescript yet\n")}function jc(){return c('bs_caml_missing_polyfill').not_implemented("caml_input_value not implemented by bucklescript yet\n")}function kc(wc,xc){return c('bs_caml_missing_polyfill').not_implemented("caml_ml_seek_in not implemented by bucklescript yet\n")}function lc(){return c('bs_caml_missing_polyfill').not_implemented("caml_ml_pos_in not implemented by bucklescript yet\n")}function mc(){return c('bs_caml_missing_polyfill').not_implemented("caml_ml_channel_size not implemented by bucklescript yet\n")}function nc(){return c('bs_caml_missing_polyfill').not_implemented("caml_ml_close_channel not implemented by bucklescript yet\n")}function oc(wc,xc){return c('bs_caml_missing_polyfill').not_implemented("caml_ml_set_binary_mode not implemented by bucklescript yet\n")}function pc(wc,xc){return c('bs_caml_missing_polyfill').not_implemented("caml_ml_seek_out_64 not implemented by bucklescript yet\n")}function qc(){return c('bs_caml_missing_polyfill').not_implemented("caml_ml_pos_out_64 not implemented by bucklescript yet\n")}function rc(){return c('bs_caml_missing_polyfill').not_implemented("caml_ml_channel_size_64 not implemented by bucklescript yet\n")}function sc(wc,xc){return c('bs_caml_missing_polyfill').not_implemented("caml_ml_seek_in_64 not implemented by bucklescript yet\n")}function tc(){return c('bs_caml_missing_polyfill').not_implemented("caml_ml_pos_in_64 not implemented by bucklescript yet\n")}function uc(){return c('bs_caml_missing_polyfill').not_implemented("caml_ml_channel_size_64 not implemented by bucklescript yet\n")}var vc=[pc,qc,rc,sc,tc,uc];g.invalid_arg=i;g.failwith=h;g.Exit=j;g.min=k;g.max=l;g.abs=m;g.max_int=rb;g.min_int=o;g.lnot=n;g.infinity=sb;g.neg_infinity=tb;g.nan=ub;g.max_float=vb;g.min_float=wb;g.epsilon_float=xb;g.$caret=p;g.char_of_int=q;g.string_of_bool=r;g.bool_of_string=s;g.string_of_int=t;g.string_of_float=v;g.$at=w;g.stdin=x;g.stdout=y;g.stderr=z;g.print_char=ua;g.print_string=va;g.print_bytes=wa;g.print_int=xa;g.print_float=ya;g.print_endline=za;g.print_newline=ab;g.prerr_char=bb;g.prerr_string=cb;g.prerr_bytes=db;g.prerr_int=eb;g.prerr_float=fb;g.prerr_endline=gb;g.prerr_newline=hb;g.read_line=ib;g.read_int=jb;g.read_float=kb;g.open_out=ba;g.open_out_bin=ca;g.open_out_gen=aa;g.flush=yb;g.flush_all=da;g.output_char=zb;g.output_string=fa;g.output_bytes=ea;g.output=ga;g.output_substring=ha;g.output_byte=ac;g.output_binary_int=bc;g.output_value=ia;g.seek_out=cc;g.pos_out=dc;g.out_channel_length=ec;g.close_out=ja;g.close_out_noerr=ka;g.set_binary_mode_out=fc;g.open_in=ma;g.open_in_bin=na;g.open_in_gen=la;g.input_char=gc;g.input_line=sa;g.input=oa;g.really_input=qa;g.really_input_string=ra;g.input_byte=hc;g.input_binary_int=ic;g.input_value=jc;g.seek_in=kc;g.pos_in=lc;g.in_channel_length=mc;g.close_in=nc;g.close_in_noerr=ta;g.set_binary_mode_in=oc;g.LargeFile=vc;g.string_of_format=lb;g.$caret$caret=mb;g.exit=qb;g.at_exit=ob;g.valid_float_lexem=u;g.unsafe_really_input=pa;g.do_at_exit=pb}),null);
__d('bs_list',['bs_curry','bs_caml_obj','bs_pervasives','bs_caml_builtin_exceptions'],(function a(b,c,d,e,f,g){'use strict';function h(bb){var cb=0,db=bb;while(true){var eb=db,fb=cb;if(eb){db=eb[1];cb=fb+1|0;continue}else return fb;}}function i(bb){if(bb){return bb[0]}else throw [c('bs_caml_builtin_exceptions').failure,"hd"];}function j(bb){if(bb){return bb[1]}else throw [c('bs_caml_builtin_exceptions').failure,"tl"];}function k(bb,cb){if(cb<0){throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.nth"]}else{var db=bb,eb=cb;while(true){var fb=eb,gb=db;if(gb){if(fb){eb=fb-1|0;db=gb[1];continue}else return gb[0];}else throw [c('bs_caml_builtin_exceptions').failure,"nth"];}}}function l(bb,cb){while(true){var db=cb,eb=bb;if(eb){cb=[eb[0],db];bb=eb[1];continue}else return db;}}function m(bb){return l(bb,0)}function n(bb){if(bb){return c('bs_pervasives').$at(bb[0],n(bb[1]))}else return 0;}function o(bb,cb){if(cb){var db=c('bs_curry')._1(bb,cb[0]);return [db,o(bb,cb[1])]}else return 0;}function p(bb,cb,db){if(db){var eb=c('bs_curry')._2(cb,bb,db[0]);return [eb,p(bb+1|0,cb,db[1])]}else return 0;}function q(bb,cb){return p(0,bb,cb)}function r(bb,cb){var db=0,eb=cb;while(true){var fb=eb,gb=db;if(fb){eb=fb[1];db=[c('bs_curry')._1(bb,fb[0]),gb];continue}else return gb;}}function s(bb,cb){while(true){var db=cb;if(db){c('bs_curry')._1(bb,db[0]);cb=db[1];continue}else return 0;}}function t(bb,cb){var db=0,eb=bb,fb=cb;while(true){var gb=fb,hb=db;if(gb){c('bs_curry')._2(eb,hb,gb[0]);fb=gb[1];db=hb+1|0;continue}else return 0;}}function u(bb,cb,db){while(true){var eb=db,fb=cb;if(eb){db=eb[1];cb=c('bs_curry')._2(bb,fb,eb[0]);continue}else return fb;}}function v(bb,cb,db){if(cb){return c('bs_curry')._2(bb,cb[0],v(bb,cb[1],db))}else return db;}function w(bb,cb,db){if(cb){if(db){var eb=c('bs_curry')._2(bb,cb[0],db[0]);return [eb,w(bb,cb[1],db[1])]}else throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.map2"];}else if(db){throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.map2"]}else return 0;}function x(bb,cb,db){var eb=0,fb=cb,gb=db;while(true){var hb=gb,ib=fb,jb=eb;if(ib){if(hb){gb=hb[1];fb=ib[1];eb=[c('bs_curry')._2(bb,ib[0],hb[0]),jb];continue}else throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.rev_map2"];}else if(hb){throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.rev_map2"]}else return jb;}}function y(bb,cb,db){while(true){var eb=db,fb=cb;if(fb){if(eb){c('bs_curry')._2(bb,fb[0],eb[0]);db=eb[1];cb=fb[1];continue}else throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.iter2"];}else if(eb){throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.iter2"]}else return 0;}}function z(bb,cb,db,eb){while(true){var fb=eb,gb=db,hb=cb;if(gb){if(fb){eb=fb[1];db=gb[1];cb=c('bs_curry')._3(bb,hb,gb[0],fb[0]);continue}else throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.fold_left2"];}else if(fb){throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.fold_left2"]}else return hb;}}function aa(bb,cb,db,eb){if(cb){if(db){return c('bs_curry')._3(bb,cb[0],db[0],aa(bb,cb[1],db[1],eb))}else throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.fold_right2"];}else if(db){throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.fold_right2"]}else return eb;}function ba(bb,cb){while(true){var db=cb;if(db){if(c('bs_curry')._1(bb,db[0])){cb=db[1];continue}else return 0;}else return 1;}}function ca(bb,cb){while(true){var db=cb;if(db){if(c('bs_curry')._1(bb,db[0])){return 1}else{cb=db[1];continue}}else return 0;}}function da(bb,cb,db){while(true){var eb=db,fb=cb;if(fb){if(eb){if(c('bs_curry')._2(bb,fb[0],eb[0])){db=eb[1];cb=fb[1];continue}else return 0;}else throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.for_all2"];}else if(eb){throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.for_all2"]}else return 1;}}function ea(bb,cb,db){while(true){var eb=db,fb=cb;if(fb){if(eb){if(c('bs_curry')._2(bb,fb[0],eb[0])){return 1}else{db=eb[1];cb=fb[1];continue}}else throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.exists2"];}else if(eb){throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.exists2"]}else return 0;}}function fa(bb,cb){while(true){var db=cb;if(db){if(c('bs_caml_obj').caml_compare(db[0],bb)){cb=db[1];continue}else return 1;}else return 0;}}function ga(bb,cb){while(true){var db=cb;if(db){if(db[0]===bb){return 1}else{cb=db[1];continue}}else return 0;}}function ha(bb,cb){while(true){var db=cb;if(db){var eb=db[0];if(c('bs_caml_obj').caml_compare(eb[0],bb)){cb=db[1];continue}else return eb[1];}else throw c('bs_caml_builtin_exceptions').not_found;}}function ia(bb,cb){while(true){var db=cb;if(db){var eb=db[0];if(eb[0]===bb){return eb[1]}else{cb=db[1];continue}}else throw c('bs_caml_builtin_exceptions').not_found;}}function ja(bb,cb){while(true){var db=cb;if(db){if(c('bs_caml_obj').caml_compare(db[0][0],bb)){cb=db[1];continue}else return 1;}else return 0;}}function ka(bb,cb){while(true){var db=cb;if(db){if(db[0][0]===bb){return 1}else{cb=db[1];continue}}else return 0;}}function la(bb,cb){if(cb){var db=cb[1],eb=cb[0];if(c('bs_caml_obj').caml_compare(eb[0],bb)){return [eb,la(bb,db)]}else return db;}else return 0;}function ma(bb,cb){if(cb){var db=cb[1],eb=cb[0];if(eb[0]===bb){return db}else return [eb,ma(bb,db)];}else return 0;}function na(bb,cb){while(true){var db=cb;if(db){var eb=db[0];if(c('bs_curry')._1(bb,eb)){return eb}else{cb=db[1];continue}}else throw c('bs_caml_builtin_exceptions').not_found;}}function oa(bb){return function(cb){var db=0,eb=cb;while(true){var fb=eb,gb=db;if(fb){var hb=fb[1],ib=fb[0];if(c('bs_curry')._1(bb,ib)){eb=hb;db=[ib,gb];continue}else{eb=hb;continue}}else return l(gb,0);}}}function pa(bb,cb){var db=0,eb=0,fb=cb;while(true){var gb=fb,hb=eb,ib=db;if(gb){var jb=gb[1],kb=gb[0];if(c('bs_curry')._1(bb,kb)){fb=jb;db=[kb,ib];continue}else{fb=jb;eb=[kb,hb];continue}}else return [l(ib,0),l(hb,0)];}}function qa(bb){if(bb){var cb=bb[0],db=qa(bb[1]);return [[cb[0],db[0]],[cb[1],db[1]]]}else return [0,0];}function ra(bb,cb){if(bb){if(cb){return [[bb[0],cb[0]],ra(bb[1],cb[1])]}else throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.combine"];}else if(cb){throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.combine"]}else return 0;}function sa(bb,cb,db){if(cb){if(db){var eb=db[0],fb=cb[0];if(c('bs_curry')._2(bb,fb,eb)<=0){return [fb,sa(bb,cb[1],db)]}else return [eb,sa(bb,cb,db[1])];}else return cb;}else return db;}function ta(bb,cb){while(true){var db=cb,eb=bb;if(eb){if(db){cb=db[1];bb=eb-1|0;continue}else throw [c('bs_caml_builtin_exceptions').assert_failure,["list.ml",223,11]];}else return db;}}function ua(bb,cb){var db=function gb(hb,ib){var jb=0;if(hb!==2){if(hb!==3){jb=1}else if(ib){var kb=ib[1];if(kb){var lb=kb[1];if(lb){var mb=lb[0],nb=kb[0],ob=ib[0];if(c('bs_curry')._2(bb,ob,nb)<=0){if(c('bs_curry')._2(bb,nb,mb)<=0){return [ob,[nb,[mb,0]]]}else if(c('bs_curry')._2(bb,ob,mb)<=0){return [ob,[mb,[nb,0]]]}else return [mb,[ob,[nb,0]]];}else if(c('bs_curry')._2(bb,ob,mb)<=0){return [nb,[ob,[mb,0]]]}else if(c('bs_curry')._2(bb,nb,mb)<=0){return [nb,[mb,[ob,0]]]}else return [mb,[nb,[ob,0]]];}else jb=1;}else jb=1;}else jb=1;}else if(ib){var pb=ib[1];if(pb){var qb=pb[0],rb=ib[0];if(c('bs_curry')._2(bb,rb,qb)<=0){return [rb,[qb,0]]}else return [qb,[rb,0]];}else jb=1;}else jb=1;if(jb===1){var sb=hb>>1,tb=hb-sb|0,ub=ta(sb,ib),vb=eb(sb,ib),wb=eb(tb,ub),xb=vb,yb=wb,zb=0;while(true){var ac=zb,bc=yb,cc=xb;if(cc){if(bc){var dc=bc[0],ec=cc[0];if(c('bs_curry')._2(bb,ec,dc)>0){zb=[ec,ac];xb=cc[1];continue}else{zb=[dc,ac];yb=bc[1];continue}}else return l(cc,ac);}else return l(bc,ac);}}},eb=function gb(hb,ib){var jb=0;if(hb!==2){if(hb!==3){jb=1}else if(ib){var kb=ib[1];if(kb){var lb=kb[1];if(lb){var mb=lb[0],nb=kb[0],ob=ib[0];if(c('bs_curry')._2(bb,ob,nb)>0){if(c('bs_curry')._2(bb,nb,mb)>0){return [ob,[nb,[mb,0]]]}else if(c('bs_curry')._2(bb,ob,mb)>0){return [ob,[mb,[nb,0]]]}else return [mb,[ob,[nb,0]]];}else if(c('bs_curry')._2(bb,ob,mb)>0){return [nb,[ob,[mb,0]]]}else if(c('bs_curry')._2(bb,nb,mb)>0){return [nb,[mb,[ob,0]]]}else return [mb,[nb,[ob,0]]];}else jb=1;}else jb=1;}else jb=1;}else if(ib){var pb=ib[1];if(pb){var qb=pb[0],rb=ib[0];if(c('bs_curry')._2(bb,rb,qb)>0){return [rb,[qb,0]]}else return [qb,[rb,0]];}else jb=1;}else jb=1;if(jb===1){var sb=hb>>1,tb=hb-sb|0,ub=ta(sb,ib),vb=db(sb,ib),wb=db(tb,ub),xb=vb,yb=wb,zb=0;while(true){var ac=zb,bc=yb,cc=xb;if(cc){if(bc){var dc=bc[0],ec=cc[0];if(c('bs_curry')._2(bb,ec,dc)<=0){zb=[ec,ac];xb=cc[1];continue}else{zb=[dc,ac];yb=bc[1];continue}}else return l(cc,ac);}else return l(bc,ac);}}},fb=h(cb);if(fb<2){return cb}else return db(fb,cb);}function va(bb,cb){var db=function gb(hb,ib){var jb=0;if(hb!==2){if(hb!==3){jb=1}else if(ib){var kb=ib[1];if(kb){var lb=kb[1];if(lb){var mb=lb[0],nb=kb[0],ob=ib[0],pb=c('bs_curry')._2(bb,ob,nb);if(pb){if(pb<0){var qb=c('bs_curry')._2(bb,nb,mb);if(qb){if(qb<0){return [ob,[nb,[mb,0]]]}else{var rb=c('bs_curry')._2(bb,ob,mb);if(rb){if(rb<0){return [ob,[mb,[nb,0]]]}else return [mb,[ob,[nb,0]]];}else return [ob,[nb,0]];}}else return [ob,[nb,0]];}else{var sb=c('bs_curry')._2(bb,ob,mb);if(sb){if(sb<0){return [nb,[ob,[mb,0]]]}else{var tb=c('bs_curry')._2(bb,nb,mb);if(tb){if(tb<0){return [nb,[mb,[ob,0]]]}else return [mb,[nb,[ob,0]]];}else return [nb,[ob,0]];}}else return [nb,[ob,0]];}}else{var ub=c('bs_curry')._2(bb,nb,mb);if(ub){if(ub<0){return [nb,[mb,0]]}else return [mb,[nb,0]];}else return [nb,0];}}else jb=1;}else jb=1;}else jb=1;}else if(ib){var vb=ib[1];if(vb){var wb=vb[0],xb=ib[0],yb=c('bs_curry')._2(bb,xb,wb);if(yb){if(yb<0){return [xb,[wb,0]]}else return [wb,[xb,0]];}else return [xb,0];}else jb=1;}else jb=1;if(jb===1){var zb=hb>>1,ac=hb-zb|0,bc=ta(zb,ib),cc=eb(zb,ib),dc=eb(ac,bc),ec=cc,fc=dc,gc=0;while(true){var hc=gc,ic=fc,jc=ec;if(jc){if(ic){var kc=ic[1],lc=ic[0],mc=jc[1],nc=jc[0],oc=c('bs_curry')._2(bb,nc,lc);if(oc){if(oc>0){gc=[nc,hc];ec=mc;continue}else{gc=[lc,hc];fc=kc;continue}}else{gc=[nc,hc];fc=kc;ec=mc;continue}}else return l(jc,hc);}else return l(ic,hc);}}},eb=function gb(hb,ib){var jb=0;if(hb!==2){if(hb!==3){jb=1}else if(ib){var kb=ib[1];if(kb){var lb=kb[1];if(lb){var mb=lb[0],nb=kb[0],ob=ib[0],pb=c('bs_curry')._2(bb,ob,nb);if(pb){if(pb>0){var qb=c('bs_curry')._2(bb,nb,mb);if(qb){if(qb>0){return [ob,[nb,[mb,0]]]}else{var rb=c('bs_curry')._2(bb,ob,mb);if(rb){if(rb>0){return [ob,[mb,[nb,0]]]}else return [mb,[ob,[nb,0]]];}else return [ob,[nb,0]];}}else return [ob,[nb,0]];}else{var sb=c('bs_curry')._2(bb,ob,mb);if(sb){if(sb>0){return [nb,[ob,[mb,0]]]}else{var tb=c('bs_curry')._2(bb,nb,mb);if(tb){if(tb>0){return [nb,[mb,[ob,0]]]}else return [mb,[nb,[ob,0]]];}else return [nb,[ob,0]];}}else return [nb,[ob,0]];}}else{var ub=c('bs_curry')._2(bb,nb,mb);if(ub){if(ub>0){return [nb,[mb,0]]}else return [mb,[nb,0]];}else return [nb,0];}}else jb=1;}else jb=1;}else jb=1;}else if(ib){var vb=ib[1];if(vb){var wb=vb[0],xb=ib[0],yb=c('bs_curry')._2(bb,xb,wb);if(yb){if(yb>0){return [xb,[wb,0]]}else return [wb,[xb,0]];}else return [xb,0];}else jb=1;}else jb=1;if(jb===1){var zb=hb>>1,ac=hb-zb|0,bc=ta(zb,ib),cc=db(zb,ib),dc=db(ac,bc),ec=cc,fc=dc,gc=0;while(true){var hc=gc,ic=fc,jc=ec;if(jc){if(ic){var kc=ic[1],lc=ic[0],mc=jc[1],nc=jc[0],oc=c('bs_curry')._2(bb,nc,lc);if(oc){if(oc<0){gc=[nc,hc];ec=mc;continue}else{gc=[lc,hc];fc=kc;continue}}else{gc=[nc,hc];fc=kc;ec=mc;continue}}else return l(jc,hc);}else return l(ic,hc);}}},fb=h(cb);if(fb<2){return cb}else return db(fb,cb);}var wa=c('bs_pervasives').$at,xa=n,ya=oa,za=ua,ab=ua;g.length=h;g.hd=i;g.tl=j;g.nth=k;g.rev=m;g.append=wa;g.rev_append=l;g.concat=xa;g.flatten=n;g.iter=s;g.iteri=t;g.map=o;g.mapi=q;g.rev_map=r;g.fold_left=u;g.fold_right=v;g.iter2=y;g.map2=w;g.rev_map2=x;g.fold_left2=z;g.fold_right2=aa;g.for_all=ba;g.exists=ca;g.for_all2=da;g.exists2=ea;g.mem=fa;g.memq=ga;g.find=na;g.filter=ya;g.find_all=oa;g.partition=pa;g.assoc=ha;g.assq=ia;g.mem_assoc=ja;g.mem_assq=ka;g.remove_assoc=la;g.remove_assq=ma;g.split=qa;g.combine=ra;g.sort=za;g.stable_sort=ua;g.fast_sort=ab;g.sort_uniq=va;g.merge=sa}),null);
__d('bs_bytes',['bs_char','bs_list','bs_curry','bs_caml_obj','bs_caml_int32','bs_pervasives','bs_caml_string','bs_caml_builtin_exceptions'],(function a(b,c,d,e,f,g){'use strict';function h(ta,ua){var va=c('bs_caml_string').caml_create_string(ta);c('bs_caml_string').caml_fill_string(va,0,ta,ua);return va}function i(ta,ua){var va=c('bs_caml_string').caml_create_string(ta);for(var wa=0,xa=ta-1|0;wa<=xa;++wa)va[wa]=c('bs_curry')._1(ua,wa);return va}var j=[];function k(ta){var ua=ta.length,va=c('bs_caml_string').caml_create_string(ua);c('bs_caml_string').caml_blit_bytes(ta,0,va,0,ua);return va}function l(ta){return c('bs_caml_string').bytes_to_string(k(ta))}function m(ta){return k(c('bs_caml_string').bytes_of_string(ta))}function n(ta,ua,va){if(ua<0||va<0||ua>(ta.length-va|0)){throw [c('bs_caml_builtin_exceptions').invalid_argument,"String.sub / Bytes.sub"]}else{var wa=c('bs_caml_string').caml_create_string(va);c('bs_caml_string').caml_blit_bytes(ta,ua,wa,0,va);return wa}}function o(ta,ua,va){return c('bs_caml_string').bytes_to_string(n(ta,ua,va))}function p(ta,ua,va){var wa=(ta.length+ua|0)+va|0,xa=c('bs_caml_string').caml_create_string(wa),ya=ua<0?[-ua|0,0]:[0,ua],za=ya[1],ab=ya[0],bb=c('bs_pervasives').min(ta.length-ab|0,wa-za|0);if(bb>0)c('bs_caml_string').caml_blit_bytes(ta,ab,xa,za,bb);return xa}function q(ta,ua,va,wa){if(ua<0||va<0||ua>(ta.length-va|0)){throw [c('bs_caml_builtin_exceptions').invalid_argument,"String.fill / Bytes.fill"]}else return c('bs_caml_string').caml_fill_string(ta,ua,va,wa);}function r(ta,ua,va,wa,xa){if(xa<0||ua<0||ua>(ta.length-xa|0)||wa<0||wa>(va.length-xa|0)){throw [c('bs_caml_builtin_exceptions').invalid_argument,"Bytes.blit"]}else return c('bs_caml_string').caml_blit_bytes(ta,ua,va,wa,xa);}function s(ta,ua,va,wa,xa){if(xa<0||ua<0||ua>(ta.length-xa|0)||wa<0||wa>(va.length-xa|0)){throw [c('bs_caml_builtin_exceptions').invalid_argument,"String.blit / Bytes.blit_string"]}else return c('bs_caml_string').caml_blit_string(ta,ua,va,wa,xa);}function t(ta,ua){for(var va=0,wa=ua.length-1|0;va<=wa;++va)c('bs_curry')._1(ta,ua[va]);return 0}function u(ta,ua){for(var va=0,wa=ua.length-1|0;va<=wa;++va)c('bs_curry')._2(ta,va,ua[va]);return 0}function v(ta,ua){if(ua){var va=ua[0],wa=[0],xa=[0];c('bs_list').iter(function(ab){wa[0]=wa[0]+1|0;xa[0]=xa[0]+ab.length|0;return 0},ua);var ya=c('bs_caml_string').caml_create_string(xa[0]+c('bs_caml_int32').imul(ta.length,wa[0]-1|0)|0);c('bs_caml_string').caml_blit_bytes(va,0,ya,0,va.length);var za=[va.length];c('bs_list').iter(function(ab){c('bs_caml_string').caml_blit_bytes(ta,0,ya,za[0],ta.length);za[0]=za[0]+ta.length|0;c('bs_caml_string').caml_blit_bytes(ab,0,ya,za[0],ab.length);za[0]=za[0]+ab.length|0;return 0},ua[1]);return ya}else return j;}function w(ta,ua){return ta.concat(ua)}function x(ta){var ua=ta-9|0;if(ua>4||ua<0){if(ua!==23){return 0}else return 1;}else if(ua!==2){return 1}else return 0;}function y(ta){var ua=ta.length,va=0;while(va<ua&&x(ta[va]))va=va+1|0;var wa=ua-1|0;while(wa>=va&&x(ta[wa]))wa=wa-1|0;if(wa>=va){return n(ta,va,(wa-va|0)+1|0)}else return j;}function z(ta){var ua=0;for(var va=0,wa=ta.length-1|0;va<=wa;++va){var xa=ta[va],ya;if(xa>=32){var za=xa-34|0;ya=za>58||za<0?za>=93?4:1:za>57||za<1?2:1}else ya=xa>=11?xa!==13?4:2:xa>=8?2:4;ua=ua+ya|0}if(ua===ta.length){return k(ta)}else{var ab=c('bs_caml_string').caml_create_string(ua);ua=0;for(var bb=0,cb=ta.length-1|0;bb<=cb;++bb){var db=ta[bb],eb=0;if(db>=35){if(db!==92){if(db>=127){eb=1}else ab[ua]=db;}else eb=2;}else if(db>=32){if(db>=34){eb=2}else ab[ua]=db;}else if(db>=14){eb=1}else switch(db){case 8:ab[ua]=92;ua=ua+1|0;ab[ua]=98;break;case 9:ab[ua]=92;ua=ua+1|0;ab[ua]=116;break;case 10:ab[ua]=92;ua=ua+1|0;ab[ua]=110;break;case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 11:case 12:eb=1;break;case 13:ab[ua]=92;ua=ua+1|0;ab[ua]=114;break;}switch(eb){case 1:ab[ua]=92;ua=ua+1|0;ab[ua]=48+(db/100|0)|0;ua=ua+1|0;ab[ua]=48+(db/10|0)%10|0;ua=ua+1|0;ab[ua]=48+db%10|0;break;case 2:ab[ua]=92;ua=ua+1|0;ab[ua]=db;break;}ua=ua+1|0}return ab}}function aa(ta,ua){var va=ua.length;if(va){var wa=c('bs_caml_string').caml_create_string(va);for(var xa=0,ya=va-1|0;xa<=ya;++xa)wa[xa]=c('bs_curry')._1(ta,ua[xa]);return wa}else return ua;}function ba(ta,ua){var va=ua.length;if(va){var wa=c('bs_caml_string').caml_create_string(va);for(var xa=0,ya=va-1|0;xa<=ya;++xa)wa[xa]=c('bs_curry')._2(ta,xa,ua[xa]);return wa}else return ua;}function ca(ta){return aa(c('bs_char').uppercase,ta)}function da(ta){return aa(c('bs_char').lowercase,ta)}function ea(ta,ua){if(ua.length){var va=k(ua);va[0]=c('bs_curry')._1(ta,ua[0]);return va}else return ua;}function fa(ta){return ea(c('bs_char').uppercase,ta)}function ga(ta){return ea(c('bs_char').lowercase,ta)}function ha(ta,ua,va,wa){while(true){var xa=va;if(xa>=ua){throw c('bs_caml_builtin_exceptions').not_found}else if(ta[xa]===wa){return xa}else{va=xa+1|0;continue}}}function ia(ta,ua){return ha(ta,ta.length,0,ua)}function ja(ta,ua,va){var wa=ta.length;if(ua<0||ua>wa){throw [c('bs_caml_builtin_exceptions').invalid_argument,"String.index_from / Bytes.index_from"]}else return ha(ta,wa,ua,va);}function ka(ta,ua,va){while(true){var wa=ua;if(wa<0){throw c('bs_caml_builtin_exceptions').not_found}else if(ta[wa]===va){return wa}else{ua=wa-1|0;continue}}}function la(ta,ua){return ka(ta,ta.length-1|0,ua)}function ma(ta,ua,va){if(ua<-1||ua>=ta.length){throw [c('bs_caml_builtin_exceptions').invalid_argument,"String.rindex_from / Bytes.rindex_from"]}else return ka(ta,ua,va);}function na(ta,ua,va){var wa=ta.length;if(ua<0||ua>wa){throw [c('bs_caml_builtin_exceptions').invalid_argument,"String.contains_from / Bytes.contains_from"]}else try{ha(ta,wa,ua,va);return 1}catch(xa){if(xa===c('bs_caml_builtin_exceptions').not_found){return 0}else throw xa;}}function oa(ta,ua){return na(ta,0,ua)}function pa(ta,ua,va){if(ua<0||ua>=ta.length){throw [c('bs_caml_builtin_exceptions').invalid_argument,"String.rcontains_from / Bytes.rcontains_from"]}else try{ka(ta,ua,va);return 1}catch(wa){if(wa===c('bs_caml_builtin_exceptions').not_found){return 0}else throw wa;}}var qa=c('bs_caml_obj').caml_compare,ra=c('bs_caml_string').bytes_to_string,sa=c('bs_caml_string').bytes_of_string;g.make=h;g.init=i;g.empty=j;g.copy=k;g.of_string=m;g.to_string=l;g.sub=n;g.sub_string=o;g.extend=p;g.fill=q;g.blit=r;g.blit_string=s;g.concat=v;g.cat=w;g.iter=t;g.iteri=u;g.map=aa;g.mapi=ba;g.trim=y;g.escaped=z;g.index=ia;g.rindex=la;g.index_from=ja;g.rindex_from=ma;g.contains=oa;g.contains_from=na;g.rcontains_from=pa;g.uppercase=ca;g.lowercase=da;g.capitalize=fa;g.uncapitalize=ga;g.compare=qa;g.unsafe_to_string=ra;g.unsafe_of_string=sa}),null);
__d('bs_string',['bs_list','bs_bytes','bs_caml_int32','bs_caml_string'],(function a(b,c,d,e,f,g){'use strict';function h(ha,ia){return c('bs_caml_string').bytes_to_string(c('bs_bytes').make(ha,ia))}function i(ha,ia){return c('bs_caml_string').bytes_to_string(c('bs_bytes').init(ha,ia))}function j(ha){return c('bs_caml_string').bytes_to_string(c('bs_bytes').copy(c('bs_caml_string').bytes_of_string(ha)))}function k(ha,ia,ja){return c('bs_caml_string').bytes_to_string(c('bs_bytes').sub(c('bs_caml_string').bytes_of_string(ha),ia,ja))}function l(ha,ia){if(ia){var ja=ia[0],ka=[0],la=[0];c('bs_list').iter(function(oa){ka[0]=ka[0]+1|0;la[0]=la[0]+oa.length|0;return 0},ia);var ma=c('bs_caml_string').caml_create_string(la[0]+c('bs_caml_int32').imul(ha.length,ka[0]-1|0)|0);c('bs_caml_string').caml_blit_string(ja,0,ma,0,ja.length);var na=[ja.length];c('bs_list').iter(function(oa){c('bs_caml_string').caml_blit_string(ha,0,ma,na[0],ha.length);na[0]=na[0]+ha.length|0;c('bs_caml_string').caml_blit_string(oa,0,ma,na[0],oa.length);na[0]=na[0]+oa.length|0;return 0},ia[1]);return c('bs_caml_string').bytes_to_string(ma)}else return "";}function m(ha,ia){return c('bs_bytes').iter(ha,c('bs_caml_string').bytes_of_string(ia))}function n(ha,ia){return c('bs_bytes').iteri(ha,c('bs_caml_string').bytes_of_string(ia))}function o(ha,ia){return c('bs_caml_string').bytes_to_string(c('bs_bytes').map(ha,c('bs_caml_string').bytes_of_string(ia)))}function p(ha,ia){return c('bs_caml_string').bytes_to_string(c('bs_bytes').mapi(ha,c('bs_caml_string').bytes_of_string(ia)))}function q(ha){var ia=ha-9|0;if(ia>4||ia<0){if(ia!==23){return 0}else return 1;}else if(ia!==2){return 1}else return 0;}function r(ha){if(ha===""||!(q(ha.charCodeAt(0))||q(ha.charCodeAt(ha.length-1|0)))){return ha}else return c('bs_caml_string').bytes_to_string(c('bs_bytes').trim(c('bs_caml_string').bytes_of_string(ha)));}function s(ha){var ia=function ja(ka){while(true){var la=ka;if(la>=ha.length){return 0}else{var ma=ha.charCodeAt(la);if(ma>=32){var na=ma-34|0;if(na>58||na<0){if(na>=93){return 1}else{ka=la+1|0;continue}}else if(na>57||na<1){return 1}else{ka=la+1|0;continue}}else return 1;}}};if(ia(0)){return c('bs_caml_string').bytes_to_string(c('bs_bytes').escaped(c('bs_caml_string').bytes_of_string(ha)))}else return ha;}function t(ha,ia){return c('bs_bytes').index(c('bs_caml_string').bytes_of_string(ha),ia)}function u(ha,ia){return c('bs_bytes').rindex(c('bs_caml_string').bytes_of_string(ha),ia)}function v(ha,ia,ja){return c('bs_bytes').index_from(c('bs_caml_string').bytes_of_string(ha),ia,ja)}function w(ha,ia,ja){return c('bs_bytes').rindex_from(c('bs_caml_string').bytes_of_string(ha),ia,ja)}function x(ha,ia){return c('bs_bytes').contains(c('bs_caml_string').bytes_of_string(ha),ia)}function y(ha,ia,ja){return c('bs_bytes').contains_from(c('bs_caml_string').bytes_of_string(ha),ia,ja)}function z(ha,ia,ja){return c('bs_bytes').rcontains_from(c('bs_caml_string').bytes_of_string(ha),ia,ja)}function aa(ha){return c('bs_caml_string').bytes_to_string(c('bs_bytes').uppercase(c('bs_caml_string').bytes_of_string(ha)))}function ba(ha){return c('bs_caml_string').bytes_to_string(c('bs_bytes').lowercase(c('bs_caml_string').bytes_of_string(ha)))}function ca(ha){return c('bs_caml_string').bytes_to_string(c('bs_bytes').capitalize(c('bs_caml_string').bytes_of_string(ha)))}function da(ha){return c('bs_caml_string').bytes_to_string(c('bs_bytes').uncapitalize(c('bs_caml_string').bytes_of_string(ha)))}var ea=c('bs_caml_string').caml_string_compare,fa=c('bs_bytes').fill,ga=c('bs_bytes').blit_string;g.make=h;g.init=i;g.copy=j;g.sub=k;g.fill=fa;g.blit=ga;g.concat=l;g.iter=m;g.iteri=n;g.map=o;g.mapi=p;g.trim=r;g.escaped=s;g.index=t;g.rindex=u;g.index_from=v;g.rindex_from=w;g.contains=x;g.contains_from=y;g.rcontains_from=z;g.uppercase=aa;g.lowercase=ba;g.capitalize=ca;g.uncapitalize=da;g.compare=ea}),null);
__d('mercuryVanityIDMapRe',['bs_string','bs_js_primitive','MercuryAssert','bs_js_null_undefined'],(function a(b,c,d,e,f,g){'use strict';var h={},i={};function j(o){return c('bs_js_null_undefined').from_opt(c('bs_js_primitive').undefined_to_opt(h[c('bs_string').lowercase(o)]))}function k(o){return c('bs_js_null_undefined').from_opt(c('bs_js_primitive').undefined_to_opt(i[o]))}function l(o){var p=i[o];if(p!==undefined){return true}else return false;}function m(o){var p=h[c('bs_string').lowercase(o)];if(p!==undefined){return true}else return false;}function n(o,p){c('MercuryAssert').isParticipantID(p);var q=c('bs_string').lowercase(o);h[q]=p;i[p]=q;return 0}g.vanityToID=h;g.idToVanity=i;g.getID=j;g.getVanity=k;g.hasID=l;g.hasVanity=m;g.set=n}),null);
__d('MercuryParticipants',['fbt','CurrentUser','EventEmitter','ImageSourceRequest','ImageSourceType','ImmutableObject','KeyedCallbackManager','MercuryAssert','MercuryIDs','MercuryParticipantFetcher','MercuryParticipantTypes','MercuryParticipantsConstants','MercuryDispatcher','mercuryVanityIDMapRe','PhotoResizeModeConst','Set','createObjectFrom'],(function a(b,c,d,e,f,g,h){'use strict';var i='change';function j(l){this.$MercuryParticipants1=l;this.$MercuryParticipants2=new (c('EventEmitter'))();this.$MercuryParticipants3=new (c('KeyedCallbackManager'))();this.$MercuryParticipants4=new (c('MercuryParticipantFetcher'))(this.$MercuryParticipants1);this.$MercuryParticipants5=c('MercuryDispatcher').getForFBID(this.$MercuryParticipants1);this.$MercuryParticipants5.subscribe('update-participants',function(m,n){if(n.participants&&n.participants.length>0)this.$MercuryParticipants6(n.participants);}.bind(this));this.$MercuryParticipants5.subscribe('invalidate-global-state',function(){this.$MercuryParticipants7()}.bind(this))}j.prototype.addListener=function(l,m){return this.$MercuryParticipants2.addListener(l,m)};j.prototype.getIDFromVanityOrFBID=function(l){if(!l)return null;if(c('mercuryVanityIDMapRe').hasVanity(l))return c('mercuryVanityIDMapRe').getID(l);if(/^\d+$/.test(l))return c('MercuryIDs').getParticipantIDFromUserID(l);return undefined};j.prototype.getNow=function(l){return this.$MercuryParticipants8(l)};j.prototype.getOrFetch=function(l){var m=this.$MercuryParticipants8(l);if(!m)this.$MercuryParticipants4.fetch(l);return m};j.prototype.get=function(l,m){c('MercuryAssert').isParticipantID(l);return this.$MercuryParticipants9([l],function(n){m(n[l])})};j.prototype.getMulti=function(l,m){return this.$MercuryParticipants9(l,m)};j.prototype.getBigImageMulti=function(l,m){var n=arguments.length<=2||arguments[2]===undefined?c('MercuryParticipantsConstants').BIG_IMAGE_SIZE:arguments[2];c('MercuryAssert').allParticipantIDs(l);var o=false,p=this.$MercuryParticipants9(l,function(q){var r={},s=0,t=new (c('Set'))(),u=function(y,z){s++;r[y]=z;if(s===l.length){if(!o)m(r);if(t.size>0)this.$MercuryParticipants10(t);}}.bind(this),v=function(y,z){var aa=this.$MercuryParticipants3.getResource(y);if(!aa)return;this.$MercuryParticipants3.setResource(y,c('ImmutableObject').set(aa,{big_image_src:z.uri}));t.add(y);u(y,z.uri)}.bind(this);for(var w in q){var x=q[w];if(!x.big_image_src){new (c('ImageSourceRequest'))().setFBID(c('MercuryIDs').getUserIDFromParticipantID(w)).setType(c('ImageSourceType').PROFILE_PICTURE).setDimensions(n,n).setResizeMode(c('PhotoResizeModeConst').COVER).setCallback(v.bind(null,w)).send()}else u(x.id,x.big_image_src);}}.bind(this));return {remove:function q(){o=true;p.remove()}}};j.prototype.getOrderedBigImageMulti=function(l,m){return this.getBigImageMulti(l,function(n){m(l.map(function(o){return n[o]}))})};j.prototype.$MercuryParticipants9=function(l,m){c('MercuryAssert').allParticipantIDs(l);var n=this.$MercuryParticipants3.executeOrEnqueue(l,m),o=this.$MercuryParticipants3.getUnavailableResources(n).filter(function(p){var q=c('MercuryIDs').tokenize(p),r=q.type,s=q.value;if(r==='email'){this.$MercuryParticipants11(p,s);return false}if(r==='name'){this.$MercuryParticipants12(p,s);return false}return true}.bind(this));this.$MercuryParticipants4.fetchMulti(o);return this.$MercuryParticipants13(n)};j.prototype.$MercuryParticipants8=function(l){var m=this.$MercuryParticipants3.getResource(l);if(!m){var n=c('MercuryIDs').tokenize(l),o=n.type,p=n.value;if(o==='email')m=this.$MercuryParticipants11(l,p);if(o==='name')m=this.$MercuryParticipants12(l,p);}return m};j.prototype.$MercuryParticipants11=function(l,m){var n=new (c('ImmutableObject'))(k(l,m));this.$MercuryParticipants3.setResource(l,n);return n};j.prototype.$MercuryParticipants12=function(l,m){var n=new (c('ImmutableObject'))({gender:c('MercuryParticipantsConstants').UNKNOWN_GENDER,href:null,id:l,image_src:c('MercuryParticipantsConstants').EMAIL_IMAGE,big_image_src:c('MercuryParticipantsConstants').EMAIL_IMAGE,name:m,short_name:m,employee:false});this.$MercuryParticipants3.setResource(l,n);return n};j.prototype.$MercuryParticipants10=function(l){this.$MercuryParticipants2.emit(i,l)};j.prototype.$MercuryParticipants6=function(l){var m=l.map(function(n){return n.id});l=l.map(function(n){if(n.vanity)c('mercuryVanityIDMapRe').set(n.vanity,n.id);var o=this.$MercuryParticipants3.getResource(n.id);return o?c('ImmutableObject').set(o,n):new (c('ImmutableObject'))(this.$MercuryParticipants14(n))}.bind(this));this.$MercuryParticipants3.addResourcesAndExecute(c('createObjectFrom')(m,l));this.$MercuryParticipants10(new (c('Set'))(m))};j.prototype.$MercuryParticipants14=function(l){var m=l.type===c('MercuryParticipantTypes').USER||l.type===c('MercuryParticipantTypes').FRIEND;if(!m)return l;if(!l.name&&!l.href&&!l.vanity){var n=h._("Usuario de Facebook");l.name=n;l.short_name=n}return l};j.prototype.$MercuryParticipants13=function(l){return {remove:function(){this.$MercuryParticipants3.unsubscribe(l)}.bind(this)}};j.prototype.$MercuryParticipants7=function(){this.$MercuryParticipants3=new (c('KeyedCallbackManager'))()};function k(l,m){return {gender:c('MercuryParticipantsConstants').UNKNOWN_GENDER,href:null,id:l,image_src:c('MercuryParticipantsConstants').EMAIL_IMAGE,big_image_src:c('MercuryParticipantsConstants').EMAIL_IMAGE,name:m,short_name:m,employee:false,fbid:undefined,accepts_messenger_user_feedback:undefined,is_business_enabled:undefined,is_messenger_platform_bot:undefined,is_employee_away:undefined,is_friend:undefined,is_messenger_user:undefined,is_verified:undefined,type:undefined,vanity:undefined,timezone:undefined,personal_id:undefined,work_id:undefined}}f.exports=new j(c('CurrentUser').getID())}),null);
__d('MercurySyncDeltaTypes',[],(function a(b,c,d,e,f,g){'use strict';var h={AdminAddedToGroupThread:'AdminAddedToGroupThread',AdminRemovedFromGroupThread:'AdminRemovedFromGroupThread',AdminTextMessage:'AdminTextMessage',DeliveryReceipt:'DeliveryReceipt',ForcedFetch:'ForcedFetch',MarkRead:'MarkRead',MarkUnread:'MarkUnread',MarkFolderSeen:'MarkFolderSeen',MessageDelete:'MessageDelete',NewMessage:'NewMessage',NoOp:'NoOp',PagesManagerEvent:'PagesManagerEvent',ParticipantLeftGroupThread:'ParticipantLeftGroupThread',ParticipantsAddedToGroupThread:'ParticipantsAddedToGroupThread',ReadReceipt:'ReadReceipt',ReplaceMessage:'ReplaceMessage',RTCEventLog:'RTCEventLog',ThreadAction:'ThreadAction',ThreadDelete:'ThreadDelete',ThreadMuteSettings:'ThreadMuteSettings',ThreadName:'ThreadName',JoinableMode:'JoinableMode',ApprovalMode:'ApprovalMode',ApprovalQueue:'ApprovalQueue',ClientPayload:'ClientPayload',GenieMessage:'GenieMessage',MontageMessage:'MontageMessage',RtcCallData:'RtcCallData'};f.exports=h}),null);
__d('MercurySyncFakeDFFSender',['Arbiter','ChannelConstants','MercurySingletonProvider','MercurySyncDeltaTypes'],(function a(b,c,d,e,f,g){'use strict';var h=c('ChannelConstants').getArbiterType(c('ChannelConstants').FAKE_DFF);i.getForFBID=function(k){return j.getForFBID(k)};i.get=function(){return j.get()};function i(k){this.$MercurySyncFakeDFFSender1=k}i.prototype.sendGlobalDFF=function(){c('Arbiter').inform(h,{obj:{delta:{'class':c('MercurySyncDeltaTypes').ForcedFetch},queue:this.$MercurySyncFakeDFFSender1}})};i.prototype.sendThreadDFF=function(k,l){c('Arbiter').inform(h,{obj:{delta:{'class':c('MercurySyncDeltaTypes').ForcedFetch,threadKey:{otherUserFbId:k,threadFbId:l}},queue:this.$MercurySyncFakeDFFSender1}})};var j=new (c('MercurySingletonProvider'))(i);f.exports=i}),null);
__d("MessengerThreadCannotReplyReason",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({BLOCKED:"blocked",COMPOSER_DISABLED_BOT:"composer_disabled_bot",HAS_EMAIL_PARTICIPANT:"has_email_participant",OBJECT_ORIGINATED:"object_originated",READ_ONLY:"read_only",VIEWER_NOT_SUBSCRIBED:"viewer_not_subscribed",RECIPIENTS_NOT_LOADABLE:"recipients_not_loadable",RECIPIENTS_UNAVAILABLE:"recipients_unavailable",RECIPIENTS_INVALID:"recipients_invalid",RECIPIENTS_INACTIVE_WORK_ACC:"recipients_inactive_work_account",MONTAGE_NOT_AUTHOR:"montage_not_author"})}),null);
__d('MercuryThreadInfo',['CurrentUser','MercuryIDs','MessengerThreadCannotReplyReason'],(function a(b,c,d,e,f,g){'use strict';var h={canReply:function j(k){return !!(k.is_subscribed&&(k.can_reply===undefined||k.can_reply)&&!k.has_email_participant&&!k.read_only)},getMuteSetting:function j(k){return !k.mute_until?undefined:k.mute_until},isEmptyLocalThread:function j(k){return c('MercuryIDs').tokenize(k.thread_id).type==='root'&&!k.timestamp},isMuted:function j(k){return h.getMuteSetting(k)!==undefined},areMentionsMuted:function j(k){return k.mentions_mute_mode===1},areReactionsMuted:function j(k){return k.reactions_mute_mode===1},isNewEmptyLocalThread:function j(k){return !!(h.isEmptyLocalThread(k)&&k.participants&&k.participants.length===0)},showComposer:function j(k){return !!(k.is_subscribed&&(k.can_reply||!k.cannot_reply_reason||k.cannot_reply_reason===c('MessengerThreadCannotReplyReason').BLOCKED)&&!k.has_email_participant&&!k.read_only)},isColdOpen:function j(k){return !!(k.is_canonical_user&&(k.message_count===0||!k.timestamp))}};function i(j){return j+'@facebook.com'}f.exports=h}),null);
__d("MessagingGenericAdminTextType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ALOHA_AUTOCONNECT_INVITED:"aloha_autoconnect_invited",ALOHA_CONTACT_ADDED:"aloha_contact_added",ALOHA_CONTACT_ADDED_TO_ALOHA_PROXY_USER:"aloha_contact_added_to_aloha_proxy_user",ALOHA_CONTACT_REMOVED:"aloha_contact_removed",ALOHA_INVITE_OWNER_ACCEPT:"aloha_invite_owner_accept",ALOHA_INVITE_OWNER_DECLINE:"aloha_invite_owner_decline",ALOHA_MEDIA_ADDED:"aloha_media_added",ALOHA_MEDIA_SENT:"aloha_media_sent",ALOHA_OWNER_INVITED:"aloha_owner_invited",ALOHA_PROXY_USER_NAME_SET:"aloha_proxy_user_name_set",ALOHA_PROXY_USER_PROFILE_PHOTO_SET:"aloha_proxy_user_profile_photo_set",ALOHA_WIFI_CREDENTIALS_SET:"aloha_wifi_credentials_set",MADE_POLL_VOTE:"made_poll_vote",ALOHA_USER_JOINED_CALL_ON_ALOHA:"aloha_user_joined_call_on_aloha",ALOHA_CALL_ENDED_ON_ALOHA:"aloha_call_ended_on_aloha",GROUP_POLL:"group_poll",CONFIRM_FRIEND_REQUEST:"confirm_friend_request",THREAD_CUSTOMIZATION_UPSELL:"thread_customization_upsell",PHONE_CONTACT_UPLOAD:"phone_contact_upload",ACCEPT_PENDING_THREAD:"accept_pending_thread",RAMP_UP_WELCOME_MESSAGE:"ramp_up_welcome_message",CHANGE_THREAD_THEME:"change_thread_theme",CHANGE_THREAD_ICON:"change_thread_icon",GROUP_THREAD_CREATED:"group_thread_created",THREAD_EPHEMERAL_SEND_MODE:"thread_ephemeral_send_mode",INVITE_ACCEPTED:"invite_accepted",MESSENGER_INVITE_SENT:"messenger_invite_sent",TURN_ON_PUSH:"turn_on_push",JOURNEY_PROMPT_COLOR:"journey_prompt_color",JOURNEY_PROMPT_LIKE:"journey_prompt_like",JOURNEY_PROMPT_NICKNAME:"journey_prompt_nickname",JOURNEY_PROMPT_SETUP:"journey_prompt_setup",CHANGE_THREAD_NICKNAME:"change_thread_nickname",NOTIFY_GROUP_MAYORSHIP:"notify_group_mayorship",PROMPT_GROUP_MAYORSHIP_CUSTOMIZATION:"prompt_group_mayorship_customization",MESSAGE_COUNT_MILESTONE_MESSAGE:"message_count_milestone_message",BOT_THREAD_SUBSCRIPTION:"bot_thread_subscription",RTC_CALL_LOG:"rtc_call_log",RTC_INSTANT_VIDEO_LIFECYCLE:"rtc_instant_video_lifecycle",JOURNEY_PROMPT_BOT:"journey_prompt_bot",RIDE_ORDERED_MESSAGE:"ride_ordered_message",DESTINATION_ETA_MESSAGE:"destination_eta_message",RIDE_ARRIVED_MESSAGE:"ride_arrived_message",JOURNEY_PROMPT_NEW_SETUP:"journey_prompt_new_setup",LIGHTWEIGHT_EVENT_CREATE:"lightweight_event_create",LIGHTWEIGHT_EVENT_DELETE:"lightweight_event_delete",LIGHTWEIGHT_EVENT_NOTIFY:"lightweight_event_notify",LIGHTWEIGHT_EVENT_NOTIFY_BEFORE_EVENT:"lightweight_event_notify_before_event",LIGHTWEIGHT_EVENT_RSVP:"lightweight_event_rsvp",LIGHTWEIGHT_EVENT_UPDATE:"lightweight_event_update",LIGHTWEIGHT_EVENT_UPDATE_LOCATION:"lightweight_event_update_location",LIGHTWEIGHT_EVENT_UPDATE_TIME:"lightweight_event_update_time",LIGHTWEIGHT_EVENT_UPDATE_TITLE:"lightweight_event_update_title",SAFETY_LOCATION_REQUEST_SENT:"safety_location_request_sent",SAFETY_LOCATION_REQUEST_RESPONDED:"safety_location_request_responded",SAFETY_LOCATION_REQUEST_DENIED:"safety_location_request_denied",AD_MANAGE_MESSAGE:"ad_manage_message",AD_REPLY_MESSAGE:"ad_reply_message",TAGGED_PHOTO:"tagged_photo",GAME_SCORE:"game_score",INSTANT_GAME_UPDATE:"instant_game_update",INSTANT_GAME_BOT_INTRO:"instant_game_bot_intro",MEDIA_SUBSCRIPTION_MANAGE:"media_subscription_manage",M_AI_SURVEY:"m_ai_survey",PHONE_NUMBER_LOOKUP_NOTICE:"phone_number_lookup_notice",MESSENGER_PRECHECKED_PLUGIN:"messenger_prechecked_plugin",ADD_CONTACT:"add_contact",PRODUCT_INVOICE_RECEIPT_REJECTED:"product_invoice_receipt_rejected",PRODUCT_INVOICE_PAID:"product_invoice_paid",PRODUCT_INVOICE_VOIDED:"product_invoice_voided",PRODUCT_INVOICE_SHIPPED:"product_invoice_shipped",PRODUCT_INVOICE_PAYMENT_EXPIRED:"product_invoice_payment_expired",PRODUCT_INVOICE_RECEIPT_UPLOADED:"product_invoice_receipt_uploaded",CHANGE_JOINABLE_SETTING:"change_joinable_setting",CHANGE_THREAD_ADMINS:"change_thread_admins",CHANGE_THREAD_APPROVAL_MODE:"change_thread_approval_mode",CAPY_SESSION_BEGIN:"capy_session_begin",CAPY_SESSION_END:"capy_session_end",CAPY_AGENT_JOIN:"capy_agent_join",CAPY_SESSION_WAIT_TIME:"capy_session_wait_time",GROUP_SMS_PARTICIPANT_JOINED:"group_sms_participant_joined",GROUP_SMS_PARTICIPANT_CAPPED:"group_sms_participant_capped",SMS_PHONE_NUMBER_CHECK:"sms_phone_number_check",MESSENGER_BOT_REVIEW_SENT:"messenger_bot_review_sent",MESSENGER_CODE_SCAN:"messenger_code_scan",MESSENGER_LIVECHAT_PLUGIN_OPEN:"messenger_livechat_plugin_open",MINGLE_MATCH_SUCCESS:"mingle_match_success",MN_ACCOUNT_LINKING_TEXT:"mn_account_linking_text",MN_ACCOUNT_UNLINKING_TEXT:"mn_account_unlinking_text",MN_ACCOUNT_FORCED_UNLINKING_TEXT:"mn_account_forced_unlinking_text",MN_REF_SEND_TEXT:"mn_ref_send_text",ADS_WELCOME_MSG:"ads_welcome_msg",THREAD_JOINABLE_PROMOTION_TEXT:"thread_joinable_promotion_text",PAGES_PLATFORM_REQUEST_TEXT:"pages_platform_request_text",MESSENGER_NEW_USER_GET_STARTED:"messenger_new_user_get_started",SMS_PHONE_NUMBER_TOGGLE:"sms_phone_number_toggle",PAGES_PLATFORM_CREATE_APPOINTMENT:"Pages_Platform_create_appointment",JOINABLE_GROUP_THREAD_CREATED:"joinable_group_thread_created",JOINABLE_ROOM_CREATED_WITH_CO_CREATORS:"joinable_room_created_with_co_creators",PAGES_PLATFORM_ACCEPT_APPOINTMENT:"pages_platform_accept_appointment",PAGES_PLATFORM_REFERRAL_CONFIRMED_APPOINTMENT:"pages_platform_referral_confirmed_appointment",PAGES_PLATFORM_DECLINE_APPOINTMENT:"pages_platform_decline_appointment",PAGES_PLATFORM_USER_CANCEL:"pages_platform_user_cancel",PAGES_PLATFORM_ADMIN_CANCEL:"pages_platform_admin_cancel",MESSENGER_OMNIM_CREATE_FLOW:"messenger_omnim_create_flow",MESSENGER_OMNIM_UPDATE_FLOW:"messenger_omnim_update_flow",MESSENGER_OMNIM_UPDATE_FLOW_STATE:"messenger_omnim_update_flow_state",MESSENGER_GROUP_DESCRITPION_UPDATE:"messenger_group_description_update",MESSENGER_EXTENSION_ADD_CART:"messenger_extension_add_cart",MESSENGER_EXTENSION_ADD_FAVORITE:"messenger_extension_add_favorite",MESSENGER_AD_CONTEXT:"messenger_ad_context",PAGES_PLATFORM_APPOINTMENT_REMINDER:"pages_platform_appointment_reminder",PAGES_PLATFORM_ADMIN_DECLINE:"pages_platform_admin_decline",POKE_RECEIVED:"poke_received",MESSENGER_STATION_SUBSCRIPTION:"messenger_station_subscription",MESSENGER_USER_ALSO_ON_MESSENGER:"messenger_user_also_on_messenger",MESSENGER_INBOX2_BIRTHDAY_BUMP:"messenger_inbox2_birthday_bump",STARTED_SHARING_VIDEO:"started_sharing_video",LIVE_VIDEO_CHAT:"live_video_chat",PARTICIPANT_JOINED_GROUP_CALL:"participant_joined_group_call",MESSENGER_ONLY_PHONE_JOINED_WITH_NEW_ACCOUNT:"messenger_only_phone_joined_with_new_account",PAGES_COMMERCE_PAYMENT_ENABLED:"pages_commerce_payment_enabled",GROUP_PAYMENT_REQUEST:"group_payment_request",P2P_CALL_ESCALATED_TO_GROUP_CALL:"p2p_call_escalated_to_group_call",INVITED_TO_ESCALATED_P2P_CALL:"invited_to_escalated_p2p_call",EVENT_UPCOMING:"event_upcoming",PAGES_VISITOR_POST_SEND_MESSAGE_UPSELL:"pages_visitor_post_send_message_upsell",PAGES_LOW_MESSAGE_RESPONSE_RATE:"pages_low_message_response_rate",PAGES_START_CALL:"pages_start_call",PARTIES_INVITE:"parties_invite",PAGES_JOIN_LOYALTY_PROGRAM:"pages_join_loyalty_program",WORK_INVITE_CLAIMED:"work_invite_claimed",P2P_PAYMENT_REQUEST_REMINDER:"p2p_payment_request_reminder",PHOTO_TAG_BUMP:"photo_tag_bump",MESSENGER_CALL_UPGRADE_LEGACY_CLIENT:"messenger_call_upgrade_legacy_client",DIRECTED_WALL_POST:"directed_wall_post",MESSENGER_CALL_LOG:"messenger_call_log",P2P_PAYMENT_MONEY_RAIN_GAME_ENTRY_POINT:"p2p_payment_money_rain_game_entry_point",MESSENGER_MONTAGE_MENTIONS:"messenger_montage_mentions",PAGES_MESSAGING_BLOCK_WORDS:"pages_messaging_block_words",ALOHA_CALL_INVITE:"aloha_call_invite",SHIPPO_TRACKING_UPDATES:"shippo_tracking_updates",NEO_APPROVED_CONNECTION_ADDED:"neo_approved_connection_added",CHANGE_FAVORITE_COLOR:"change_favorite_color",MARKETPLACE_ITEM_CHANGED:"marketplace_item_changed",SERVICES_VERTICAL_REDEEMED_REFERRAL:"services_vertical_redeemed_referral",PAGES_MARK_AS_PAID:"pages_mark_as_paid",MIGRATED_TO_WORKPLACE:"migrated_to_workplace",MESSENGER_GROUP_EVENT_STATUS_UPDATE:"messenger_group_event_status_update"})}),null);
__d('MessagingGiftWrapConstants',[],(function a(b,c,d,e,f,g){'use strict';var h='gift_wrap',i='gift_unwrapped',j='valentines2016';f.exports={TAG_PREFIX:h,UNWRAPPED_TAG:i,VALENTINES_GIFT:j}}),null);
__d('MessagingGiftWrapChecker',['MercuryConfig','MercuryTagHelper','MessagingGiftWrapConstants'],(function a(b,c,d,e,f,g){'use strict';var h={shouldRenderWithGiftWrap:function k(l){return !!(l.tags&&i(l.tags)&&!j(l.tags))}};function i(k){return c('MercuryTagHelper').get(k,c('MessagingGiftWrapConstants').TAG_PREFIX)===c('MessagingGiftWrapConstants').VALENTINES_GIFT}function j(k){return !!c('MercuryTagHelper').get(k,c('MessagingGiftWrapConstants').UNWRAPPED_TAG)}f.exports=h}),null);
__d('MercuryThreads',['invariant','ChatReliabilityInstrumentation','EventEmitter','EventReminderConstants','MercuryDisplayTimeFilterMessageRenderer','ImmutableObject','KeyedCallbackManager','LogHistory','Map','MercuryActionType','MercuryAssert','MercuryAttachment','MercuryDispatcher','MercuryGiftSnippetRenderer','MercuryGlobalActionType','MercuryIDs','MercuryLocalIDs','MercuryLoggingHelper','MercuryLogMessageType','MercuryParticipants','MercuryPayloadSource','MercuryServerRequests','MercurySingletonProvider','MercurySyncFakeDFFSender','MercuryThreadInfo','MercuryThreadInformer','MessagingGenericAdminTextType','MessagingGiftWrapChecker','MessagingTag','PageCommItemStatus','Set','emptyFunction','ifRequired','requireWeak','setImmediate'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('EventReminderConstants').GuestStates,j=new (c('EventEmitter'))(),k=c('LogHistory').getInstance('mercury_threads');function l(n){this.$MercuryThreads1=n;this.$MercuryThreads2=c('MercuryServerRequests').getForFBID(this.$MercuryThreads1);this.$MercuryThreads3=c('MercuryThreadInformer').getForFBID(this.$MercuryThreads1);this.$MercuryThreads4=c('MercuryIDs').getParticipantIDFromUserID(this.$MercuryThreads1);this.$MercuryThreads5=c('MercuryDispatcher').getForFBID(this.$MercuryThreads1);this.$MercuryThreads6=c('MercurySyncFakeDFFSender').getForFBID(this.$MercuryThreads1);this.$MercuryThreads7=false;this.$MercuryThreads8=new (c('KeyedCallbackManager'))();this.$MercuryThreads9=new (c('Set'))();this.$MercuryThreads10=false;this.$MercuryThreads11=new (c('Set'))();this.$MercuryThreads12=new (c('Set'))();this.$MercuryThreads13()}l.getForFBID=function(n){return m.getForFBID(n)};l.get=function(){return m.get()};l.prototype.getThreadMetaNow=function(n){c('MercuryAssert').isThreadID(n);var o=this.$MercuryThreads8.getResource(n);if(o&&!o.participants){c('ChatReliabilityInstrumentation').logERROR('participants are null!',{thread_id:n});this.$MercuryThreads6.sendThreadDFF(null,n);return new (c('ImmutableObject'))(babelHelpers['extends']({},o,{participants:[]}))}return o};l.prototype.getOrFetch=function(n){var o=this.getThreadMetaNow(n);if(!o&&!this.$MercuryThreads12.has(n))this.$MercuryThreads11.add(n);if(this.$MercuryThreads11.size>0&&!this.$MercuryThreads10)this.$MercuryThreads14();return o};l.prototype.$MercuryThreads14=function(){if(this.$MercuryThreads10)return;this.$MercuryThreads10=true;c('setImmediate')(function(){this.$MercuryThreads10=false;this.$MercuryThreads11.forEach(function(n){return this.$MercuryThreads12.add(n)}.bind(this));this.getMultiThreadMeta(Array.from(this.$MercuryThreads11),function(n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&this.$MercuryThreads12['delete'](o);}.bind(this));this.$MercuryThreads11.clear()}.bind(this))};l.prototype.getThreadMeta=function(n,o,p){return this.getMultiThreadMeta([n],function(q){return o(q[n])},p)};l.prototype.getMultiThreadMeta=function(n,o,p){c('MercuryAssert').allThreadID(n);var q=this.$MercuryThreads8.executeOrEnqueue(n,o),r=this.$MercuryThreads8.getUnavailableResources(q);if(r.length){var s=[];for(var t=0;t<r.length;t++){var u=r[t],v=c('MercuryIDs').tokenize(u),w=v.type,x=v.value;if(w=='user'){var y=c('MercuryIDs').getParticipantIDFromUserID(x);this.createNewLocalThread(u,y===this.$MercuryThreads4?[this.$MercuryThreads4]:[this.$MercuryThreads4,y])}s.push(u)}if(s.length)this.$MercuryThreads2.fetchThreadData(s,p);}return q};l.addListener=function(n,o){return j.addListener(n,o)};l.prototype.unsubscribe=function(n){this.$MercuryThreads8.unsubscribe(n)};l.prototype.getCanonicalThreadToParticipant=function(n,o,p,q){var r=c('MercuryIDs').getThreadIDFromParticipantID(n);!!r||h(0);var s=this.$MercuryThreads8.getResource(r);if(s==undefined){s=this.createNewLocalThread(r,this.$MercuryThreads4===n?[this.$MercuryThreads4]:[this.$MercuryThreads4,n],o);!q&&this.$MercuryThreads2.fetchThreadData([r],p)}return s};l.prototype.createNewLocalThread=function(n,o,p){var q=this.$MercuryThreads8.getResource(n);if(!q){var r=c('MercuryIDs').tokenize(n),s=r.type,t=r.value;q=new (c('ImmutableObject'))({thread_id:n,participants:Array.from(o),admin_ids:[],name:'',snippet:'',snippet_sender:null,unread_count:p?p:0,message_count:0,image_src:null,timestamp:null,other_user_fbid:s==='user'?t:null,is_canonical_user:s=='user',is_canonical:this.$MercuryThreads15(o),is_subscribed:true,folder:c('MessagingTag').INBOX,is_archived:false});this.$MercuryThreads8.setResource(n,q)}return q};l.prototype.createNewLocalThreadGenerateID=function(){var n=c('MercuryLocalIDs').generateThreadID();this.createNewLocalThread(n,[]);return n};l.prototype.isEmptyLocalThread=function(n){var o=this.$MercuryThreads8.getResource(n);if(!o)return false;return c('MercuryThreadInfo').isEmptyLocalThread(o)};l.prototype.isNewEmptyLocalThread=function(n){var o=this.$MercuryThreads8.getResource(n);if(!o)return false;return c('MercuryThreadInfo').isNewEmptyLocalThread(o)};l.prototype.$MercuryThreads16=function(n,o){if(!n||!n.length)return;var p=new (c('Map'))(),q=new (c('Map'))(),r=new (c('Map'))(),s=[];for(var t=0;t<n.length;t++){var u=n[t],v=u.action_type;if(v==c('MercuryActionType').LOG_MESSAGE&&u.log_message_type==c('MercuryLogMessageType').SERVER_ERROR)continue;var w=!o&&!!(u.thread_fbid||u.other_user_fbid||u.is_from_iris),x=u.thread_id;c('MercuryAssert').isThreadID(x);var y=this.$MercuryThreads8.getResource(x);if(!y&&!w&&v===c('MercuryActionType').USER_GENERATED_MESSAGE){y=this.$MercuryThreads17(u);if(!y.participants||!y.participants.length){k.debug('missing_local_participants',JSON.stringify(c('MercuryLoggingHelper').obfuscateMessage(u)));c('ChatReliabilityInstrumentation').logERROR('missing_local_participants',{thread_id:x});y=new (c('ImmutableObject'))(babelHelpers['extends']({},y,{participants:[]}));var z=u.other_user_fbid,aa=u.thread_fbid;if(z||aa){this.$MercuryThreads6.sendThreadDFF(z,aa)}else continue;}this.$MercuryThreads8.setResource(x,y)}if(!y)continue;if(v==c('MercuryActionType').LOG_MESSAGE||v==c('MercuryActionType').USER_GENERATED_MESSAGE)w=!o;if(y.server_timestamp&&u.timestamp<y.server_timestamp&&w)continue;if(!r.has(x)){r.set(x,babelHelpers['extends']({},y))}else k.error('skipping thread metadata update',JSON.stringify({have:r.get(x),skipped:y}));var ba=r.get(x);!!ba||h(0);this.$MercuryThreads18(ba,u,o);var ca=p.get(x);if(v==c('MercuryActionType').USER_GENERATED_MESSAGE&&(!ca||u.timestamp>ca.timestamp))p.set(x,u);if((v==c('MercuryActionType').USER_GENERATED_MESSAGE||v==c('MercuryActionType').LOG_MESSAGE)&&!u.skip_bump_thread)if(u&&u.timestamp&&(!q.has(x)||u.timestamp>q.get(x).timestamp))q.set(x,u);}r.forEach(function(da,ea){var fa=q.get(ea),ga=p.get(ea);if(ga){this.$MercuryThreads19(da,ga)}else if(fa&&fa.log_message_body){var ha=babelHelpers['extends']({},fa,{body:fa.log_message_body});this.$MercuryThreads19(da,ha)}var ia=da.timestamp;if(fa){if(fa.timestamp>ia)Object.assign(da,{timestamp:fa.timestamp});var ja=da.server_timestamp;if(!o&&fa.timestamp>ja)da.server_timestamp=fa.timestamp;}var ka=new (c('ImmutableObject'))(da);if((!ka.participants||!ka.participants.length)&&!this.isEmptyLocalThread(ka.thread_id)){var la=(n||[]).map(c('MercuryLoggingHelper').obfuscateMessage),ma={update:c('MercuryLoggingHelper').obfuscateThread(ka),actions:la};k.error('bad metadata update no_participants',JSON.stringify(ma));c('ChatReliabilityInstrumentation').logERROR('refusing to set thread metadata with no participants',ma);return}this.$MercuryThreads8.setResource(ea,ka);s.push(c('MercuryLoggingHelper').obfuscateThread(ka))}.bind(this),this);s.length&&this.$MercuryThreads7&&k.debug('threads_updated',JSON.stringify({threads:s}))};l.prototype.$MercuryThreads18=function(n,o,p){var q=o.action_type;if(q==c('MercuryActionType').USER_GENERATED_MESSAGE||q==c('MercuryActionType').LOG_MESSAGE){if(o.is_unread||o.skip_bump_thread)if(!(n.unread_count===0&&o.skip_bump_thread))n.unread_count++;n.message_count++;n.is_archived=false}switch(q){case c('MercuryActionType').DELETE_THREAD:n.message_count=0;this.$MercuryThreads20(o.thread_id);break;case c('MercuryActionType').USER_GENERATED_MESSAGE:if(n.unread_count===0&&o.author===this.$MercuryThreads4&&o.timestamp>=n.last_read_timestamp)n.last_read_timestamp=o.timestamp;if(o.offline_threading_id!==o.message_id)n.last_message_timestamp=o.timestamp;if(n.comm_status&&n.comm_status.toUpperCase()===c('PageCommItemStatus').DONE)n.comm_status=c('PageCommItemStatus').TODO;this.$MercuryThreads21(n,o.author);break;case c('MercuryActionType').SEND_MESSAGE:var r=o.log_message_type;if(r==c('MercuryLogMessageType').THREAD_IMAGE){n.image_src=o.log_message_data.image?o.log_message_data.image.preview_url:null;this.$MercuryThreads22(o.thread_id)}if(r!==c('MercuryLogMessageType').SUBSCRIBE&&r!==c('MercuryLogMessageType').UNSUBSCRIBE)n.snippet_attachments=o.attachments;break;case c('MercuryActionType').LOG_MESSAGE:var r=o.log_message_type;if(r==c('MercuryLogMessageType').SUBSCRIBE&&!p){this.$MercuryThreads23(n,o.log_message_data.added_participants);this.$MercuryThreads22(o.thread_id)}else if(r==c('MercuryLogMessageType').UNSUBSCRIBE&&!p){this.$MercuryThreads24(n,o.log_message_data.removed_participants);this.$MercuryThreads22(o.thread_id)}else if(r==c('MercuryLogMessageType').THREAD_IMAGE){if(!p)n.image_src=o.log_message_data.image?o.log_message_data.image.preview_url:null;}else if(r==c('MercuryLogMessageType').THREAD_NAME){if(n.name!==o.log_message_data.name)this.$MercuryThreads22(o.thread_id);n.name=o.log_message_data.name}else if(r===c('MercuryLogMessageType').GENERIC_ADMIN_TEXT)this.$MercuryThreads25(n,o);break;case c('MercuryActionType').CHANGE_READ_STATUS:var s=this.$MercuryThreads26(n,o,o.mark_as_read);if(s)n.last_read_timestamp=n.last_message_timestamp;var t=!n.read_only&&n.folder===c('MessagingTag').INBOX;if(s&&p)this.$MercuryThreads2.changeThreadReadStatus(n.thread_id,o.mark_as_read,o.source,n.last_read_timestamp,t,n.last_message_type);break;case c('MercuryActionType').CHANGE_ARCHIVED_STATUS:if(n.is_archived!=o.archived){n.is_archived=o.archived;this.$MercuryThreads22(o.thread_id)}break;case c('MercuryActionType').CHANGE_FOLDER:if(n.folder!=o.new_folder){n.folder=o.new_folder;this.$MercuryThreads22(o.thread_id)}break;case c('MercuryActionType').DELETE_MESSAGES:if(p){n.snippet='...';n.snippet_attachments=null;n.snippet_sender=null;this.$MercuryThreads22(o.thread_id)}else if(o.message_ids){n.message_count-=o.message_ids.length;c('ifRequired')('MercuryMessages',function(w){w=w.getForFBID(this.$MercuryThreads1);for(var x=o.message_ids,y=Array.isArray(x),z=0,x=y?x:x[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var aa;if(y){if(z>=x.length)break;aa=x[z++]}else{z=x.next();if(z.done)break;aa=z.value}var ba=aa,ca=w.getMessagesFromIDs([ba]),da=ca[0];if(da&&da.timestamp>n.last_read_timestamp)n.unread_count=Math.max(0,n.unread_count-1);}this.$MercuryThreads22(o.thread_id)}.bind(this),c('emptyFunction'))}break;case c('MercuryActionType').UPDATE_SNIPPET:c('ifRequired')('MercuryMessages',function(w){w=w.getForFBID(this.$MercuryThreads1);var x=0,y=1,z=w.getThreadMessagesRangeNow(o.thread_id,x,y),aa=z[0];if(aa){n.snippet=aa.body;n.snippet_attachments=aa.attachments;n.snippet_sender=aa.author}else{n.snippet='...';n.snippet_attachments=null;n.snippet_sender=null;w.getThreadMessagesRange(o.thread_id,x,y,function(ba){if(ba.length)this.$MercuryThreads5.handleUpdate({from_client:true,actions:[{thread_id:o.thread_id,action_type:c('MercuryActionType').UPDATE_SNIPPET,deleted_ids:o.deleted_ids}]});}.bind(this))}this.$MercuryThreads22(o.thread_id)}.bind(this),c('emptyFunction'));break;case c('MercuryActionType').CHANGE_MUTE_SETTINGS:if(Object.prototype.hasOwnProperty.call(o,'reactions_mute_mode')){n.reactions_mute_mode=o.reactions_mute_mode}else if(Object.prototype.hasOwnProperty.call(o,'mentions_mute_mode')){n.mentions_mute_mode=o.mentions_mute_mode}else n.mute_until=!o.mute_until?undefined:o.mute_until;this.$MercuryThreads22(n.thread_id);break;case c('MercuryActionType').ADD_PARTICIPANTS:this.$MercuryThreads23(n,o.participants);this.$MercuryThreads22(n.thread_id);break;case c('MercuryActionType').CHANGE_FLAG:this.$MercuryThreads27(n,o.mark_as_flag);this.$MercuryThreads22(n.thread_id);break;case c('MercuryActionType').MOVE_PENDING_TO_INBOX:this.$MercuryThreads28(n);this.$MercuryThreads22(n.thread_id);break;case c('MercuryActionType').UPDATE_CUSTOM_LIKE:n.custom_like_icon=o.custom_like;this.$MercuryThreads22(n.thread_id);break;case c('MercuryActionType').ADD_GROUP_ADMINS:n.admin_ids=n.admin_ids.concat(o.added_admin_ids.filter(function(w){return n.admin_ids.indexOf(w)===-1}));this.$MercuryThreads22(o.thread_id);break;case c('MercuryActionType').REMOVE_GROUP_ADMINS:n.admin_ids=n.admin_ids.filter(function(w){return o.removed_admin_ids.indexOf(w)===-1});this.$MercuryThreads22(o.thread_id);break;case c('MercuryActionType').JOINABLE_MODE:n.joinable_mode=o.joinable_mode;this.$MercuryThreads22(o.thread_id);break;case c('MercuryActionType').APPROVAL_MODE:n.approval_mode=o.approval_mode;this.$MercuryThreads22(o.thread_id);break;case c('MercuryActionType').APPROVAL_QUEUE:if(o.added_id&&n.approval_queue_ids&&n.approval_queue_ids.indexOf(o.added_id)===-1)n.approval_queue_ids=n.approval_queue_ids.concat(o.added_id);if(o.removed_id&&n.approval_queue_ids)n.approval_queue_ids=n.approval_queue_ids.filter(function(w){return o.removed_id!==w});this.$MercuryThreads22(o.thread_id);break;case c('MercuryActionType').IS_PIN_PROTECTED:n.is_pin_protected=o.is_pin_protected;this.$MercuryThreads22(o.thread_id);break;case c('MercuryActionType').UPDATE_RTC_CALL_DATA:var u=o.initiator_fbid||(n.rtc_call_data?n.rtc_call_data.initiator_fbid:undefined);n.rtc_call_data=new (c('ImmutableObject'))({call_state:o.call_state,server_info_data:o.server_info_data,initiator_fbid:u});this.$MercuryThreads22(o.thread_id);break;case c('MercuryActionType').UPDATE_COMM_STATUS:this.$MercuryThreads29(n,o.comm_status);this.$MercuryThreads22(n.thread_id);break;case c('MercuryActionType').EVENT_RSVP_CHANGED:var v=n.participants_event_status.filter(function(w){return w.participant_id!==o.actor_fbid});v.push({participant_id:o.actor_fbid.toString(),event_status:o.rsvp_status});n.participants_event_status=v;this.$MercuryThreads22(o.thread_id);break;}};l.prototype.$MercuryThreads25=function(n,o){var p,q=this;if(o.log_message_data&&o.log_message_data.untypedData)(function(){var r=o.log_message_data.untypedData,event=n.lightweight_event;switch(o.log_message_data.message_type){case c('MessagingGenericAdminTextType').THREAD_EPHEMERAL_SEND_MODE:var s=parseInt(r.ttl,10);if(s!==null&&n.ephemeral_ttl_mode!==s){n.ephemeral_ttl_mode=s;q.$MercuryThreads22(o.thread_id)}break;case c('MessagingGenericAdminTextType').CHANGE_THREAD_NICKNAME:var t={};for(var u in n.custom_nickname){if(u==r.participant_id&&r.nickname.trim().length==0)continue;t[u]=n.custom_nickname[u]}if(r.nickname.trim().length>0)t[r.participant_id]=r.nickname;n.custom_nickname=t;q.$MercuryThreads22(o.thread_id);break;case c('MessagingGenericAdminTextType').CHANGE_THREAD_ICON:c('requireWeak')('MercuryThreadActions',function(y){y.getForFBID(this.$MercuryThreads1).updateCustomLike(o.thread_id,r.thread_icon)}.bind(q));break;case c('MessagingGenericAdminTextType').CHANGE_THREAD_THEME:var v=r.theme_color;if(v&&v.length>0){n.custom_color='#'.concat(v.substring(2))}else n.custom_color=null;q.$MercuryThreads22(o.thread_id);break;case c('MessagingGenericAdminTextType').LIGHTWEIGHT_EVENT_CREATE:var w={};n.participants.map(function(y){var z=c('MercuryIDs').getUserIDFromParticipantID(y);if(z)w[z]=z===r.event_creator_id?i.GOING:i.INVITED;},q);n.lightweight_event={track_rsvp:r.event_track_rsvp,title:r.event_title,event_time:parseInt(r.event_time,10),location_name:r.event_location_name,event_members:w,oid:r.event_id,event_type:r.event_type};q.$MercuryThreads22(o.thread_id);break;case c('MessagingGenericAdminTextType').LIGHTWEIGHT_EVENT_UPDATE:case c('MessagingGenericAdminTextType').LIGHTWEIGHT_EVENT_UPDATE_TIME:case c('MessagingGenericAdminTextType').LIGHTWEIGHT_EVENT_UPDATE_TITLE:case c('MessagingGenericAdminTextType').LIGHTWEIGHT_EVENT_UPDATE_LOCATION:if(event)n.lightweight_event=q.$MercuryThreads30(r,event,event.event_members);q.$MercuryThreads22(o.thread_id);break;case c('MessagingGenericAdminTextType').LIGHTWEIGHT_EVENT_RSVP:if(event&&event.event_members){var x=q.$MercuryThreads31(event.event_members,r);n.lightweight_event=q.$MercuryThreads30(r,event,x)}q.$MercuryThreads22(o.thread_id);break;case c('MessagingGenericAdminTextType').LIGHTWEIGHT_EVENT_DELETE:case c('MessagingGenericAdminTextType').LIGHTWEIGHT_EVENT_NOTIFY:n.lightweight_event=null;q.$MercuryThreads22(o.thread_id);break;}})();};l.prototype.$MercuryThreads31=function(n,o){var p={};for(var q in n)p[q]=n[q];p[o.guest_id]=o.guest_status;return p};l.prototype.$MercuryThreads30=function(n,event,o){return {track_rsvp:event.track_rsvp,title:n.event_title===undefined?event.title:n.event_title,event_time:n.event_time===undefined?event.event_time:parseInt(n.event_time,10),location_name:n.event_location_name===undefined?event.location_name:n.event_location_name,event_members:o===undefined?event.event_members:o,oid:event.oid,event_type:event.event_type}};l.prototype.$MercuryThreads17=function(n){var o=c('MercuryIDs').tokenize(n.thread_id),p=o.type,q=o.value,r=p==='user',s=r||n.specific_to_list&&this.$MercuryThreads15(n.specific_to_list),t=s||r?this.$MercuryThreads32(n):n.specific_to_list;return new (c('ImmutableObject'))({thread_id:n.thread_id,participants:t,name:null,snippet:n.body,snippet_attachments:[],snippet_sender:n.author,unread_count:0,message_count:0,image_src:null,timestamp:n.timestamp,other_user_fbid:r?q:null,is_canonical_user:r,is_canonical:s,is_subscribed:true,folder:c('MessagingTag').INBOX,is_archived:false})};l.prototype.$MercuryThreads26=function(n,o,p){if(o.timestamp)this.$MercuryThreads33(n.thread_id,p,o.timestamp);if(!n||!n.thread_id||!n.participants)return false;if(!n.timestamp){this.$MercuryThreads9.add(n.thread_id);return false}var q=!n.unread_count;if(p==q)return false;n.unread_count=p?0:1;this.$MercuryThreads22(n.thread_id);return true};l.prototype.$MercuryThreads34=function(n){var o=this.$MercuryThreads8.getAllResources();for(var p in o)if(Object.prototype.hasOwnProperty.call(o,p)){var q=o[p];if(q.folder==n){this.$MercuryThreads8.setResource(p,c('ImmutableObject').setProperty(q,'unread_count',0));this.$MercuryThreads22(p)}}};l.prototype.$MercuryThreads23=function(n,o){var p=new (c('Set'))(n.participants);n.participants=Array.from(n.participants||[]);o.forEach(function(q){if(!p.has(q)){n.participants.push(q);if(q===this.$MercuryThreads4){n.is_subscribed=true;n.can_reply=true;n.cannot_reply_reason=null;this.$MercuryThreads6.sendThreadDFF(undefined,n.thread_fbid)}}}.bind(this))};l.prototype.$MercuryThreads24=function(n,o){var p=new (c('Set'))(o);if(n&&!n.participants){c('ChatReliabilityInstrumentation').logERROR('participants are null in thread_info!',{thread_info:n})}else n.participants=n.participants.filter(function(q){return !p.has(q)});if(n&&!n.admin_ids){c('ChatReliabilityInstrumentation').logERROR('admin_ids are null in thread_info!',{thread_info:n})}else n.admin_ids=n.admin_ids.filter(function(q){return !p.has(q)});if(p.has(this.$MercuryThreads4))n.is_subscribed=false;this.$MercuryThreads2.fetchThreadData([n.thread_id])};l.prototype.$MercuryThreads21=function(n,o){if(!n.participants){var p=JSON.stringify({thread_info:n,participant:o});k.error('missing_participants',p);return}var q=n.participants.indexOf(o);if(q>0)n.participants=[o].concat(n.participants.slice(0,q),n.participants.slice(q+1));};l.prototype.$MercuryThreads19=function(n,o){var p=o.body,q=o.subject,r='';if(q){q=q.toLowerCase();if(p.slice(0,q.length).toLowerCase()==q){r=p}else if(p){r=q+' \u00B7 '+p}else r=q;}else r=p;if(o.is_filtered_content)r=c('MercuryDisplayTimeFilterMessageRenderer').renderFilteredContent(o);if(c('MessagingGiftWrapChecker').shouldRenderWithGiftWrap(o)){var s=o.author,t=s==this.$MercuryThreads4,u=null;if(!t){u=n.custom_nickname&&n.custom_nickname[c('MercuryIDs').getUserIDFromParticipantID(s)];if(!u){var v=c('MercuryParticipants').getNow(s);if(v!=null)u=v.short_name;}}r=c('MercuryGiftSnippetRenderer').renderText(t,u)}n.snippet=r;if(o.raw_attachments&&o.raw_attachments.length>0){var w=c('MercuryAttachment').convertRaw(o.raw_attachments);n.snippet_attachments=w}else n.snippet_attachments=o.attachments;if(o.log_message_type){n.snippet_sender=null}else n.snippet_sender=o.author;};l.prototype.$MercuryThreads27=function(n,o){n.page_thread_info=babelHelpers['extends']({},n.page_thread_info,{flagged:o})};l.prototype.$MercuryThreads29=function(n,o){n.comm_status=o};l.prototype.$MercuryThreads28=function(n){if(n.folder!==c('MessagingTag').PENDING)return;n.folder=c('MessagingTag').INBOX};l.prototype.$MercuryThreads15=function(n){return n.filter(function(o){return o!=this.$MercuryThreads4}.bind(this)).length<=1};l.prototype.$MercuryThreads13=function(){this.$MercuryThreads5.subscribe('invalidate-thread-state',function(n,o){return this.$MercuryThreads35(o)}.bind(this));this.$MercuryThreads5.subscribe('invalidate-global-state',function(n,o){return this.$MercuryThreads36()}.bind(this));this.$MercuryThreads5.subscribe('update-threads',function(n,o){var p=(o.actions||[]).filter(function(q){return q.thread_id});if(o.threads&&o.payload_source==c('MercuryPayloadSource').SERVER_FETCH_THREAD_INFO)o.threads.forEach(function(q){var r=q.thread_id;if(this.$MercuryThreads9.has(r)){this.$MercuryThreads9['delete'](r);if(q.unread_count)this.$MercuryThreads2.changeThreadReadStatus(q.thread_id,true);}}.bind(this));this.$MercuryThreads37(o.threads);this.$MercuryThreads16(p,o.from_client);o.threads&&o.threads.forEach(function(q){this.$MercuryThreads22(q.thread_id)}.bind(this));if(o.global_actions)o.global_actions.forEach(function(q){if(q.action_type==c('MercuryGlobalActionType').MARK_ALL_READ)this.$MercuryThreads34(q.folder);}.bind(this));if(this.$MercuryThreads7){this.$MercuryThreads7=false;j.emit('change')}}.bind(this))};l.prototype.$MercuryThreads37=function(n){if(!n||!n.length)return;var o={},p=[];n.forEach(function(q){var r=new (c('ImmutableObject'))(q);o[q.thread_id]=r;p.push(c('MercuryLoggingHelper').obfuscateThread(r))});p.length&&k.debug('threads_added',JSON.stringify({threads:p}));this.$MercuryThreads8.addResourcesAndExecute(o)};l.prototype.$MercuryThreads22=function(n){this.$MercuryThreads7=true;this.$MercuryThreads3.updatedThread(n)};l.prototype.$MercuryThreads20=function(n){this.$MercuryThreads7=true;this.$MercuryThreads3.deletedThread(n)};l.prototype.$MercuryThreads33=function(n,o,p){this.$MercuryThreads7=true;this.$MercuryThreads3.changedThreadReadState(n,o,p)};l.prototype.$MercuryThreads35=function(n){this.$MercuryThreads8.setResource(n,undefined)};l.prototype.$MercuryThreads36=function(){this.$MercuryThreads7=false;this.$MercuryThreads8=new (c('KeyedCallbackManager'))();this.$MercuryThreads9=new (c('Set'))();this.$MercuryThreads10=false;this.$MercuryThreads11=new (c('Set'))();this.$MercuryThreads12=new (c('Set'))()};l.prototype.$MercuryThreads32=function(n){if(n.specific_to_list)return n.specific_to_list;var o=c('MercuryIDs').tokenize(n.thread_id),p=o.type,q=o.value;if(!q||p!=='user')return [this.$MercuryThreads4];return [c('MercuryIDs').getParticipantIDFromUserID(q),this.$MercuryThreads4]};var m=new (c('MercurySingletonProvider'))(l);f.exports=l}),null);
__d('MercuryMessageObject',['BanzaiODS','MercuryActionStatus','MercuryActionType','MercuryIDs','MercuryLocalIDs','MercuryMessageClientState','MercuryMessageSourceTags','MercurySingletonProvider','MercurySourceType','MercuryThreads','MercurySendMessageFields'],(function a(b,c,d,e,f,g){h.getForFBID=function(l){'use strict';return k.getForFBID(l)};h.get=function(){'use strict';return k.get()};function h(l){'use strict';this.$MercuryMessageObject1=l;this.$MercuryMessageObject2=c('MercuryThreads').getForFBID(l)}h.prototype.constructUserGeneratedMessageObject=function(l,m,n,o,p){'use strict';var q=i(this.$MercuryMessageObject1,c('MercuryActionType').USER_GENERATED_MESSAGE,m,n);if(typeof l=='string')l=l.replace(/^\s+/,'').replace(/\s+$/,'');q.body=l;q.has_attachment=false;q.html_body=false;q.attachments=[];q.specific_to_list=o||[];q.creator_info=p;return q};h.prototype.constructStickerMessageObject=function(l,m,n){'use strict';var o=i(this.$MercuryMessageObject1,c('MercuryActionType').USER_GENERATED_MESSAGE,m,n);o.has_attachment=true;o.html_body=false;o.attachments=[];o.sticker_id=l;o.specific_to_list=[];return o};h.prototype.constructAttachmentMessageObject=function(l,m){'use strict';var n=i(this.$MercuryMessageObject1,c('MercuryActionType').USER_GENERATED_MESSAGE,l,m);n.attachments=[];n.specific_to_list=[];return n};h.prototype.constructLogMessageObject=function(l,m,n,o){'use strict';var p=i(this.$MercuryMessageObject1,c('MercuryActionType').LOG_MESSAGE,l,m);p.log_message_type=n;p.log_message_data=o;if(o&&o.untypedData&&o.untypedData.ttl)p.ephemeral_ttl_mode=o.untypedData.ttl;return p};h.prototype.constructCTAConfirmationMessageObject=function(l,m,n,o){var p=arguments.length<=4||arguments[4]===undefined?null:arguments[4];'use strict';var q=this.constructUserGeneratedMessageObject(l,m,n,null,null),r={};if(o){r={quick_replies:o,ignore_for_webhook:false}}else r={ignore_for_webhook:true};q.platform_xmd=JSON.stringify(r);if(p&&p.length>0)q.tags=p;return q};h.prototype.normalizeNewMessage=function(l){'use strict';if(l.status===undefined)l.status=c('MercuryActionStatus').UNSENT;l.offline_threading_id=l.offline_threading_id||c('MercuryLocalIDs').generateOfflineThreadingID(l.timestamp);if(!l.offline_threading_id)c('BanzaiODS').bumpEntityKey('chat.web','invalid_otid_generated');l.message_id=l.message_id||l.offline_threading_id;var m=c('MercuryIDs').getParticipantIDFromUserID(this.$MercuryMessageObject1);l.specific_to_list=l.specific_to_list||[];if(l.specific_to_list.length&&l.specific_to_list.indexOf(m)===-1)l.specific_to_list.push(m);if(!l.thread_id){l.thread_id='root:'+l.offline_threading_id}else{var n=this.$MercuryMessageObject2.getThreadMetaNow(l.thread_id);if(n&&n.ephemeral_ttl_mode!==null&&l.ephemeral_ttl_mode===undefined)l.ephemeral_ttl_mode=n.ephemeral_ttl_mode;}if(l.specific_to_list.length==1){l.thread_id='user:'+this.$MercuryMessageObject1}else if(l.specific_to_list.length==2){var o=l.specific_to_list[0]==m?l.specific_to_list[1]:l.specific_to_list[0];l.thread_id=c('MercuryIDs').getThreadIDFromParticipantID(o)}if(!l.specific_to_list.length){var p=c('MercuryIDs').tokenize(l.thread_id),q=p.type,r=p.value;if(q=='user')l.specific_to_list=['fbid:'+r,m];}if(!l[c('MercurySendMessageFields').MANUAL_RETRY_CNT])l[c('MercurySendMessageFields').MANUAL_RETRY_CNT]=0;};h.prototype.normalizeResendMessage=function(l){'use strict';l.status=c('MercuryActionStatus').RESENDING;l.timestamp=Date.now();l[c('MercurySendMessageFields').MANUAL_RETRY_CNT]+=1};h.prototype.normalizeAddAttachmentPlaceholder=function(l,m,n){'use strict';if(n.preview_attachments.length>0){l.has_attachment=true;l.preview_attachments=n.preview_attachments}l.client_state=c('MercuryMessageClientState').DO_NOT_SEND_TO_SERVER;l.status=c('MercuryActionStatus').RESENDING;l.upload_id=m};function i(l,m,n,o){var p=j(n)?[c('MercuryMessageSourceTags').CHAT]:[],q=Date.now(),r={action_type:m,thread_id:o,author:c('MercuryIDs').getParticipantIDFromUserID(l),author_email:null,timestamp:q,is_unread:false,is_filtered_content:false,is_filtered_content_bh:false,is_filtered_content_account:false,is_filtered_content_quasar:false,is_filtered_content_invalid_app:false,is_spoof_warning:false,source:n,source_tags:p};return r}function j(l){switch(l){case c('MercurySourceType').CHAT_WEB:case c('MercurySourceType').CHAT_JABBER:case c('MercurySourceType').CHAT_IPHONE:case c('MercurySourceType').CHAT_MEEBO:case c('MercurySourceType').CHAT_ORCA:case c('MercurySourceType').CHAT_TEST:case c('MercurySourceType').CHAT:return true;default:return false;}}var k=new (c('MercurySingletonProvider'))(h);f.exports=h}),null);
__d('MercuryMessageActions',['MercuryActionType','MercuryDispatcher','MercuryMessageObject','MercuryPayloadSource','MercuryServerRequests','MercurySingletonMixin'],(function a(b,c,d,e,f,g){'use strict';function h(i){this.$MercuryMessageActions1=i;this.$MercuryMessageActions2=c('MercuryMessageObject').getForFBID(this.$MercuryMessageActions1);this.__serverRequests=c('MercuryServerRequests').getForFBID(this.$MercuryMessageActions1);this.__dispatcher=c('MercuryDispatcher').getForFBID(this.$MercuryMessageActions1)}h.prototype.send=function(i,j,k){j=j||Function.prototype;this.$MercuryMessageActions2.normalizeNewMessage(i);this.__dispatcher.handleUpdate(this.__constructClientSingleMessagePayload(babelHelpers['extends']({},i),c('MercuryPayloadSource').CLIENT_SEND_MESSAGE));this.__serverRequests.sendNewMessage(i,k);j(i.thread_id)};h.prototype.resend=function(i,j){var k=babelHelpers['extends']({},i);this.$MercuryMessageActions2.normalizeResendMessage(k);this.send(k,undefined,j)};h.prototype.addAttachmentPlaceholder=function(i,j,k){this.$MercuryMessageActions2.normalizeAddAttachmentPlaceholder(i,j,k);this.$MercuryMessageActions2.normalizeNewMessage(i);this.__dispatcher.handleUpdate(this.__constructClientSingleMessagePayload(babelHelpers['extends']({},i),c('MercuryPayloadSource').CLIENT_SEND_MESSAGE))};h.prototype.cancelAttachmentPlaceholder=function(i,j){this.__dispatcher.handleUpdate(this.__constructClientSingleMessagePayload({upload_id:i,upload_data:j,action_type:c('MercuryActionType').CANCEL_ATTACHMENT_PLACEHOLDER},c('MercuryPayloadSource').CLIENT_SEND_MESSAGE))};h.prototype.confirmAttachmentPlaceholder=function(i,j){this.__dispatcher.handleUpdate(this.__constructClientSingleMessagePayload({upload_id:i,upload_data:j,action_type:c('MercuryActionType').CONFIRM_ATTACHMENT_PLACEHOLDER},c('MercuryPayloadSource').CLIENT_SEND_MESSAGE))};h.prototype['delete']=function(i,j,k){this.__dispatcher.handleUpdate(this.$MercuryMessageActions3(i,j,c('MercuryActionType').DELETE_MESSAGES,k||c('MercuryPayloadSource').CLIENT_DELETE_MESSAGES))};h.prototype.unwrap=function(i){this.__dispatcher.handleUpdate(this.__constructClientSingleMessagePayload({thread_id:i.thread_id,unwrapped_message_id:i.message_id,action_type:c('MercuryActionType').UNWRAP_MESSAGE},c('MercuryPayloadSource').CLIENT_UNWRAP_MESSAGE))};h.prototype.__constructClientSingleMessagePayload=function(i,j){return {actions:[i],from_client:true,payload_source:j}};h.prototype.$MercuryMessageActions4=function(i,j){return {actions:[i],from_client:false,payload_source:j}};h.prototype.$MercuryMessageActions3=function(i,j,k,l){return {actions:[{action_type:k,thread_id:i,message_ids:j}],from_client:true,payload_source:l}};Object.assign(h,c('MercurySingletonMixin'));f.exports=h}),null);
__d('MercuryViewer',['CurrentUser','MercuryAssert'],(function a(b,c,d,e,f,g){'use strict';var h='fbid:'+c('CurrentUser').getID(),i={getID:function j(){return h},isViewer:function j(k){c('MercuryAssert').isParticipantID(k);return k===h}};f.exports=i}),null);
__d("XGroupsJoinChatController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/groups\/join_chat\/",{link_hash:{type:"String"}})}),null);
__d("XMercuryThreadLikeIconController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/mercury\/like_icon\/",{emoji:{type:"String",defaultValue:""}})}),null);
__d("XMessagingBlockMessagesController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messaging\/block_messages\/",{})}),null);
__d("XMessagingGroupJoinThroughHashController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messaging\/join_through_hash\/",{link_hash:{type:"String"}})}),null);
__d("XMessagingGroupJoinThroughPrivateLinkController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messaging\/join_through_invite\/",{link_hash:{type:"String"}})}),null);
__d("XMessagingGroupJoinableAcceptController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messaging\/joinable_accept\/",{thread_fbid:{type:"String"},user_id:{type:"Int"}})}),null);
__d("XMessagingGroupJoinableInviteController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messaging\/joinable_invite\/",{thread_fbid:{type:"String"},user_ids:{type:"IntSet"}})}),null);
__d("XMessagingGroupJoinableRejectController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messaging\/joinable_reject\/",{thread_fbid:{type:"String"},user_id:{type:"Int"}})}),null);
__d("XMessagingGroupSetApprovalController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messaging\/set_approval_mode\/",{set_mode:{type:"Enum",enumType:0},thread_fbid:{type:"String"}})}),null);
__d("XMessagingSaveAdminsController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messaging\/save_admins\/",{elem_id:{type:"String"},parent_elem_id:{type:"String"},thread_fbid:{type:"String"},admin_ids:{type:"FBIDSet"},add:{type:"Bool",defaultValue:false}})}),null);
__d("XMessagingSaveNicknameController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messaging\/save_thread_nickname\/",{source:{type:"Enum",required:true,enumType:1}})}),null);
__d("XMessagingSaveThreadColorController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messaging\/save_thread_color\/",{source:{type:"Enum",required:true,enumType:1}})}),null);
__d("XMessagingSaveThreadEmojiController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messaging\/save_thread_emoji\/",{source:{type:"Enum",required:true,enumType:1}})}),null);
__d("XMessagingUnblockMessagesController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messaging\/unblock_messages\/",{})}),null);
__d("XNFXIgnoreMessagesActionController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/nfx\/ignore_messages\/",{thread_fbid:{type:"Int",required:true},location:{type:"Enum",required:true,enumType:1},__asyncDialog:{type:"Int"}})}),null);
__d("XNFXMessengerBlockActionController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/nfx\/block_messages\/",{thread_fbid:{type:"Int",required:true},av:{type:"Int"},location:{type:"Enum",required:true,enumType:1},__asyncDialog:{type:"Int"}})}),null);
__d('MercuryThreadActions',['cssVar','AsyncDialog','AsyncRequest','EmojiLikeConstants','IgnoreMessagesTypedLogger','MercuryActionType','MercuryAPIArgsSource','MercuryDispatcher','MercuryIDs','MercuryLogMessageType','MercuryMessengerBlockingUtils','MercuryPayloadSource','MercuryParticipants','MercuryServerPayloadPreprocessor','MercuryServerRequests','MercurySingletonMixin','MercurySourceType','MercuryThreadIDMap','MercuryThreads','MercuryViewer','MercuryMessageActions','MercuryMessageObject','MessagingTag','PageCommItemStatus','ReloadPage','URI','XGroupsJoinChatController','XMercuryThreadLikeIconController','XMessagingGroupJoinableAcceptController','XMessagingGroupJoinableInviteController','XMessagingGroupJoinableRejectController','XMessagingGroupJoinThroughHashController','XMessagingGroupJoinThroughPrivateLinkController','XMessagingGroupSetApprovalController','XMessagingSaveAdminsController','XMessagingSaveNicknameController','XMessagingSaveThreadColorController','XMessagingSaveThreadEmojiController','XNFXMessengerBlockActionController','XMessagingBlockMessagesController','XMessagingUnblockMessagesController','XNFXIgnoreMessagesActionController','ex'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('MercuryThreadIDMap').get(),j=c('MercuryThreads').get(),k=c('MercuryMessageActions').get(),l=c('MercuryMessageObject').get();function m(n){this.$MercuryThreadActions1=n;this.__serverRequests=c('MercuryServerRequests').getForFBID(this.$MercuryThreadActions1);this.__dispatcher=c('MercuryDispatcher').getForFBID(this.$MercuryThreadActions1);this.__payloadPreprocessor=c('MercuryServerPayloadPreprocessor').getForFBID(this.$MercuryThreadActions1)}m.prototype.markRead=function(n,o){this.batchMarkRead([n],o)};m.prototype.batchMarkRead=function(n,o){this.__dispatcher.handleUpdate(this.$MercuryThreadActions2(n,true,o))};m.prototype.markUnread=function(n,o){this.batchMarkUnread([n],o)};m.prototype.batchMarkUnread=function(n,o){this.__dispatcher.handleUpdate(this.$MercuryThreadActions2(n,false,o))};m.prototype.markSeen=function(n,o){this.__dispatcher.handleUpdate(this.__constructClientPayload([n],c('MercuryActionType').MARK_THREAD_SEEN,c('MercuryPayloadSource').CLIENT_MARK_THREAD_SEEN,{persistent:o}))};m.prototype.archive=function(n,o){this.batchArchive([n],o)};m.prototype.batchArchive=function(n,o){n.forEach(function(p){this.__serverRequests.changeThreadArchivedStatus(p,true,o)}.bind(this));this.__dispatcher.handleUpdate(this.$MercuryThreadActions3(n,true))};m.prototype.unarchive=function(n,o){this.batchUnarchive([n],o)};m.prototype.batchUnarchive=function(n,o){n.forEach(function(p){this.__serverRequests.changeThreadArchivedStatus(p,false,o)}.bind(this));this.__dispatcher.handleUpdate(this.$MercuryThreadActions3(n,false))};m.prototype.markSpam=function(n,o){this.batchMarkSpam([n],o)};m.prototype.batchMarkSpam=function(n,o){n.forEach(function(p){this.__serverRequests.markThreadSpam(p,o)}.bind(this));this.__dispatcher.handleUpdate(this.$MercuryThreadActions4(n,c('MessagingTag').SPAM))};m.prototype.unmarkSpam=function(n,o){this.batchUnmarkSpam([n],o)};m.prototype.batchUnmarkSpam=function(n,o){n.forEach(function(p){this.__serverRequests.unmarkThreadSpam(p,o)}.bind(this));this.__dispatcher.handleUpdate(this.$MercuryThreadActions4(n,c('MessagingTag').INBOX))};m.prototype.changeFolder=function(n,o){this.batchChangeFolder([n],o)};m.prototype.batchChangeFolder=function(n,o){n.forEach(function(p){this.__serverRequests.changeThreadFolder(p,o)}.bind(this));this.__dispatcher.handleUpdate(this.$MercuryThreadActions4(n,o))};m.prototype['delete']=function(n,o){this.batchDelete([n],o)};m.prototype.batchDelete=function(n,o){n.forEach(function(p){this.__serverRequests.deleteThread(p,o)}.bind(this));this.__dispatcher.handleUpdate(this.__constructClientPayload(n,c('MercuryActionType').DELETE_THREAD,c('MercuryPayloadSource').CLIENT_DELETE_THREAD))};m.prototype.unmute=function(n){this.updateMuteSetting(n,0)};m.prototype.updateMuteSetting=function(n,o){this.__serverRequests.changeMutingOnThread(n,o);this.__dispatcher.handleUpdate(this.__constructClientPayload([n],c('MercuryActionType').CHANGE_MUTE_SETTINGS,c('MercuryPayloadSource').CLIENT_CHANGE_MUTE_SETTINGS,{mute_until:o}))};m.prototype.updateMentionsMuteSetting=function(n,o){var p=o?1:0;this.__serverRequests.changeMentionsMutingOnThread(n,p);this.__dispatcher.handleUpdate(this.__constructClientPayload([n],c('MercuryActionType').CHANGE_MUTE_SETTINGS,c('MercuryPayloadSource').CLIENT_CHANGE_MUTE_SETTINGS,{mentions_mute_mode:p}))};m.prototype.updateReactionsMuteSetting=function(n,o){var p=o?1:0;this.__serverRequests.changeReactionsMutingOnThread(n,p);this.__dispatcher.handleUpdate(this.__constructClientPayload([n],c('MercuryActionType').CHANGE_MUTE_SETTINGS,c('MercuryPayloadSource').CLIENT_CHANGE_MUTE_SETTINGS,{reactions_mute_mode:p}))};m.prototype.blockMessages=function(n,o){var p=c('XNFXMessengerBlockActionController').getURIBuilder().setInt('thread_fbid',c('MercuryIDs').getUserIDFromThreadID(n)).setEnum('location','www_chat_head').getURI();c('AsyncDialog').send(new (c('AsyncRequest'))(p),function(q){q.subscribe('confirm',function(){q.hide();o&&this.blockIgnoreMessages(n,o)}.bind(this))}.bind(this))};m.prototype.blockIgnoreMessages=function(n,o){this.changeFolder(n,c('MessagingTag').OTHER);j.getThreadMeta(n,function(p){var q=c('MercuryParticipants').getNow(c('MercuryIDs').getParticipantIDFromUserID(p.other_user_fbid)),r=q&&q.short_name;o&&o(r)})};m.prototype.unblockMessages=function(n){var o=c('MercuryIDs').getUserIDFromThreadID(n);if(o===null)throw new Error(c('ex')('Expected user ID to unblock messages for, got null'));var p=JSON.stringify({reportable_ent_token:o,initial_action_name:c('MercuryMessengerBlockingUtils').block_messages});new (c('AsyncRequest'))(new (c('URI'))('/ajax/nfx/messenger_undo_block').addQueryData({story_location:'messenger',context:p})).send()};m.prototype.ignoreMessages=function(n){var o=c('XNFXIgnoreMessagesActionController').getURIBuilder().setInt('thread_fbid',n).setEnum('location','www_chat_head').getURI();c('AsyncDialog').send(new (c('AsyncRequest'))(o))};m.prototype.blockOnMessengerDotCom=function(n){var o=c('XMessagingBlockMessagesController').getURIBuilder().getURI();new (c('IgnoreMessagesTypedLogger'))().setEvent('block_confirmed').setThreadID(c('MercuryIDs').getThreadFBIDFromThreadID(n)).setPlatform('messengerdotcom').log();new (c('AsyncRequest'))(o).setMethod('POST').setData({fbid:c('MercuryIDs').getUserIDFromThreadID(n)}).send()};m.prototype.unblockOnMessengerDotCom=function(n){var o=c('XMessagingUnblockMessagesController').getURIBuilder().getURI();new (c('AsyncRequest'))(o).setMethod('POST').setData({fbid:c('MercuryIDs').getUserIDFromThreadID(n)}).send()};m.prototype.leaveGroup=function(n){if(!j.isEmptyLocalThread(n))k.send(l.constructLogMessageObject(c('MercurySourceType').TITAN_WEB,n,c('MercuryLogMessageType').UNSUBSCRIBE,{removed_participants:[c('MercuryViewer').getID()]}),null,c('MercuryAPIArgsSource').WEBMESSENGER);};m.prototype.changeThreadColor=function(n,o,p){if(j.isEmptyLocalThread(n))return;i.getServerIDFromClientID(n,function(q){var r={};if(o!="#0084ff")r.color_choice=o;r.thread_or_other_fbid=q;var s=c('XMessagingSaveThreadColorController').getURIBuilder().setEnum('source',p).getURI();new (c('AsyncRequest'))(s).setMethod('POST').setData(r).send()})};m.prototype.changeThreadEmoji=function(n,o,p){if(j.isEmptyLocalThread(n))return;i.getServerIDFromClientID(n,function(q){var r={},s=String.fromCodePoint.apply(String,o);if(s!==String.fromCodePoint(c('EmojiLikeConstants').FB_THUMBS_UP_EMOJI)&&s!==String.fromCodePoint(c('EmojiLikeConstants').THUMBS_UP_EMOJI_CODES))r.emoji_choice=s;r.thread_or_other_fbid=q;var t=c('XMessagingSaveThreadEmojiController').getURIBuilder().setEnum('source',p).getURI();new (c('AsyncRequest'))(t).setMethod('POST').setData(r).send()})};m.prototype.changeThreadNicknames=function(n,o,p,q){if(j.isEmptyLocalThread(n))return;i.getServerIDFromClientID(n,function(r){var s={thread_or_other_fbid:r,participant_id:o,nickname:p},t=c('XMessagingSaveNicknameController').getURIBuilder().setEnum('source',q).getURI();new (c('AsyncRequest'))(t).setMethod('POST').setData(s).send()})};m.prototype.setApprovalMode=function(n,o){var p=c('XMessagingGroupSetApprovalController').getURIBuilder().getURI();new (c('AsyncRequest'))(p).setMethod('POST').setData({set_mode:n,thread_fbid:o.thread_fbid}).send()};m.prototype.changeGroupAdmins=function(n,o,p){var q={thread_fbid:n,admin_ids:o,add:p},r=c('XMessagingSaveAdminsController').getURIBuilder().getURI();new (c('AsyncRequest'))(r).setMethod('POST').setData(q).send()};m.prototype.joinThroughHash=function(n){var o={link_hash:n},p=c('XMessagingGroupJoinThroughHashController').getURIBuilder().getURI();new (c('AsyncRequest'))(p).setMethod('POST').setData(o).send()};m.prototype.joinThroughPrivateLink=function(n){var o={link_hash:n},p=c('XMessagingGroupJoinThroughPrivateLinkController').getURIBuilder().getURI();new (c('AsyncRequest'))(p).setMethod('POST').setData(o).send()};m.prototype.chatJoinThroughHash=function(n){var o={link_hash:n},p=c('XGroupsJoinChatController').getURIBuilder().getURI();new (c('AsyncRequest'))(p).setMethod('POST').setData(o).setHandler(function(q){return c('ReloadPage').now()}).send()};m.prototype.inviteToJoinableGroup=function(n,o){var p={thread_fbid:n,user_ids:o},q=c('XMessagingGroupJoinableInviteController').getURIBuilder().getURI();new (c('AsyncRequest'))(q).setMethod('POST').setData(p).send()};m.prototype.acceptToJoinableGroup=function(n,o){var p={thread_fbid:n,user_id:o},q=c('XMessagingGroupJoinableAcceptController').getURIBuilder().getURI();new (c('AsyncRequest'))(q).setMethod('POST').setData(p).send()};m.prototype.rejectToJoinableGroup=function(n,o){var p={thread_fbid:n,user_id:o},q=c('XMessagingGroupJoinableRejectController').getURIBuilder().getURI();new (c('AsyncRequest'))(q).setMethod('POST').setData(p).send()};m.prototype.addParticipants=function(n,o){this.__dispatcher.handleUpdate(this.__constructClientPayload([n],c('MercuryActionType').ADD_PARTICIPANTS,c('MercuryPayloadSource').CLIENT_ADD_PARTICIPANTS,{participants:o}))};m.prototype.updateCustomLike=function(n,o){var p=c('XMercuryThreadLikeIconController').getURIBuilder().setString('emoji',o).getURI();new (c('AsyncRequest'))().setURI(p).setHandler(function(q){this.__dispatcher.handleUpdate(this.__constructClientPayload([n],c('MercuryActionType').UPDATE_CUSTOM_LIKE,c('MercuryPayloadSource').CLIENT_CHANGE_CUSTOM_LIKE,{custom_like:q.getPayload()}))}.bind(this)).send()};m.prototype.movePendingToInbox=function(n){this.__dispatcher.handleUpdate(this.__constructClientPayload([n],c('MercuryActionType').MOVE_PENDING_TO_INBOX,c('MercuryPayloadSource').CLIENT_MOVE_PENDING_TO_INBOX))};m.prototype.updateSnippet=function(n,o){this.__dispatcher.handleUpdate(this.__constructClientPayload([n],c('MercuryActionType').UPDATE_SNIPPET,c('MercuryPayloadSource').CLIENT_UPDATE_SNIPPET,{deleted_ids:o}))};m.prototype.updateCommStatus=function(n,o){this.__dispatcher.handleUpdate(this.$MercuryThreadActions5(n,o));var p=o===c('PageCommItemStatus').DONE;this.__dispatcher.handleUpdate(this.$MercuryThreadActions3(n,p))};m.prototype.$MercuryThreadActions2=function(n,o,p){return this.__constructClientPayload(n,c('MercuryActionType').CHANGE_READ_STATUS,c('MercuryPayloadSource').CLIENT_CHANGE_READ_STATUS,{mark_as_read:o,source:p})};m.prototype.$MercuryThreadActions3=function(n,o){return this.__constructClientPayload(n,c('MercuryActionType').CHANGE_ARCHIVED_STATUS,c('MercuryPayloadSource').CLIENT_CHANGE_ARCHIVED_STATUS,{archived:o})};m.prototype.$MercuryThreadActions5=function(n,o){return this.__constructClientPayload(n,c('MercuryActionType').UPDATE_COMM_STATUS,c('MercuryPayloadSource').CLIENT_UPDATE_COMM_STATUS,{comm_status:o})};m.prototype.$MercuryThreadActions4=function(n,o){return this.__constructClientPayload(n,c('MercuryActionType').CHANGE_FOLDER,c('MercuryPayloadSource').CLIENT_CHANGE_FOLDER,{new_folder:o})};m.prototype.__constructClientPayload=function(n,o,p,q){return {actions:n.map(function(r){return babelHelpers['extends']({action_type:o,thread_id:r},q)}),from_client:true,payload_source:p}};Object.assign(m,c('MercurySingletonMixin'));f.exports=m}),null);
__d('MessengerFluxReduceDispatcher',['ExplicitRegistrationReactDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('ExplicitRegistrationReactDispatcher'));i=h&&h.prototype;function j(){h.apply(this,arguments)}f.exports=new j({strict:false})}),null);
__d('MNCommerceActionTypes',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirrorRecursive')({RECEIPT:{LOADED:null,LOAD_ERROR:null,RELOAD:null},SHIPMENT:{LOADED:null,LOAD_ERROR:null,RELOAD:null},DIALOG:{SHOW:null,HIDE:null},RETAIL_ITEM:{LOADED:null,LOAD_ERROR:null,RELOAD:null},PROMOTION_STATE:{LOADED:null,LOAD_ERROR:null,RELOAD:null},TRANSACTION_INVOICE:{LOADED:null,LOAD_ERROR:null,RELOAD:null},BOT_REVIEW_STATE:{LOADED:null,LOAD_ERROR:null,RELOAD:null}});f.exports=h}),null);
__d('MessengerSharedMediaActions',['MessengerFluxReduceDispatcher','keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirror')({CURRENT_LOADED:null,DELETE_PHOTOS:null,LATEST_LOADED:null,LOAD_CURRENT:null,LOAD_MORE_LATEST:null,LOAD_MORE_PREVIOUS:null,PREVIOUS_LOADED:null}),i='MessengerSharedMedia',j={Types:h,Namespace:i,currentLoaded:function k(l){c('MessengerFluxReduceDispatcher').dispatch({type:h.CURRENT_LOADED,namespace:i,data:l})},deletePhotos:function k(l,m){c('MessengerFluxReduceDispatcher').dispatch({type:h.DELETE_PHOTOS,namespace:i,threadFBID:l,photoFBIDs:m})},loadCurrent:function k(l,m){c('MessengerFluxReduceDispatcher').dispatch({type:h.LOAD_CURRENT,namespace:i,threadFBID:l,photoID:m})},loadMorePrevious:function k(l,m,n){c('MessengerFluxReduceDispatcher').dispatch({type:h.LOAD_MORE_PREVIOUS,namespace:i,threadFBID:l,afterCursor:m,first:n})},loadMoreLatest:function k(l,m,n){c('MessengerFluxReduceDispatcher').dispatch({type:h.LOAD_MORE_LATEST,namespace:i,threadFBID:l,beforeCursor:m,last:n})},previousLoaded:function k(l){c('MessengerFluxReduceDispatcher').dispatch({type:h.PREVIOUS_LOADED,namespace:i,data:l})},latestLoaded:function k(l){c('MessengerFluxReduceDispatcher').dispatch({type:h.LATEST_LOADED,namespace:i,data:l})}};f.exports=j}),null);
__d('bs_js_exn',['bs_caml_exceptions'],(function a(b,c,d,e,f,g){'use strict';var h=c('bs_caml_exceptions').create("Js_exn.Error");function i(q){if(c('bs_caml_exceptions').isCamlExceptionOrOpenVariant(q)){return q}else return [h,q];}function j(q){throw new Error(q)}function k(q){throw new EvalError(q)}function l(q){throw new RangeError(q)}function m(q){throw new ReferenceError(q)}function n(q){throw new SyntaxError(q)}function o(q){throw new TypeError(q)}function p(q){throw new URIError(q)}g.$$Error=h;g.internalToOCamlException=i;g.raiseError=j;g.raiseEvalError=k;g.raiseRangeError=l;g.raiseReferenceError=m;g.raiseSyntaxError=n;g.raiseTypeError=o;g.raiseUriError=p}),null);
__d('bs_array',['bs_curry','bs_js_exn','bs_caml_array','bs_caml_exceptions','bs_caml_builtin_exceptions'],(function a(b,c,d,e,f,g){'use strict';function h(da,ea){if(da){if(da<0){throw [c('bs_caml_builtin_exceptions').invalid_argument,"Array.init"]}else{var fa=c('bs_caml_array').caml_make_vect(da,c('bs_curry')._1(ea,0));for(var ga=1,ha=da-1|0;ga<=ha;++ga)fa[ga]=c('bs_curry')._1(ea,ga);return fa}}else return [];}function i(da,ea,fa){var ga=c('bs_caml_array').caml_make_vect(da,[]);for(var ha=0,ia=da-1|0;ha<=ia;++ha)ga[ha]=c('bs_caml_array').caml_make_vect(ea,fa);return ga}function j(da){var ea=da.length;if(ea){return c('bs_caml_array').caml_array_sub(da,0,ea)}else return [];}function k(da,ea){var fa=da.length;if(fa){if(ea.length){return da.concat(ea)}else return c('bs_caml_array').caml_array_sub(da,0,fa);}else return j(ea);}function l(da,ea,fa){if(fa<0||ea>(da.length-fa|0)){throw [c('bs_caml_builtin_exceptions').invalid_argument,"Array.sub"]}else return c('bs_caml_array').caml_array_sub(da,ea,fa);}function m(da,ea,fa,ga){if(ea<0||fa<0||ea>(da.length-fa|0)){throw [c('bs_caml_builtin_exceptions').invalid_argument,"Array.fill"]}else{for(var ha=ea,ia=(ea+fa|0)-1|0;ha<=ia;++ha)da[ha]=ga;return 0}}function n(da,ea,fa,ga,ha){if(ha<0||ea<0||ea>(da.length-ha|0)||ga<0||ga>(fa.length-ha|0)){throw [c('bs_caml_builtin_exceptions').invalid_argument,"Array.blit"]}else return c('bs_caml_array').caml_array_blit(da,ea,fa,ga,ha);}function o(da,ea){for(var fa=0,ga=ea.length-1|0;fa<=ga;++fa)c('bs_curry')._1(da,ea[fa]);return 0}function p(da,ea){var fa=ea.length;if(fa){var ga=c('bs_caml_array').caml_make_vect(fa,c('bs_curry')._1(da,ea[0]));for(var ha=1,ia=fa-1|0;ha<=ia;++ha)ga[ha]=c('bs_curry')._1(da,ea[ha]);return ga}else return [];}function q(da,ea){for(var fa=0,ga=ea.length-1|0;fa<=ga;++fa)c('bs_curry')._2(da,fa,ea[fa]);return 0}function r(da,ea){var fa=ea.length;if(fa){var ga=c('bs_caml_array').caml_make_vect(fa,c('bs_curry')._2(da,0,ea[0]));for(var ha=1,ia=fa-1|0;ha<=ia;++ha)ga[ha]=c('bs_curry')._2(da,ha,ea[ha]);return ga}else return [];}function s(da){var ea=da.length-1|0,fa=0;while(true){var ga=fa,ha=ea;if(ha<0){return ga}else{fa=[da[ha],ga];ea=ha-1|0;continue}}}function t(da,ea){while(true){var fa=ea,ga=da;if(fa){ea=fa[1];da=ga+1|0;continue}else return ga;}}function u(da){if(da){var ea=c('bs_caml_array').caml_make_vect(t(0,da),da[0]),fa=1,ga=da[1];while(true){var ha=ga,ia=fa;if(ha){ea[ia]=ha[0];ga=ha[1];fa=ia+1|0;continue}else return ea;}}else return [];}function v(da,ea,fa){var ga=ea;for(var ha=0,ia=fa.length-1|0;ha<=ia;++ha)ga=c('bs_curry')._2(da,ga,fa[ha]);return ga}function w(da,ea,fa){var ga=fa;for(var ha=ea.length-1|0;ha>=0;--ha)ga=c('bs_curry')._2(da,ea[ha],ga);return ga}var x=c('bs_caml_exceptions').create("Array.Bottom");function y(da,ea){var fa=function oa(pa,qa){var ra=((qa+qa|0)+qa|0)+1|0,sa=ra;if((ra+2|0)<pa){if(c('bs_curry')._2(da,c('bs_caml_array').caml_array_get(ea,ra),c('bs_caml_array').caml_array_get(ea,ra+1|0))<0)sa=ra+1|0;if(c('bs_curry')._2(da,c('bs_caml_array').caml_array_get(ea,sa),c('bs_caml_array').caml_array_get(ea,ra+2|0))<0)sa=ra+2|0;return sa}else if((ra+1|0)<pa&&c('bs_curry')._2(da,c('bs_caml_array').caml_array_get(ea,ra),c('bs_caml_array').caml_array_get(ea,ra+1|0))<0){return ra+1|0}else if(ra<pa){return ra}else throw [x,qa];},ga=function oa(pa,qa,ra){try{var sa=pa,ta=qa,ua=ra;while(true){var va=ta,wa=fa(sa,va);if(c('bs_curry')._2(da,c('bs_caml_array').caml_array_get(ea,wa),ua)>0){c('bs_caml_array').caml_array_set(ea,va,c('bs_caml_array').caml_array_get(ea,wa));ta=wa;continue}else return c('bs_caml_array').caml_array_set(ea,va,ua);}}catch(ya){var xa=c('bs_js_exn').internalToOCamlException(ya);if(xa[0]===x){return c('bs_caml_array').caml_array_set(ea,xa[1],ra)}else throw xa;}},ha=function oa(pa,qa){try{var ra=pa,sa=qa;while(true){var ta=sa,ua=fa(ra,ta);c('bs_caml_array').caml_array_set(ea,ta,c('bs_caml_array').caml_array_get(ea,ua));sa=ua;continue}}catch(wa){var va=c('bs_js_exn').internalToOCamlException(wa);if(va[0]===x){return va[1]}else throw va;}},ia=function oa(pa,qa){while(true){var ra=pa,sa=(ra-1|0)/3|0;if(ra===sa)throw [c('bs_caml_builtin_exceptions').assert_failure,["array.ml",168,4]];if(c('bs_curry')._2(da,c('bs_caml_array').caml_array_get(ea,sa),qa)<0){c('bs_caml_array').caml_array_set(ea,ra,c('bs_caml_array').caml_array_get(ea,sa));if(sa>0){pa=sa;continue}else return c('bs_caml_array').caml_array_set(ea,0,qa);}else return c('bs_caml_array').caml_array_set(ea,ra,qa);}},ja=ea.length;for(var ka=((ja+1|0)/3|0)-1|0;ka>=0;--ka)ga(ja,ka,c('bs_caml_array').caml_array_get(ea,ka));for(var la=ja-1|0;la>=2;--la){var ma=c('bs_caml_array').caml_array_get(ea,la);c('bs_caml_array').caml_array_set(ea,la,c('bs_caml_array').caml_array_get(ea,0));ia(ha(la,0),ma)}if(ja>1){var na=c('bs_caml_array').caml_array_get(ea,1);c('bs_caml_array').caml_array_set(ea,1,c('bs_caml_array').caml_array_get(ea,0));return c('bs_caml_array').caml_array_set(ea,0,na)}else return 0;}function z(da,ea){var fa=function ma(na,oa,pa,qa,ra,sa,ta){var ua=na+oa|0,va=qa+ra|0,wa=na,xa=c('bs_caml_array').caml_array_get(ea,na),ya=qa,za=c('bs_caml_array').caml_array_get(pa,qa),ab=ta;while(true){var bb=ab,cb=za,db=ya,eb=xa,fb=wa;if(c('bs_curry')._2(da,eb,cb)<=0){c('bs_caml_array').caml_array_set(sa,bb,eb);var gb=fb+1|0;if(gb<ua){ab=bb+1|0;xa=c('bs_caml_array').caml_array_get(ea,gb);wa=gb;continue}else return n(pa,db,sa,bb+1|0,va-db|0);}else{c('bs_caml_array').caml_array_set(sa,bb,cb);var hb=db+1|0;if(hb<va){ab=bb+1|0;za=c('bs_caml_array').caml_array_get(pa,hb);ya=hb;continue}else return n(ea,fb,sa,bb+1|0,ua-fb|0);}}},ga=function ma(na,oa,pa,qa){for(var ra=0,sa=qa-1|0;ra<=sa;++ra){var ta=c('bs_caml_array').caml_array_get(ea,na+ra|0),ua=(pa+ra|0)-1|0;while(ua>=pa&&c('bs_curry')._2(da,c('bs_caml_array').caml_array_get(oa,ua),ta)>0){c('bs_caml_array').caml_array_set(oa,ua+1|0,c('bs_caml_array').caml_array_get(oa,ua));ua=ua-1|0}c('bs_caml_array').caml_array_set(oa,ua+1|0,ta)}return 0},ha=function ma(na,oa,pa,qa){if(qa<=5){return ga(na,oa,pa,qa)}else{var ra=qa/2|0,sa=qa-ra|0;ma(na+ra|0,oa,pa+ra|0,sa);ma(na,ea,na+sa|0,ra);return fa(na+sa|0,ra,oa,pa+ra|0,sa,oa,pa)}},ia=ea.length;if(ia<=5){return ga(0,ea,0,ia)}else{var ja=ia/2|0,ka=ia-ja|0,la=c('bs_caml_array').caml_make_vect(ka,c('bs_caml_array').caml_array_get(ea,0));ha(ja,la,0,ka);ha(0,ea,ka,ja);return fa(ka,ja,la,0,ka,ea,0)}}var aa=i,ba=c('bs_caml_array').caml_array_concat,ca=z;g.init=h;g.make_matrix=i;g.create_matrix=aa;g.append=k;g.concat=ba;g.sub=l;g.copy=j;g.fill=m;g.blit=n;g.to_list=s;g.of_list=u;g.iter=o;g.map=p;g.iteri=q;g.mapi=r;g.fold_left=v;g.fold_right=w;g.sort=y;g.stable_sort=z;g.fast_sort=ca}),null);
__d('bs_js_boolean',[],(function a(b,c,d,e,f,g){'use strict';function h(i){if(i){return true}else return false;}g.to_js_boolean=h}),null);
__d('mercurySingletonProviderRe',['bs_curry','CurrentUser'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j={},k=function m(n){var o=j[n];if(o!==undefined){return o}else{var p=c('bs_curry')._1(i[0],n);j[n]=p;return p}},l=function m(){return k(c('CurrentUser').getID())};return [j,k,l]}g.Provider=h}),null);
__d('utilsRe',['bs_array','bs_curry','bs_js_boolean','bs_caml_builtin_exceptions'],(function a(b,c,d,e,f,g){'use strict';function h(q){if(q==null){return 0}else return +q;}function i(q,r){if(q){return q[0]}else return r;}function j(q){return +((q==null?0:[q])!==0)}function k(q){if(q){return q[0]}else return 0;}function l(q){if(q==null){return 0}else return [+q];}function m(q){if(q){return c('bs_js_boolean').to_js_boolean(q[0])}else return undefined;}function n(q){if(q){return c('bs_js_boolean').to_js_boolean(q[0])}else return false;}function o(q,r){var s=q,t=r,u=0;while(true){var v=u,w=t;if(w){var x=w[1],y=c('bs_curry')._1(s,w[0]);if(y){u=[y[0],v];t=x;continue}else{t=x;continue}}else return v;}}function p(q){return c('bs_array').map(function(r){if(r){return r[0]}else throw [c('bs_caml_builtin_exceptions').invalid_argument,"arrayCompact: sorry, something went wrong."];},q.filter(function(r){if(r){return 1}else return 0;}))}g.isTruthy=h;g.$pipe$unknown=i;g.isDefined=j;g.isSomeTrue=k;g.nullUndefinedBooleanToOptionBool=l;g.optionBoolToNullUndefinedBoolean=m;g.optionBoolToBoolean=n;g.listFilterMap=o;g.arrayCompact=p}),null);
__d('mercuryRogerRe',['bs_array','Arbiter','utilsRe','bs_caml_obj','JSLogger','immutable','bs_js_boolean','MercuryThreads','MercuryDispatcher','MercuryActionStatus','mercurySingletonProviderRe'],(function a(b,c,d,e,f,g){'use strict';function h(s,t,u,v){var w=+(t>=s.timestamp),x=s.status,y=1-v||c('bs_caml_obj').caml_notequal(u,s.author);if(w!==0){if(x==null){if(y!==0){return 1}else return 0;}else if(y!==0&&c('bs_caml_obj').caml_equal(x,c('MercuryActionStatus').SUCCESS)){return 1}else return 0;}else return 0;}function i(s,t,u){if(t==null){return []}else{var v=s[0][t.thread_id];if(v!==undefined){return v.reduce(function(w,x,y,z){if(h(t,x.watermark,y,c('utilsRe').isTruthy(u))){return c('bs_array').append(w,[y])}else return w;},[])}else return [];}}function j(s,t){var u=s[0][t.thread_id];if(u!==undefined){return c('bs_js_boolean').to_js_boolean(u.reduce(function(v,w,x,y){if(v){return h(t,w.watermark,x,0)}else return 0;},1))}else return false;}function k(s,t){var u=s[0][t];if(u!==undefined){return u}else return c('immutable').OrderedMap();}function l(s,t,u){var v=s[0][t];if(v!==undefined){var w=v.get(u);if(w==null){return null}else return w;}else return null;}function m(s){var t=[{}],u=new (c('Arbiter'))(),v={__fbid:s,getSeenBy:function z(aa,ba){return i(t,aa,ba)},wasSeenByAll:function z(aa){return j(t,aa)},getSeenTimestamp:function z(aa,ba){return l(t,aa,ba)},getSeenTimestamps:function z(aa){return k(t,aa)},subscribe:function z(aa,ba){return u.subscribe(aa,ba)},mockInform:function z(aa,ba){u.inform(aa,ba);return 0}},w=[[]],x=c('MercuryDispatcher').getForFBID(s),y=c('MercuryThreads').getForFBID(s);x.subscribe("update-roger",function(z,aa){if(aa==null){return 0}else{Object.keys(aa).forEach(function(ba){var ca=y.getThreadMetaNow(ba);Object.keys(aa[ba]).forEach(function(ea){var fa=t[0][ba],ga=fa!==undefined?fa:c('immutable').OrderedMap(),ha=ca==null?0:[ca.participants],ia=0;if(ha){if(ha[0].indexOf(ea)===-1){w[0].push(ga);return 0}else ia=1;}else ia=1;if(ia===1){var ja=ga.get(ea),ka=aa[ba][ea],la=0;if(ja==null){la=2}else if(ka.watermark<=ja.watermark){return 0}else la=2;if(la===2){t[0][ba]=ga.set(ea,ka);return 0}}});var da=t[0][ba];if(da!==undefined){t[0][ba]=da.sort(function(ea,fa){return ea.watermark-fa.watermark|0});return 0}else return 0;});u.inform("change",aa);return 0}});x.subscribe("invalidate-global-state",function(z,aa){t[0]={};w[0]=[];return 0});c('Arbiter').subscribe(c('JSLogger').DUMP_EVENT,function(z,aa){aa.read_receipts={valid_receipts:t[0],bad_receipts:w[0]};return 0});return v}var n=[h,i,j,k,l,m],o=c('mercurySingletonProviderRe').Provider([m]),p=o[0],q=o[1],r=o[2];g.Model=n;g.data=p;g.getForFBID=q;g.get=r}),null);
__d('reasonReact',['bs_list','bs_curry','React','bs_caml_builtin_exceptions'],(function a(b,c,d,e,f,g){'use strict';function h(ia,ja,ka){var la=[ia,ja].concat(ka);return c('React').createElement.apply(null,la)}var i=null;function j(){return 0}function k(ia,ja,ka){c('bs_curry')._1(ia,ka);return c('bs_curry')._1(ja,ka)}var l=[j,k];function m(){return 0}function n(){return 0}function o(){return 0}function p(){return 0}function q(){return 1}function r(ia){return ia[4]}function s(){return "RenderNotImplemented"}function t(){return 0}function u(ia,ja){return 0}function v(ia,ja,ka){var la=ia.reasonProps;if(la==null){if(ja){return [c('bs_curry')._1(ja[0],ia)]}else throw [c('bs_caml_builtin_exceptions').invalid_argument,"A JS component called the Reason component "+(ka+" which didn't implement the JS->Reason React props conversion.")];}else return la;}function w(ia){return c('React').createClass({displayName:ia,self:function ja(ka,la){var ma=this;return [ma.handleMethod,ma.updateMethod,ma.enqueueMethod,ma.reduceMethod,ka,la]},transitionNextTotalState:function ja(ka,la){if(typeof la==="number"){return ka}else switch(la.tag|0){case 0:return {reasonState:la[0],reasonStateVersion:ka.reasonStateVersion+1|0,reasonStateVersionUsedToComputeSubelements:ka.reasonStateVersionUsedToComputeSubelements,sideEffects:ka.sideEffects};case 1:return {reasonState:la[0],reasonStateVersion:ka.reasonStateVersion+1|0,reasonStateVersionUsedToComputeSubelements:ka.reasonStateVersionUsedToComputeSubelements+1|0,sideEffects:ka.sideEffects};case 2:return {reasonState:ka.reasonState,reasonStateVersion:ka.reasonStateVersion+1|0,reasonStateVersionUsedToComputeSubelements:ka.reasonStateVersionUsedToComputeSubelements+1|0,sideEffects:[la[0],ka.sideEffects]};case 3:return {reasonState:la[0],reasonStateVersion:ka.reasonStateVersion+1|0,reasonStateVersionUsedToComputeSubelements:ka.reasonStateVersionUsedToComputeSubelements,sideEffects:[la[1],ka.sideEffects]};case 4:return {reasonState:la[0],reasonStateVersion:ka.reasonStateVersion+1|0,reasonStateVersionUsedToComputeSubelements:ka.reasonStateVersionUsedToComputeSubelements+1|0,sideEffects:[la[1],ka.sideEffects]};}},getInitialState:function ja(){var ka=this,la=v(ka.props,ka.jsPropsToReason,ia),ma=c('bs_curry')._1(la[0][10],0);return {reasonState:ma,reasonStateVersion:1,reasonStateVersionUsedToComputeSubelements:1,sideEffects:0}},componentDidMount:function ja(){var ka=this,la=this,ma=v(la.props,la.jsPropsToReason,ia),na=ma[0];if(na[4]!==m){var oa=la.state,pa=oa.reasonState,qa=ka.self(pa,na[11]),ra=c('bs_curry')._1(na[4],qa),sa=ka.transitionNextTotalState(oa,ra);if(sa.reasonStateVersion!==oa.reasonStateVersion){return la.setState(sa)}else return 0;}else return 0;},componentDidUpdate:function ja(ka,la){var ma=this,na=this,oa=na.state,pa=oa.reasonState,qa=na.props,ra=v(qa,na.jsPropsToReason,ia),sa=ra[0];if(sa[5]!==o){var ta=+(ka===qa),ua=ta!==0?ra:v(ka,na.jsPropsToReason,ia),va=la.reasonState,wa=ma.self(pa,sa[11]),xa=wa[0],ya=wa[1],za=wa[2],ab=wa[3],bb=ua[0][11],cb=[xa,ya,za,ab,va,bb];return c('bs_curry')._1(sa[5],[cb,wa])}else return 0;},componentWillUnmount:function ja(){var ka=this,la=this,ma=v(la.props,la.jsPropsToReason,ia),na=ma[0];if(na[6]!==p){var oa=la.state,pa=oa.reasonState;return c('bs_curry')._1(na[6],ka.self(pa,na[11]))}else return 0;},componentWillUpdate:function ja(ka,la){var ma=this,na=this,oa=v(ka,na.jsPropsToReason,ia),pa=oa[0];if(pa[7]!==n){var qa=na.props,ra=+(ka===qa),sa=ra!==0?oa:v(qa,na.jsPropsToReason,ia),ta=na.state,ua=ta.reasonState,va=la.reasonState,wa=ma.self(va,pa[11]),xa=wa[0],ya=wa[1],za=wa[2],ab=wa[3],bb=sa[0][11],cb=[xa,ya,za,ab,ua,bb];return c('bs_curry')._1(pa[7],[cb,wa])}else return 0;},componentWillReceiveProps:function ja(ka){var la=this,ma=this,na=v(ka,ma.jsPropsToReason,ia),oa=na[0];if(oa[3]!==r){var pa=ma.props,qa=+(ka===pa),ra=qa!==0?na:v(pa,ma.jsPropsToReason,ia),sa=ra[0];return ma.setState(function(ta,ua){var va=ta.reasonState,wa=ta.reasonStateVersion,xa=la.self(va,sa[11]),ya=c('bs_curry')._1(oa[3],xa),za=+(ya!==va),ab=za!==0?wa+1|0:wa;if(ab!==wa){return {reasonState:ya,reasonStateVersion:ab,reasonStateVersionUsedToComputeSubelements:ta.reasonStateVersionUsedToComputeSubelements,sideEffects:ya.sideEffects}}else return ta;})}else return 0;},shouldComponentUpdate:function ja(ka,la,ma){var na=this,oa=this,pa=oa.props,qa=+(ka!==pa),ra=v(oa.props,oa.jsPropsToReason,ia),sa=+(ka===pa),ta=sa!==0?ra:v(ka,oa.jsPropsToReason,ia),ua=ta[0],va=la.reasonStateVersion,wa=la.reasonStateVersionUsedToComputeSubelements,xa=+(wa!==va),ya=qa||xa,za=la.reasonState,ab=na.self(za,ua[11]),bb;if(ya&&ua[8]!==q){var cb=oa.state,db=cb.reasonState,eb=ab[0],fb=ab[1],gb=ab[2],hb=ab[3],ib=ra[0][11],jb=[eb,fb,gb,hb,db,ib];bb=c('bs_curry')._1(ua[8],[jb,ab])}else bb=ya;la.reasonStateVersionUsedToComputeSubelements=va;var kb=c('bs_list').rev(la.sideEffects);if(kb!==0){c('bs_list').iter(function(mb){return c('bs_curry')._1(mb,ab)},kb);var lb={reasonState:la.reasonState,reasonStateVersion:la.reasonStateVersion,reasonStateVersionUsedToComputeSubelements:va,sideEffects:0};oa.setState(lb)}return bb},enqueueMethod:function ja(ka){var la=this,ma=this;return function(na){var oa=c('bs_curry')._1(ka,na);return ma.setState(function(pa,qa){var ra=pa.reasonState,sa=c('bs_curry')._1(oa,ra);if(sa){var ta=la.transitionNextTotalState(pa,sa);if(ta.reasonStateVersion!==pa.reasonStateVersion){return ta}else return i;}else return i;})}},handleMethod:function ja(ka){var la=this,ma=this;return function(na){var oa=ma.state,pa=oa.reasonState,qa=v(ma.props,ma.jsPropsToReason,ia);return c('bs_curry')._2(ka,na,la.self(pa,qa[0][11]))}},updateMethod:function ja(ka){var la=this,ma=this;return function(na){var oa=ma.state,pa=oa.reasonState,qa=v(ma.props,ma.jsPropsToReason,ia),ra=c('bs_curry')._2(ka,na,la.self(pa,qa[0][11]));if(ra){var sa=la.transitionNextTotalState(oa,ra);if(sa.reasonStateVersion!==oa.reasonStateVersion){return ma.setState(sa)}else return 0;}else return i;}},reduceMethod:function ja(ka){var la=this,ma=this;return function(na){var oa=v(ma.props,ma.jsPropsToReason,ia),pa=oa[0];if(pa[12]!==u){var qa=c('bs_curry')._1(ka,na);return ma.setState(function(ra,sa){var ta=ra.reasonState,ua=c('bs_curry')._2(pa[12],qa,ta);if(ua){var va=la.transitionNextTotalState(ra,ua);if(va.reasonStateVersion!==ra.reasonStateVersion){return va}else return i;}else return i;})}else return 0;}},render:function ja(){var ka=this,la=this,ma=v(la.props,la.jsPropsToReason,ia),na=ma[0],oa=la.state,pa=oa.reasonState;return c('bs_curry')._1(na[9],ka.self(pa,na[11]))}})}function x(ia){return [ia,w(ia),[0],r,m,o,p,n,q,s,t,0,u,0]}var y=x,z=x,aa=x,ba=x,ca=x,da=x;function ea(ia,ja,ka){var la=ia?ia[0]:undefined,ma=ja?ja[0]:undefined,na=[ka],oa=ka[13];if(oa){return c('bs_curry')._2(oa[0],la,ma)}else return c('React').createElement(ka[1],{key:la,ref:ma,reasonProps:na});}function fa(ia,ja){var ka=ia[1].prototype;ka.jsPropsToReason=[ja];return ia[1]}var ga=z("interop");function ha(ia,ja,ka){var la=[function(na,oa){var pa=ia,qa=ja,ra=ka,sa=na,ta=oa,ua=Object.assign(Object.assign({},qa),{ref:ta,key:sa}),va=[pa,ua].concat(ra);return c('React').createElement.apply(null,va)}],ma=ga.slice();ma[13]=la;return ma}g.Callback=l;g.statelessComponent=y;g.statelessComponentWithRetainedProps=ba;g.reducerComponent=ca;g.reducerComponentWithRetainedProps=da;g.statefulComponent=z;g.statefulComponentWithRetainedProps=aa;g.element=ea;g.wrapReasonForJs=fa;g.createDomElement=h;g.wrapJsForReason=ha}),null);
__d('MercuryThreadTitle.react',['fbt','MercuryIDs','MessengerTextWithEmoticons.react','MercuryParticipantListRenderer','MercuryParticipants','React','TextWithEmoticons.react'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('React').PropTypes,j=c('React').createClass({displayName:'MercuryThreadTitle',propTypes:{isNewThread:i.bool,thread:i.object.isRequired,viewer:i.string.isRequired,showUnreadCount:i.bool,useShortName:i.bool,useAndSeparator:i.bool},getDefaultProps:function k(){return {isNewThread:false,showUnreadCount:false,useShortName:false,useAndSeparator:false}},getInitialState:function k(){return {participantNames:''}},componentDidMount:function k(){this._renderParticipantsList(this.props)},componentWillReceiveProps:function k(l){this._renderParticipantsList(l)},render:function k(){return c('React').createElement('span',{className:this.props.className},this.props.thread.name?this._renderThreadTitle():this.state.participantNames,this.props.children)},getTitle:function k(){return this.state.participantNames},_renderThreadTitle:function k(){var l=this.props.thread,m=c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:l.name});if(!l.unread_count||!this.props.showUnreadCount)return m;return this._renderTitleWithUnreadCount(m,l.unread_count)},_renderParticipantsList:function k(l){if(l.thread.name)return;this.setState({participantNames:''});var m=c('MercuryIDs').getParticipantIDFromUserID(l.viewer),n=l.thread.participants||[];if(n.length>1)n=n.filter(function(o){return o!=m});c('MercuryParticipants').getMulti(n,function(o){if(!this.isMounted())return;var p=n.map(function(v){return o[v]}),q=l.thread.custom_nickname?{}:null,r=c('MessengerTextWithEmoticons.react');if(q)for(var s in l.thread.custom_nickname)q[s]=c('React').createElement(r,{renderEmoticons:true,renderEmoji:true,text:l.thread.custom_nickname[s]});var t=new (c('MercuryParticipantListRenderer'))().setUseShortName(l.useShortName).setUseAndSeparator(l.useAndSeparator).setIsNewThread(l.isNewThread).setNickname(q).renderParticipantList(p),u=l.showUnreadCount&&l.thread.unread_count?this._renderTitleWithUnreadCount(t,l.thread.unread_count):t;this.setState({participantNames:u})}.bind(this))},_renderTitleWithUnreadCount:function k(l,m){return h._("{conversation-title} ({unread-count})",[h.param('conversation-title',l),h.param('unread-count',m)])}});f.exports=j}),null);
__d('MercuryShareAttachmentRenderLocations',[],(function a(b,c,d,e,f,g){'use strict';var h={CHAT:'chat',CHAT_PREVIEW:'chat_preview',MESSENGER:'messenger',PAGES_INBOX:'pages_inbox',getValues:function i(){return [h.CHAT,h.CHAT_PREVIEW,h.MESSENGER,h.PAGES_INBOX]},isPreview:function i(j){return j===h.CHAT_PREVIEW}};f.exports=h}),null);
__d('MercuryMessages',['invariant','BanzaiODS','ChatReliabilityInstrumentation','EventEmitter','ImmutableObject','LogHistory','Map','MercuryActionStatus','MercuryActionType','MercuryAssert','MercuryAttachment','MercuryDispatcher','MercuryIDs','MercuryLogMessageType','MercuryMessageClientState','MercuryPayloadSource','MercurySingletonProvider','MercuryMessageActions','MercuryMessageIDs','MessagingGiftWrapConstants','MessengerSharedMediaActions','RangedCallbackManager','MercurySendMessageFields','MercuryServerRequests','MercuryThreadActions','MercuryThreadInformer','MercuryThreads','URI','isMessengerDotComURI','setImmediate'],(function a(b,c,d,e,f,g,h){'use strict';var i=new (c('EventEmitter'))(),j=c('LogHistory').getInstance('mercury_messages');function k(p){switch(p){case c('MercuryPayloadSource').UNKNOWN:case c('MercuryPayloadSource').SERVER_INITIAL_DATA:case c('MercuryPayloadSource').SERVER_FETCH_THREAD_INFO:case c('MercuryPayloadSource').SERVER_THREAD_SYNC:return true;}return false}l.getForFBID=function(p){return o.getForFBID(p)};l.get=function(){return o.get()};function l(p){this.$MercuryMessages1=p;this.$MercuryMessages2=c('MercuryMessageActions').getForFBID(this.$MercuryMessages1);this.$MercuryMessages3=c('MercuryServerRequests').getForFBID(this.$MercuryMessages1);this.$MercuryMessages4=c('MercuryThreadInformer').getForFBID(this.$MercuryMessages1);this.$MercuryMessages5=c('MercuryThreads').getForFBID(this.$MercuryMessages1);this.$MercuryMessages6=c('MercuryThreadActions').getForFBID(this.$MercuryMessages1);this.$MercuryMessages7=c('MercuryDispatcher').getForFBID(this.$MercuryMessages1);this.$MercuryMessages8=false;this.$MercuryMessages9={};this.$MercuryMessages10={};this.$MercuryMessages11={};this.$MercuryMessages12=new (c('Map'))();this.$MercuryMessages13={};this.$MercuryMessages14={};this.$MercuryMessages7.subscribe('update-messages',function(q,r){var s=(r.actions||[]).filter(function(u){var v=u.action_type,w=u.thread_id&&(v==c('MercuryActionType').LOG_MESSAGE||v==c('MercuryActionType').USER_GENERATED_MESSAGE||v==c('MercuryActionType').SEND_MESSAGE||v==c('MercuryActionType').DELETE_THREAD||v==c('MercuryActionType').DELETE_MESSAGES),x=u.upload_id&&u.upload_data&&(v==c('MercuryActionType').CANCEL_ATTACHMENT_PLACEHOLDER||v==c('MercuryActionType').CONFIRM_ATTACHMENT_PLACEHOLDER),y=v==c('MercuryActionType').REACTION_UPDATE,z=v==c('MercuryActionType').LIVE_LOCATION_UPDATE,aa=u.replaced_message_id&&v==c('MercuryActionType').REPLACE_MESSAGE,ba=u.unwrapped_message_id&&v==c('MercuryActionType').UNWRAP_MESSAGE;return w||x||y||z||aa||ba}),t=k(r.payload_source);this.handleUpdates(s,t,r.payload_source,r.from_client);if(r.end_of_history)this.$MercuryMessages15(r.end_of_history,r.payload_source);if(this.$MercuryMessages8){this.$MercuryMessages8=false;i.emit('change')}}.bind(this));this.$MercuryMessages7.subscribe('invalidate-thread-state',function(q,r){this.$MercuryMessages16(r)}.bind(this));this.$MercuryMessages7.subscribe('invalidate-global-state',function(){return this.invalidateGlobalState()}.bind(this));j.debug('constructed',JSON.stringify({fbid:this.$MercuryMessages1}))}l.prototype.getMessagesFromIDs=function(p){return (p||[]).map(function(q){return this.$MercuryMessages17(q)}.bind(this)).filter(function(q){return q})};l.prototype.getServerMessageID=function(p){var q=p;if(this.$MercuryMessages13[p])q=this.$MercuryMessages13[p];return q};l.prototype.hasLoadedNMessages=function(p,q){var r=this.$MercuryMessages18(p);return r.hasReachedEndOfArray()||r.getCurrentArraySize()>=q};l.prototype.hasLoadedExactlyNMessages=function(p,q){var r=this.$MercuryMessages18(p);return r.getCurrentArraySize()==q};l.prototype.invalidateGlobalState=function(){var p=Object.keys(this.$MercuryMessages10);this.$MercuryMessages9={};this.$MercuryMessages10={};this.$MercuryMessages11={};this.$MercuryMessages12=new (c('Map'))();this.$MercuryMessages13={};p.map(function(q){return this.$MercuryMessages4.invalidatedThread(q)}.bind(this))};l.prototype.getThreadMessagesRange=function(p,q,r,s,t,u){var v=this.$MercuryMessages18(p),w=function(ga){s(this.$MercuryMessages19(ga))}.bind(this),x=v.executeOrEnqueue(q,r,w),y=v.getUnavailableResources(x),z=this.$MercuryMessages9[p];if(y.length&&!z){var aa=v.getCurrentArraySize(),ba=this.$MercuryMessages11[p]||0,ca=aa-ba,da=y.length+ba,ea=this.getCurrentlyLoadedMessages(p),fa=ea.length?ea[0].timestamp:null;this.$MercuryMessages3.fetchThreadMessages(p,ca,da,fa,t,u)}else this.$MercuryMessages9[p]=false;return x};l.prototype.getThreadMessagesRangeNow=function(p,q,r){var s=this.$MercuryMessages18(p),t=[];for(var u=q;u<q+r;u++){var v=s.getResourceAtIndex(u),w=v&&this.$MercuryMessages17(v);w&&t.push(w)}return t};l.prototype.getThreadMessagesSinceTimestamp=function(p,q){var r=this.$MercuryMessages18(p),s=r.getElementsUntil(q);return this.$MercuryMessages19(s)};l.prototype.hasLoadedAllMessages=function(p){return this.$MercuryMessages18(p).hasReachedEndOfArray()};l.prototype.getCurrentlyLoadedMessages=function(p){var q=this.$MercuryMessages18(p).getAllResources();return this.$MercuryMessages19(q)};l.prototype.unsubscribe=function(p,q){c('MercuryAssert').isThreadID(q);var r=this.$MercuryMessages18(q);r.unsubscribe(p)};l.prototype.$MercuryMessages20=function(p,q){n(q);this.$MercuryMessages12.set(p,new (c('ImmutableObject'))(q))};l.prototype.$MercuryMessages21=function(p,q){var r=this.$MercuryMessages12.get(p);if(r){var s=r.page_admin_notes?r.page_admin_notes.slice():[],t=false,u=true;for(var v=0;v<s.length;++v)if(s[v].id===q.id){t=true;u=false;break}else if((s[v].id===null||s[v].id===undefined)&&s[v].body===q.body){t=true;s[v]=q}if(!t)s.push(q);if(u){var w={};w.page_admin_notes=s;this.$MercuryMessages22(p,r,w)}}};l.prototype.$MercuryMessages22=function(p,q,r){var s=c('ImmutableObject').set(q,r);this.$MercuryMessages12.set(p,s);return s};l.prototype.$MercuryMessages23=function(p,q,r){if(p==c('MercuryPayloadSource').CLIENT_CHANNEL_MESSAGE){var s=this.getThreadMessagesSinceTimestamp(q,r);if(s.length>0){c('BanzaiODS').bumpEntityKey('chat.web','channel.messages_reordered');return true}}else if(p===c('MercuryPayloadSource').SERVER_INVALIDATE_THREAD_STATE||p===c('MercuryPayloadSource').SERVER_INVALIDATE_GLOBAL_STATE)return true;return false};l.prototype.$MercuryMessages24=function(p,q){var r=p.action_type;if(q==c('MercuryPayloadSource').CLIENT_CHANNEL_MESSAGE&&r==c('MercuryActionType').USER_GENERATED_MESSAGE&&p.offline_threading_id&&this.$MercuryMessages13[p.offline_threading_id]===p.offline_threading_id){p.client_message_id=p.offline_threading_id;p.status=c('MercuryActionStatus').SUCCESS;p.action_type=c('MercuryActionType').SEND_MESSAGE;r=p.action_type}if(q===c('MercuryPayloadSource').CLIENT_CHANNEL_MESSAGE&&r==c('MercuryActionType').USER_GENERATED_MESSAGE){var s=this.$MercuryMessages5.getThreadMetaNow(p.thread_id);if(s&&s.folder)p.folder=s.folder;c('ChatReliabilityInstrumentation').logMESSAGE_RECEIVED()}return p};l.prototype.handleUpdates=function(p,q,r,s){var t=void 0,u={};for(var v=0;v<p.length;v++){var w=this.$MercuryMessages24(p[v],r),x=w.action_type,y=w.message_id?this.$MercuryMessages17(w.message_id):null;if(x==c('MercuryActionType').LOG_MESSAGE)if(this.isLocalMessage(w))continue;if(r==c('MercuryPayloadSource').SERVER_SEARCH){if(!this.$MercuryMessages12.has(w.message_id))this.$MercuryMessages20(w.message_id,w);continue}else if(w.client_state===c('MercuryMessageClientState').SEND_TO_SERVER){this.$MercuryMessages20(w.message_id,w);continue}else if(x==c('MercuryActionType').SEND_MESSAGE){var z=w.client_message_id,aa=this.$MercuryMessages17(z);if(z&&aa&&w.status){var ba=aa.status;if(aa.status==c('MercuryActionStatus').SUCCESS)continue;if(!u[w.thread_id])u[w.thread_id]=[];this.$MercuryMessages25(w);if(typeof ba!==undefined||w.status==c('MercuryActionStatus').FAILED_UNKNOWN_REASON||w.status==c('MercuryActionStatus').UNABLE_TO_CONFIRM||w.status==c('MercuryActionStatus').SUCCESS||w.status==c('MercuryActionStatus').ERROR){var ca=this.$MercuryMessages17(z);if(ca)this.$MercuryMessages26(w.thread_id,ca.message_id,r);}}continue}else if(x==c('MercuryActionType').DELETE_THREAD){this.$MercuryMessages18(w.thread_id).removeAllResources();continue}else if(x==c('MercuryActionType').DELETE_MESSAGES){this.$MercuryMessages27(w.thread_id,w.message_ids,r);c('setImmediate')(function(){this.$MercuryMessages6.updateSnippet(w.thread_id,w.message_ids)}.bind(this));continue}else if(x===c('MercuryActionType').REACTION_UPDATE){if(this.$MercuryMessages28(w))this.$MercuryMessages29(u,w,r);continue}else if(x===c('MercuryActionType').LIVE_LOCATION_UPDATE){if(this.$MercuryMessages30(w))this.$MercuryMessages29(u,w,r);continue}else if(x==c('MercuryActionType').REPLACE_MESSAGE){if(this.$MercuryMessages31(w)){this.$MercuryMessages29(u,w,r);q=true}continue}else if(w.offline_threading_id&&this.$MercuryMessages13[w.offline_threading_id]&&(r!=c('MercuryPayloadSource').SERVER_FETCH_THREAD_INFO||this.$MercuryMessages13[w.offline_threading_id]===w.message_id)||y){if(y&&w.ranges&&w.ranges.length>0){var da=y.message_id;this.$MercuryMessages22(this.$MercuryMessages13[da]||da,y,{ranges:w.ranges});this.$MercuryMessages26(y.thread_id,y.message_id,'link_shim')}continue}else if(x===c('MercuryActionType').CONFIRM_ATTACHMENT_PLACEHOLDER){this.$MercuryMessages32(w.upload_id,w.upload_data);continue}else if(x===c('MercuryActionType').CANCEL_ATTACHMENT_PLACEHOLDER){this.$MercuryMessages33(w.upload_id,w.upload_data);continue}else if(x==c('MercuryActionType').UNWRAP_MESSAGE){if(this.$MercuryMessages34(w))this.$MercuryMessages26(w.thread_id,w.unwrapped_message_id,r);}else{if(r===c('MercuryPayloadSource').CLIENT_SEND_MESSAGE){this.$MercuryMessages13[w.message_id]=w.message_id;if(w.thread_id=='root:'+w.offline_threading_id)this.$MercuryMessages18(w.thread_id).setReachedEndOfArray();}if(x==c('MercuryActionType').LOG_MESSAGE&&w.log_message_type==c('MercuryLogMessageType').SERVER_ERROR)this.$MercuryMessages9[w.thread_id]=true;if(w.client_state===c('MercuryMessageClientState').DO_NOT_SEND_TO_SERVER&&w.upload_id)this.$MercuryMessages14[w.upload_id]=w;if(!u[w.thread_id])u[w.thread_id]=[];u[w.thread_id].push(w.message_id);this.$MercuryMessages20(w.message_id,w);if(w.offline_threading_id&&w.offline_threading_id!=w.message_id){this.$MercuryMessages13[w.offline_threading_id]=w.message_id;c('MercuryMessageIDs').addServerID(w.offline_threading_id,w.message_id);if(w.threading_id)c('MercuryMessageIDs').addServerID(w.threading_id,w.message_id);}if(w[c('MercurySendMessageFields').MANUAL_RETRY_CNT]>0){t=this.$MercuryMessages18(w.thread_id);t.resortResources([w.message_id]);this.$MercuryMessages35(w.thread_id,c('MercuryPayloadSource').CLIENT_SEND_MESSAGE)}q=q||this.$MercuryMessages23(r,w.thread_id,w.timestamp);if(!q){var ea=this.$MercuryMessages17(w.message_id);if(ea)this.$MercuryMessages36(ea);}continue}}for(var fa in u){t=this.$MercuryMessages18(fa);var ga=t.getAllResources(),ha=ga.filter(function(ia){var ja=this.$MercuryMessages12.get(ia);if(!ja)return true;return ja.action_type==c('MercuryActionType').LOG_MESSAGE&&ja.log_message_type==c('MercuryLogMessageType').SERVER_ERROR}.bind(this));t.removeResources(ha);if(s)this.$MercuryMessages37(fa,u[fa]);if(q){t.addResources(u[fa]);this.$MercuryMessages35(fa,r)}else t.addResourcesWithoutSorting(u[fa].reverse(),0);this.$MercuryMessages4.updatedThread(fa)}};l.prototype.$MercuryMessages29=function(p,q,r){if(!p[q.thread_id])p[q.thread_id]=[];this.$MercuryMessages18(q.thread_id).removeResources([q.replaced_message_id,q.offline_threading_id]);if(q.action_type!==c('MercuryActionType').REACTION_UPDATE&&q.action_type!==c('MercuryActionType').LIVE_LOCATION_UPDATE)p[q.thread_id].push(q.message_id);if(q.replaced_message_id)this.$MercuryMessages26(q.thread_id,q.replaced_message_id,r);this.$MercuryMessages26(q.thread_id,q.message_id||q.messageId,r)};l.prototype.isFirstMessage=function(p){var q=this.$MercuryMessages18(p.thread_id);if(q.getCurrentArraySize()===0)return false;var r=q.getResourceAtIndex(q.getCurrentArraySize()-1),s=this.$MercuryMessages17(r),t=s&&s.message_id,u=this.$MercuryMessages17(p.message_id),v=u&&u.message_id;if(!t||!v)return false;return q.hasReachedEndOfArray()&&t==v};l.prototype.isLocalMessage=function(p){if(p.offline_threading_id!==null&&p.offline_threading_id===p.message_id)return true;return false};l.prototype.$MercuryMessages27=function(p,q,r){if(!q.length)return;this.$MercuryMessages38(p,q,r);if(r!==c('MercuryPayloadSource').CLIENT_CHANNEL_MESSAGE)this.$MercuryMessages3.deleteMessages(p,q);var s=this.$MercuryMessages19(q);for(var t=0;t<s.length;t++){var u=s[t];if(u&&u.has_attachment){var v=u.attachments.map(function(w){if(c('MercuryAttachment').isPhotoAttachment(w)||c('MercuryAttachment').isVideoAttachment(w))return w.metadata.fbid;return null}).filter(function(w){return w!==null});c('MessengerSharedMediaActions').deletePhotos(c('MercuryIDs').getThreadFBIDFromThreadID(u.thread_id),v)}}};l.prototype.$MercuryMessages38=function(p,q,r){var s=q.map(function(u){var v=this.$MercuryMessages17(u);return v&&v.message_id}.bind(this)).filter(function(u){return !!u}),t=this.$MercuryMessages18(p);t.removeResources(s);this.$MercuryMessages35(p,r)};l.prototype.$MercuryMessages25=function(p){var q=p.client_message_id;if(!q)return false;var r=this.$MercuryMessages17(q);if(!r)return false;var s={};s.status=p.status;if(p.status===c('MercuryActionStatus').SUCCESS||p.error_data)s.error_data=p.error_data;var t=p.message_id;if(this.$MercuryMessages12.has(t)){if(r)this.$MercuryMessages22(t,r,s);return false}if(p.threading_id)s.threading_id=p.threading_id;if(p.timestamp)s.timestamp=p.timestamp;if(p.log_message_data)s.log_message_data=p.log_message_data;if(p.ranges&&p.ranges.length){n(p);s.ranges=p.ranges}if(p.attachments&&p.attachments.length){s.raw_attachments=null;s.attachments=p.attachments}this.$MercuryMessages13[q]=t;c('MercuryMessageIDs').addServerID(q,t);if(r){var u=this.$MercuryMessages22(t,r,s);this.$MercuryMessages12.set(q,new (c('ImmutableObject'))());if(m(u))this.$MercuryMessages11[u.thread_id]--;}return true};l.prototype.$MercuryMessages28=function(p){var q,r=p.messageId,s=p.reaction,t=p.userId,u=this.$MercuryMessages17(r);if(!u)return false;var v=babelHelpers['extends']({},u.reactions,(q={},q[t]=s,q));if(!s)delete v[t];this.$MercuryMessages22(r,u,{reactions:v});return true};l.prototype.$MercuryMessages30=function(p){var q=p.messageId,r=p.liveLocation,s=this.$MercuryMessages17(q);if(!s||!s.attachments||s.attachments.length!==1)return false;var t=s.attachments[0];if(!t||!t.share)return false;var u=t.share.target;if(!u||!u.live_location_id)return false;var v=babelHelpers['extends']({},t,{share:babelHelpers['extends']({},t.share,{target:babelHelpers['extends']({},r,{live_location_id:u.live_location_id})})});this.$MercuryMessages22(q,s,{attachments:[v]});return true};l.prototype.$MercuryMessages31=function(p){var q=p.replaced_message_id;if(!q)return false;var r=this.$MercuryMessages17(q);if(!r)return false;var s=p.message_id,t={};if(p.status)t.status=p.status;if(p.timestamp&&s!==q)t.timestamp=p.timestamp;if(p.log_message_data)t.log_message_data=p.log_message_data;if(p.ranges&&p.ranges.length){n(p);t.ranges=p.ranges}if(p.meta_ranges)t.meta_ranges=p.meta_ranges;if(p.attachments&&p.attachments.length){t.raw_attachments=null;t.attachments=p.attachments}if(p.body&&p.body!==r.body)t.body=p.body;if(p.platform_xmd&&p.platform_xmd!==r.platform_xmd)t.platform_xmd=p.platform_xmd;if(p.profile_ranges&&p.profile_ranges!==r.profile_ranges)t.profile_ranges=p.profile_ranges;if(Object.keys(t).length===0)return false;c('MercuryMessageIDs').addServerID(s,s);this.$MercuryMessages22(s,r,t);if(q!==s){this.$MercuryMessages12['delete'](q);if(r.message_id&&this.$MercuryMessages12.has(r.message_id))this.$MercuryMessages12['delete'](r.message_id);}return true};l.prototype.$MercuryMessages34=function(p){var q=this.$MercuryMessages17(p.unwrapped_message_id);if(!q||!q.tags)return false;var r=q.tags.slice(0);r.push(c('MessagingGiftWrapConstants').UNWRAPPED_TAG);var s={tags:r};this.$MercuryMessages22(p.unwrapped_message_id,q,s);return true};l.prototype.getNumberLocalMessages=function(p){return this.$MercuryMessages11[p]||0};l.prototype.$MercuryMessages32=function(p,q){var r=this.$MercuryMessages39(p,q);delete r.preview_attachments;this.$MercuryMessages3.sendNewMessage(r)};l.prototype.$MercuryMessages33=function(p,q){var r=this.$MercuryMessages39(p,q);this.$MercuryMessages38(r.thread_id,[r.message_id]);if(this.$MercuryMessages11[r.thread_id])this.$MercuryMessages11[r.thread_id]--;};l.prototype.$MercuryMessages39=function(p,q){var r=this.$MercuryMessages14[p];r||h(0);r.image_ids=q.image_ids;r.file_ids=q.file_ids;r.audio_ids=q.audio_ids;r.gif_ids=q.gif_ids;r.video_ids=q.video_ids;r.client_state=c('MercuryMessageClientState').SEND_TO_SERVER;delete this.$MercuryMessages14[p];return r};l.prototype.$MercuryMessages26=function(p,q,r){this.$MercuryMessages8=true;this.$MercuryMessages4.updatedMessage(p,q,r)};l.prototype.$MercuryMessages36=function(p){this.$MercuryMessages8=true;this.$MercuryMessages4.receivedMessage(p)};l.prototype.$MercuryMessages35=function(p,q){this.$MercuryMessages8=true;this.$MercuryMessages4.reorderedMessages(p,q)};l.prototype.$MercuryMessages16=function(p){if(!this.$MercuryMessages10[p])return;var q=this.$MercuryMessages10[p].getAllResources();q.forEach(function(r){var s=this.$MercuryMessages17(r),t=undefined;if(s)t=s.offline_threading_id;this.$MercuryMessages12['delete'](r);if(t){var u=this.$MercuryMessages13[t];if(u)this.$MercuryMessages12['delete'](u);delete this.$MercuryMessages13[t]}delete this.$MercuryMessages13[r]}.bind(this));delete this.$MercuryMessages10[p]};l.addListener=function(p,q){return i.addListener(p,q)};l.prototype.$MercuryMessages17=function(p){var q=p;if(this.$MercuryMessages13[p])q=this.$MercuryMessages13[p];return this.$MercuryMessages12.get(q)};l.prototype.$MercuryMessages18=function(p){if(!this.$MercuryMessages10[p])this.$MercuryMessages10[p]=new (c('RangedCallbackManager'))(function(q){var r=this.$MercuryMessages17(q);return r&&r.timestamp}.bind(this),function(q,r){return r-q});return this.$MercuryMessages10[p]};l.prototype.$MercuryMessages15=function(p,q){p.forEach(function(r){var s=this.$MercuryMessages18(r);s.setReachedEndOfArray();this.$MercuryMessages35(r,q)}.bind(this))};l.prototype.$MercuryMessages19=function(p){var q=p.reduce(function(r,s){var t=this.$MercuryMessages17(s);if(t)r.push(t);return r}.bind(this),[]);return q.reverse()};l.prototype.$MercuryMessages37=function(p,q){var r=q.filter(function(s){return m(this.$MercuryMessages17(s))}.bind(this));if(!this.$MercuryMessages11[p])this.$MercuryMessages11[p]=0;this.$MercuryMessages11[p]+=r.length};function m(p){var q=p.action_type;if(q==c('MercuryActionType').USER_GENERATED_MESSAGE)return true;switch(p.log_message_type){case c('MercuryLogMessageType').SUBSCRIBE:case c('MercuryLogMessageType').UNSUBSCRIBE:case c('MercuryLogMessageType').SERVER_ERROR:case c('MercuryLogMessageType').LIVE_LISTEN:return false;default:return true;}}function n(p){if(!p.ranges)return;p.ranges.forEach(function(q){if(!q.entity||q.entity.external||!q.entity.url)return;var r=new (c('URI'))(q.entity.url);if(c('isMessengerDotComURI')(c('URI').getRequestURI())&&!r.getDomain()){r.setProtocol('https').setDomain('www.facebook.com');q.entity.url=r.toString()}})}var o=new (c('MercurySingletonProvider'))(l);f.exports=l}),null);
__d('MercuryDelayedRoger',['ArbiterMixin','LiveTimer','MercuryActionStatus','MercuryConfig','MercuryMessages','mercuryRogerRe','MercurySingletonProvider','MercuryThreadInformer','MercuryThreads','mixin','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g){var h,i,j=c('MercuryConfig')['roger.seen_delay'];h=babelHelpers.inherits(k,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;k.getForFBID=function(m){'use strict';return l.getForFBID(m)};k.get=function(){'use strict';return l.get()};function k(m){'use strict';i.constructor.call(this);this.$MercuryDelayedRoger9=function(event,n){var o={};for(var p in n)if(this.$MercuryDelayedRoger11(p))o[p]=true;Object.keys(o).forEach(function(q){return this.$MercuryDelayedRoger12(o)}.bind(this))}.bind(this);this.$MercuryDelayedRoger1=m;this.$MercuryDelayedRoger2=c('mercuryRogerRe').getForFBID(m);this.$MercuryDelayedRoger4={};this.$MercuryDelayedRoger5={};this.$MercuryDelayedRoger2.subscribe('change',function(n,o){for(var p in o)!this.$MercuryDelayedRoger5[p]&&this.$MercuryDelayedRoger8(p);}.bind(this));this.$MercuryDelayedRoger3=c('MercuryThreadInformer').getForFBID(m);this.$MercuryDelayedRoger6=c('MercuryMessages').getForFBID(m);this.$MercuryDelayedRoger7=c('MercuryThreads').getForFBID(m);this.$MercuryDelayedRoger3.subscribe('messages-received',this.$MercuryDelayedRoger9);this.$MercuryDelayedRoger3.subscribe('messages-reordered',this.$MercuryDelayedRoger9);this.$MercuryDelayedRoger3.subscribe('messages-updated',this.$MercuryDelayedRoger9)}k.prototype.getSeenBy=function(m,n){'use strict';if(this.$MercuryDelayedRoger5[m])return [];return this.$MercuryDelayedRoger2.getSeenBy(this.$MercuryDelayedRoger10(m),n)};k.prototype.wasSeenByAll=function(m){'use strict';if(this.$MercuryDelayedRoger5[m])return false;return this.$MercuryDelayedRoger2.wasSeenByAll(this.$MercuryDelayedRoger10(m))};k.prototype.$MercuryDelayedRoger10=function(m){'use strict';if(!this.$MercuryDelayedRoger4[m]){var n=this.$MercuryDelayedRoger7.getThreadMetaNow(m);if(n)this.$MercuryDelayedRoger4[m]={thread_id:m,author:n.participants[0],timestamp:n.timestamp};}return this.$MercuryDelayedRoger4[m]};k.prototype.$MercuryDelayedRoger11=function(m){'use strict';var n=false;this.$MercuryDelayedRoger6.getThreadMessagesRange(m,0,1,function(o){var p=o[0];if(!p)return;var q=p.timestamp;if(p.status===c('MercuryActionStatus').SUCCESS)q-=c('LiveTimer').getServerTimeOffset();var r=this.getSeenBy(m);if(this.$MercuryDelayedRoger5[m]){clearTimeout(this.$MercuryDelayedRoger5[m]);delete this.$MercuryDelayedRoger5[m]}var s=q+j,t=s-Date.now();if(t>0)this.$MercuryDelayedRoger5[m]=c('setTimeoutAcrossTransitions')(function(){delete this.$MercuryDelayedRoger5[m];this.$MercuryDelayedRoger8(m)}.bind(this),t);this.$MercuryDelayedRoger4[m]=p;var u=this.getSeenBy(m);if(r.length||u.length)n=true;}.bind(this));return n};k.prototype.$MercuryDelayedRoger8=function(m){'use strict';var n={};n[m]=true;this.$MercuryDelayedRoger12(n)};k.prototype.$MercuryDelayedRoger12=function(m){'use strict';this.inform('state-changed',m);this.inform('change')};var l=new (c('MercurySingletonProvider'))(k);f.exports=k}),null);
__d('getPageIDFromThreadID',['FBID','MercuryIDs'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=c('MercuryIDs').getUserIDFromThreadID(i);if(!j||c('FBID').isUser(j))return null;return j}f.exports=h}),null);
__d('StoreAndPropBasedStateMixin',['invariant','StoreBasedStateMixinHelper','setImmediate'],(function a(b,c,d,e,f,g,h){'use strict';var i=function(){for(var j=arguments.length,k=Array(j),l=0;l<j;l++)k[l]=arguments[l];return {getInitialState:function m(){return this.constructor.calculateState(this.props)},componentWillMount:function m(){this.constructor.calculateState||h(0);this._recalculateStateID=null;var n=function(){if(this.isMounted())this.setState(this.constructor.calculateState(this.props));this._recalculateStateID=null}.bind(this);this._mixin=new (c('StoreBasedStateMixinHelper'))(k);this._mixin.subscribeCallback(function(){if(this._recalculateStateID===null)this._recalculateStateID=c('setImmediate')(n);}.bind(this))},componentWillReceiveProps:function m(n){this.setState(this.constructor.calculateState(n))},componentWillUnmount:function m(){this._mixin.release();this._mixin=null}}}.bind(this);f.exports=i}),null);
__d("LeadGenInfoFieldTypes",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CUSTOM:"CUSTOM",CITY:"CITY",COMPANY_NAME:"COMPANY_NAME",COUNTRY:"COUNTRY",DOB:"DOB",EMAIL:"EMAIL",GENDER:"GENDER",FIRST_NAME:"FIRST_NAME",FULL_NAME:"FULL_NAME",JOB_TITLE:"JOB_TITLE",LAST_NAME:"LAST_NAME",MARITIAL_STATUS:"MARITIAL_STATUS",PHONE:"PHONE",POST_CODE:"POST_CODE",PROVINCE:"PROVINCE",RELATIONSHIP_STATUS:"RELATIONSHIP_STATUS",STATE:"STATE",STREET_ADDRESS:"STREET_ADDRESS",ZIP:"ZIP",WORK_EMAIL:"WORK_EMAIL",MILITARY_STATUS:"MILITARY_STATUS",WORK_PHONE_NUMBER:"WORK_PHONE_NUMBER",MESSENGER:"MESSENGER",STORE_LOOKUP:"STORE_LOOKUP",DATE_TIME:"DATE_TIME",ID_CPF:"ID_CPF"})}),null);
__d("MercuryTimePassed",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({TODAY:0,WEEK_AGO:1,MONTH_AGO:2,CURRENT_YEAR:3,OTHER_YEAR:4})}),null);
__d("P2PPaymentRequestStatus",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({INITED:1,DECLINED:2,TRANSFER_INITED:3,TRANSFER_COMPLETED:4,TRANSFER_FAILED:5,CANCELED:6,EXPIRED:7})}),null);
__d("P2PTransferStatus",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({PENDING_SENDER_MANUAL_REVIEW:1,PENDING_SENDER_VERIFICATION:2,CANCELED_SENDER_RISK:3,PENDING_RECIPIENT_NUX:4,CANCELED_DECLINED:5,PENDING_RECIPIENT_VERIFICATION:6,PENDING_RECIPIENT_MANUAL_REVIEW:7,PENDING_RECIPIENT_PROCESSING:8,PENDING_PUSH_FAIL:9,CANCELED_RECIPIENT_RISK:10,CANCELED_SYSTEM_FAIL:11,CANCELED_EXPIRED:12,COMPLETED:13,INTERMEDIATE_PROCESSING:14,PENDING_SENDER_INITED:15,CANCELED_SAME_CARD:16,PENDING_SENDER_VERIFICATION_PROCESSING:17,PENDING_RECIPIENT_VERIFICATION_PROCESSING:18,CANCELED_SENDER_CANCEL:19})}),null);
__d('MercuryTimestamp',['fbt','MercuryTimePassed','formatDate'],(function a(b,c,d,e,f,g,h){var i=86400000,j=6*i,k={getFormatedTimestamp:function l(m){var n=m/1000;return k.getFormattedTimestampByBucket(n,this.getTimeBucket(m))},getAbsoluteTimestamp:function l(m){if(m==null){return null}else{var n=k.getFormatedTimestamp(m);return n.absolute}},getRelativeTimestamp:function l(m){var n=k.getFormatedTimestamp(m);return n.relative},getFormattedTimestampByBucket:function l(m,n){switch(n){case c('MercuryTimePassed').TODAY:return {absolute:h._("Hoy"),relative:c('formatDate')(m,'g:ia')};case c('MercuryTimePassed').WEEK_AGO:return {absolute:c('formatDate')(m,'l'),relative:c('formatDate')(m,'D')};case c('MercuryTimePassed').CURRENT_YEAR:return {absolute:c('formatDate')(m,'F j'),relative:c('formatDate')(m,'M j')};default:return {absolute:c('formatDate')(m,'F j, Y'),relative:c('formatDate')(m,'n/j/y')};}},getTimeBucket:function l(m){var n=new Date(m),o=new Date(),p=new Date(o.getFullYear(),o.getMonth(),o.getDate());if(p<n){return c('MercuryTimePassed').TODAY}else if(p-j<n){return c('MercuryTimePassed').WEEK_AGO}else if(p.getFullYear()===n.getFullYear()){return c('MercuryTimePassed').CURRENT_YEAR}else return c('MercuryTimePassed').OTHER_YEAR;},getPreciseTimestamp:function l(m){return c('formatDate')(new Date(m),k.getPreciseFormat(m))},getPreciseFormat:function l(m){var n=k.getTimeBucket(m);switch(n){case c('MercuryTimePassed').TODAY:return 'g:ia';case c('MercuryTimePassed').WEEK_AGO:return 'l g:ia';case c('MercuryTimePassed').CURRENT_YEAR:return 'F jS, g:ia';case c('MercuryTimePassed').OTHER_YEAR:default:return 'F j, Y g:i a';}}};f.exports=k}),null);