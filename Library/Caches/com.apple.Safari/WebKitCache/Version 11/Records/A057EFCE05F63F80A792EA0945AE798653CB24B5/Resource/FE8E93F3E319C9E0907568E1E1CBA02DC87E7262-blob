CloudOS.mixin({configureSpringboard:function(){if(this._hasConfiguredSpringBoard)return;var e={isShowingObserver:function(){CloudOS.workspaceController.get("nowShowing")<=CloudOS.AUTH?(this.$(".springboard-button-view").attr("tabindex","-1"),this.$().attr("aria-hidden","true")):(this.$(".springboard-button-view").attr("tabindex","0"),this.$().removeAttr("aria-hidden"))},springboardView:CloudOS.SpringboardView.design(COS.IsShowingSupport,{isAllowedToGenerateButtons:NO,init:function(){arguments.callee.base.apply(this,arguments);var e=CW.notificationCenter;e.subscribeToNotification("springboardMayProceed",this,"springboardMayProceed"),e.subscribeToNotification("requestedInfoForDynamicApp",this,"springboardMustWaitForDynamicApp"),e.subscribeToNotification("receivedInfoForDynamicApp",this,"springboardMayProceedFromDynamicApp"),e.subscribeToNotification("calendarIconWillRedraw",this,"springboardMustWaitForCalendarIconDrawing"),e.subscribeToNotification("calendarIconFinishedDrawing",this,"springboardMayProceedFromCalendarIconDrawing"),window.sv=this},displayKeys:[CloudOS.SPRINGBOARD,CloudOS.AUTH,CloudOS.SHARING],nowShowingBinding:"CloudOS.workspaceController.nowShowing",appIndicesBinding:"CloudOS.appController.appIndices",wantsAcceleratedLayer:!0,willShow:function(){CloudOS.workspaceController.hideCentralSpinner()},springboardMayProceed:function(){this.set("isAllowedToGenerateButtons",YES)},springboardMustWaitForDynamicApp:function(e){this.addShowCondition("dynamic app "+e)},springboardMayProceedFromDynamicApp:function(e,t){this.metShowCondition("dynamic app "+e)},springboardMustWaitForCalendarIconDrawing
:function(e,t){this.addShowCondition("Calendar icon must be drawn for correct language")},springboardMayProceedFromCalendarIconDrawing:function(e,t){this.metShowCondition("Calendar icon must be drawn for correct language")},childViews:CloudOS.SpringboardView.prototype.childViews.concat("accountMenu blurOverlay".w()),blurOverlay:SC.View.extend(CW.Animatability,{classNames:"blur-overlay".w(),shouldShow:!0,shouldShowBinding:".parentView.isDecorativeDimmed",layout:{left:0,top:0,right:0,bottom:0,zIndex:2,opacity:1},shouldShowDidChange:function(){if(this.get("shouldShow"))this.animate("opacity",1,250),this.set("isVisible",!0);else{var e=this;this.animate("opacity",0,{duration:250,_updateVisibility:function(){e.set("isVisible",!1)}.listens("finish")})}}.observes("shouldShow")}),accountMenu:CloudOS.AccountMenuView.design(),isOffscreen:YES,isDecorativeDimmed:function(){var e=this.get("nowShowing");return e===CloudOS.AUTH||e===CloudOS.SHARING||!!this.get("wantsDD")}.property("nowShowing","wantsDD"),_setWantsDD:function(){var e=this.get("nowShowing")===CloudOS.AUTH;e?(this.set("wantsDD",YES),this._ddSetter&&this._ddSetter.invalidate(),this._ddSetter=null):this._ddSetter=this.invokeLater(function(){this.set("wantsDD",NO)},200)}.observes("nowShowing"),render:function(e){var t="";CK.isBeta&&(t=" beta"),e.push('<span class="icloud-text'+t+'"></span>'),arguments.callee.base.apply(this,arguments)},toggleChrome:function(){var e=this.get("isDecorativeDimmed");if(this.__lastToggleChromeDim__===(this.__lastToggleChromeDim__=e))return;this.accountMenu.animate("opacity",1-e,{duration:e?0:500,mustKeepLayoutSync
:NO})}.observes("isDecorativeDimmed"),__lastToggleChromeDim__:NO,didShow:function(){this.showNotificationsIfNeeded()},didUndim:function(){this.showNotificationsIfNeeded()},showNotificationsIfNeeded:function(){this.notifyUnqualified()},notifyUnqualified:function(){!this._hasNotifiedUnqualified&&CloudOS.authController.get("userRequiresUnqualifiedNotification")&&(CloudOS.iOSNotificationForSpringboard.enqueue({message:"Auth.Notification.Unqualified.Title".loc(),description:"Auth.Notification.Unqualified.Description".loc()}),this._hasNotifiedUnqualified=YES)}})},t=CloudOS.mainPage.mainPane,n={owner:t};t.appendChild(e.springboardView.create(n)),t.addObserver("CloudOS.workspaceController.nowShowing",e.isShowingObserver),this._hasConfiguredSpringBoard=YES}}),window.console&&console.log("%c\n                                   *********                           \n                             *******       *******                     \n                           ***                    ***                  \n                         **                         **                 \n                *****   **                           ***               \n             ****   *****                              **              \n           **                                           **             \n          *                                              *             \n         **              **                **            *             \n      ****               **        **      **           ******         \n    **                   **        **      **                 ****     \n  ***                              **                            ***   \n  *                                **                              **  \n *                               ****                               *  \n *                                                                  *  \n**                                                                  ** \n*                            **         **                           * \n**                            ***********                            * \n *                                ***                               ** \n  **                                                               **  \n   ***                                                            **   \n      ****                                                     ****    \n         ****                                               ****       \n            *************************************************          \n \n Happy to see you here! We are hiring the sharpest minds in the\n industry who want to build the most sophisticated and delightful\n applications on the web.\n \n Check out https://www.icloud.com/jobs/\n \n"
,"font-family: Menlo, monospace"),CloudOS.SpringboardView=SC.View.extend(CW.Animatability,{ALL_FOUR_EDGE_SPACING:0,TOP_INSET:0,BOTTOM_INSET:0,MIN_INTER_BUTTON_SPACING:35,ANIMATE_LAYOUT:COS.ANIMATE_SPRINGBOARD_LAYOUT,FORCE_READINESS_TIME:6e3,isMiniSpringBoard:NO,buttonSizeDiscreteness:0,layout:{left:0,top:0,width:0,height:0,minHeight:COS.MIN_HEIGHT,minWidth:COS.MIN_WIDTH,zIndex:50},bannerObserver:function(){if(this.get("isMiniSpringBoard")||!this.get("isOnscreen"))return;var e=CloudOS.bannerManager,t=e.get("bannerHeight");this.animate("top",{to:t,duration:500})}.observes("CloudOS.bannerManager.bannerHeight"),classNames:["springboard-view"],wantsAcceleratedLayer:NO,displayProperties:"isOnscreen isAnimating frame".w(),isVisibleBinding:SC.Binding.oneWay("*springboardView.shouldHideForScreenReader"),isOnscreen:NO,isDecorativeDimmed:NO,isDecorativeDimmedObserver:function(){if(!this.get("isOnscreen"))return;this.get("isDecorativeDimmed")||(this.set("shouldHideForScreenReader",NO),CloudOS.workspaceController.hideCentralSpinner())}.observes("isDecorativeDimmed","isOnscreen"),attributeBindings:["aria-hidden"],shouldHideForScreenReader:YES,ariaHidden:YES,tabIndex:-1,"aria-hidden":function(){return this.get("ariaHidden")}.property("ariaHidden"),shouldHideForScreenReaderObserver:function(){this.get("shouldHideForScreenReader")?this.set({tabIndex:-1,ariaHidden:YES}):this.set({tabIndex:0,ariaHidden:NO})}.observes("shouldHideForScreenReader","isOnscreen"),appIndices:undefined,childViews:"buttonsContainer".w(),buttonsContainer:SC.View.extend(CW.Animatability,{layout:{left:0,top:0,right:0,bottom
:0,zIndex:1},ariaRole:"main",ariaLabel:function(){return"AppTitle.backToSpringboard".loc()}.property(),focusOnButtonsContainer:function(){var e=this.get("childViews"),t=CloudOS.bannerManager;t.get("isBannerVisible")||(this.set("acceptsFirstResponder",YES),this.$().attr("tabindex",0),e&&e.length&&this.get("layer").focus())},checkForAppsAfterAnim:function(){this.owner.invokeLater("updateToAppsWhenAppropriate",100)},postAnimation:function(){this.get("isAnimating")||(this.checkForAppsAfterAnim(),this.focusOnButtonsContainer())}.observes("isAnimating")}),apps:undefined,isReadyToShow:NO,isAllowedToGenerateButtons:YES,useAnimationWhenShowing:!0,init:function(){CloudOS.SpringboardView._isAllowedToGenerateButtons&&(this.isAllowedToGenerateButtons=YES),arguments.callee.base.apply(this,arguments),this._allButtons=[],this._displayButtons=[],this._buttonsByName={},this._finalDistanceAdjustment={},this._waitingForConditions=SC.Set.create(),this._conditionsMet=SC.Set.create(),this.addShowCondition("initial set of buttons"),this.sizeToParent(!0),this.handleOnscreen(),this.appsOneWayBindingImplementedViaObserver(),CW.notificationCenter.subscribeToNotification("relocalize",this,"relocalize")},relocalize:function(){var e=this._prevCloudOSLocaleRTL,t=CloudOS.get("isCloudOSLocaleRTLOriented");e!==t&&this._decideButtonLocations(),this._prevCloudOSLocaleRTL=t},appsOneWayBindingImplementedViaObserver:function(){this.pruneAppList()}.observes("CloudOS.appController.appList","CloudOS.appController.appList.[]"),pruneAppList:function(){var e=CloudOS.appController.get("appList"),t=CloudOS.authController,
n=t.get("user"),r=t.get("iCloudLiteSignUp")||n&&n.get("isLiteAccount"),i=[],s,o;if(!e)return;for(s=0;o=e[s];s++){if(o.get("isHidden")||!o.get("supportsLite")&&r)continue;i.push(o)}this.set("apps",i)},awaitShow:function(){this._pendingShow=YES,this.get("isAllowedToGenerateButtons")&&this.scheduleForcedReadiness()},scheduleForcedReadiness:function(){if(this._scheduledForceReadiness)return;this._scheduledForceReadiness=this.invokeLater(function(){this._scheduledForceReadiness=null,this.forceReadiness()},this.FORCE_READINESS_TIME)},show:function(){this.showForScreenReader(YES);if(this._showing)return;if(!this.get("isReadyToShow"))return this.awaitShow();this.willShow(),this.becomeFirstResponder(),this._pendingShow=NO,this._showing=YES,this._decideButtonLocations(),this.get("useAnimationWhenShowing")?this.get("isDecorativeDimmed")?this.showWithDecorativeMode():COS.ENABLE_TRANSFORM_ANIMATIONS?this.showWithIconSlide():this.showWithFade():this.showWithNoAnimation()},showWithNoAnimation:function(){this.adjust("opacity",1),this.set("isOnscreen",YES),this.didShow()},showWithDecorativeMode:function(){this.animate("opacity",{from:0,to:1,duration:1500},{onstop:function(){this.view.adjust("opacity",1),this.view.didShow()}}),this.set("isOnscreen",YES),this.set("shouldHideForScreenReader",YES)},showWithIconSlide:function(){var e=this._iconSlideAnim||(this._iconSlideAnim=this.IconSlideAnim.create({from:0,to:1,view:this}));e.duration=450,e.redirectTo(1),e.start()},showWithFade:function(){this.animate("opacity",{from:0,to:1,duration:550*COS.ENABLE_APP_ANIMATION},{doneShowing:function(){this.view
.didShow()}.listens("stop")}),this.set("isOnscreen",YES)},willShow:function(){},didShow:function(){this.establishFocusForScreenReader()},hide:function(){this.showForScreenReader(NO),this._pendingShow=NO;if(!this._showing)return;this.willHide(),this.resignFirstResponder(),this._showing=NO;if(!this.get("useAnimationWhenShowing"))this.hideWithNoAnimation();else{if(this.get("isDecorativeDimmed"))return this.hideWithDecorativeMode();COS.ENABLE_TRANSFORM_ANIMATIONS?this.hideWithIconSlide():this.hideWithFade()}},hideWithNoAnimation:function(){this.adjust("opacity",0),this.set("isOnscreen",NO),this.didHide()},hideWithDecorativeMode:function(){this.set("isOnscreen",NO),this.didHide(),this.finishAnimation("scale")},hideWithIconSlide:function(){var e=this._iconSlideAnim||(this._iconSlideAnim=this.IconSlideAnim.create({from:1,to:0,view:this}));e.duration=550,e.redirectTo(0),e.start()},hideWithFade:function(){this.animate("opacity",{to:0,duration:550*COS.ENABLE_APP_ANIMATION},{doneHiding:function(){this.view.set("isOnscreen",NO),this.view.didHide()}.listens("stop")})},willHide:function(){},didHide:function(){},showWhenReady:function(){var e=this.get("isReadyToShow");if(this._lastIsReadyToShow===e)return;this._lastIsReadyToShow=e,e&&this._pendingShow&&this.show()}.observes("isReadyToShow"),IconSlideAnim:CW.Animation.extend({TRAVEL:1,init:function(){this.TRAVEL=1-(CloudOS.getPath("mainPage.mainPane.appsView.zoomedOutScaleFactorForAnimation")||0),this.TRAVEL=2*this.TRAVEL,arguments.callee.base.apply(this,arguments)},update:function(){var e=this.view,t=e._buttonCenters,n=e._displayButtons,r=
this._frame,i=this.TRAVEL*(1-this.current),s=e._layoutBounds;if(!s)return;var o=s.centerX,u=s.centerY,a,f,l,c,h,p,d;for(a=0;(d=t[a])&&(c=n[a]);a++)h=d.x,p=d.y,h===o&&p===u&&a!==0&&(h=t[a-1].x,p=t[a-1].y),f=d.x+i*(h-o),l=d.y+i*(p-u),c.setCenter(f,l);this._layer.style.opacity=this.current,this.view.adjust("opacity",this.current)},onstop:function(){this.view.decrementAnimationCount()},onfinish:function(){this.to===0&&(this.view.set("isOnscreen",NO),this.view.didHide()),this.to===1&&this.view.didShow()},onstart:function(){this.to!==0&&(this.view.handleOnscreen(),this.view.set("isOnscreen",YES),this.view.sizeToParent(!0),this.view.update()),this._frame=this.view.get("frame"),this._layer=this.view.get("layer"),this.view.incrementAnimationCount()}}),decorativeDimmedSBOpacity:0,__lastDim__:NO,handleDecorativeDimming:function(){var e=this.get("isDecorativeDimmed");if(this.__lastDim__===(this.__lastDim__=e))return;e?(this.stopAnimation("scale"),this.buttonsContainer.adjust("scale",.95),this.buttonsContainer.adjust("opacity",this.decorativeDimmedSBOpacity),this.didDim()):this.get("isShowing")?(this.buttonsContainer.animate("scale",1,{duration:550,onstop:function(){this.view.owner.didUndim()}}),this.buttonsContainer.animate("opacity",1,{duration:550})):(this.buttonsContainer.adjust("scale",1),this.buttonsContainer.adjust("opacity",1),this.didUndim())}.observes("isDecorativeDimmed"),establishFocusForScreenReader:function(){if(this.nowShowing!==CloudOS.SPRINGBOARD)return;var e=SC.$(".icloud-text");e.length&&e[0].style.display!=="none"&&e[0].focus()}.observes("isDecorativeDimmed","isShowing"
),showForScreenReader:function(e){this.get("isMiniSpringBoard")||this.set("shouldHideForScreenReader",e?NO:YES)},didDim:function(){},didUndim:function(){},sizeToParent:function(e){var t=this.getPath("parentView.frame");if(e!==!0&&!this.get("isOnscreen"))return;if(!t)return;var n=this._lastPFWidth!==(this._lastPFWidth=t.width),r=this._lastPFHeight!==(this._lastPFHeight=t.height);if(!n&&!r&&!this.didChangeFor("sizeToParent","isOnscreen"))return;this.adjust({width:t.width,height:t.height})}.observes("*parentView.frame","isOnscreen"),handleOnscreen:function(){var e=this.get("isOnscreen"),t=e?CloudOS.bannerManager.get("bannerHeight"):0;this.adjust({left:-2e4*!e,top:-2e4*!e+t})}.observes("isOnscreen"),handleNewPermissionToGenerateButtons:function(){SC.debug("At long last, SpringboardView is now allowed to generate button instances!"),this.get("isAllowedToGenerateButtons")&&(CloudOS.SpringboardView._isAllowedToGenerateButtons=YES),this._pendingShow&&this.scheduleForcedReadiness()}.observes("isAllowedToGenerateButtons"),update:function(e){if(this._isUpdating===(this._isUpdating=YES))return;var t=this.get("frame");if(!t)return;if(this.get("isAnimating")&&this._lastFrameHash===(this._lastFrameHash=t.width+","+t.height))return this._isUpdating=NO,this._isUpdating;if(!this._displayButtons.length)return this._isUpdating=NO;if(!this.get("isOnscreen"))return this._isUpdating=NO;var n=this.didChangeFor("update","isOnscreen");e!=="animatedLayoutBounds"&&this._decideButtonLocations();var r=this._buttonCenters.hClearance,i=this._buttonCenters.vClearance,s=r,o=i*CloudOS.SpringboardButtonView.prototype
.ASPECT_RATIO,u=s/o,a;u>1?a=Math.ceil(o):a=Math.ceil(s),a=Math.min(142,a),this.buttonSizeDiscreteness&&(a=this.buttonSizeDiscreteness*Math.round(a/this.buttonSizeDiscreteness));for(var f=0,l,c;(c=this._buttonCenters[f])&&(l=this._displayButtons[f]);f++)!this.ANIMATE_LAYOUT||n?(l.stopAnimation(),l.setCenter(c.x,c.y,a)):l.animateCenter(c.x,c.y,a);this._isUpdating=NO},updateToAppsWhenAppropriate:function(){if(!this.get("layer"))return;if(this.getPath("buttonsContainer.isAnimating"))return;if(!this.get("isAllowedToGenerateButtons")){this._decideButtonLocations(this.getPath("apps.length")||0);return}var e=this.updateButtons()?"buttons changed":!1;e&&this.update(e)}.observes("apps","layer","isAllowedToGenerateButtons"),_globalVertOffsetsByColumnQuantity:[-5,-21,-20,-16,-18,function(e,t){return-18+Math.max(0,Math.min(18,(300-t)*18/108))}],maxSpreadDimensionsByColumnQuantity:[[Infinity,Infinity],[Infinity,1500],[767,1188],[[1320,1e3],null,null,null,[1320,Infinity]],[[1320,1e3],null,[1320,1120],[1320,1220],[1320,1320],[1320,Infinity]],[1500,1200],[1600,1400],[1700,1500],[1700,Infinity],[2e3,Infinity]],_decideButtonLocations:function(e,t){var n=this.get("frame"),r=n.width-this.ALL_FOUR_EDGE_SPACING*2,i=n.height-this.ALL_FOUR_EDGE_SPACING*2-this.TOP_INSET-this.BOTTOM_INSET,s=r/i;e===undefined&&(e=this._displayButtons.length);if(e===0)return;this._gridInfo=this._gridInfo||[],this._gridInfo.length=0;var o=1,u,a,f,l;for(var c=1;c<20;c++)o=c,f=Math.ceil(e/o),l=Math.ceil(e/f),a=r/(l+1)/(i/(f+1)),this._gridInfo[c]=a/CloudOS.SpringboardButtonView.prototype.ASPECT_RATIO;var h=Infinity,p=this._gridInfo
.length,d;o=-1;for(c=0;c<p;c++)d=this._gridInfo[c],d<1&&(d=1/d),d<h&&(h=d,o=c);o===-1&&(o=3),u=Math.ceil(e/o),o=Math.ceil(e/u),u===1&&e>=4&&(u=2,o=Math.ceil(e/u)),t===undefined&&(t=this._forcedCols),t&&(o=t,u=Math.ceil(e/o)),this._rows=u,this._cols=o;var v=this.maxSpreadDimensionsByColumnQuantity;v=v&&v[o],v&&v[0].length&&(v=v[u]||v[u>=v.length?v.length-1:0]);var m=v&&v[0]||Infinity,g=v&&v[1]||Infinity,y=r,b=i;r=Math.min(y,m),i=Math.min(b,g);var w=this._globalVertOffsetsByColumnQuantity;w=w?w[Math.min(o,w.length-1)]||0:0,w instanceof Function&&(w=w.call(this,y,b));var E=this.ALL_FOUR_EDGE_SPACING+(y-r)/2,S=this.ALL_FOUR_EDGE_SPACING+this.TOP_INSET+(b-i)/2+w,x=this._buttonCenters||(this._buttonCenters=[]),T,N,C,k,L,A=CloudOS.get("isCloudOSLocaleRTLOriented");for(c=0;c<e;c++)k=Math.floor(c/o),L=A?o-1-Math.floor(c%o):Math.floor(c%o),N=(L+1)*r/(o+1),C=(k+1)*i/(u+1),N=Math.ceil(N+E),C=Math.ceil(C+S),T=x[c]||(x[c]={}),T.x=N,T.y=C;var O=this._layoutBounds;O||this.set("layoutBounds",O=this._layoutBounds={}),O.centerX=Math.ceil(.5*r+E),O.centerY=Math.ceil(.5*i+S),O.top=Math.ceil(S),O.bottom=Math.ceil(i+S),O.height=O.bottom-O.top,O.left=Math.ceil(E),O.right=Math.ceil(r+E),O.width=O.right-O.left,O.fullWidth=y,O.fullHeight=b;var M=this._animatedLayoutBounds,_=NO,D,P;if(!M){var H=this.ANIMATE_LAYOUT?15:Infinity;this.set("animatedLayoutBounds",M=this._animatedLayoutBounds=CW.Animation.create({view:this,freevars:"left top width height".w(),ticked:4,left:{from:O.left,to:O.left,inertia:3,speed:H,headStart:.1},top:{from:O.top,to:O.top,inertia:3,speed:H,headStart:.1},width:{from:O.width/y,to:O
.width/y,inertia:3,speed:H,headStart:1e-5},height:{from:O.height/b,to:O.height/b,inertia:3,speed:H,headStart:1e-5},update:function(){this.view.update("animatedLayoutBounds"),this._doAllButtons("updateIfNotUpdatedLastFrame","reposition")},pickUpPossibleUpdateSlack:function(){this._doAllButtons("update","reposition")}.listens("finish"),_doAllButtons:function(e,t){var n=this.view._displayButtons,r,i;for(i=0;r=n[i];i++)r[e](t)},jumpIfSpringboardJustAppeared:function(){if(this._isMaybeJumping)return;this._isMaybeJumping=YES,this._shouldFinishNextFrame&&this.running&&this.finish(),this._shouldFinishNextFrame=NO,this._isMaybeJumping=NO}.listens("frame"),watchSpringboardForJump:function(){if(this._los===(this._los=this.getPath("view.isOnscreen")))return;this._shouldFinishNextFrame=YES}.observes(".view.isOnscreen")}))}else(D=M.left).to!==(P=O.left)&&(D.redirectTo(P),_=YES),(D=M.width).to!==(P=O.width/y)&&(D.redirectTo(P),_=YES),(D=M.top).to!==(P=O.top)&&(D.redirectTo(P),_=YES),(D=M.height).to!==(P=O.height/b)&&(D.redirectTo(P),_=YES),_&&M.start();var B=O.centerY-n.height/2;this.set("visualCenterY",B);var j=this.computeFinalDistanceAdjustment(O);for(c=0;T=x[c];c++)T.x=(T.x-O.centerX)*j.x+O.centerX,T.y=(T.y-O.centerY)*j.y+O.centerY;var F=1/(o+1)*r,I=1/(u+1)*i;this._buttonCenters.hClearance=F-this.MIN_INTER_BUTTON_SPACING,this._buttonCenters.vClearance=I-this.MIN_INTER_BUTTON_SPACING},computeFinalDistanceAdjustment:function(e){var t=Math.max(.95,.95+7/1440+(1440-e.width)*16/490/100),n=1,r=1.1,i=1,s=800,o=650,u=Math.min(r,Math.max(1,(e.height-s)/(o-s)*(r-i)+i)),a=this._finalDistanceAdjustment
;return a.x=n*t,a.y=u*t,a},_waitingForConditions:null,_conditionsMet:null,addShowCondition:function(e){this._conditionsMet.contains(e)||this._waitingForConditions.add(e)},metShowCondition:function(e){this._conditionsMet.add(e),this._waitingForConditions.remove(e);var t=this._waitingForConditions.get("length");t>0?SC.debug("Springboard: A wait condition became satisfied. Still waiting on "+t+" conditions. Requirement was: "+e):(SC.debug("Springboard: Springboard View has become ready to show! All of its wait conditions have been satisfied."),this._showing&&SC.debug("Springboard: Readiness is moot: Springboard is already showing."),this.invokeLast("forceReadiness"))},createButtonForApp:function(e,t){return CloudOS.SpringboardButtonView.buttonTypeForAppManager(e).create({springboardView:this,app:e},t||{})},setupButtonForApp:function(e,t){if(!e.get("isReady")){var n=t.get("name"),r="Button for "+n;this.addShowCondition(r),e.addObserver("isReady",this,function(){e.get("isReady")&&this.metShowCondition(r),this.invokeOnce(function(){var e=this.updateButtons();e&&this.update("buttons changed")})})}},createButtons:function(){var e=this.get("apps"),t,n,r=this._buttonsByName,i=this._allButtons,s,o;e?n=e.length:n=0;for(t=0;t<n;t++){s=e[t],o=s.get("name");if(o in r){if(i&&s!==r[o].get("app")){var a=r[o];a.set("app",s)}}else{var u=this.createButtonForApp(s);this.setupButtonForApp(u,s),r[o]=u,i.push(u)}}},computeDisplayButtons:function(){var e,t,n=this,r=this.get("apps"),i=this._displayButtons,s=this._allButtons,o,u,a;i.length=0,this.hasOwnProperty("_buttonComparator")||(a=this._buttonComparator
,this._buttonComparator=function(){return a.apply(n,arguments)}),o=this._appIndices=this.get("appIndices"),o&&s.sort(this._buttonComparator);for(e=0,t=s.length;e<t;e++)u=s[e],r.contains(u.get("app"))&&(u.get("isReady")||u.get("mustShow"))?(u._sb_shouldDisplay=!0,i.push(u)):u._sb_shouldDisplay=!1},updateChildViews:function(){var e=this._allButtons,t,n=e.length,r,i,s;for(t=0;t<n;t++)r=e[t],s=r._sb_shouldDisplay,i=!!r.get("parentView"),i&&!s?r.fancyRemoveFromParent():!i&&s&&this.buttonsContainer.appendChild(r)},_sb_tmp_buttonsBeforeArray:[],updateButtons:function(){var e=this._sb_tmp_buttonsBeforeArray;e.length=0;var t=this._displayButtons,n,r;for(n=0,r=t.length;n<r;n++)e.push(t[n]);this.createButtons(),this.computeDisplayButtons(),this.updateChildViews(),t=this._displayButtons,t.length>0&&e.length===0&&this.metShowCondition("initial set of buttons");if(t.length!==e.length)return!0;for(n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!0;return!1},_buttonComparator:function(e,t){var n=this._appIndices,r=e.getPath("app.name"),i=t.getPath("app.name");return(n[r]+1||Infinity)-(n[i]+1||Infinity)||(r>i?1:r===i?0:-1)},forceReadiness:function(){this.set("isReadyToShow",YES)},keyDown:function(e){if(!this._showing)return;var t=SC.FUNCTION_KEYS,n=SC.FUNCTION_KEYS[e.which]||SC.PRINTABLE_KEYS[e.which];return n==="right"&&this.focusRight(),n==="left"&&this.focusLeft(),n==="up"&&this.focusUp(),n==="down"&&this.focusDown(),(n==="return"||n===" ")&&this.activateFocusedButton(),e.allowDefault(),NO},currentFocus:NaN,_lastCurrentFocus:NaN,focusNone:function(){this.set("currentFocus",NaN)},focusRight:function(
){var e=this.get("currentFocus");return isNaN(e)||e>=this._displayButtons.length-1?this.set("currentFocus",0):this.set("currentFocus",e+1)},focusLeft:function(){var e=this.get("currentFocus");return isNaN(e)||e<=0?this.set("currentFocus",this._displayButtons.length-1):this.set("currentFocus",e-1)},focusUp:function(){var e=this.get("currentFocus");if(e<this._cols)return;return isNaN(e)?this.set("currentFocus",this._displayButtons.length-1):this.set("currentFocus",(e-this._cols+this._displayButtons.length)%this._displayButtons.length)},focusDown:function(){var e=this.get("currentFocus");if(e>=(this._rows-1)*this._cols||e+this._cols>=this._displayButtons.length)return;return isNaN(e)?this.set("currentFocus",0):this.set("currentFocus",(e+this._cols)%this._displayButtons.length)},currentFocusObserver:function(){var e=this.get("currentFocus"),t=this._lastCurrentFocus;if(t===(this._lastCurrentFocus=e))return;!isNaN(t)&&this._displayButtons[t]&&this._displayButtons[t].set("isFocused",NO),!isNaN(e)&&this._displayButtons[e]&&this._displayButtons[e].set("isFocused",YES)}.observes("currentFocus"),activateFocusedButton:function(){var e=this.get("currentFocus");if(isNaN(e))return;var t=this._displayButtons[e];if(!t)return;t.mouseEntered("keyboard"),t.mouseDown("keyboard"),t.invokeLater(function(){this.mouseUp("keyboard"),this.mouseExited("keyboard")},100)},currentFocusedButton:function(){var e=this.get("currentFocus");return this._allButtons[e]}}),require("views/springboard_view"),function(){var e=!SC.browser.chrome||!SC.browser.windows;CloudOS.AppSwitcherPane=CW.PickerPane.extend(CW.Animatability
).extend(e?CW.PaneAnimationSupport:{}).extend({layouts:["onBottom"],attributeBindings:["tabindex"],tabindex:"-1",layout:{left:-10,top:-10,width:2,height:2,opacity:0},desiredSize:{width:616,height:324},minimumSize:{width:616,height:324},desiredSizeMaxApps:{width:842,height:324},alsoScale:window.location.href.indexOf("animateAppSwitcher")!==-1,wantsAcceleratedLayer:YES,showingState:{opacity:1},hiddenState:{opacity:0},showDuration:200,hideDuration:350,firstShowDelay:1e3,acceptsKeyPane:YES,init:function(){this._originalHideDuration=this.hideDuration||this.duration,this.alsoScale&&(this.showingState.scale=1,this.hiddenState.scale=.9),arguments.callee.base.apply(this,arguments)},popup:function(){arguments.callee.base.apply(this,arguments),window.asv=this.contentView,window.asp=this,this.becomeKeyPane(),this.contentView.show(),this.contentView.becomeFirstResponder(),this.set("hideDuration",this._originalHideDuration)},chooseTransformOrigin:function(){this.alsoScale&&this.invokeLast("_chooseTransformOrigin")}.observes("layout","layer"),_chooseTransformOrigin:function(){var e=this.get("layer");if(!e)return;var t=this.$(".sc-pointer"),n;if(!t||!(t=t[0])||!(n=t.className)||typeof n!="string")return;if(n.indexOf("point-up")!==-1)return this._setTransformOrigin(t.offsetLeft+t.offsetWidth/2,t.offsetTop,e);if(n.indexOf("point-left")!==-1)return this._setTransformOrigin(t.offsetLeft,t.offsetTop+t.offsetHeight/2,e)},_setTransformOrigin:function(e,t,n){n||(n=this.get("layer")),n.style[SC.platform.domCSSPrefix+"TransformOrigin"]=Math.round(e)+"px "+Math.round(t)+"px"},paneDidHide:function(){CloudOS
.statechart.sendAction("appSwitcherFinishedHiding"),CloudOS.appSwitcherController.set("isShowing",NO)},remove:function(){return e||this.invokeLast("paneDidHide"),arguments.callee.base.apply(this,arguments)},keyDown:function(e){if(!this.get("isVisibleInWindow")||!e)return;var t=SC.FUNCTION_KEYS[e.which]||SC.PRINTABLE_KEYS[e.which];t==="escape"&&!e.shiftKey&&CloudOS.appSwitcherController.hideAppSwitcher()},contentView:CloudOS.SpringboardView.extend({classNames:"app-switcher",isMiniSpringBoard:YES,MIN_INTER_BUTTON_SPACING:18,ALL_FOUR_EDGE_SPACING:25,TOP_INSET:-40,BOTTOM_INSET:-20,ANIMATE_LAYOUT:NO,buttonSizeDiscreteness:2,layout:{left:0,width:616,height:324,top:0},_globalVertOffsetsByColumnQuantity:null,maxSpreadDimensionsByColumnQuantity:null,useAnimationWhenShowing:NO,appIndicesBinding:"CloudOS.appController.appIndices",buttonsContainer:SC.View.extend(CW.Animatability,{ariaRole:"navigation",ariaLabel:"Toolbar.Tooltip.App.Switcher".loc()}),init:function(){this.FORCE_READINESS_TIME=this.getPath("owner.firstShowDelay")||1e3,arguments.callee.base.apply(this,arguments)},killParentDelay:function(){if(!this.get("isReadyToShow")||this._hasKilledParentDelay===(this._hasKilledParentDelay=YES))return;this.invokeLater("_killParentDelay",50)}.observes("isReadyToShow"),_killParentDelay:function(){var e=this.getPath("parentView._showTimer");if(!e)return;e.fire(),e.invalidate()},_sharedBadgeMeasurementCache:{},createButtonForApp:function(e){return arguments.callee.base.call(this,e,{ASPECT_RATIO:1/1.65,TITLE_SIZE_MULTIPLE:15/74,TITLE_TOP_MULTIPLE:170/142,SPINNER_SIZE_MULTIPLE:28/74,BADGE_H_PADDING
:6,BADGE_V_PADDING:2,BADGE_RIGHT_INSET:-5,BADGE_TOP_INSET:-1,USE_TRANSFORM_SCALING:NO,USE_BORDER_ELEMENT:YES,USE_TITLE_HIGHLIGHT:YES,IS_INTENDED_FOR_SIGNIFICANT_DOWNSAMPLING:YES,mustShowRegardlessOfDynamicApp:YES,useExternalShadow:NO,mustHitTest:NO,_badgeMeasurementCache:this._sharedBadgeMeasurementCache,titleColor:{r:51,g:51,b:51},titleShadowSettings:{x:0,y:0,blur:0,r:0,g:0,b:0,opacity:0,opacityForIntensity:!1},action:function(){var e=this.get("pane");return e&&e.set("hideDuration",this.get("isCurrentApp")?e._originalHideDuration:0),arguments.callee.base.apply(this,arguments)},_adjustBadgeInfo:function(e){SC.browser.webkit&&e.countString[0]==="1"&&e.count>1&&e.left++}})},pruneAppList:function(e){e();var t=this.get("apps");t.unshift(this.get("dummyAppSwitcherHomeAppManager"));if(t.length>10){var n=this.get("pane"),r=n.get("desiredSizeMaxApps");n.set("desiredSize",r),n.set("minimumSize",r)}}.enhance(),dummyAppSwitcherHomeAppManager:function(){return this._dummyAppSwitcherHomeAppManager=CloudOS.AppManager.create({name:"",init:function(){this.set("appInfo",COS.AppInfo.create({displayName:function(){return"AppTitle.backToSpringboard".loc()}.property().cacheable()})),arguments.callee.base.apply(this,arguments),CW.notificationCenter.subscribeToNotification("relocalize",this,"relocalize")},relocalize:function(){this.get("appInfo").notifyPropertyChange("displayName")},appIconType:"home",appIconUrl:"/system/cloudos/17EHotfix1/cloudos_foundation/springboard/17EHotfix1/es-mx/source/resources/images/launchpad_icon.png",appIconUrl2x:"/system/cloudos/17EHotfix1/cloudos_foundation/springboard/17EHotfix1/es-mx/source/resources/images/launchpad_icon@2x.png"
,warningArrowAsset:"data:image/gif;base64,R0lGODlhAQABAJAAAP///wAAACH5BAUQAAAALAAAAAABAAEAAAICBAEAOw==",index:-1})}.property().cacheable(),_buttonComparator:function(e,t){var n=this._dummyAppSwitcherHomeAppManager;return e===t?0:e.get("app")===n?1:t.get("app")===n?-1:arguments.callee.base.apply(this,arguments)},computeFinalDistanceAdjustment:function(e){var t=Math.max(.95,.95+7/1440+(1440-e.width)*16/490/100),n=this._finalDistanceAdjustment;return n.x=n.y=t,n},handleOnscreen:function(){this.set("isVisible",this.get("isOnscreen"))}.observes("isOnscreen"),show:function(){arguments.callee.base.apply(this,arguments),CW.notificationCenter.postNotification("redrawCalendarIconIfNecessary"),this.invokeLast(function(){var e=this.get("currentFocus");if(e){var t=this.currentFocusedButton();t&&t.$()&&t.$().focus()}else this.$()&&this.$().focus()})}})})}(),CloudOS.appSwitcherController=SC.Object.create({pane:function(){return CloudOS.AppSwitcherPane.create({dismissTarget:this,dismissAction:"didDismiss"})}.property().cacheable(),showAppSwitcher:function(e){var t=30,n=10;e||(e={left:70,top:10,width:150,height:100});var r=CloudOS.bannerManager;r.get("isBannerVisible")&&(e.top+=r.get("bannerHeight")),e.top+e.height<n&&(e.top=0,e.height=n),e.left+e.width/2<t&&(e.left=0,e.width=t*2);var i=this.get("pane");this.get("isShowing")?i.set("pointAtRectangle",e):i.popup(e),this.set("isShowing",YES),i.get("layer").focus()},hideAppSwitcher:function(){if(!this.get("isShowing"))return;this.set("isShowing",NO),this.get("pane").dismiss(),CloudOS.passMessageToAllApps("miniSpringboardDismissed")},didDismiss:function(
){CloudOS.statechart.sendAction("didDismiss")}}),function(){function t(e,t,s,o){if(!e)return;if(!t)return;if(!s||isNaN(s))s=2;var u=o!=="vertical",a=o!=="horizontal",f=e.getContext?e.getContext("2d"):e,l=e.getContext?e:e.canvas,c=l.width|0,h=l.height|0,p=s|0;t=Math.min(t,c,h),t=t/p*.8+t*.2;var d=t|0,v=c*h*4,m=d*2+1,g=c*4,y=d*g,b=d*4,w=b+4,E=y+g,S;try{S=f.getImageData(0,0,c,h)}catch(x){window.SC&&SC.warn instanceof Function&&SC.warn("Attempting to blur canvas contents, but unable to access image data: "+x);return}var T=i(c,h),N=S.data,C=T.data;n(N);var k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J,K;for(V=1;V<=p;V++){if(u){K=N,N=C,C=K;for(j=0;j<h;j++){F=j*g,k=L=A=O=0;for(I=0;I<d;I++)M=I*4+F,k+=C[M],L+=C[M+1],A+=C[M+2],O+=C[M+3];for(I=0;I<c;I++)M=I*4+F,_=M+1,D=_+1,P=D+1,U=d-I,U<0&&(U=0),W=d-(c-1-I),W<0&&(W=0),R=m-U-W,H=M-w,$=H<F,B=M+b,J=!!W,$||(k-=C[H],L-=C[H+1],A-=C[H+2],O-=C[H+3]),J||(k+=C[B],L+=C[B+1],A+=C[B+2],O+=C[B+3]),N[M]=k/R,N[_]=L/R,N[D]=A/R,N[P]=O/R}}if(a){K=N,N=C,C=K;for(I=0;I<c;I++){q=I*4,k=L=A=O=0;for(j=0;j<d;j++)M=j*g+q,k+=C[M],L+=C[M+1],A+=C[M+2],O+=C[M+3];for(j=0;j<h;j++)F=j*g,M=q+F,_=M+1,D=_+1,P=D+1,z=d-j,z<0&&(z=0),X=d-(h-1-j),X<0&&(X=0),R=m-z-X,H=M-E,$=H<0,B=M+y,J=!!X,$||(k-=C[H],L-=C[H+1],A-=C[H+2],O-=C[H+3]),J||(k+=C[B],L+=C[B+1],A+=C[B+2],O+=C[B+3]),N[M]=k/R,N[_]=L/R,N[D]=A/R,N[P]=O/R}}}r(N),f.putImageData(S,0,0)}function n(e,t){t||(t=e);var n=0,r=e.length,i,s;for(;n<r;n+=4)i=e[n+3]/255,t[n]=e[n]*i,t[s=n+1]=e[s]*i,t[s=n+2]=e[s]*i}function r(e,t){t||(t=e);var n=0,r=e.length,i,s;for(;n<r;n+=4)i=e[n+3]/255,t[n]=e[n]/i,t[s=n+1]=e[s]/i,t[s=n+2]=e[s]/i}function i
(e,t){var n=this._temporaryBufferContext||(this._temporaryBufferContext=document.createElement("canvas").getContext("2d")),r=this._temporaryBufferCache||(this._temporaryBufferCache=[]);return r=r[e]||(r[e]={}),r=r[t]||(r[t]={}),r.buffer||(r.buffer=n.createImageData(e,t))}var e=document.createElement("canvas");if(!e.getContext||!e.toDataURL)return;window.CloudOS&&(CloudOS.canvasBoxBlur=t)}(),CloudOS.SpringboardButtonView=SC.View.extend(CW.Animatability,{tagName:"a",ARROW_WIDTH_MULTIPLE:64/142,ARROW_HEIGHT_MULTIPLE:58/142,ARROW_LEFT_MULTIPLE:85/142,ARROW_TOP_MULTIPLE:85/142,LOCK_WIDTH_MULTIPLE:36/142,LOCK_HEIGHT_MULTIPLE:36/142,LOCK_LEFT_MULTIPLE:113/142,LOCK_TOP_MULTIPLE:113/142,SHADOW_SIZE_MULTIPLE:204/142,SHADOW_DROP_RATIO:14/142,SPINNER_SIZE_MULTIPLE:32/142,TITLE_SIZE_MULTIPLE:21/142,TITLE_TOP_MULTIPLE:161/142,ERROR_SIZE_MULTIPLE:16/142,ERROR_TOP_MULTIPLE:1.3+1/142,ASPECT_RATIO:204/262,BADGE_H_PADDING:10,BADGE_V_PADDING:3,BADGE_RIGHT_INSET:-10,BADGE_TOP_INSET:-4,DECOR_BLUR_DERIVATIVES:SC.browser.msie?[100,75,50,28,16]:SC.browser.mozilla?[100,75,50,28,16,8,24,2]:SC.browser.webkit?[100,75,50,28,16,8,24,2]:[100,75,50,28],DECOR_BLUR_MAX_DOWNSAMPLE_RATIOS:{100:SC.browser.safari&&!SC.browser.chrome&&window.devicePixelRatio>1?2:4},USE_TITLE_HIGHLIGHT:NO,USE_BORDER_ELEMENT:NO,IS_INTENDED_FOR_SIGNIFICANT_DOWNSAMPLING:NO,requiresDownsampleableDerivative:SC.browser.msie>=9&&(window.devicePixelRatio||1)===1,mustShow:YES,titleColor:{r:255,g:255,b:255},titleShadowSettings:{r:0,g:0,b:0,x:0,y:7,blur:15,opacityForIntensity:function(e){return(e+2)/3*.25}},isCurrentApp:NO,isControl:YES,acceptsFirstResponder
:function(){return this.get("ariaHidden")?NO:YES}.property("ariaHidden"),attributeBindings:["tabindex"],tabindex:function(){return this.get("acceptsFirstResponder")?"0":"-1"}.property("acceptsFirstResponder"),ariaHidden:function(){return this.get("springboardIsHidden")?YES:this.get("isDisabled")||this.get("isDecorativeDimmed")||this.get("isDimmed")?YES:NO}.property("isDisabled","isDecorativeDimmed","isDimmed","springboardIsHidden"),springboardIsHiddenBinding:"*springboardView.shouldHideForScreenReader",currentAppBinding:"CloudOS.appController.currentApp",isCurrentApp:function(){return this.get("app")===CloudOS.appController.get("currentApp")}.property("currentApp","app").cacheable(),makeTitleHighlightWhenCurrent:function(){if(!this.USE_TITLE_HIGHLIGHT)return;if(!this.get("isVisibleInWindow"))return;var e=this.get("layer");if(!e)return;var t=this.get("isCurrentApp"),n=this._titleHighlight;if(!n&&!t)return;n||(n=this._titleHighlight=document.createElement("div"),n.className="sb-title-highlight",n._in=NO),t?(n._in||e.appendChild(n),n._in=YES,this._titleHighlightWasSized||this.invokeLast("sizeTitleHighlightToTitleElement")):(n._in&&e.removeChild(n),n._in=NO)}.observes("isCurrentApp","isVisibleInWindow"),sizeTitleHighlightToTitleElement:function(){var e=this._titleText,t=this._title,n=this._titleHighlight;if(!t||!e||!n||!this.get("isVisibleInWindow"))return;this._titleHighlightWasSized=YES;var r=e.offsetWidth,i=e.offsetHeight,s=e.offsetTop+t.offsetTop,o=(this.get("size")||74)/2-r/2|0,u=10,a=5;n.style.left=o-u+"px",n.style.top=s-a+"px",n.style.height=i+2*a+"px",n.style.width=r+2*u+"px"
},_badgeMeasurementCache:{},sizeBadge:function(){this.invokeLast("_sizeBadge")}.observes("isVisibleInWindow","layer"),_sizeBadge:function(){var e=this.get("badgeCount"),t=CloudOS.get("isCloudOSLocaleRTLOriented");if(!this.get("isVisibleInWindow")||!e||!this._badgeRed||!this._badgeMask)return;var n=this._badgeInfoHash||(this._badgeInfoHash={}),r=this._badgeRed.style,i=this._badgeMask.style,s=this._badgeText,o=this._badge,u=this.BADGE_H_PADDING,a=this.BADGE_V_PADDING,f,l,c;n.count=e,n.countString=e+"",l=n.countString.length,f=this._badgeMeasurementCache[l];if(!f){c=s.offsetWidth;if(!c){this._badgeSizeFallbackTimer?this._badgeSizeFallbackTimer=null:this._badgeSizeFallbackTimer=this.invokeLater("_sizeBadge",200);return}f=this._badgeMeasurementCache[l]={},f.top=n.top=s.offsetTop-a,f.left=n.left=s.offsetLeft+(t?s.offsetWidth:0)-u,f.width=n.width=c+u*2,f.height=n.height=s.offsetHeight+a*2}else n.top=f.top,n.left=f.left,n.width=f.width,n.height=f.height;this._badgeSizeFallbackTimer&&this._badgeSizeFallbackTimer.invalidate(),this._badgeSizeFallbackTimer=null,n.height>n.width&&(n.left-=(n.height-n.width)/2|0,n.width=n.height),this._adjustBadgeInfo(n),r.top=i.top=n.top+"px",t?(r.right=i.right=n.left+"px",r.removeProperty("left"),i.removeProperty("left")):(r.left=i.left=n.left+"px",r.removeProperty("right"),i.removeProperty("right")),r.width=i.width=n.width+"px",r.height=i.height=n.height+"px";var h=o.style,p=this.BADGE_RIGHT_INSET+n.left+n.width+"px";t?(h.left=p,h.removeProperty("right")):(h.right=p,h.removeProperty("left")),h.top=this.BADGE_TOP_INSET+n.top+"px"},_adjustBadgeInfo:function(
e){SC.browser.mozilla&&e.top++,e.countString.length>1&&e.countString[0]!=="1"&&e.countString[e.countString.length-1]==="1"&&e.left--},init:function(){this.getPath("app.isDynamicallyLoaded")&&!this.mustShowRegardlessOfDynamicApp&&(this.mustShow=NO),arguments.callee.base.apply(this,arguments),this.wantsAcceleratedLayer=this.USE_TRANSFORM_SCALING,CW.notificationCenter.subscribeToNotification("relocalize",this,"relocalize")},USE_TRANSFORM_SCALING:!!SC.browser.chrome||!!SC.browser.mozilla,useExternalShadow:SC.browser.opera,mustHitTest:SC.browser.msie||SC.browser.opera,layout:{zIndex:15},classNames:"springboard-button-view".w(),ariaRole:"button",displayProperties:"titleColor titleShadowSettings isCurrentApp isDark size displayName isFocused x y isSpinning errorText isDarkTo app isUnclickable isShowingWarning isAnimatingWithParent iconElement titleIntensity isDecorativeDimmed isDecorativeDimmedOrUndimming badgeCount".w(),action:function(){var e=this.get("app"),t=CloudOS.statechart;if(!e)return;e.set("loadReason",CK.LOAD_REASON_USER_CLICK),CloudOS.appController.set("pendingApp",e),e.get("isPCSKeysDeletedLocked")?t.sendAction("showPCSDeletedMessage",e.get("displayName")):e.get("isHSALocked")?(CloudOS.authController.get("isPartiallyAuthenticated")&&CloudOS.appSwitcherController.hideAppSwitcher(),t.sendAction("showHSA",CloudOS.HSASourceEnum.USER_SELECTED_APP)):t.sendAction("userDidChooseApp")},size:142,x:0,y:0,isWaitingBinding:"*app.isWaiting",loadInBackgroundBinding:"*app.loadInBackground",displayNameBinding:"*app.appInfo.displayName",isFocused:NO,_lastIsFocused:NO,isActive:NO,appBadgeCountBinding
:"*app.badgeCount",badgeCount:function(){return this.get("isDecorativeDimmedOrUndimming")||this.get("isLocked")?0:this.get("appBadgeCount")}.property("isDecorativeDimmedOrUndimming","appBadgeCount","isLocked"),layoutBoundsCacher:function(){if(this._layoutBounds)return this._layoutBounds;var e=this.get("springboardView"),t=e.get("layoutBounds");return t||(e._decideButtonLocations(),t=e.get("layoutBounds")),this._layoutBounds=t,t},_defaultLayoutBounds:{top:0,centerY:1,bottom:2,left:0,centerX:1,right:2},animatedLayoutBoundsCacher:function(){if(this._animatedLayoutBounds)return this._animatedLayoutBounds;var e=this.get("springboardView"),t=e.get("animatedLayoutBounds");return t||(e._decideButtonLocations(),t=e.get("animatedLayoutBounds")),this._animatedLayoutBounds=t,t},app:null,hitTest:function(e){if(isNaN(e.clientX)||isNaN(e.clientY))return YES;if(!this.convertPointToView(e))return NO;var t=this._pt_.x,n=this._pt_.y,r=this.get("frame");return r?t>=0&&t<=r.width&&n>=0&&n<=r.height:NO},mouseDown:function(e){if(e.metaKey||e.button===2||e.which==3)return e.allowDefault(),NO;this.set("isDown",YES),this.mustHitTest?this.hitTest(e)&&this.set("isActive",YES):this.set("isActive",YES)},mouseUp:function(e){var t=this.get("isActive")&&!this.get("isUnclickable");this.set("isActive",NO),this.set("isDown",NO),this.set("ignoreVirtualCursor",YES);if(!t)return;this.action();if(e!=="keyboard"){var n=this.get("springboardView");n&&n.focusNone&&n.focusNone()}},mouseMoved:function(e){if(!this.mustHitTest)return;var t=this.hitTest(e);this._lastIsOver!==t&&(this.set("isOver",this._lastIsOver=t),t?this
.set("isActive",this.get("isDown")):this.set("isActive",NO))},mouseEntered:function(e){if(this.mustHitTest)return;this.get("isDown")&&this.set("isActive",YES),this.set("isOver",this._lastIsOver=YES)},mouseExited:function(){this.set("isActive",NO),this.set("isOver",this._lastIsOver=NO)},click:function(e){if(this.get("ignoreVirtualCursor"))return;this.mouseDown(e),this.mouseUp(e)},touchStart:function(e){return this.mouseEntered(e),this.mouseDown(e)},touchEnd:function(e){return this.mouseUp(e),this.mouseExited(e)},touchEntered:function(e){return this.mouseEntered(e)},touchExited:function(e){return this.mouseExited(e)},isDecorativeDimmedBinding:"*springboardView.isDecorativeDimmed",isSpinning:function(){return this.get("isWaiting")&&!this.get("loadInBackground")&&!this.get("isDecorativeDimmedOrUndimming")}.property("isWaiting","loadInBackground","isDecorativeDimmedOrUndimming"),isConventionallyDark:function(){return this.get("isActive")&&this.get("isDown")||this.get("isSpinning")}.property("isActive","isDown","isOver","isSpinning","isUnclickable").cacheable(),isFailedBinding:"*app.appInfo.isFailed",isDisabled:function(){var e=this.get("app");return e&&e.requiresMailAndIsMissing()?NO:this.getPath("app.isDisabled")}.property("app"),isDisabledObserver:function(){this.notifyPropertyChange("isDisabled")}.observes("*app.isDisabled"),isLockedBinding:"*app.appInfo.isLocked",isHSALockedBinding:"*app.appInfo.isHSALocked",isPCSKeysDeletedLockedBinding:"*app.appInfo.isPCSKeysDeletedLocked",isUnqualifiedBinding:"*app.appInfo.isUnqualified",isDimmed:function(){return this.get("isDecorativeDimmedOrUndimming"
)?NO:this.get("isUnqualified")}.property("isUnqualified","isDecorativeDimmedOrUndimming").cacheable(),isUnclickable:function(){return this.get("isDecorativeDimmedOrUndimming")?YES:this.get("isDimmed")?NO:this.get("isDisabled")}.property("isDisabled","isDimmed","isDecorativeDimmedOrUndimming"),isShowingWarning:function(){return this.get("isDecorativeDimmedOrUndimming")?NO:this.get("isDimmed")?NO:this.get("isDisabled")}.property("isDisabled","isDimmed","isDecorativeDimmedOrUndimming"),isDarkTo:function(){if(this.get("isDecorativeDimmedOrUndimming"))return 0;var e=this.get("isConventionallyDark"),t=this.get("isUnclickable"),n=this.get("isDimmed"),r;return!e&&!t&&!n&&(r=0),e&&!t&&!n&&(r=.28),!e&&t&&!n&&(r=.5),e&&t&&!n&&(r=.5),!e&&!t&&n&&(r=.5),e&&!t&&n&&(r=.7),!e&&t&&n&&(r=.5),e&&t&&n&&(r=.5),this.get("isLocked")&&(r=1-.58*(1-r)),r}.property("isConventionallyDark","isUnclickable","isDimmed","isDecorativeDimmedOrUndimming","isLocked"),isDecorativeUndimming:function(){return this.decorativeDimmingAnimationCount>0}.property("decorativeDimmingAnimationCount"),isDecorativeDimmedOrUndimming:function(){return this.get("isDecorativeDimmed")||this.get("isDecorativeUndimming")}.property("isDecorativeDimmed","isDecorativeUndimming").cacheable(),titleIntensity:function(){var e=this.get("isDimmed");return e?.25:1}.property("isDimmed"),_forceDisableChangeObserver:function(){this.invokeLast(function(){this.get("isDarkTo")===.5&&this.update()})}.observes("isDarkTo"),errorText:function(){return this.get("isUnclickable")?this.get("isDisabled")?this.getPath("app.isDisabledForMaintenance")?"Springboard.Icon.Maintenance"
.loc():"Springboard.Icon.Offline".loc():"":""}.property("isUnclickable","isDisabled","isFailed"),stopAnimation:function(){return CW.Anim.tellFinish(this._enterAnimation),CW.Animatability.stopAnimation.apply(this,arguments)},detectAppends:function(){if(this._lastParentView===(this._lastParentView=this.get("parentView")))return;this._hasArrivedAtCoordsSinceLastAppend=NO}.observes("parentView"),setCenter:function(e,t,n){this.beginPropertyChanges(),this._hasArrivedAtCoordsSinceLastAppend=YES;var r=this._layoutBounds||this.layoutBoundsCacher(),i=this._positionSizeAnimation;i&&!i.running&&(i=null),isNaN(e)||(i&&i.removeProperty("x"),this.set("x",(e-r.left)/(r.right-r.left))),isNaN(t)||(i&&i.removeProperty("y"),this.set("y",(t-r.top)/(r.bottom-r.top))),isNaN(n)||(i&&i.removeProperty("size"),this.set("size",n)),this.endPropertyChanges()},animateCenter:function(e,t,n){var r=this._hasArrivedAtCoordsSinceLastAppend;this._hasArrivedAtCoordsSinceLastAppend=YES;var i=this.springboardView.isOnscreen;if(!i||this.get("isAnimatingWithParent"))return this.setCenter(e,t,n);if(!r){this.setCenter(e,t,n),i&&(this._enterAnimation=this.animate({duration:700,tween:CW.Anim.tweens.make("compound",function(e){return Math.max(0,e*10/7-3/7)},CW.Anim.tweens.WEBKIT_EASE),scale:{from:0,to:this.transformedScaleForSize(n)},opacity:{from:0,to:1}},{onstop:function(){this.view._enterAnimation=null}}));return}var s=this._layoutBounds||this.layoutBoundsCacher(),o={};isNaN(e)||(o.x=(e-s.left)/s.width),isNaN(t)||(o.y=(t-s.top)/s.height),isNaN(n)||(o.size=n);if(o.x||o.y||o.size)this._positionSizeAnimation=this.animateProperties
(o,{speed:23,headStart:.002,inertia:8,ticked:4})},transformedScaleForSize:function(e){return this.USE_TRANSFORM_SCALING?e/142:1},getPxX:function(){var e=this._animatedLayoutBounds||this.animatedLayoutBoundsCacher(),t=this._layoutBounds||this.layoutBoundsCacher();return e.left.current+this.x*e.width.current*t.fullWidth},getPxY:function(){var e=this._animatedLayoutBounds||this.animatedLayoutBoundsCacher(),t=this._layoutBounds||this.layoutBoundsCacher();return e.top.current+this.y*e.height.current*t.fullHeight},fadersToKill:"mask focus arrow errorText decorBlur badge lockBadge".w(),finishAllAnimationExceptSpinner:function(){if(!this.get("isAnimatingWithParent"))return;this.finishAnimation();for(var e=0,t,n;t=this.fadersToKill[e];e++)n="_"+t+"Fader",CW.Anim.tellFinish(this[n]),this[n]=null}.observes("isAnimatingWithParent"),render:function(e){window["sb"+this.getPath("app.name").toLowerCase().substring(0,2)]=this,e.push('<div class="sb-spinner sb-el"><img class="sb-spinner-image sb-el" alt="" /></div><div class="sb-badge sb-el"><div class="text"></div><div class="red"></div><div class="mask"></div></div><div class="sb-focus sb-el"><div class="sb-focus-inner sb-focus-kid"></div><div class="sb-focus-outer sb-focus-kid"></div></div><div id="'+SC.guidFor(this)+'-label" class="sb-title sb-el"><span class="sb-title-text"></span><span class="sb-ax-text"></span></div>'+'<div class="sb-error-text sb-el"></div>'+'<img class="sb-arrow sb-el" alt="" />'+(this.USE_BORDER_ELEMENT?'<div class="sb-border sb-el"></div>':"")+(this.useExternalShadow?"":'<img class="sb-shadow sb-el" alt="" />'));var t=
window.location,n=t.search,r="/";n&&(r=""),e.attr("href","https://"+t.hostname+t.search+r+"#"+this.getPath("app.name"))},parentViewDidResize:function(){arguments.callee.base.apply(this,arguments),this.invokeLast(function(){this.update("reposition")})},handleMissingIconElement:function(){var e,t=this.get("layer");if(!t)return;var n=!this.get("iconElement")&&this.get("isReady")&&!this.get("isDecorativeDimmed");CW.Anim.tellFinish(this._missingElementFader),e=this._missingElement,n?(e||(e=this._missingElement=document.createElement("div"),e.style.cssText="position:absolute; z-index:11; left:0px; right:0px; top:0px; bottom:0px; border-radius:24%; background:white; opacity:0;"),this._missingElementFader=CW.Anim.Fader.create({element:e,to:1,duration:200}).start(),e.parentNode!==t&&e.parentNode&&e.parentNode.removeChild(e),e.parentNode===t||t.appendChild(e)):(e&&e.parentNode===t?this._missingElementFader=CW.Anim.Fader.create({element:e,to:0,duration:200,cleanup:function(){e.parentNode.removeChild(e)}.listens("stop")}).start():e&&e.parentNode&&e.parentNode.removeChild(e),this._missingElement=null)}.observes("layer","iconElement","isReady","isDecorativeDimmed"),darkenMissingIconElement:function(){if(!this._missingElement)return;var e=255-(this.get("isDarkTo")||0)*255;this._missingElement.style.backgroundColor=CW.Anim.encodeColor(e,e,e)}.observes("isDarkTo"),maintainDownsampleableDerivative:function(){if(!this.IS_INTENDED_FOR_SIGNIFICANT_DOWNSAMPLING||!this.requiresDownsampleableDerivative)return;var e=this.get("layer");if(!e)return;var t=this.get("iconElement"),n=this._iconCanvas||t,r=
this._downsampleableDerivative;r&&r._isForIconElement!==SC.guidFor(t)&&(t&&(t.style.visibility=""),r.parentNode&&r.parentNode.removeChild(r),r=this._downsampleableDerivative=null),t?(this._downsampleableDerivativeTimer&&this._downsampleableDerivativeTimer.invalidate(),this._downsampleableDerivativeTimer=this.invokeLater("ensurePresenceOfDownsampleableDerivative",Math.random()*15+15|0,r,t,n,e)):(r&&r.parentNode&&r.parentNode.removeChild(r),r=this._downsampleableDerivative=null,this._downsampleableDerivativeTimer&&this._downsampleableDerivativeTimer.invalidate())}.observes("layer","iconElement","size"),ensurePresenceOfDownsampleableDerivative:function(e,t,n,r){var i=142,s;if(!e){var o=new Date*1;e=this._downsampleableDerivative=document.createElement("canvas"),e._isForIconElement=SC.guidFor(t),e.className="downsampleable-derivative sb-icon sb-el",e.width=e.height=i,s=e.getContext("2d"),s.drawImage(n,0,0,i,i),CloudOS.canvasBoxBlur(e,1,1),s.globalAlpha=.5,s.drawImage(n,0,0,i,i),s.globalAlpha=1,o=new Date*1-o,SC.debug("Spent "+o+"ms creating new downsampleable derivative of "+this.getPath("app.name")+" icon.")}e.parentNode&&e.parentNode!==r&&e.parentNode.removeChild(e),e.parentNode||r.appendChild(e),e.style.left=e.style.top="0px",e.style.width=e.style.height=this.get("size")+"px",t.style.visibility="hidden",e.style.visibility="visible"},update:function(e){var t,n;e&&e.setClass?t=e:(n=e,t=this.renderContext(this.get("layer")).$());if(!this._layer)return;var r=this,i=this._layer,s=NO,o=this.get("isAnimatingWithParent"),u=this._decorBlurs?this._lastSeenDecorBlurCount!==(this._lastSeenDecorBlurCount=
this._decorBlurs.length):NO,a=NO,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I;this.$().attr("aria-labelledby",SC.guidFor(this)+"-label"),t.setClass("current-app",this.get("isCurrentApp")),k=this.get("iconElement"),L=this._lastIconElement,k&&k.parentNode!==i&&(s=YES,L&&L!==k&&L.parentNode&&L.parentNode.removeChild(L),L=this._lastIconElement=k,jQuery(k).addClass("sb-icon").addClass("sb-el"),k.parentNode||i.appendChild(k)),!k&&L&&L.parentNode&&L.parentNode.removeChild(L),this.useExternalShadow&&!this._isExternalShadowRemovalPermanent&&((g=this._externalShadow)||(g=new Image,this._externalShadow=g,g.className="sb-external-shadow",g.setAttribute("aria-hidden","true")),!g.parentNode&&i.parentNode&&i.parentNode.appendChild(g));if((c=this.didChangeFor("update","isDecorativeDimmed"))||s){N=this.get("app"),_=this.get("isDecorativeDimmed"),this._decDimAnimTrackingOptions||(this._decDimAnimTrackingOptions={owner:this,inc:function(){isNaN(this.owner.decorativeDimmingAnimationCount)&&(this.owner.decorativeDimmingAnimationCount=0),this.owner.incrementProperty("decorativeDimmingAnimationCount")}.listens("start"),dec:function(){this.owner.decorativeDimmingAnimationCount>0&&this.owner.decrementProperty("decorativeDimmingAnimationCount")}.listens("stop")}),c&&(this._titleFader=CW.Anim.Fader.create(CW.Anim.DisplayNoneAtZero,this._decDimAnimTrackingOptions,{element:this._title,to:1-_,duration:_?0:550}).start(),this._shadowFader=CW.Anim.Fader.create(CW.Anim.DisplayNoneAtZero,this._decDimAnimTrackingOptions,{element:this._shadow||this._externalShadow,to:1-_,duration:_?0:550}).start
());if(_&&!this._decorBlurs){this._createNextDecorBlur();if(this._decorBlurs){u=YES;for(var q=0;q<this.DECOR_BLUR_DERIVATIVES.length;q++)setTimeout(function(){r._createNextDecorBlur()},Math.random()*3e3+1700)}}_&&this._decorBlurs&&(CW.Anim.tellStop(this._decorBlurFader),k&&(k.style.display="none"),i.appendChild(this._decorBlurs[0]),this._decorBlurs[0].style.display="",this._decorBlurs[0].style.opacity=""),c&&!_&&this._decorBlurs&&k&&(this._decorBlurFader=this._oldDecorBlurFader=CW.Animation.create(this._decDimAnimTrackingOptions,{owner:this,blurs:this._decorBlurs,duration:550,avoidFadingBlurs:NO,init:function(){return this.avoidFadingBlurs&&(this.tween=CW.Anim.tweens.LINEAR),arguments.callee.base.apply(this,arguments)},onstart:function(){for(var e=0,t;t=this.blurs[e];e++)t.parentNode||i.appendChild(t)},update:function(){var e=this.current,t=this.blurs,n,r,i=t[0]._blurRadius,s=(1-e)*i,o,u,a;for(a=0;u=t[a];a++)if(u._blurRadius<s){r=u,n=t[a-1];break}r||(r=k,n=t[t.length-1]),this.avoidFadingBlurs||(!r.style.display||(r.style.display=""),!n.style.display||(n.style.display=""));for(a=0;u=t[a];a++)u!==r&&u!==n&&(u.style.display==="none"||(u.style.display="none"));n.style.zIndex==="10"||(n.style.zIndex="10"),r.style.zIndex==="11"||(r.style.zIndex="11"),o=(s-(n._blurRadius||0))/((r._blurRadius||0)-(n._blurRadius||0)),this.avoidFadingBlurs?(n.style.opacity===""||(n.style.opacity=""),r.style.opacity===""||(r.style.opacity=""),n.style.display=o>.5?"none":"",r.style.display=o>.5?"":"none"):(n.style.opacity=1-Math.pow(o,1.6),r.style.opacity=1-Math.pow(1-o,1.6))},onfinish:function(){for(var e=0
,t;t=this.blurs[e];e++)t.parentNode&&t.parentNode.removeChild(t);k.style.display="",k.style.zIndex="",k.style.opacity=""},onstop:function(){this.owner._decorBlurFader=null}}).start())}if(this.didChangeFor("update","isLocked")||this.didChangeFor("update","isDecorativeDimmedOrUndimming")){var R=this._lockBadge,U=this.get("isLocked")&&!this.get("isDecorativeDimmedOrUndimming"),z,W=NO;U&&(R||(R=this._lockBadge=document.createElement("div"),R.appendChild(z=this._lockImage=new Image),z.onload=function(){R._isLoaded=YES},z.src=this.getPath("app.lockBadgeAsset"),R.className="sb-lock-badge sb-el",R.style.opacity=0,i.appendChild(R)),W=YES),R&&(this._lockBadgeFader=CW.Anim.Fader.create(CW.Anim.DisplayNoneAtZero,{element:R,to:0+U,duration:o?0:300,shouldSkipFrame:function(){return!this.element._isLoaded}}).start())}if((A=this._lastIsDarkTo)!==(this._lastIsDarkTo=this.get("isDarkTo"))||s){var X=180;x=this.get("isDarkTo"),Math.abs((1-x)/(1-A)-.6)<1e-7&&(X=0),A===0&&x===.28&&(X=0),A===.5&&x===.7&&(X=0),o&&(X=0),CW.Anim.tellStop(this._maskFader),!!x&&!this._mask&&k&&(a=YES,this.createMaskElementFromIconElement()),this._mask&&(this._maskFader=CW.Anim.Fader.create(CW.Anim.DisplayNoneAtZero,{owner:this,element:this._mask,to:x,duration:X,renderBadgeOpacityAlso:function(){var e=this.owner._badgeMask;if(!e)return;CW.Anim.setOpacity(e,this.current)}.listens("frame")}).start())}f=this.didChangeFor("update","size"),l=this.didChangeFor("update","isSpinning");if(a||u||s||W||f||l){h=this.USE_TRANSFORM_SCALING?142:this.get("size");if(d=k&&k.style)d.width=d.height=Math.round(h)+"px";if(d=this._mask&&this.
_mask.style)d.width=d.height=Math.round(h)+"px";if(d=this._shadow&&this._shadow.style)d.width=d.height=Math.round(y=h*this.SHADOW_SIZE_MULTIPLE)+"px",d.left=Math.round(b=Math.floor((h-y)/2))+"px",d.top=Math.round(b+h*this.SHADOW_DROP_RATIO)+"px";(d=this._warningArrow.style).width=Math.round(h*this.ARROW_WIDTH_MULTIPLE)+"px",d.height=Math.round(h*this.ARROW_HEIGHT_MULTIPLE)+"px",d.left=Math.round(h*this.ARROW_LEFT_MULTIPLE)+"px",d.top=Math.round(h*this.ARROW_TOP_MULTIPLE)+"px",(d=this._lockBadge&&this._lockBadge.style)&&(v=this._lockImage&&this._lockImage.style)&&(d.width=v.width=Math.round(h*this.LOCK_WIDTH_MULTIPLE)+"px",d.height=v.height=Math.round(h*this.LOCK_HEIGHT_MULTIPLE)+"px",d.left=Math.round(h*this.LOCK_LEFT_MULTIPLE)+"px",d.top=Math.round(h*this.LOCK_TOP_MULTIPLE)+"px"),(d=this._title.style).width=Math.round(h+60)+"px",d.height=Math.ceil(1.3*this.TITLE_SIZE_MULTIPLE*h)+"px",d.top=Math.round(this.TITLE_TOP_MULTIPLE*h)+"px",d.fontSize=Math.round(this.TITLE_SIZE_MULTIPLE*h)+"px",(d=this._errorText.style).width=Math.round(h)+"px",d.height=Math.ceil(1.3*this.ERROR_SIZE_MULTIPLE*h)+"px",d.top=Math.round(this.ERROR_TOP_MULTIPLE*h)+"px",d.fontSize=Math.round(this.ERROR_SIZE_MULTIPLE*h)+"px";if(this._decorBlurs)for(P=0;H=this._decorBlurs[P];P++)(d=H.style).width=d.height=Math.ceil(H._finalSize*h/142)+"px",d.left=d.top=Math.round(h/2-Math.ceil(H._finalSize*h/142)/2)+"px";this.get("isSpinning")&&((d=this._spinner.style).width=d.height=(this._spinnerSize=w=Math.round(this.SPINNER_SIZE_MULTIPLE*h))+"px",d.left=d.top=Math.round(h-w)/2+"px",(d=this._spinnerImage.style).width=w+"px"
,d.height=w*(this._spinnerAssetFrameCount=this.getPath("app.spinnerAssetFrameCount"))+"px"),p=this.get("size")/142,this.USE_TRANSFORM_SCALING&&this.adjust("scale",p)}p||(p=this.get("size")/142),t.setClass("large-display-text",21*p>=20);if(n==="reposition"||f||this.didChangeFor("update","x","y")){var V=this.getPxY(),$=this.getPxX();!isNaN($)&&!isNaN(V)&&(this.adjust(m={top:Math.round(V-(T=Math.round((h=this.USE_TRANSFORM_SCALING?142:this.get("size"))/2))),left:Math.round($-T),width:Math.round(h),height:Math.round(h)}),this.useExternalShadow&&((d=this._externalShadow.style).width=d.height=(y=h*this.SHADOW_SIZE_MULTIPLE)+"px",d.left=(b=Math.floor((h-y)/2))+m.left+"px",d.top=b+h*this.SHADOW_DROP_RATIO+m.top+"px"))}this.didChangeFor("update","app")&&(N||(N=this.get("app")))&&(this._warningArrow.src=N.get("warningArrowAsset"),this._spinnerImage.src=N.get("spinnerAsset"),this._shadow&&(this._shadow.src=N.get("shadowAsset")),this._externalShadow&&(this._externalShadow.src=N.get("shadowAsset"))),this.didChangeFor("update","displayName")&&(C=this.get("displayName"))&&(this._titleText.innerHTML=C,this._titleHighlightWasSized=NO,this.invokeLast("sizeTitleHighlightToTitleElement"));if(this.didChangeFor("update","errorText")||n==="relocalization")this._errorText.innerHTML=this.get("errorText");this.didChangeFor("update","isFocused")&&this._lastIsFocused!==(this._lastIsFocused=this.get("isFocused"))&&this.$()[0].focus(),this.didChangeFor("update","isShowingWarning")&&this._lastisShowingWarning!==(this._lastisShowingWarning=this.get("isShowingWarning"))&&(this._arrowFader=CW.Anim.Fader.create
(CW.Anim.DisplayNoneAtZero,{element:this._warningArrow,to:0+(M=this.get("isShowingWarning")),duration:o?0:M?300:300}).start(),this._errorTextFader=CW.Anim.Fader.create(CW.Anim.DisplayNoneAtZero,{element:this._errorText,to:0+(M=this.get("isShowingWarning")),duration:o?0:M?300:300}).start());if(this.didChangeFor("update","titleIntensity","titleColor","titleShadowSettings")){var J=this.get("titleIntensity"),K=this.get("titleColor"),Q=this.get("titleShadowSettings");this._title.style.color="rgba("+K.r+","+K.g+","+K.b+","+J+")",SC.browser.isIE9OrLower||(this._title.style.textShadow=Q.x+"px "+Q.y+"px "+Q.blur+"px "+"rgba("+Q.r+","+Q.g+","+Q.b+","+(Q.opacityForIntensity?Q.opacityForIntensity(J):Q.opacity)+")")}if(this.didChangeFor("update","badgeCount")||n==="relocalization")j=this.get("badgeCount"),j&&(B=j>9999?"9999+":j,this._badgeText.innerHTML=B,F=j>1?"Badge.Count.Unit.Plural":"Badge.Count.Unit.Singular",this._screenReaderText.innerHTML=", "+B+" "+F.loc(),this.invokeLast("sizeBadge")),this._badgeFader=CW.Anim.Fader.create(CW.Anim.DisplayNoneAtZero,{element:this._badge,to:j?1:0,duration:c?600:300}).start();if(l||this.didChangeFor("update","isAnimatingWithParent"))(E=this.get("isSpinning"))&&!o?(this._spinnerAnim||(this._spinnerAnim=CW.Animation.create({view:this,signal:function(e){return Math.round(e*12)%12},speed:1,name:"spinnerAnim"+this.toString(),update:function(){if(this._lastTop===(this._lastTop=this.current))return;CW.SpinnerView.renderPosition(this.current,this.view._spinnerSize,this.view._spinnerAssetFrameCount,this.view._spinnerImage)},onstart:function(){this.view._spinner
.style.display="block",this.spinFader=CW.Fader.create({element:this.view._spinner,to:1,duration:0,name:"spinnerAnim"+this.toString()}).start()},fadeStop:function(){this.spinFader=CW.Fader.create({element:this.view._spinner,to:0,duration:500,owner:this,onfinish:function(){this.owner.stop()}}).start()},onstop:function(){this.view._spinner.style.display="none",this.spinFader&&this.spinFader.stop(),CW.Anim.setOpacity(this.view._spinner,0)}})),this._spinnerAnim.start()):this._spinnerAnim&&(!E&&!o&&this._spinnerAnim.fadeStop(),o&&this._spinnerAnim.stop());this._lastUpdateCompletion=CW.Anim.now-1},updateIfNotUpdatedLastFrame:function(e){var t=CW.Anim.frameTime;(isNaN(this._lastUpdateCompletion)||CW.Anim.now>this._lastUpdateCompletion+t)&&this.update(e)},_createNextDecorBlur:function(){if(this._decorBlurFader&&this._decorBlurs){var e=this;return}var t=this.DECOR_BLUR_DERIVATIVES[this._decorBlurs&&this._decorBlurs.length||0];if(!t)return;var n=this.generateBlurredIconDerivative(t,undefined);if(!n)return;var r=this._decorBlurs||(this._decorBlurs=[]);r.push(n),r.sort(this._sorterForDecreasingBlurRadius)},_sorterForDecreasingBlurRadius:function(e,t){return(t&&t._blurRadius||0)-(e&&e._blurRadius||0)},relocalize:function(){this.update("relocalization")},didCreateLayer:function(){if(!this.get("layer"))return;this._getPointers(),this._doInitialInlineCSS(),this.update()},_getPointers:function(){this._layer=this.get("layer"),this._spinner=this.$(".sb-spinner")[0],this._spinnerImage=this.$(".sb-spinner-image")[0],this._focus=this.$(".sb-focus")[0],this._warningArrow=this.$(".sb-arrow")[0],this
._errorText=this.$(".sb-error-text")[0],this._title=this.$(".sb-title")[0],this._titleText=this.$(".sb-title-text")[0],this._badge=this.$(".sb-badge")[0],this._badgeText=this.$(".sb-badge .text")[0],this._badgeMask=this.$(".sb-badge .mask")[0],this._badgeRed=this.$(".sb-badge .red")[0],this._screenReaderText=this.$(".sb-ax-text")[0],this._shadow=(this._shadow=this.$(".sb-shadow"))&&this._shadow[0]},_doInitialInlineCSS:function(){this._layer.style.overflow="visible",this._spinner.style.display="none";var e="focus spinner warningArrow errorText badge badgeMask".w();for(var t=0,n;n=this["_"+e[t]];t++)CW.Anim.setOpacity(n,0)},willRemoveFromParent:function(){this.removeExternalShadow()},removeExternalShadow:function(e){this._externalShadow&&this._externalShadow.parentNode&&this._externalShadow.parentNode.removeChild(this._externalShadow),e&&(this._isExternalShadowRemovalPermanent=YES)},getLayerPositionInWindow:function(){var e=this._layerPos||(this._layerPos_={}),t=this.get("frame");return e.x=t.x,e.y=t.y,e},convertPointToView:function(e,t){var n,r;if(!this.getLayerPositionInWindow())return;return typeof e=="object"&&t===undefined&&(typeof e.clientX=="number"?(t=e.clientY,e=e.clientX):(t=e.y,e=e.x)),(n=this._pt_||(this._pt_={})).x=e-(r=this._layerPos_).x,n.y=t-r.y,n},fancyRemoveFromParent:function(){this.removeExternalShadow(YES);if(SC.browser.msie)return this.removeFromParent();if(!this.getPath("springboardView.isReadyToShow"))return this.removeFromParent();if(this._fancyRemovalAnim)return;this._fancyRemovalAnim=this.animate({opacity:0,scale:0,duration:700},{pull:function(){this
.view._fancyRemovalAnim=null,this.view.removeFromParent(),this.view.adjust({opacity:1,scale:1})}.listens("stop")})},safeDrawImage:function(e){var t=arguments,n=t.length,r,i=this._drawImageFault=NO;if(n===4)try{e.drawImage(t[1],t[2],t[3])}catch(s){r=s}if(n===6)try{e.drawImage(t[1],t[2],t[3],t[4],t[5])}catch(s){r=s}if(n===10)try{e.drawImage(t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9])}catch(s){r=s}return r?(this._drawImageFault=i=r,SC.warn("DrawImage failed. Perhaps an image was incompletely loaded? Error text: "+r),NO):YES},createMaskElementFromIconElement:function(){var e=this.get("layer"),t=this.get("iconElement");if(!e||!t)return;var n=this._mask;n&&n.parentNode&&n.parentNode.removeChild(n),n=this._mask=this.generateMaskElement(),e.appendChild(n)},generateMaskElement:function(e){var t,n,r;e||(e=this.get("iconElement"));if(!e||e.tagName==="IMG"&&!e._complete)return this._generateFallbackMaskElement();var i=e.naturalWidth||e.width||142*(window.devicePixelRatio||1),s=e.naturalHeight||e.height||142*(window.devicePixelRatio||1),o="maskForButton"+SC.guidFor(this),u=CloudOS.SpringboardView._maskCache||(CloudOS.SpringboardView._maskCache={}),a=u[o]||(u[o]={});if(a.isReady){r=document.createElement("canvas"),r.width=i,r.height=s;if(!this.safeDrawImage(r.getContext("2d"),a.can,0,0))return this._generateFallbackMaskElement()}else{r=t=document.createElement("canvas"),t.width=i,t.height=s,n=t.getContext("2d"),n.fillStyle="black",n.fillRect(0,0,i,s),n.globalCompositeOperation="destination-in";if(!this.safeDrawImage(n,e,0,0,i,s))return this._generateFallbackMaskElement();a.can=t||n.canvas
,a.con=n,a.isReady=YES}return r.style.display="none",r.style.opacity=0,r.className="sb-mask sb-el",r},_generateFallbackMaskElement:function(){var e="";(window.devicePixelRatio||1)>1&&(e="");var t=new Image;return t.style.cssText="display:none; opacity:0;",t.src=e,t.className="sb-mask sb-el",t},generateBlurredIconDerivative:function(e,t){var n,r,i,s=new Date*1;t||(t=this.get("iconElement"));if(!t||t.tagName==="IMG"&&!t._complete)return null;e=Math.round(e||0);var o=e<=1?1:e<=6?2:e<=12?3:4,u=this.DECOR_BLUR_MAX_DOWNSAMPLE_RATIOS[e];u&&u<o&&(o=u),e=Math.round(e/o)*o;var a="blurredDerivativeForButton"+SC.guidFor(this)+"_at_"+e+"px",f=(this._blurredIconDerivatives||(this._blurredIconDerivatives={}))[a]||(this._blurredIconDerivatives[a]={}),l=(142+3*e)/o+4;l=Math.ceil(l/2)*2;var c=l*o,h=142/o,p=NO;return f.isReady?(p=YES,this.shouldKeepToImagesForDecorBlur?(i=new Image).src=f.dataURL:(i=document.createElement("canvas"),i.width=i.height=l,this.safeDrawImage(i.getContext("2d"),f.can,0,0))):(this.shouldKeepToImagesForDecorBlur?(i=new Image,n=document.createElement("canvas"),n.width=n.height=l,r=n.getContext("2d")):(i=n=document.createElement("canvas"),n.width=n.height=l,r=n.getContext("2d")),this.safeDrawImage(r,t,l/2-h/2,l/2-h/2,h,h),e&&CloudOS.canvasBoxBlur(n?n:r,Math.ceil(e/o)),f.isReady=YES,f.can=n||r.canvas,this.shouldKeepToImagesForDecorBlur&&(i.src=f.dataURL=n.toDataURL())),i.style.width=i.style.height=c+"px",i.style.position="absolute",i.setAttribute("aria-hidden","true"),i._blurRadius=e,i._finalSize=c,s=new Date*1-s,this._decorBlurLog("time = "+s+"ms, fromCache = "+p+", radius = "+
e+", downsample = "+o+", bitmapSize = "+l),i},_decorBlurLogMessages:{},_decorBlurLog:function(e){var t=this._decorBlurLogMessages,n=this.getPath("app.name");t=t[n]||(t[n]=[]),t.push(e)},_dumpDecorLog:function(){var e=this._decorBlurLogMessages,t,n="The following blur generations occurred:\n";for(var r in e){t=e[r],n+=r.toUpperCase()+"\n";for(var i=0;i<t.length;i++)n+="    "+t[i]+"\n"}SC.debug(n)},shouldKeepToImagesForDecorBlur:NO}),CloudOS.SpringboardButtonView.BUTTON_TYPES={},CloudOS.SpringboardButtonView.buttonTypeForAppManager=function(e){var t=e.get("appIconType")||"image",n=this.BUTTON_TYPES[t];return n||CW.fatalError("Could not find app icon type "+t,{type:n,buttonTypes:this.BUTTON_TYPES}),n},CloudOS.SpringboardImageButtonView=CloudOS.SpringboardButtonView.extend({isReady:NO,init:function(){arguments.callee.base.apply(this,arguments),this.invokeLast("prepareIcon")},appIconUrlBinding:".app.appIconUrl",appIconUrl2xBinding:".app.appIconUrl2x",icon:function(){var e=window.devicePixelRatio>1?this.get("appIconUrl2x"):this.get("appIconUrl"),t=URI(e);return t&&!t.domain()&&t.protocol()!=="data"?"https://"+window.location.hostname+e:e}.property("appIconUrl","appIconUrl2x").cacheable(),iconElement:null,iconDidLoad:function(){var e=this._iconAssetVessel;this.set("iconElement",e),e&&e.width&&this.set("isReady",YES)},iconDidErr:function(){this.set("isReady",YES)},prepareIcon:function(){var e=this.get("icon");if(this._lastIcon===(this._lastIcon=e)||!e)return;var t=this,n;n=this._iconAssetVessel=new Image,n._complete=NO,n._onload=function(){t._iconAssetVessel===this&&SC.run(function(
){t.iconDidLoad()})},n.onload=function(){this._complete=YES,this._onload()},n.onerror=function(){this._complete=NO,t._iconAssetVessel===this&&SC.run(function(){t.iconDidErr()})},setTimeout(function(){if(t.get("isReady"))return;t.set("isReady",YES)},4e3),n.src=e,n.alt=""}.observes("icon")}),CloudOS.SpringboardButtonView.BUTTON_TYPES.image=CloudOS.SpringboardImageButtonView,function(){var e=window.devicePixelRatio>1?2:1;CloudOS.SpringboardCalendarButtonView=CloudOS.SpringboardImageButtonView.extend({shouldUseStaticImage:!1,requiresDownsampleableDerivative:(SC.browser.chrome||SC.browser.mozilla)&&e===1||CloudOS.SpringboardImageButtonView.prototype.requiresDownsampleableDerivative,_appendCanvas:!SC.browser.webkit,appIconSize:function(){return 142*e}.property().cacheable(),appIconPadding:21,desiredIconTextWidth:function(){var e=this.get("appIconSize"),t=this.get("_appIconPaddingAdjustedForDPR");return e-t*2}.property("appIconSize","_appIconPaddingAdjustedForDPR").cacheable(),weekdayFontFamily:"SFNSText",monthdayFontFamily:"SFNSDisplay-Numbers",weekdayFontWeight:"300",monthdayFontWeight:"100",weekdayMaxFontSize:23,monthdayMaxFontSize:90,weekdayTextColor:"#FF3B30",monthdayTextColor:"#030303",distanceFromTopToDrawWeekday:36,distanceFromTopToDrawMonthday:88,init:function(){this.staticIcon="_Springboard.CalendarTileStatic.Asset".loc(),this.get("shouldUseStaticImage")&&(this.icon=this.staticIcon);var e=this;CW.fontDetector(this.get("monthdayFontFamily"),{success:function(){e._fontLoaded()},fail:function(){e._fontNotLoaded()},timeout:3e3,testString:"1518"}),arguments.callee.base.apply(this
,arguments);var t=CW.notificationCenter;t.subscribeToNotification("relocalize",this,"relocalize"),t.subscribeToNotification("redrawCalendarIconIfNecessary",this,"redrawCalendarIconIfNecessary"),t.subscribeToNotification("setCalendarIconDateForDebugging",this,"setCalendarIconDateForDebugging")},setCalendarIconDateForDebugging:function(e){this.customDateForDebugging||(this.customDateForDebugging=new Date),this.customDateForDebugging.setDate(e),this.redrawCalendarIconIfNecessary()},relocalize:function(){this.set("staticIcon","_Springboard.CalendarTileStatic.Asset".loc()),this.get("shouldUseStaticImage")&&this.set("icon",this.staticIcon),this.set("_isLocDifferentSinceLastDraw",!0)},isIconLoaded:!1,isMonthdayFontLoaded:!1,iconDidLoad:function(){this.set("isIconLoaded",!0),this.drawIconIfReady()},drawIconIfReady:function(){if(this.get("isMonthdayFontLoaded")&&this.get("isIconLoaded")){if(this.get("shouldUseStaticImage"))this._revertToStaticIcon();else{var e=this._iconAssetVessel,t,n,r,i=this.get("appIconSize");if(t=this._iconCanvas)t.width=t.height=1;t=this._iconCanvas=document.createElement("canvas"),n=this._iconContext=t.getContext("2d"),t.width=t.height=i,this._appendCanvas&&this.get("iconElement")!==t&&this.set("iconElement",t),this._paintIconAndScheduleUpdate()}this.set("isReady",YES),CW.notificationCenter.postNotification("calendarIconFinishedDrawing")}},redrawCalendarIconIfNecessary:function(){var e;if(!this._iconAssetVessel)return;if(this.get("shouldUseStaticImage")){this._revertToStaticIcon();return}!this.get("_isLocDifferentSinceLastDraw")&&!this.get("isDayDifferentSinceLastDraw"
)&&(this.set("isReady",YES),CW.notificationCenter.postNotification("calendarIconFinishedDrawing")),date=this.get("customDateForDebugging")||new Date;var t=date.getDay(),n;switch(t){case 0:n="Sunday";break;case 1:n="Monday";break;case 2:n="Tuesday";break;case 3:n="Wednesday";break;case 4:n="Thursday";break;case 5:n="Friday";break;case 6:n="Saturday"}var r=("CalendarIcon."+n).loc(),i=date.getDate(),s=this.get("_lastPaintedWeekday"),o=this.get("_lastPaintedMonthday");if(s===r&&o===i)this.set("isReady",YES),CW.notificationCenter.postNotification("calendarIconFinishedDrawing");else try{this._drawIcon(date,r,i)}catch(e){SC.warn(e),this._revertToStaticIcon()}}.observes("_isLocDifferentSinceLastDraw"),generateMaskElement:function(e){return arguments.callee.base.call(this,e||this._iconCanvas)},generateBlurredIconDerivative:function(e,t){return arguments.callee.base.call(this,e,t||this._iconCanvas)},_appIconPaddingAdjustedForDPR:function(){return this.get("appIconPadding")*e}.property("appIconPadding").cacheable(),_weekdayMaxFontSizeAdjustedForDPR:function(){return this.get("weekdayMaxFontSize")*e}.property("weekdayMaxFontSize").cacheable(),_monthdayMaxFontSizeAdjustedForDPR:function(){return this.get("monthdayMaxFontSize")*e}.property("monthdayMaxFontSize").cacheable(),_distanceFromTopToDrawWeekdayAdjustedForDPR:function(){return this.get("distanceFromTopToDrawWeekday")*e}.property("distanceFromTopToDrawWeekday").cacheable(),_distanceFromTopToDrawMonthdayAdjustedForDPR:function(){return this.get("distanceFromTopToDrawMonthday")*e}.property("distanceFromTopToDrawMonthday").cacheable()
,_isLocDifferentSinceLastDraw:!0,_isDayDifferentSinceLastDraw:function(){var e=new Date,t=e.getDay()==this.get("_lastPaintedZeroBasedWeekdayInteger"),n=e.getDate()==this.get("_lastPaintedMonthday"),r=e.getFullYear()==this.get("_lastPaintedYear");return!t||!n||!r}.property("_lastPaintedZeroBasedWeekdayInteger","_lastPaintedMonthday","_lastPaintedYear"),_lastPaintedWeekday:"",_lastPaintedZeroBasedWeekdayInteger:null,_lastPaintedMonthday:"",_lastPaintedYear:null,_fontLoaded:function(){this.set("isMonthdayFontLoaded",!0),this.drawIconIfReady()},_fontNotLoaded:function(){SC.warn("Unable to load monthday font for Calendar icon"),CloudOS.recordStat("CalendarIconUnableToLoad",{error:"Unable to load monthday font for Calendar icon",appName:"CloudOS",isFatal:!1}),this.set("shouldUseStaticImage",!0),this.set("isMonthdayFontLoaded",!0),this.drawIconIfReady()},_paintIconAndScheduleUpdate:function(){this.redrawCalendarIconIfNecessary();var e=this.customDateForDebugging||new Date*1,t=(new Date).getTimezoneOffset()*6e4,n=Math.ceil((e-t)/864e5)*864e5-(e-t),r=this;this._daySwitchTimer&&this._daySwitchTimer.invalidate(),this._daySwitchTimer=SC.Timer.schedule({action:function(){r._paintIconAndScheduleUpdate()},interval:n+1,repeats:NO})},_revertToStaticIcon:function(){if(this.get("isIconLoaded")){var e=new Image;e.src=this.get("staticIcon"),e._complete=YES,this.set("iconElement",e),this._iconCanvas&&this._iconCanvas.parentNode&&this._iconCanvas.parentNode.removeChild(this._iconCanvas),CW.notificationCenter.postNotification("calendarIconFinishedDrawing")}},_drawIcon:function(e,t,n){CW.notificationCenter
.postNotification("calendarIconWillRedraw");var r,i=this._iconAssetVessel,s=this._iconCanvas,o=this._iconContext;if(!i._complete||!i.width||!i.height||!s||!o)throw r="Calendar background is not downloaded. Reverting to static image.",CloudOS.recordStat("CalendarIconUnableToLoad",{error:"Unable to download background image for Calendar icon",appName:"CloudOS",isFatal:!1}),r;s.width=0+s.width,this._drawBase(),this._drawWeekday(t),this._drawMonthday(n);if(!this._appendCanvas){var u=this.get("iconElement");u||(u=new Image,u.owner=this,u.onload=function(){this.owner.set("iconElement",this)}),u.src=s.toDataURL()}this.set("_isLocDifferentSinceLastDraw",!1),this.set("_isDayDifferentSinceLastDraw",!1),this.set("_lastPaintedZeroBasedWeekdayInteger",e.getDay()),this.set("_lastPaintedWeekday",t),this.set("_lastPaintedMonthday",n),this.set("_lastPaintedYear",e.getFullYear())},_drawBase:function(){var e=0,t=0,n=this.get("appIconSize"),r=n;this._iconContext.drawImage(this._iconAssetVessel,e,t,n,r,0,0,n,r)},_drawWeekday:function(t){var n=this.get("appIconSize"),r=this.get("_distanceFromTopToDrawWeekdayAdjustedForDPR"),i=this.get("desiredIconTextWidth"),s=this.get("weekdayFontFamily"),o=this.get("weekdayFontWeight"),u=this.get("_weekdayMaxFontSizeAdjustedForDPR"),a=this._iconContext,f=u;a.font=o+" "+f+"px "+s;var l=a.measureText(t).width;if(l===0)throw error="Width of weekday string was 0, reverting to static icon",CloudOS.recordStat("CalendarIconUnableToLoad",{error:"Calendar icon weekday string was too short.",appName:"CloudOS",isFatal:!1}),error;while(l>=i)f-=1,a.font=o+" "+f+"px "+s,l=a.
measureText(t).width;if(f<5*e)throw error="Weekday string is too long, reverting to static icon",CloudOS.recordStat("CalendarIconUnableToLoad",{error:"Calendar icon weekday string was too long.",appName:"CloudOS",isFatal:!1}),error;a.textAlign="center",a.fillStyle=this.get("weekdayTextColor"),a.fillText(t,n/2,r)},_drawMonthday:function(t){var n=this.get("appIconSize"),r=this.get("_distanceFromTopToDrawMonthdayAdjustedForDPR"),i=this.get("desiredIconTextWidth"),s=this.get("monthdayFontFamily"),o=this.get("monthdayFontWeight"),u=this.get("_monthdayMaxFontSizeAdjustedForDPR"),a=this._iconContext,f=u;a.font=o+" "+f+"px "+s;var l=a.measureText(t).width;if(l===0)throw error="Width of day of the month was 0, reverting to static icon",CloudOS.recordStat("CalendarIconUnableToLoad",{error:"Calendar icon monthday string was too short.",appName:"CloudOS",isFatal:!1}),error;while(l>=i)f-=1,a.font=o+" "+f+"px "+s,l=a.measureText(t).width;if(f<5*e)throw error="Monthday string is too long, reverting to static icon",CloudOS.recordStat("CalendarIconUnableToLoad",{error:"Calendar icon monthday string was too long.",appName:"CloudOS",isFatal:!1}),error;a.textAlign="center",a.textBaseline="middle",a.fillStyle=this.get("monthdayTextColor"),a.fillText(t,n/2,r)}}),CloudOS.setCalendarIconDateForDebugging=function(e){CW.notificationCenter.postNotification("setCalendarIconDateForDebugging",e)},CloudOS.SpringboardButtonView.BUTTON_TYPES.calendar=CloudOS.SpringboardCalendarButtonView}(),CloudOS.SpringboardHomeButtonView=CloudOS.SpringboardImageButtonView.extend({action:function(){var e=this.get("paneHideDuration"
);this.set("paneHideDuration",200),CloudOS.statechart.sendAction("userDidBeginAnimatingHome"),CloudOS.appSwitcherController.hideAppSwitcher(),this.set("paneHideDuration",e)},isShowingWarning:NO,isDimmed:NO,isUnclickable:NO}),CloudOS.SpringboardButtonView.BUTTON_TYPES.home=CloudOS.SpringboardHomeButtonView,CloudOS.iOSNotificationForSpringboard=CW.iOSNotification.extend({parentElement:function(){return CloudOS.getPath("mainPage.mainPane.springboardView.layer")}.property(),minimumSideClearanceBinding:SC.Binding.transform(function(e){return e-29}).from("CloudOS.workspaceController.accountSignoutHelpProtrusion")});